{"version":3,"file":"5a0bd497-visualizer.js","sources":["../../../../node_modules/lodash-es/toFinite.js","../../../../node_modules/lodash-es/_isIterateeCall.js","../../../../node_modules/lodash-es/_baseRange.js","../../../../node_modules/lodash-es/_createRange.js","../../../../node_modules/lodash-es/range.js","../../../../src/utils/visualizer.tsx"],"sourcesContent":["import toNumber from './toNumber.js';\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nexport default toFinite;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\nexport default baseRange;\n","import baseRange from './_baseRange.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport toFinite from './toFinite.js';\n\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\nfunction createRange(fromRight) {\n  return function(start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    }\n    // Ensure the sign of `-0` is preserved.\n    start = toFinite(start);\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n    step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nexport default createRange;\n","import createRange from './_createRange.js';\n\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\nvar range = createRange();\n\nexport default range;\n","\"use client\";\n\nimport {\n  type CSSProperties,\n  Fragment,\n  type ReactNode,\n  createContext,\n  useCallback,\n  useContext,\n  useEffect,\n  useId,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\n\nimport clsx from \"clsx\";\n\ntype BoundingBox = {\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n};\n\ntype ContextProps = {\n  gravity: \"top\" | \"bottom\";\n  scale: number;\n  setBoundingBox: (id: string, box: BoundingBox) => void;\n};\n\nconst VisualizerContext = createContext<ContextProps>({\n  gravity: \"top\",\n  scale: 1,\n  setBoundingBox: () => {},\n});\n\ntype CanvasProps = {\n  gravity?: \"top\" | \"bottom\";\n  scale?: number;\n  children: ReactNode;\n};\n\nexport function Canvas({ gravity = \"top\", scale = 1, children }: CanvasProps) {\n  const [objects, setObjects] = useState<Record<string, BoundingBox>>({});\n\n  const setBoundingBox = useCallback((id: string, box: BoundingBox) => {\n    setObjects((prev) => ({ ...prev, [id]: box }));\n  }, []);\n\n  const size = useMemo(() => {\n    let wMin = 0;\n    let wMax = 0;\n    let hMin = 0;\n    let hMax = 0;\n    for (const { x, y, width, height } of Object.values(objects)) {\n      wMin = Math.min(wMin, x);\n      wMax = Math.max(wMax, x + width);\n      hMin = Math.min(hMin, y);\n      hMax = Math.max(hMax, y + height);\n    }\n\n    if (gravity === \"bottom\") {\n      [hMin, hMax] = [-hMax, -hMin];\n    }\n\n    return { wMin, wMax, hMin, hMax };\n  }, [objects, gravity]);\n\n  return (\n    <VisualizerContext.Provider value={{ gravity, scale, setBoundingBox }}>\n      <div className=\"m-8\" style={{ width: size.wMax - size.wMin, height: size.hMax - size.hMin }}>\n        <div\n          className=\"relative\"\n          style={{ transform: `translate(${-size.wMin}px, ${-size.hMin}px)` }}>\n          {children}\n        </div>\n      </div>\n    </VisualizerContext.Provider>\n  );\n}\n\ntype SpriteProps = {\n  src: { src: string; width: string; height: string };\n  alt: string;\n  x?: number;\n  y?: number;\n  rotation?: number;\n  scaleX?: number;\n  scaleY?: number;\n  follow?: boolean;\n  className?: string;\n};\n\nexport function Sprite({\n  src,\n  alt,\n  x = 0,\n  y = 0,\n  rotation = 0,\n  scaleX = 1,\n  scaleY = 1,\n  follow,\n  className,\n}: SpriteProps) {\n  const id = useId();\n\n  const ref = useRef<HTMLImageElement>(null);\n  const { gravity, scale, setBoundingBox } = useContext(VisualizerContext);\n  useEffect(() => {\n    setBoundingBox(id, { x: x * scale, width: +src.width, y: y * scale, height: +src.height });\n    return () => setBoundingBox(id, { x: 0, width: 0, y: 0, height: 0 });\n  }, [x, y, src, scale, id, setBoundingBox]);\n\n  const pos = useRef({ x, y, changed: false });\n  useEffect(() => {\n    if (x !== pos.current.x || y !== pos.current.y) {\n      pos.current = { x, y, changed: true };\n    }\n\n    if (!pos.current.changed || !follow) return;\n    const id = setTimeout(() => {\n      ref.current?.scrollIntoView({\n        behavior: \"smooth\",\n        block: \"nearest\",\n        inline: \"center\",\n      });\n    }, 160);\n    return () => clearTimeout(id);\n  }, [follow, x, y]);\n\n  return (\n    <img\n      ref={ref}\n      {...src}\n      alt={alt}\n      className={clsx(\"absolute transition-all transform\", className)}\n      style={\n        {\n          [gravity]: `${y * scale}px`,\n          left: `${x * scale}px`,\n          \"--tw-rotate\": `${rotation}turn`,\n          \"--tw-scale-x\": scaleX,\n          \"--tw-scale-y\": scaleY,\n        } as CSSProperties\n      }\n    />\n  );\n}\n\ntype RectangleProps = {\n  color?: string;\n  borderColor?: string;\n  height: number;\n  width: number;\n  x?: number;\n  y?: number;\n  rotation?: number;\n  className?: string;\n  style?: CSSProperties;\n  children?: ReactNode;\n};\n\nexport function Rectangle({\n  color = \"white\",\n  borderColor = \"black\",\n  height,\n  width,\n  x = 0,\n  y = 0,\n  rotation = 0,\n  className = \"\",\n  children,\n}: RectangleProps) {\n  const id = useId();\n  const { gravity, scale, setBoundingBox } = useContext(VisualizerContext);\n\n  useEffect(() => {\n    setBoundingBox(id, {\n      x: x * scale,\n      width: width * scale,\n      y: y * scale,\n      height: height * scale,\n    });\n    return () => setBoundingBox(id, { x: 0, width: 0, y: 0, height: 0 });\n  }, [x, y, width, height, scale, id, setBoundingBox]);\n\n  return (\n    <div\n      style={\n        {\n          backgroundColor: color,\n          border: `2px solid ${borderColor}`,\n          height: `${height * scale}px`,\n          width: `${width * scale}px`,\n          [gravity]: `${y * scale}px`,\n          left: `${x * scale}px`,\n          \"--tw-rotate\": `${rotation}turn`,\n        } as CSSProperties\n      }\n      className={clsx(\"absolute transition-all transform\", className)}>\n      {children}\n    </div>\n  );\n}\n\nexport function Variables({ variables }: { variables: Record<string, any> }) {\n  return (\n    <div className=\"m-4 grid max-w-sm grid-cols-2 gap-y-2 text-slate-950 *:bg-orange-400 *:px-4 *:py-1.5\">\n      {Object.entries(variables).map(([name, value]) => (\n        <Fragment key={name}>\n          <div className=\"rounded-l-2xl\">{name}</div>\n          <div className=\"rounded-r-2xl\">\n            <div className=\"rounded-lg bg-white px-2\">{Number.isFinite(value) ? value : \"-\"}</div>\n          </div>\n        </Fragment>\n      ))}\n    </div>\n  );\n}\n"],"names":["INFINITY","MAX_INTEGER","toFinite","value","toNumber","sign","isIterateeCall","index","object","isObject","type","isArrayLike","isIndex","eq","nativeCeil","nativeMax","baseRange","start","end","step","fromRight","length","result","createRange","range","VisualizerContext","createContext","Canvas","gravity","scale","children","objects","setObjects","useState","setBoundingBox","useCallback","id","box","prev","size","useMemo","wMin","wMax","hMin","hMax","x","y","width","height","jsx","Sprite","src","alt","rotation","scaleX","scaleY","follow","className","useId","ref","useRef","useContext","useEffect","pos","clsx","Rectangle","color","borderColor","Variables","variables","name","Fragment"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4]}