/*! For licenses information, see LICENSES.txt */
var Un=Object.defineProperty;var Ln=(a,o,d)=>o in a?Un(a,o,{enumerable:!0,configurable:!0,writable:!0,value:d}):a[o]=d;var kr=(a,o,d)=>(Ln(a,typeof o!="symbol"?o+"":o,d),d);import{i as isSymbol,b as baseGetTag,r as root,a as isObjectLike,f as freeGlobal,c as isArray,t as toString,S as Symbol$1,j as jsxRuntimeExports}from"./toString-BpEX5tmT.js";import{r as reactExports,a as c}from"./react-dom-DWilhIVE.js";import{_ as __vitePreload}from"./preload-helper-B_KhYgH7.js";import{g as getDefaultExportFromCjs,c as commonjsGlobal}from"./commonjs-helper-3Jsk8tIi.js";import{Z as ZodError,z as z$2}from"./zod-CXY4Xi5W.js";import{k as katex}from"./katex-DTctDNEF.js";var reWhitespace=/\s/;function trimmedEndIndex(a){for(var o=a.length;o--&&reWhitespace.test(a.charAt(o)););return o}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject(a){var o=typeof a;return a!=null&&(o=="object"||o=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject(a)){var o=typeof a.valueOf=="function"?a.valueOf():a;a=isObject(o)?o+"":o}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var d=reIsBinary.test(a);return d||reIsOctal.test(a)?freeParseInt(a.slice(2),d?2:8):reIsBadHex.test(a)?NAN:+a}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(a){if(!a)return a===0?a:0;if(a=toNumber(a),a===INFINITY$1||a===-INFINITY$1){var o=a<0?-1:1;return o*MAX_INTEGER}return a===a?a:0}function identity(a){return a}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(a){if(!isObject(a))return!1;var o=baseGetTag(a);return o==funcTag$1||o==genTag||o==asyncTag||o==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(a){if(a!=null){try{return funcToString$1.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject(a)||isMasked(a))return!1;var o=isFunction$1(a)?reIsNative:reIsHostCtor;return o.test(toSource(a))}function getValue(a,o){return a==null?void 0:a[o]}function getNative(a,o){var d=getValue(a,o);return baseIsNative(d)?d:void 0}var WeakMap$1=getNative(root,"WeakMap");function apply(a,o,d){switch(d.length){case 0:return a.call(o);case 1:return a.call(o,d[0]);case 2:return a.call(o,d[0],d[1]);case 3:return a.call(o,d[0],d[1],d[2])}return a.apply(o,d)}function noop$1(){}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var o=0,d=0;return function(){var g=nativeNow(),S=HOT_SPAN-(g-d);if(d=g,S>0){if(++o>=HOT_COUNT)return arguments[0]}else o=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),baseSetToString=defineProperty?function(a,o){return defineProperty(a,"toString",{configurable:!0,enumerable:!1,value:constant(o),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(a,o){var d=typeof a;return o=o??MAX_SAFE_INTEGER$1,!!o&&(d=="number"||d!="symbol"&&reIsUint.test(a))&&a>-1&&a%1==0&&a<o}function eq(a,o){return a===o||a!==a&&o!==o}var nativeMax$1=Math.max;function overRest(a,o,d){return o=nativeMax$1(o===void 0?a.length-1:o,0),function(){for(var g=arguments,S=-1,x=nativeMax$1(g.length-o,0),I=Array(x);++S<x;)I[S]=g[o+S];S=-1;for(var $=Array(o+1);++S<o;)$[S]=g[S];return $[o]=d(I),apply(a,this,$)}}function baseRest(a,o){return setToString(overRest(a,o,identity),a+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isArrayLike(a){return a!=null&&isLength(a.length)&&!isFunction$1(a)}function isIterateeCall(a,o,d){if(!isObject(d))return!1;var g=typeof o;return(g=="number"?isArrayLike(d)&&isIndex(o,d.length):g=="string"&&o in d)?eq(d[o],a):!1}var objectProto$8=Object.prototype;function isPrototype(a){var o=a&&a.constructor,d=typeof o=="function"&&o.prototype||objectProto$8;return a===d}function baseTimes(a,o){for(var d=-1,g=Array(a);++d<a;)g[d]=o(d);return g}var argsTag$2="[object Arguments]";function baseIsArguments(a){return isObjectLike(a)&&baseGetTag(a)==argsTag$2}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike(a)&&hasOwnProperty$6.call(a,"callee")&&!propertyIsEnumerable$1.call(a,"callee")};function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(a){return isObjectLike(a)&&isLength(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(o){return a(o)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var a=freeModule&&freeModule.require&&freeModule.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function arrayLikeKeys(a,o){var d=isArray(a),g=!d&&isArguments(a),S=!d&&!g&&isBuffer(a),x=!d&&!g&&!S&&isTypedArray(a),I=d||g||S||x,$=I?baseTimes(a.length,String):[],F=$.length;for(var f in a)(o||hasOwnProperty$5.call(a,f))&&!(I&&(f=="length"||S&&(f=="offset"||f=="parent")||x&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||isIndex(f,F)))&&$.push(f);return $}function overArg(a,o){return function(d){return a(o(d))}}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeys(a){if(!isPrototype(a))return nativeKeys(a);var o=[];for(var d in Object(a))hasOwnProperty$4.call(a,d)&&d!="constructor"&&o.push(d);return o}function keys(a){return isArrayLike(a)?arrayLikeKeys(a):baseKeys(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,o){if(isArray(a))return!1;var d=typeof a;return d=="number"||d=="symbol"||d=="boolean"||a==null||isSymbol(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||o!=null&&a in Object(o)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(a){var o=this.has(a)&&delete this.__data__[a];return this.size-=o?1:0,o}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(a){var o=this.__data__;if(nativeCreate){var d=o[a];return d===HASH_UNDEFINED$2?void 0:d}return hasOwnProperty$3.call(o,a)?o[a]:void 0}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas(a){var o=this.__data__;return nativeCreate?o[a]!==void 0:hasOwnProperty$2.call(o,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,o){var d=this.__data__;return this.size+=this.has(a)?0:1,d[a]=nativeCreate&&o===void 0?HASH_UNDEFINED$1:o,this}function Hash$1(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,o){for(var d=a.length;d--;)if(eq(a[d][0],o))return d;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(a){var o=this.__data__,d=assocIndexOf(o,a);if(d<0)return!1;var g=o.length-1;return d==g?o.pop():splice.call(o,d,1),--this.size,!0}function listCacheGet(a){var o=this.__data__,d=assocIndexOf(o,a);return d<0?void 0:o[d][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,o){var d=this.__data__,g=assocIndexOf(d,a);return g<0?(++this.size,d.push([a,o])):d[g][1]=o,this}function ListCache(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash$1,map:new(Map$1||ListCache),string:new Hash$1}}function isKeyable(a){var o=typeof a;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?a!=="__proto__":a===null}function getMapData(a,o){var d=a.__data__;return isKeyable(o)?d[typeof o=="string"?"string":"hash"]:d.map}function mapCacheDelete(a){var o=getMapData(this,a).delete(a);return this.size-=o?1:0,o}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,o){var d=getMapData(this,a),g=d.size;return d.set(a,o),this.size+=d.size==g?0:1,this}function MapCache(a){var o=-1,d=a==null?0:a.length;for(this.clear();++o<d;){var g=a[o];this.set(g[0],g[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(a,o){if(typeof a!="function"||o!=null&&typeof o!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var d=function(){var g=arguments,S=o?o.apply(this,g):g[0],x=d.cache;if(x.has(S))return x.get(S);var I=a.apply(this,g);return d.cache=x.set(S,I)||x,I};return d.cache=new(memoize.Cache||MapCache),d}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var o=memoize(a,function(g){return d.size===MAX_MEMOIZE_SIZE&&d.clear(),g}),d=o.cache;return o}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(a){var o=[];return a.charCodeAt(0)===46&&o.push(""),a.replace(rePropName,function(d,g,S,x){o.push(S?x.replace(reEscapeChar,"$1"):g||d)}),o});function castPath(a,o){return isArray(a)?a:isKey(a,o)?[a]:stringToPath(toString(a))}var INFINITY=1/0;function toKey(a){if(typeof a=="string"||isSymbol(a))return a;var o=a+"";return o=="0"&&1/a==-INFINITY?"-0":o}function baseGet(a,o){o=castPath(o,a);for(var d=0,g=o.length;a!=null&&d<g;)a=a[toKey(o[d++])];return d&&d==g?a:void 0}function get(a,o,d){var g=a==null?void 0:baseGet(a,o);return g===void 0?d:g}function arrayPush(a,o){for(var d=-1,g=o.length,S=a.length;++d<g;)a[S+d]=o[d];return a}function baseClamp(a,o,d){return a===a&&(d!==void 0&&(a=a<=d?a:d),o!==void 0&&(a=a>=o?a:o)),a}function clamp(a,o,d){return d===void 0&&(d=o,o=void 0),d!==void 0&&(d=toNumber(d),d=d===d?d:0),o!==void 0&&(o=toNumber(o),o=o===o?o:0),baseClamp(toNumber(a),o,d)}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var o=this.__data__,d=o.delete(a);return this.size=o.size,d}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,o){var d=this.__data__;if(d instanceof ListCache){var g=d.__data__;if(!Map$1||g.length<LARGE_ARRAY_SIZE-1)return g.push([a,o]),this.size=++d.size,this;d=this.__data__=new MapCache(g)}return d.set(a,o),this.size=d.size,this}function Stack(a){var o=this.__data__=new ListCache(a);this.size=o.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(a,o){for(var d=-1,g=a==null?0:a.length,S=0,x=[];++d<g;){var I=a[d];o(I,d,a)&&(x[S++]=I)}return x}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols(a),function(o){return propertyIsEnumerable.call(a,o)}))}:stubArray;const getSymbols$1=getSymbols;function baseGetAllKeys(a,o,d){var g=o(a);return isArray(a)?g:arrayPush(g,d(a))}function getAllKeys(a){return baseGetAllKeys(a,keys,getSymbols$1)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$1||Map$1&&getTag(new Map$1)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag)&&(getTag=function(a){var o=baseGetTag(a),d=o==objectTag$1?a.constructor:void 0,g=d?toSource(d):"";if(g)switch(g){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return o});const getTag$1=getTag;var Uint8Array$1=root.Uint8Array;const Uint8Array$2=Uint8Array$1;var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var o=-1,d=a==null?0:a.length;for(this.__data__=new MapCache;++o<d;)this.add(a[o])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(a,o){for(var d=-1,g=a==null?0:a.length;++d<g;)if(o(a[d],d,a))return!0;return!1}function cacheHas(a,o){return a.has(o)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,o,d,g,S,x){var I=d&COMPARE_PARTIAL_FLAG$5,$=a.length,F=o.length;if($!=F&&!(I&&F>$))return!1;var f=x.get(a),s=x.get(o);if(f&&s)return f==o&&s==a;var i=-1,y=!0,_=d&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(x.set(a,o),x.set(o,a);++i<$;){var R=a[i],N=o[i];if(g)var b=I?g(N,R,i,o,a,x):g(R,N,i,a,o,x);if(b!==void 0){if(b)continue;y=!1;break}if(_){if(!arraySome(o,function(C,j){if(!cacheHas(_,j)&&(R===C||S(R,C,d,g,x)))return _.push(j)})){y=!1;break}}else if(!(R===N||S(R,N,d,g,x))){y=!1;break}}return x.delete(a),x.delete(o),y}function mapToArray(a){var o=-1,d=Array(a.size);return a.forEach(function(g,S){d[++o]=[S,g]}),d}function setToArray(a){var o=-1,d=Array(a.size);return a.forEach(function(g){d[++o]=g}),d}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,o,d,g,S,x,I){switch(d){case dataViewTag:if(a.byteLength!=o.byteLength||a.byteOffset!=o.byteOffset)return!1;a=a.buffer,o=o.buffer;case arrayBufferTag:return!(a.byteLength!=o.byteLength||!x(new Uint8Array$2(a),new Uint8Array$2(o)));case boolTag:case dateTag:case numberTag:return eq(+a,+o);case errorTag:return a.name==o.name&&a.message==o.message;case regexpTag:case stringTag:return a==o+"";case mapTag:var $=mapToArray;case setTag:var F=g&COMPARE_PARTIAL_FLAG$4;if($||($=setToArray),a.size!=o.size&&!F)return!1;var f=I.get(a);if(f)return f==o;g|=COMPARE_UNORDERED_FLAG$2,I.set(a,o);var s=equalArrays($(a),$(o),g,S,x,I);return I.delete(a),s;case symbolTag:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(o)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(a,o,d,g,S,x){var I=d&COMPARE_PARTIAL_FLAG$3,$=getAllKeys(a),F=$.length,f=getAllKeys(o),s=f.length;if(F!=s&&!I)return!1;for(var i=F;i--;){var y=$[i];if(!(I?y in o:hasOwnProperty$1.call(o,y)))return!1}var _=x.get(a),R=x.get(o);if(_&&R)return _==o&&R==a;var N=!0;x.set(a,o),x.set(o,a);for(var b=I;++i<F;){y=$[i];var C=a[y],j=o[y];if(g)var H=I?g(j,C,y,o,a,x):g(C,j,y,a,o,x);if(!(H===void 0?C===j||S(C,j,d,g,x):H)){N=!1;break}b||(b=y=="constructor")}if(N&&!b){var J=a.constructor,X=o.constructor;J!=X&&"constructor"in a&&"constructor"in o&&!(typeof J=="function"&&J instanceof J&&typeof X=="function"&&X instanceof X)&&(N=!1)}return x.delete(a),x.delete(o),N}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(a,o,d,g,S,x){var I=isArray(a),$=isArray(o),F=I?arrayTag:getTag$1(a),f=$?arrayTag:getTag$1(o);F=F==argsTag?objectTag:F,f=f==argsTag?objectTag:f;var s=F==objectTag,i=f==objectTag,y=F==f;if(y&&isBuffer(a)){if(!isBuffer(o))return!1;I=!0,s=!1}if(y&&!s)return x||(x=new Stack),I||isTypedArray(a)?equalArrays(a,o,d,g,S,x):equalByTag(a,o,F,d,g,S,x);if(!(d&COMPARE_PARTIAL_FLAG$2)){var _=s&&hasOwnProperty.call(a,"__wrapped__"),R=i&&hasOwnProperty.call(o,"__wrapped__");if(_||R){var N=_?a.value():a,b=R?o.value():o;return x||(x=new Stack),S(N,b,d,g,x)}}return y?(x||(x=new Stack),equalObjects(a,o,d,g,S,x)):!1}function baseIsEqual(a,o,d,g,S){return a===o?!0:a==null||o==null||!isObjectLike(a)&&!isObjectLike(o)?a!==a&&o!==o:baseIsEqualDeep(a,o,d,g,baseIsEqual,S)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,o,d,g){var S=d.length,x=S,I=!g;if(a==null)return!x;for(a=Object(a);S--;){var $=d[S];if(I&&$[2]?$[1]!==a[$[0]]:!($[0]in a))return!1}for(;++S<x;){$=d[S];var F=$[0],f=a[F],s=$[1];if(I&&$[2]){if(f===void 0&&!(F in a))return!1}else{var i=new Stack;if(g)var y=g(f,s,F,a,o,i);if(!(y===void 0?baseIsEqual(s,f,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,g,i):y))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject(a)}function getMatchData(a){for(var o=keys(a),d=o.length;d--;){var g=o[d],S=a[g];o[d]=[g,S,isStrictComparable(S)]}return o}function matchesStrictComparable(a,o){return function(d){return d==null?!1:d[a]===o&&(o!==void 0||a in Object(d))}}function baseMatches(a){var o=getMatchData(a);return o.length==1&&o[0][2]?matchesStrictComparable(o[0][0],o[0][1]):function(d){return d===a||baseIsMatch(d,a,o)}}function baseHasIn(a,o){return a!=null&&o in Object(a)}function hasPath(a,o,d){o=castPath(o,a);for(var g=-1,S=o.length,x=!1;++g<S;){var I=toKey(o[g]);if(!(x=a!=null&&d(a,I)))break;a=a[I]}return x||++g!=S?x:(S=a==null?0:a.length,!!S&&isLength(S)&&isIndex(I,S)&&(isArray(a)||isArguments(a)))}function hasIn(a,o){return a!=null&&hasPath(a,o,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,o){return isKey(a)&&isStrictComparable(o)?matchesStrictComparable(toKey(a),o):function(d){var g=get(d,a);return g===void 0&&g===o?hasIn(d,a):baseIsEqual(o,g,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(o){return o==null?void 0:o[a]}}function basePropertyDeep(a){return function(o){return baseGet(o,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity:typeof a=="object"?isArray(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}var FUNC_ERROR_TEXT="Expected a function";function baseDelay(a,o,d){if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){a.apply(void 0,d)},o)}var defer=baseRest(function(a,o){return baseDelay(a,1,o)});function baseSum(a,o){for(var d,g=-1,S=a.length;++g<S;){var x=o(a[g]);x!==void 0&&(d=d===void 0?x:d+x)}return d}var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(a,o,d,g){for(var S=-1,x=nativeMax(nativeCeil((o-a)/(d||1)),0),I=Array(x);x--;)I[g?x:++S]=a,a+=d;return I}function createRange(a){return function(o,d,g){return g&&typeof g!="number"&&isIterateeCall(o,d,g)&&(d=g=void 0),o=toFinite(o),d===void 0?(d=o,o=0):d=toFinite(d),g=g===void 0?o<d?1:-1:toFinite(g),baseRange(o,d,g,a)}}var range=createRange();function sumBy(a,o){return a&&a.length?baseSum(a,baseIteratee(o)):0}var cookie={};cookie.parse=parse;cookie.serialize=serialize$1;var __toString=Object.prototype.toString,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse(a,o){if(typeof a!="string")throw new TypeError("argument str must be a string");for(var d={},g=o||{},S=g.decode||decode,x=0;x<a.length;){var I=a.indexOf("=",x);if(I===-1)break;var $=a.indexOf(";",x);if($===-1)$=a.length;else if($<I){x=a.lastIndexOf(";",I-1)+1;continue}var F=a.slice(x,I).trim();if(d[F]===void 0){var f=a.slice(I+1,$).trim();f.charCodeAt(0)===34&&(f=f.slice(1,-1)),d[F]=tryDecode(f,S)}x=$+1}return d}function serialize$1(a,o,d){var g=d||{},S=g.encode||encode;if(typeof S!="function")throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(a))throw new TypeError("argument name is invalid");var x=S(o);if(x&&!fieldContentRegExp.test(x))throw new TypeError("argument val is invalid");var I=a+"="+x;if(g.maxAge!=null){var $=g.maxAge-0;if(isNaN($)||!isFinite($))throw new TypeError("option maxAge is invalid");I+="; Max-Age="+Math.floor($)}if(g.domain){if(!fieldContentRegExp.test(g.domain))throw new TypeError("option domain is invalid");I+="; Domain="+g.domain}if(g.path){if(!fieldContentRegExp.test(g.path))throw new TypeError("option path is invalid");I+="; Path="+g.path}if(g.expires){var F=g.expires;if(!isDate(F)||isNaN(F.valueOf()))throw new TypeError("option expires is invalid");I+="; Expires="+F.toUTCString()}if(g.httpOnly&&(I+="; HttpOnly"),g.secure&&(I+="; Secure"),g.partitioned&&(I+="; Partitioned"),g.priority){var f=typeof g.priority=="string"?g.priority.toLowerCase():g.priority;switch(f){case"low":I+="; Priority=Low";break;case"medium":I+="; Priority=Medium";break;case"high":I+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(g.sameSite){var s=typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite;switch(s){case!0:I+="; SameSite=Strict";break;case"lax":I+="; SameSite=Lax";break;case"strict":I+="; SameSite=Strict";break;case"none":I+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return I}function decode(a){return a.indexOf("%")!==-1?decodeURIComponent(a):a}function encode(a){return encodeURIComponent(a)}function isDate(a){return __toString.call(a)==="[object Date]"||a instanceof Date}function tryDecode(a,o){try{return o(a)}catch{return a}}class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";function b64DecodeUnicode(a){return decodeURIComponent(atob(a).replace(/(.)/g,(o,d)=>{let g=d.charCodeAt(0).toString(16).toUpperCase();return g.length<2&&(g="0"+g),"%"+g}))}function base64UrlDecode(a){let o=a.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(o)}catch{return atob(o)}}function jwtDecode(a,o){if(typeof a!="string")throw new InvalidTokenError("Invalid token specified: must be a string");o||(o={});const d=o.header===!0?0:1,g=a.split(".")[d];if(typeof g!="string")throw new InvalidTokenError(`Invalid token specified: missing part #${d+1}`);let S;try{S=base64UrlDecode(g)}catch(x){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${d+1} (${x.message})`)}try{return JSON.parse(S)}catch(x){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${d+1} (${x.message})`)}}var classnames={exports:{}};(function(a){(function(){var o={}.hasOwnProperty;function d(){for(var x="",I=0;I<arguments.length;I++){var $=arguments[I];$&&(x=S(x,g($)))}return x}function g(x){if(typeof x=="string"||typeof x=="number")return x;if(typeof x!="object")return"";if(Array.isArray(x))return d.apply(null,x);if(x.toString!==Object.prototype.toString&&!x.toString.toString().includes("[native code]"))return x.toString();var I="";for(var $ in x)o.call(x,$)&&x[$]&&(I=S(I,$));return I}function S(x,I){return I?x?x+" "+I:x+I:x}a.exports?(d.default=d,a.exports=d):window.classNames=d})()})(classnames);var classnamesExports=classnames.exports;const D=getDefaultExportFromCjs(classnamesExports);function toDate(a){const o=Object.prototype.toString.call(a);return a instanceof Date||typeof a=="object"&&o==="[object Date]"?new a.constructor(+a):typeof a=="number"||o==="[object Number]"||typeof a=="string"||o==="[object String]"?new Date(a):new Date(NaN)}function constructFrom(a,o){return a instanceof Date?new a.constructor(o):new Date(o)}function addMilliseconds(a,o){const d=+toDate(a);return constructFrom(a,d+o)}const millisecondsInMinute=6e4;function addMinutes(a,o){return addMilliseconds(a,o*millisecondsInMinute)}function getRoundingMethod(a){return o=>{const g=(a?Math[a]:Math.trunc)(o);return g===0?0:g}}function differenceInMilliseconds(a,o){return+toDate(a)-+toDate(o)}function differenceInSeconds(a,o,d){const g=differenceInMilliseconds(a,o)/1e3;return getRoundingMethod(d==null?void 0:d.roundingMethod)(g)}var shim={exports:{}},useSyncExternalStoreShim_production_min={};var e=reactExports;function h(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var k=typeof Object.is=="function"?Object.is:h,l=e.useState,m$1=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function q(a,o){var d=o(),g=l({inst:{value:d,getSnapshot:o}}),S=g[0].inst,x=g[1];return n(function(){S.value=d,S.getSnapshot=o,r(S)&&x({inst:S})},[a,d,o]),m$1(function(){return r(S)&&x({inst:S}),a(function(){r(S)&&x({inst:S})})},[a]),p(d),d}function r(a){var o=a.getSnapshot;a=a.value;try{var d=o();return!k(a,d)}catch{return!0}}function t(a,o){return o()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t:q;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;const noop=()=>{},UNDEFINED=noop(),OBJECT=Object,isUndefined=a=>a===UNDEFINED,isFunction=a=>typeof a=="function",mergeObjects=(a,o)=>({...a,...o}),isPromiseLike=a=>isFunction(a.then),table=new WeakMap;let counter=0;const stableHash=a=>{const o=typeof a,d=a&&a.constructor,g=d==Date;let S,x;if(OBJECT(a)===a&&!g&&d!=RegExp){if(S=table.get(a),S)return S;if(S=++counter+"~",table.set(a,S),d==Array){for(S="@",x=0;x<a.length;x++)S+=stableHash(a[x])+",";table.set(a,S)}if(d==OBJECT){S="#";const I=OBJECT.keys(a).sort();for(;!isUndefined(x=I.pop());)isUndefined(a[x])||(S+=x+":"+stableHash(a[x])+",");table.set(a,S)}}else S=g?a.toJSON():o=="symbol"?a.toString():o=="string"?JSON.stringify(a):""+a;return S},SWRGlobalState=new WeakMap,EMPTY_CACHE={},INITIAL_CACHE={},STR_UNDEFINED="undefined",isWindowDefined=typeof window!=STR_UNDEFINED,isDocumentDefined=typeof document!=STR_UNDEFINED,hasRequestAnimationFrame=()=>isWindowDefined&&typeof window.requestAnimationFrame!=STR_UNDEFINED,createCacheHelper=(a,o)=>{const d=SWRGlobalState.get(a);return[()=>!isUndefined(o)&&a.get(o)||EMPTY_CACHE,g=>{if(!isUndefined(o)){const S=a.get(o);o in INITIAL_CACHE||(INITIAL_CACHE[o]=S),d[5](o,mergeObjects(S,g),S||EMPTY_CACHE)}},d[6],()=>!isUndefined(o)&&o in INITIAL_CACHE?INITIAL_CACHE[o]:!isUndefined(o)&&a.get(o)||EMPTY_CACHE]};let online=!0;const isOnline=()=>online,[onWindowEvent,offWindowEvent]=isWindowDefined&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[noop,noop],isVisible=()=>{const a=isDocumentDefined&&document.visibilityState;return isUndefined(a)||a!=="hidden"},initFocus=a=>(isDocumentDefined&&document.addEventListener("visibilitychange",a),onWindowEvent("focus",a),()=>{isDocumentDefined&&document.removeEventListener("visibilitychange",a),offWindowEvent("focus",a)}),initReconnect=a=>{const o=()=>{online=!0,a()},d=()=>{online=!1};return onWindowEvent("online",o),onWindowEvent("offline",d),()=>{offWindowEvent("online",o),offWindowEvent("offline",d)}},preset={isOnline,isVisible},defaultConfigOptions={initFocus,initReconnect},IS_REACT_LEGACY=!c.useId,IS_SERVER=!isWindowDefined||"Deno"in window,rAF=a=>hasRequestAnimationFrame()?window.requestAnimationFrame(a):setTimeout(a,1),useIsomorphicLayoutEffect=IS_SERVER?reactExports.useEffect:reactExports.useLayoutEffect,navigatorConnection=typeof navigator<"u"&&navigator.connection,slowConnection=!IS_SERVER&&navigatorConnection&&(["slow-2g","2g"].includes(navigatorConnection.effectiveType)||navigatorConnection.saveData),serialize=a=>{if(isFunction(a))try{a=a()}catch{a=""}const o=a;return a=typeof a=="string"?a:(Array.isArray(a)?a.length:a)?stableHash(a):"",[a,o]};let __timestamp=0;const getTimestamp=()=>++__timestamp,FOCUS_EVENT=0,RECONNECT_EVENT=1,MUTATE_EVENT=2,ERROR_REVALIDATE_EVENT=3;var events={__proto__:null,ERROR_REVALIDATE_EVENT,FOCUS_EVENT,MUTATE_EVENT,RECONNECT_EVENT};async function internalMutate(...a){const[o,d,g,S]=a,x=mergeObjects({populateCache:!0,throwOnError:!0},typeof S=="boolean"?{revalidate:S}:S||{});let I=x.populateCache;const $=x.rollbackOnError;let F=x.optimisticData;const f=x.revalidate!==!1,s=_=>typeof $=="function"?$(_):$!==!1,i=x.throwOnError;if(isFunction(d)){const _=d,R=[],N=o.keys();for(const b of N)!/^\$(inf|sub)\$/.test(b)&&_(o.get(b)._k)&&R.push(b);return Promise.all(R.map(y))}return y(d);async function y(_){const[R]=serialize(_);if(!R)return;const[N,b]=createCacheHelper(o,R),[C,j,H,J]=SWRGlobalState.get(o),X=()=>{const fe=C[R];return f&&(delete H[R],delete J[R],fe&&fe[0])?fe[0](MUTATE_EVENT).then(()=>N().data):N().data};if(a.length<3)return X();let Q=g,ue;const oe=getTimestamp();j[R]=[oe,0];const ge=!isUndefined(F),xe=N(),we=xe.data,Ke=xe._c,Ie=isUndefined(Ke)?we:Ke;if(ge&&(F=isFunction(F)?F(Ie,we):F,b({data:F,_c:Ie})),isFunction(Q))try{Q=Q(Ie)}catch(fe){ue=fe}if(Q&&isPromiseLike(Q))if(Q=await Q.catch(fe=>{ue=fe}),oe!==j[R][0]){if(ue)throw ue;return Q}else ue&&ge&&s(ue)&&(I=!0,b({data:Ie,_c:UNDEFINED}));if(I&&!ue)if(isFunction(I)){const fe=I(Q,Ie);b({data:fe,error:UNDEFINED,_c:UNDEFINED})}else b({data:Q,error:UNDEFINED,_c:UNDEFINED});if(j[R][1]=getTimestamp(),Promise.resolve(X()).then(()=>{b({_c:UNDEFINED})}),ue){if(i)throw ue;return}return Q}}const revalidateAllKeys=(a,o)=>{for(const d in a)a[d][0]&&a[d][0](o)},initCache=(a,o)=>{if(!SWRGlobalState.has(a)){const d=mergeObjects(defaultConfigOptions,o),g={},S=internalMutate.bind(UNDEFINED,a);let x=noop;const I={},$=(s,i)=>{const y=I[s]||[];return I[s]=y,y.push(i),()=>y.splice(y.indexOf(i),1)},F=(s,i,y)=>{a.set(s,i);const _=I[s];if(_)for(const R of _)R(i,y)},f=()=>{if(!SWRGlobalState.has(a)&&(SWRGlobalState.set(a,[g,{},{},{},S,F,$]),!IS_SERVER)){const s=d.initFocus(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,g,FOCUS_EVENT))),i=d.initReconnect(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,g,RECONNECT_EVENT)));x=()=>{s&&s(),i&&i(),SWRGlobalState.delete(a)}}};return f(),[a,S,f,x]}return[a,SWRGlobalState.get(a)[4]]},onErrorRetry=(a,o,d,g,S)=>{const x=d.errorRetryCount,I=S.retryCount,$=~~((Math.random()+.5)*(1<<(I<8?I:8)))*d.errorRetryInterval;!isUndefined(x)&&I>x||setTimeout(g,$,S)},compare=(a,o)=>stableHash(a)==stableHash(o),[cache,mutate]=initCache(new Map),defaultConfig=mergeObjects({onLoadingSlow:noop,onSuccess:noop,onError:noop,onErrorRetry,onDiscarded:noop,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:slowConnection?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:slowConnection?5e3:3e3,compare,isPaused:()=>!1,cache,mutate,fallback:{}},preset),mergeConfigs=(a,o)=>{const d=mergeObjects(a,o);if(o){const{use:g,fallback:S}=a,{use:x,fallback:I}=o;g&&x&&(d.use=g.concat(x)),S&&I&&(d.fallback=mergeObjects(S,I))}return d},SWRConfigContext=reactExports.createContext({}),INFINITE_PREFIX="$inf$",enableDevtools=isWindowDefined&&window.__SWR_DEVTOOLS_USE__,use$1=enableDevtools?window.__SWR_DEVTOOLS_USE__:[],setupDevTools=()=>{enableDevtools&&(window.__SWR_DEVTOOLS_REACT__=c)},normalize=a=>isFunction(a[1])?[a[0],a[1],a[2]||{}]:[a[0],null,(a[1]===null?a[2]:a[1])||{}],useSWRConfig=()=>mergeObjects(defaultConfig,reactExports.useContext(SWRConfigContext)),middleware=a=>(o,d,g)=>a(o,d&&((...x)=>{const[I]=serialize(o),[,,,$]=SWRGlobalState.get(cache);if(I.startsWith(INFINITE_PREFIX))return d(...x);const F=$[I];return isUndefined(F)?d(...x):(delete $[I],F)}),g),BUILT_IN_MIDDLEWARE=use$1.concat(middleware),withArgs=a=>function(...d){const g=useSWRConfig(),[S,x,I]=normalize(d),$=mergeConfigs(g,I);let F=a;const{use:f}=$,s=(f||[]).concat(BUILT_IN_MIDDLEWARE);for(let i=s.length;i--;)F=s[i](F);return F(S,x||$.fetcher||null,$)},subscribeCallback=(a,o,d)=>{const g=o[a]||(o[a]=[]);return g.push(d),()=>{const S=g.indexOf(d);S>=0&&(g[S]=g[g.length-1],g.pop())}},withMiddleware=(a,o)=>(...d)=>{const[g,S,x]=normalize(d),I=(x.use||[]).concat(o);return a(g,S,{...x,use:I})};setupDevTools();const use=c.use||(a=>{if(a.status==="pending")throw a;if(a.status==="fulfilled")return a.value;throw a.status==="rejected"?a.reason:(a.status="pending",a.then(o=>{a.status="fulfilled",a.value=o},o=>{a.status="rejected",a.reason=o}),a)}),WITH_DEDUPE={dedupe:!0},useSWRHandler=(a,o,d)=>{const{cache:g,compare:S,suspense:x,fallbackData:I,revalidateOnMount:$,revalidateIfStale:F,refreshInterval:f,refreshWhenHidden:s,refreshWhenOffline:i,keepPreviousData:y}=d,[_,R,N,b]=SWRGlobalState.get(g),[C,j]=serialize(a),H=reactExports.useRef(!1),J=reactExports.useRef(!1),X=reactExports.useRef(C),Q=reactExports.useRef(o),ue=reactExports.useRef(d),oe=()=>ue.current,ge=()=>oe().isVisible()&&oe().isOnline(),[xe,we,Ke,Ie]=createCacheHelper(g,C),fe=reactExports.useRef({}).current,ke=isUndefined(I)?d.fallback[C]:I,ce=(ve,Ee)=>{for(const Te in fe){const be=Te;if(be==="data"){if(!S(ve[be],Ee[be])&&(!isUndefined(ve[be])||!S(ut,Ee[be])))return!1}else if(Ee[be]!==ve[be])return!1}return!0},At=reactExports.useMemo(()=>{const ve=!C||!o?!1:isUndefined($)?oe().isPaused()||x?!1:isUndefined(F)?!0:F:$,Ee=Ce=>{const et=mergeObjects(Ce);return delete et._k,ve?{isValidating:!0,isLoading:!0,...et}:et},Te=xe(),be=Ie(),$e=Ee(Te),ft=Te===be?$e:Ee(be);let Ne=$e;return[()=>{const Ce=Ee(xe());return ce(Ce,Ne)?(Ne.data=Ce.data,Ne.isLoading=Ce.isLoading,Ne.isValidating=Ce.isValidating,Ne.error=Ce.error,Ne):(Ne=Ce,Ce)},()=>ft]},[g,C]),De=shimExports.useSyncExternalStore(reactExports.useCallback(ve=>Ke(C,(Ee,Te)=>{ce(Te,Ee)||ve()}),[g,C]),At[0],At[1]),wt=!H.current,ht=_[C]&&_[C].length>0,Ye=De.data,rt=isUndefined(Ye)?ke:Ye,it=De.error,vt=reactExports.useRef(rt),ut=y?isUndefined(Ye)?vt.current:Ye:rt,Pt=ht&&!isUndefined(it)?!1:wt&&!isUndefined($)?$:oe().isPaused()?!1:x?isUndefined(rt)?!1:F:isUndefined(rt)||F,It=!!(C&&o&&wt&&Pt),$t=isUndefined(De.isValidating)?It:De.isValidating,kt=isUndefined(De.isLoading)?It:De.isLoading,ct=reactExports.useCallback(async ve=>{const Ee=Q.current;if(!C||!Ee||J.current||oe().isPaused())return!1;let Te,be,$e=!0;const ft=ve||{},Ne=!N[C]||!ft.dedupe,Ce=()=>IS_REACT_LEGACY?!J.current&&C===X.current&&H.current:C===X.current,et={isValidating:!1,isLoading:!1},Kt=()=>{we(et)},Zt=()=>{const qe=N[C];qe&&qe[1]===be&&delete N[C]},er={isValidating:!0};isUndefined(xe().data)&&(er.isLoading=!0);try{if(Ne&&(we(er),d.loadingTimeout&&isUndefined(xe().data)&&setTimeout(()=>{$e&&Ce()&&oe().onLoadingSlow(C,d)},d.loadingTimeout),N[C]=[Ee(j),getTimestamp()]),[Te,be]=N[C],Te=await Te,Ne&&setTimeout(Zt,d.dedupingInterval),!N[C]||N[C][1]!==be)return Ne&&Ce()&&oe().onDiscarded(C),!1;et.error=UNDEFINED;const qe=R[C];if(!isUndefined(qe)&&(be<=qe[0]||be<=qe[1]||qe[1]===0))return Kt(),Ne&&Ce()&&oe().onDiscarded(C),!1;const ot=xe().data;et.data=S(ot,Te)?ot:Te,Ne&&Ce()&&oe().onSuccess(Te,C,d)}catch(qe){Zt();const ot=oe(),{shouldRetryOnError:jt}=ot;ot.isPaused()||(et.error=qe,Ne&&Ce()&&(ot.onError(qe,C,ot),(jt===!0||isFunction(jt)&&jt(qe))&&ge()&&ot.onErrorRetry(qe,C,ot,zt=>{const tr=_[C];tr&&tr[0]&&tr[0](events.ERROR_REVALIDATE_EVENT,zt)},{retryCount:(ft.retryCount||0)+1,dedupe:!0})))}return $e=!1,Kt(),!0},[C,g]),he=reactExports.useCallback((...ve)=>internalMutate(g,X.current,...ve),[]);if(useIsomorphicLayoutEffect(()=>{Q.current=o,ue.current=d,isUndefined(Ye)||(vt.current=Ye)}),useIsomorphicLayoutEffect(()=>{if(!C)return;const ve=ct.bind(UNDEFINED,WITH_DEDUPE);let Ee=0;const be=subscribeCallback(C,_,($e,ft={})=>{if($e==events.FOCUS_EVENT){const Ne=Date.now();oe().revalidateOnFocus&&Ne>Ee&&ge()&&(Ee=Ne+oe().focusThrottleInterval,ve())}else if($e==events.RECONNECT_EVENT)oe().revalidateOnReconnect&&ge()&&ve();else{if($e==events.MUTATE_EVENT)return ct();if($e==events.ERROR_REVALIDATE_EVENT)return ct(ft)}});return J.current=!1,X.current=C,H.current=!0,we({_k:j}),Pt&&(isUndefined(rt)||IS_SERVER?ve():rAF(ve)),()=>{J.current=!0,be()}},[C]),useIsomorphicLayoutEffect(()=>{let ve;function Ee(){const be=isFunction(f)?f(xe().data):f;be&&ve!==-1&&(ve=setTimeout(Te,be))}function Te(){!xe().error&&(s||oe().isVisible())&&(i||oe().isOnline())?ct(WITH_DEDUPE).then(Ee):Ee()}return Ee(),()=>{ve&&(clearTimeout(ve),ve=-1)}},[f,s,i,C]),reactExports.useDebugValue(ut),x&&isUndefined(rt)&&C){if(!IS_REACT_LEGACY&&IS_SERVER)throw new Error("Fallback data is required when using suspense in SSR.");Q.current=o,ue.current=d,J.current=!1;const ve=b[C];if(!isUndefined(ve)){const Ee=he(ve);use(Ee)}if(isUndefined(it)){const Ee=ct(WITH_DEDUPE);isUndefined(ut)||(Ee.status="fulfilled",Ee.value=!0),use(Ee)}else throw it}return{mutate:he,get data(){return fe.data=!0,ut},get error(){return fe.error=!0,it},get isValidating(){return fe.isValidating=!0,$t},get isLoading(){return fe.isLoading=!0,kt}}},useSWR=withArgs(useSWRHandler),immutable=a=>(o,d,g)=>(g.revalidateOnFocus=!1,g.revalidateIfStale=!1,g.revalidateOnReconnect=!1,a(o,d,g)),useSWRImmutable=withMiddleware(useSWR,immutable);var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const toKebabCase=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(a,o)=>{const d=reactExports.forwardRef(({color:g="currentColor",size:S=24,strokeWidth:x=2,absoluteStrokeWidth:I,className:$="",children:F,...f},s)=>reactExports.createElement("svg",{ref:s,...defaultAttributes,width:S,height:S,stroke:g,strokeWidth:I?Number(x)*24/Number(S):x,className:["lucide",`lucide-${toKebabCase(a)}`,$].join(" "),...f},[...o.map(([i,y])=>reactExports.createElement(i,y)),...Array.isArray(F)?F:[F]]));return d.displayName=`${a}`,d};const AlertTriangle=createLucideIcon("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const CheckCircle2=createLucideIcon("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const HelpCircle=createLucideIcon("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const MessageSquareOff=createLucideIcon("MessageSquareOff",[["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M3.6 3.6c-.4.3-.6.8-.6 1.4v16l4-4h10",key:"pwpm4a"}]]);const Pause=createLucideIcon("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const RotateCw=createLucideIcon("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);const Send=createLucideIcon("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const SkipForward=createLucideIcon("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const XCircle=createLucideIcon("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function isBytes$1(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}function bytes(a,...o){if(!isBytes$1(a))throw new Error("Expected Uint8Array");if(o.length>0&&!o.includes(a.length))throw new Error(`Expected Uint8Array of length ${o}, not of length=${a.length}`)}function exists(a,o=!0){if(a.destroyed)throw new Error("Hash instance has been destroyed");if(o&&a.finished)throw new Error("Hash#digest() has already been called")}function output(a,o){bytes(a);const d=o.outputLen;if(a.length<d)throw new Error(`digestInto() expects output buffer of length at least ${d}`)}function isBytes(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}const createView=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),rotr=(a,o)=>a<<32-o|a>>>o,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes(a){if(typeof a!="string")throw new Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function toBytes(a){if(typeof a=="string"&&(a=utf8ToBytes(a)),!isBytes(a))throw new Error(`expected Uint8Array, got ${typeof a}`);return a}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(a){const o=g=>a().update(toBytes(g)).digest(),d=a();return o.outputLen=d.outputLen,o.blockLen=d.blockLen,o.create=()=>a(),o}function setBigUint64(a,o,d,g){if(typeof a.setBigUint64=="function")return a.setBigUint64(o,d,g);const S=BigInt(32),x=BigInt(4294967295),I=Number(d>>S&x),$=Number(d&x),F=g?4:0,f=g?0:4;a.setUint32(o+F,I,g),a.setUint32(o+f,$,g)}class SHA2 extends Hash{constructor(o,d,g,S){super(),this.blockLen=o,this.outputLen=d,this.padOffset=g,this.isLE=S,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(o),this.view=createView(this.buffer)}update(o){exists(this);const{view:d,buffer:g,blockLen:S}=this;o=toBytes(o);const x=o.length;for(let I=0;I<x;){const $=Math.min(S-this.pos,x-I);if($===S){const F=createView(o);for(;S<=x-I;I+=S)this.process(F,I);continue}g.set(o.subarray(I,I+$),this.pos),this.pos+=$,I+=$,this.pos===S&&(this.process(d,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){exists(this),output(o,this),this.finished=!0;const{buffer:d,view:g,blockLen:S,isLE:x}=this;let{pos:I}=this;d[I++]=128,this.buffer.subarray(I).fill(0),this.padOffset>S-I&&(this.process(g,0),I=0);for(let i=I;i<S;i++)d[i]=0;setBigUint64(g,S-8,BigInt(this.length*8),x),this.process(g,0);const $=createView(o),F=this.outputLen;if(F%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const f=F/4,s=this.get();if(f>s.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<f;i++)$.setUint32(4*i,s[i],x)}digest(){const{buffer:o,outputLen:d}=this;this.digestInto(o);const g=o.slice(0,d);return this.destroy(),g}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:d,buffer:g,length:S,finished:x,destroyed:I,pos:$}=this;return o.length=S,o.pos=$,o.finished=x,o.destroyed=I,S%d&&o.buffer.set(g),o}}const Chi=(a,o,d)=>a&o^~a&d,Maj=(a,o,d)=>a&o^a&d^o&d,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:o,B:d,C:g,D:S,E:x,F:I,G:$,H:F}=this;return[o,d,g,S,x,I,$,F]}set(o,d,g,S,x,I,$,F){this.A=o|0,this.B=d|0,this.C=g|0,this.D=S|0,this.E=x|0,this.F=I|0,this.G=$|0,this.H=F|0}process(o,d){for(let i=0;i<16;i++,d+=4)SHA256_W[i]=o.getUint32(d,!1);for(let i=16;i<64;i++){const y=SHA256_W[i-15],_=SHA256_W[i-2],R=rotr(y,7)^rotr(y,18)^y>>>3,N=rotr(_,17)^rotr(_,19)^_>>>10;SHA256_W[i]=N+SHA256_W[i-7]+R+SHA256_W[i-16]|0}let{A:g,B:S,C:x,D:I,E:$,F,G:f,H:s}=this;for(let i=0;i<64;i++){const y=rotr($,6)^rotr($,11)^rotr($,25),_=s+y+Chi($,F,f)+SHA256_K[i]+SHA256_W[i]|0,N=(rotr(g,2)^rotr(g,13)^rotr(g,22))+Maj(g,S,x)|0;s=f,f=F,F=$,$=I+_|0,I=x,x=S,S=g,g=_+N|0}g=g+this.A|0,S=S+this.B|0,x=x+this.C|0,I=I+this.D|0,$=$+this.E|0,F=F+this.F|0,f=f+this.G|0,s=s+this.H|0,this.set(g,S,x,I,$,F,f,s)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256=wrapConstructor(()=>new SHA256);var XoroShiro128Plus=function(){function a(o,d,g,S){this.s01=o,this.s00=d,this.s11=g,this.s10=S}return a.prototype.clone=function(){return new a(this.s01,this.s00,this.s11,this.s10)},a.prototype.next=function(){var o=new a(this.s01,this.s00,this.s11,this.s10),d=o.unsafeNext();return[d,o]},a.prototype.unsafeNext=function(){var o=this.s00+this.s10|0,d=this.s10^this.s00,g=this.s11^this.s01,S=this.s00,x=this.s01;return this.s00=S<<24^x>>>8^d^d<<16,this.s01=x<<24^S>>>8^g^(g<<16|d>>>16),this.s10=g<<5^d>>>27,this.s11=d<<5^g>>>27,o},a.prototype.jump=function(){var o=new a(this.s01,this.s00,this.s11,this.s10);return o.unsafeJump(),o},a.prototype.unsafeJump=function(){for(var o=0,d=0,g=0,S=0,x=[3639956645,3750757012,1261568508,386426335],I=0;I!==4;++I)for(var $=1;$;$<<=1)x[I]&$&&(o^=this.s01,d^=this.s00,g^=this.s11,S^=this.s10),this.unsafeNext();this.s01=o,this.s00=d,this.s11=g,this.s10=S},a}(),xoroshiro128plus=function(a){return new XoroShiro128Plus(-1,~a,a|0,0)};function fromNumberToArrayInt64(a,o){if(o<0){var d=-o;a.sign=-1,a.data[0]=~~(d/4294967296),a.data[1]=d>>>0}else a.sign=1,a.data[0]=~~(o/4294967296),a.data[1]=o>>>0;return a}function substractArrayInt64(a,o,d){var g=o.data[1],S=o.data[0],x=o.sign,I=d.data[1],$=d.data[0],F=d.sign;if(a.sign=1,x===1&&F===-1){var f=g+I,s=S+$+(f>4294967295?1:0);return a.data[0]=s>>>0,a.data[1]=f>>>0,a}var i=g,y=S,_=I,R=$;x===-1&&(i=I,y=$,_=g,R=S);var N=0,b=i-_;return b<0&&(N=1,b=b>>>0),a.data[0]=y-R-N,a.data[1]=b,a}function unsafeUniformIntDistributionInternal(a,o){for(var d=a>2?~~(4294967296/a)*a:4294967296,g=o.unsafeNext()+2147483648;g>=d;)g=o.unsafeNext()+2147483648;return g%a}function unsafeUniformArrayIntDistributionInternal(a,o,d){for(var g=o.length;;){for(var S=0;S!==g;++S){var x=S===0?o[0]+1:4294967296,I=unsafeUniformIntDistributionInternal(x,d);a[S]=I}for(var S=0;S!==g;++S){var $=a[S],F=o[S];if($<F)return a;if($>F)break}}}var safeNumberMaxSafeInteger=Number.MAX_SAFE_INTEGER,sharedA={sign:1,data:[0,0]},sharedB={sign:1,data:[0,0]},sharedC={sign:1,data:[0,0]},sharedData=[0,0];function uniformLargeIntInternal(a,o,d,g){var S=d<=safeNumberMaxSafeInteger?fromNumberToArrayInt64(sharedC,d):substractArrayInt64(sharedC,fromNumberToArrayInt64(sharedA,o),fromNumberToArrayInt64(sharedB,a));return S.data[1]===4294967295?(S.data[0]+=1,S.data[1]=0):S.data[1]+=1,unsafeUniformArrayIntDistributionInternal(sharedData,S.data,g),sharedData[0]*4294967296+sharedData[1]+a}function unsafeUniformIntDistribution(a,o,d){var g=o-a;if(g<=4294967295){var S=unsafeUniformIntDistributionInternal(g+1,d);return S+a}return uniformLargeIntInternal(a,o,g,d)}class ValidationError extends Error{constructor(d,g){super(d,g);kr(this,"name");kr(this,"details");this.name="ZodValidationError",this.details=getIssuesFromErrorOptions(g)}toString(){return this.message}}function getIssuesFromErrorOptions(a){if(a){const o=a.cause;if(o instanceof ZodError)return o.issues}return[]}const ISSUE_SEPARATOR="; ",MAX_ISSUES_IN_MESSAGE=99,PREFIX="Validation error",PREFIX_SEPARATOR=": ",UNION_SEPARATOR=", or ";function prefixMessage(a,o,d){return o!==null?a.length>0?[o,a].join(d):o:a.length>0?a:PREFIX}const identifierRegex=/[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*/u;function joinPath(a){return a.length===1?a[0].toString():a.reduce((o,d)=>{if(typeof d=="number")return o+"["+d.toString()+"]";if(d.includes('"'))return o+'["'+escapeQuotes(d)+'"]';if(!identifierRegex.test(d))return o+'["'+d+'"]';const g=o.length===0?"":".";return o+g+d},"")}function escapeQuotes(a){return a.replace(/"/g,'\\"')}function isNonEmptyArray(a){return a.length!==0}function getMessageFromZodIssue(a){const{issue:o,issueSeparator:d,unionSeparator:g,includePath:S}=a;if(o.code==="invalid_union")return o.unionErrors.reduce((x,I)=>{const $=I.issues.map(F=>getMessageFromZodIssue({issue:F,issueSeparator:d,unionSeparator:g,includePath:S})).join(d);return x.includes($)||x.push($),x},[]).join(g);if(S&&isNonEmptyArray(o.path)){if(o.path.length===1){const x=o.path[0];if(typeof x=="number")return`${o.message} at index ${x}`}return`${o.message} at "${joinPath(o.path)}"`}return o.message}function fromZodError(a,o={}){const{maxIssuesInMessage:d=MAX_ISSUES_IN_MESSAGE,issueSeparator:g=ISSUE_SEPARATOR,unionSeparator:S=UNION_SEPARATOR,prefixSeparator:x=PREFIX_SEPARATOR,prefix:I=PREFIX,includePath:$=!0}=o,F=a.errors,f=F.length===0?a.message:F.slice(0,d).map(i=>getMessageFromZodIssue({issue:i,issueSeparator:g,unionSeparator:S,includePath:$})).join(g),s=prefixMessage(f,I,x);return new ValidationError(s,{cause:a})}var define_import_meta_env_default={QUIZMS_MODE:"training",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};reactExports.createContext({});function z$1({percentage:a,className:o,children:d}){let g=a===void 0?void 0:Math.round(a);return g!==void 0&&(g=Number.isNaN(g)?void 0:clamp(g,0,100)),c.createElement("div",{className:D("relative p-2 pt-0 text-center",o)},c.createElement("div",{className:"relative z-10"},d),c.createElement("progress",{className:"progress progress-info absolute inset-x-0",value:g,max:"100"}))}function Et(){return c.createElement("div",{className:"not-prose flex h-full items-center justify-center"},c.createElement(z$1,null,c.createElement("p",{className:"pb-1"},"Caricamento in corso...")))}var Bt=reactExports.forwardRef(function({title:a,className:o,children:d},g){return c.createElement("dialog",{ref:g,className:"modal"},c.createElement("form",{method:"dialog",className:D("modal-box",o)},c.createElement("button",{className:"btn btn-circle btn-ghost btn-sm absolute right-2 top-2","aria-label":"Chiudi"},""),c.createElement("h3",{className:"mb-3 mt-0 text-lg font-bold"},a),d),c.createElement("form",{method:"dialog",className:"modal-backdrop"},c.createElement("button",null,"Chiudi")))});function E(){let{data:a}=useSWRImmutable("time-server",K,{suspense:!0});return()=>addMilliseconds(new Date,a)}async function K(){if(!define_import_meta_env_default.QUIZMS_TIME_SERVER)return 0;try{let a=await fetch(define_import_meta_env_default.QUIZMS_TIME_SERVER);if(!a.ok)return 0;let o=Date.now(),d=await a.text(),g=Number(d);return Number.isNaN(g)?0:g-o}catch{return 0}}function Wt(a){let o=E(),d=reactExports.useCallback(()=>!!a&&o()>=a,[a,o]),[g,S]=reactExports.useState(d),x=reactExports.useCallback(()=>!g&&d()&&S(!0),[g,d]);return reactExports.useEffect(()=>{if(!a){S(!1);return}let I=differenceInMilliseconds(a,o());if(I<0)return;let $=setTimeout(x,I+5);return()=>clearTimeout($)},[a,x,o]),reactExports.useEffect(()=>(window.addEventListener("visibilitychange",x),()=>window.removeEventListener("visibilitychange",x)),[x]),g}function Rt(a){let o=E(),[d,g]=reactExports.useState(o()),S=a.endTime??addMinutes(a.startTime,a.duration);if(reactExports.useEffect(()=>{if(!S)return;let F=setInterval(()=>{let f=o();g(f),f>=S&&clearInterval(F)},100);return()=>clearInterval(F)},[S,o]),!S)return c.createElement("span",{className:"font-mono"},"--:--");let x=Math.max(differenceInSeconds(S,d),0);a.duration&&(x=Math.min(x,a.duration*60));let I=Math.floor(x/60),$=x%60;return c.createElement("span",{className:"countdown font-mono"},c.createElement("span",{style:{"--value":I}}),":",c.createElement("span",{style:{"--value":$}}))}function Yt({error:a,resetErrorBoundary:o}){return reactExports.useEffect(()=>{},[o]),c.createElement("div",{className:"flex size-full flex-col items-center justify-center"},c.createElement("p",{className:"mx-8 break-words text-center text-error"},"Errore: ",a.message),o&&c.createElement("div",{className:"mt-5 flex flex-row justify-center"},c.createElement("button",{className:"btn btn-error",onClick:o},c.createElement(RotateCw,null),"Ricarica")))}var w=z$2.object({name:z$2.string(),label:z$2.string(),size:z$2.enum(["xs","sm","md","lg","xl"]).optional(),pinned:z$2.boolean().optional()}),at=w.extend({type:z$2.literal("text")}),st=w.extend({type:z$2.literal("number"),min:z$2.number().optional(),max:z$2.number().optional()}),dt=w.extend({type:z$2.literal("date"),min:z$2.date(),max:z$2.date()});z$2.object({id:z$2.string(),name:z$2.string(),problemIds:z$2.coerce.string().array(),contestWindowStart:z$2.date().optional(),contestWindowEnd:z$2.date().optional(),duration:z$2.coerce.number().positive().optional(),statementVersion:z$2.number(),personalInformation:z$2.array(z$2.discriminatedUnion("type",[at,st,dt])),hasVariants:z$2.boolean(),hasOnline:z$2.boolean(),hasPdf:z$2.boolean(),allowRestart:z$2.boolean(),allowImport:z$2.boolean(),instructions:z$2.string().optional()});z$2.object({uid:z$2.string(),personalInformation:z$2.record(z$2.union([z$2.string(),z$2.number(),z$2.date()]).optional()),participationId:z$2.string(),contestId:z$2.string(),token:z$2.string(),startedAt:z$2.date(),variant:z$2.string(),disabled:z$2.boolean(),answers:z$2.record(z$2.union([z$2.string(),z$2.number()]).optional()),extraData:z$2.record(z$2.any()).optional(),createdAt:z$2.date(),updatedAt:z$2.date()}).partial().extend({id:z$2.string()});z$2.object({id:z$2.string(),studentId:z$2.string()});z$2.object({id:z$2.string(),studentId:z$2.string(),participationId:z$2.string()});z$2.object({id:z$2.string(),studentId:z$2.string(),token:z$2.string(),name:z$2.string(),surname:z$2.string()});z$2.object({id:z$2.string(),contestId:z$2.string(),schema:z$2.record(z$2.object({type:z$2.enum(["text","number","points"]),options:z$2.string().array().nonempty().optional(),blankOptions:z$2.string().array().optional(),pointsCorrect:z$2.number().optional(),pointsBlank:z$2.number().optional(),pointsWrong:z$2.number().optional(),solution:z$2.string().optional(),originalId:z$2.coerce.string().optional()}))});z$2.object({id:z$2.string(),variant:z$2.string()});function Me(a,o){var x,I,$;let d=a.answers,g=(x=o[a.variant])==null?void 0:x.schema;if(!g||!d)return;let S=0;for(let F in g){let f=g[F],s=($=(I=d[F])==null?void 0:I.toString())==null?void 0:$.trim(),i=mt(f,s);if(i===void 0)return;S+=i}return S}function mt(a,o){var d;if(a.type==="points")return Number(o||0);if(!(a.pointsCorrect===void 0||a.pointsBlank===void 0||a.pointsWrong===void 0||a.solution===void 0))return o===void 0||o===""||(d=a.blankOptions)!=null&&d.includes(o)?a.pointsBlank:o.toUpperCase()===a.solution.toUpperCase()?a.pointsCorrect:a.pointsWrong}z$2.object({id:z$2.string(),createdAt:z$2.date(),contestIds:z$2.string().array(),level:z$2.enum(["info","warning","error"]),title:z$2.string(),body:z$2.string()});z$2.object({id:z$2.string(),schoolId:z$2.string(),contestId:z$2.string(),name:z$2.string(),teacher:z$2.string(),token:z$2.string().optional(),startingTime:z$2.date().optional(),finalized:z$2.boolean().default(!1),pdfVariants:z$2.array(z$2.coerce.string()).optional()});z$2.object({id:z$2.string(),participationId:z$2.string(),contestId:z$2.string(),startingTime:z$2.date()});z$2.object({id:z$2.string(),uid:z$2.string(),answers:z$2.record(z$2.union([z$2.string(),z$2.number()]).optional()),submittedAt:z$2.date().optional()});var T=class{constructor(a){this.randInt=(o,d)=>unsafeUniformIntDistribution(o,d,this.rng),this.choice=o=>o[this.randInt(0,o.length-1)],this.sample=(o,d)=>{let g=o.slice(0,d);for(let S=d;S<o.length;S++){let x=this.randInt(0,S);x<d&&(g[x]=o[S])}return g},this.shuffle=o=>{for(let d=o.length-1;d>0;d--){let g=this.randInt(0,d);[o[d],o[g]]=[o[g],o[d]]}},this.rng=xoroshiro128plus(lt(a))}};function lt(a){let o=sha256(a),d=new DataView(o.buffer,o.byteOffset,o.byteLength);return Number(d.getBigUint64(0,!0)&BigInt(Number.MAX_SAFE_INTEGER))}function gt(){return crypto.randomUUID()}function xt(a,o,d){let g=a.safeParse(o);if(!g.success)throw fromZodError(g.error,d);return g.data}const ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(o){super(o),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(o){return{didCatch:!0,error:o}}resetErrorBoundary(){const{error:o}=this.state;if(o!==null){for(var d,g,S=arguments.length,x=new Array(S),I=0;I<S;I++)x[I]=arguments[I];(d=(g=this.props).onReset)===null||d===void 0||d.call(g,{args:x,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(o,d){var g,S;(g=(S=this.props).onError)===null||g===void 0||g.call(S,o,d)}componentDidUpdate(o,d){const{didCatch:g}=this.state,{resetKeys:S}=this.props;if(g&&d.error!==null&&hasArrayChanged(o.resetKeys,S)){var x,I;(x=(I=this.props).onReset)===null||x===void 0||x.call(I,{next:S,prev:o.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:o,fallbackRender:d,FallbackComponent:g,fallback:S}=this.props,{didCatch:x,error:I}=this.state;let $=o;if(x){const F={error:I,resetErrorBoundary:this.resetErrorBoundary};if(typeof d=="function")$=d(F);else if(g)$=reactExports.createElement(g,F);else if(S===null||reactExports.isValidElement(S))$=S;else throw I}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:x,error:I,resetErrorBoundary:this.resetErrorBoundary}},$)}}function hasArrayChanged(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return a.length!==o.length||a.some((d,g)=>!Object.is(d,o[g]))}var m=reactExports.createContext({});m.displayName="TeacherContext";const emptyComponents={},MDXContext=c.createContext(emptyComponents);function useMDXComponents(a){const o=c.useContext(MDXContext);return c.useMemo(function(){return typeof a=="function"?a(o):{...o,...a}},[o,a])}function MDXProvider(a){let o;return a.disableParentContext?o=typeof a.components=="function"?a.components(emptyComponents):a.components||emptyComponents:o=useMDXComponents(a.components),c.createElement(MDXContext.Provider,{value:o},a.children)}var FileSaver_min={exports:{}};(function(a,o){(function(d,g){g()})(commonjsGlobal,function(){function d(f,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(f.type)?new Blob(["\uFEFF",f],{type:f.type}):f}function g(f,s,i){var y=new XMLHttpRequest;y.open("GET",f),y.responseType="blob",y.onload=function(){F(y.response,s,i)},y.onerror=function(){console.error("could not download file")},y.send()}function S(f){var s=new XMLHttpRequest;s.open("HEAD",f,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function x(f){try{f.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),f.dispatchEvent(s)}}var I=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,$=I.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),F=I.saveAs||(typeof window!="object"||window!==I?function(){}:"download"in HTMLAnchorElement.prototype&&!$?function(f,s,i){var y=I.URL||I.webkitURL,_=document.createElement("a");s=s||f.name||"download",_.download=s,_.rel="noopener",typeof f=="string"?(_.href=f,_.origin===location.origin?x(_):S(_.href)?g(f,s,i):x(_,_.target="_blank")):(_.href=y.createObjectURL(f),setTimeout(function(){y.revokeObjectURL(_.href)},4e4),setTimeout(function(){x(_)},0))}:"msSaveOrOpenBlob"in navigator?function(f,s,i){if(s=s||f.name||"download",typeof f!="string")navigator.msSaveOrOpenBlob(d(f,i),s);else if(S(f))g(f,s,i);else{var y=document.createElement("a");y.href=f,y.target="_blank",setTimeout(function(){x(y)})}}:function(f,s,i,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof f=="string")return g(f,s,i);var _=f.type==="application/octet-stream",R=/constructor/i.test(I.HTMLElement)||I.safari,N=/CriOS\/[\d]+/.test(navigator.userAgent);if((N||_&&R||$)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var H=b.result;H=N?H:H.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=H:location=H,y=null},b.readAsDataURL(f)}else{var C=I.URL||I.webkitURL,j=C.createObjectURL(f);y?y.location=j:location.href=j,y=null,setTimeout(function(){C.revokeObjectURL(j)},4e4)}});I.saveAs=F.saveAs=F,a.exports=F})})(FileSaver_min);var jsInterpreter={exports:{}},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(a,o){if(a.indexOf)return a.indexOf(o);for(var d=0;d<a.length;d++)if(a[d]===o)return d;return-1},Object_keys=function(a){if(Object.keys)return Object.keys(a);var o=[];for(var d in a)o.push(d);return o},forEach=function(a,o){if(a.forEach)return a.forEach(o);for(var d=0;d<a.length;d++)o(a[d],d,a)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(a,o,d){Object.defineProperty(a,o,{writable:!0,enumerable:!1,configurable:!0,value:d})}}catch{return function(o,d,g){o[d]=g}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(o){if(!(this instanceof Script))return new Script(o);this.code=o};Script.prototype.runInContext=function(a){if(!(a instanceof Context))throw new TypeError("needs a 'context' argument.");var o=document.createElement("iframe");o.style||(o.style={}),o.style.display="none",document.body.appendChild(o);var d=o.contentWindow,g=d.eval,S=d.execScript;!g&&S&&(S.call(d,"null"),g=d.eval),forEach(Object_keys(a),function($){d[$]=a[$]}),forEach(globals,function($){a[$]&&(d[$]=a[$])});var x=Object_keys(d),I=g.call(d,this.code);return forEach(Object_keys(d),function($){($ in a||indexOf(x,$)===-1)&&(a[$]=d[$])}),forEach(globals,function($){$ in a||defineProp(a,$,d[$])}),document.body.removeChild(o),I},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(a){var o=Script.createContext(a),d=this.runInContext(o);return a&&forEach(Object_keys(o),function(g){a[g]=o[g]}),d},forEach(Object_keys(Script.prototype),function(a){exports[a]=Script[a]=function(o){var d=Script(o);return d[a].apply(d,[].slice.call(arguments,1))}}),exports.isContext=function(a){return a instanceof Context},exports.createScript=function(a){return exports.Script(a)},exports.createContext=Script.createContext=function(a){var o=new Context;return typeof a=="object"&&forEach(Object_keys(a),function(d){o[d]=a[d]}),o}}(vmBrowserify)),vmBrowserify}(function(a,o){(function(g,S){a.exports=S()})(commonjsGlobal,()=>(()=>{var d={"./original-repo/interpreter.js":function(I,$,F){var f=function(s,i){typeof s=="string"&&(s=this.parse_(s,"code"));var y=s.constructor;this.newNode=function(){return new y({options:{}})};var _=this.newNode();for(var R in s)_[R]=R==="body"?s[R].slice():s[R];this.ast=_,this.tasks=[],this.initFunc_=i,this.paused_=!1,this.polyfills_=[],this.functionCounter_=0,this.stepFunctions_=Object.create(null);var N=/^step([A-Z]\w*)$/,b;for(var C in this)typeof this[C]=="function"&&(b=C.match(N))&&(this.stepFunctions_[b[1]]=this[C].bind(this));this.globalScope=this.createScope(this.ast,null),this.globalObject=this.globalScope.object,this.ast=this.parse_(this.polyfills_.join(`
`),"polyfills"),this.polyfills_=void 0,f.stripLocations_(this.ast,void 0,void 0);var j=new f.State(this.ast,this.globalScope);j.done=!1,this.stateStack=[j],this.run(),this.value=void 0,this.ast=_,j=new f.State(this.ast,this.globalScope),j.done=!1,this.stateStack.length=0,this.stateStack[0]=j};f.Completion={NORMAL:0,BREAK:1,CONTINUE:2,RETURN:3,THROW:4},f.Status={DONE:0,STEP:1,TASK:2,ASYNC:3},f.PARSE_OPTIONS={locations:!0,ecmaVersion:5},f.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},f.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},f.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},f.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!1,enumerable:!1,writable:!1},f.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0},f.STEP_ERROR={STEP_ERROR:!0},f.SCOPE_REFERENCE={SCOPE_REFERENCE:!0},f.VALUE_IN_DESCRIPTOR={VALUE_IN_DESCRIPTOR:!0},f.REGEXP_TIMEOUT={REGEXP_TIMEOUT:!0},f.toStringCycles_=[],f.vm=null,f.currentInterpreter_=null,f.nativeGlobal=typeof globalThis>"u"?this:globalThis,f.WORKER_CODE=["onmessage = function(e) {","var result;","var data = e.data;","switch (data[0]) {","case 'split':","result = data[1].split(data[2], data[3]);","break;","case 'match':","result = data[1].match(data[2]);","break;","case 'search':","result = data[1].search(data[2]);","break;","case 'replace':","result = data[1].replace(data[2], data[3]);","break;","case 'exec':","var regexp = data[1];","regexp.lastIndex = data[2];","result = [regexp.exec(data[3]), data[1].lastIndex];","break;","default:","throw Error('Unknown RegExp operation: ' + data[0]);","}","postMessage(result);","close();","};"],f.legalArrayLength=function(s){var i=s>>>0;return i===Number(s)?i:NaN},f.legalArrayIndex=function(s){var i=s>>>0;return String(i)===String(s)&&i!==4294967295?i:NaN},f.stripLocations_=function(s,i,y){i?s.start=i:delete s.start,y?s.end=y:delete s.end;for(var _ in s)if(_!=="loc"&&s.hasOwnProperty(_)){var R=s[_];R&&typeof R=="object"&&f.stripLocations_(R,i,y)}},f.prototype.REGEXP_MODE=2,f.prototype.REGEXP_THREAD_TIMEOUT=1e3,f.prototype.POLYFILL_TIMEOUT=1e3,f.prototype.getterStep_=!1,f.prototype.setterStep_=!1,f.prototype.appendCodeNumber_=0,f.prototype.taskCodeNumber_=0,f.prototype.parse_=function(s,i){var y={};for(var _ in f.PARSE_OPTIONS)y[_]=f.PARSE_OPTIONS[_];return y.sourceFile=i,f.nativeGlobal.acorn.parse(s,y)},f.prototype.appendCode=function(s){var i=this.stateStack[0];if(!i||i.node.type!=="Program")throw Error("Expecting original AST to start with a Program node");if(typeof s=="string"&&(s=this.parse_(s,"appendCode"+this.appendCodeNumber_++)),!s||s.type!=="Program")throw Error("Expecting new AST to start with a Program node");this.populateScope_(s,i.scope),Array.prototype.push.apply(i.node.body,s.body),i.node.body.variableCache_=null,i.done=!1},f.prototype.step=function(){var s=this.stateStack,i;do{var y=s[s.length-1];if(this.paused_)return!0;if(!y||y.node.type==="Program"&&y.done){if(!this.tasks.length)return!1;if(y=this.nextTask_(),!y)return!0}var _=y.node,R=f.currentInterpreter_;f.currentInterpreter_=this;try{var N=this.stepFunctions_[_.type](s,y,_)}catch(b){if(b!==f.STEP_ERROR)throw this.value!==b&&(this.value=void 0),b}finally{f.currentInterpreter_=R}if(N&&s.push(N),this.getterStep_)throw this.value=void 0,Error("Getter not supported in this context");if(this.setterStep_)throw this.value=void 0,Error("Setter not supported in this context");!i&&!_.end&&(i=Date.now()+this.POLYFILL_TIMEOUT)}while(!_.end&&i>Date.now());return!0},f.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},f.prototype.getStatus=function(){if(this.paused_)return f.Status.ASYNC;var s=this.stateStack,i=s[s.length-1];if(i&&(i.node.type!=="Program"||!i.done))return f.Status.STEP;var y=this.tasks[0];return y?y.time>Date.now()?f.Status.TASK:f.Status.STEP:f.Status.DONE},f.prototype.initGlobal=function(s){this.setProperty(s,"NaN",NaN,f.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"Infinity",1/0,f.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"undefined",void 0,f.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"window",s,f.READONLY_DESCRIPTOR),this.setProperty(s,"this",s,f.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"self",s),this.OBJECT_PROTO=new f.Object(null),this.FUNCTION_PROTO=new f.Object(this.OBJECT_PROTO),this.initFunction(s),this.initObject(s),s.proto=this.OBJECT_PROTO,this.setProperty(s,"constructor",this.OBJECT,f.NONENUMERABLE_DESCRIPTOR),this.initArray(s),this.initString(s),this.initBoolean(s),this.initNumber(s),this.initDate(s),this.initRegExp(s),this.initError(s),this.initMath(s),this.initJSON(s);var i=this,y,_=this.createNativeFunction(function(b){throw EvalError("Can't happen")},!1);_.eval=!0,this.setProperty(s,"eval",_,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"parseInt",this.createNativeFunction(parseInt,!1),f.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"parseFloat",this.createNativeFunction(parseFloat,!1),f.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"isNaN",this.createNativeFunction(isNaN,!1),f.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"isFinite",this.createNativeFunction(isFinite,!1),f.NONENUMERABLE_DESCRIPTOR);for(var R=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],N=0;N<R.length;N++)y=function(b){return function(C){try{return b(C)}catch(j){i.throwException(i.URI_ERROR,j.message)}}}(R[N][0]),this.setProperty(s,R[N][1],this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR);y=function(C){return i.createTask_(!1,arguments)},this.setProperty(s,"setTimeout",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),y=function(C){return i.createTask_(!0,arguments)},this.setProperty(s,"setInterval",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),y=function(C){i.deleteTask_(C)},this.setProperty(s,"clearTimeout",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),y=function(C){i.deleteTask_(C)},this.setProperty(s,"clearInterval",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),this.OBJECT=this.OBJECT,this.OBJECT_PROTO=this.OBJECT_PROTO,this.FUNCTION=this.FUNCTION,this.FUNCTION_PROTO=this.FUNCTION_PROTO,this.ARRAY=this.ARRAY,this.ARRAY_PROTO=this.ARRAY_PROTO,this.REGEXP=this.REGEXP,this.REGEXP_PROTO=this.REGEXP_PROTO,this.DATE=this.DATE,this.DATE_PROTO=this.DATE_PROTO,this.initFunc_&&this.initFunc_(this,s)},f.prototype.functionCodeNumber_=0,f.prototype.initFunction=function(s){var i=this,y,_=/^[A-Za-z_$][\w$]*$/;y=function(N){if(arguments.length)var b=String(arguments[arguments.length-1]);else var b="";var C=Array.prototype.slice.call(arguments,0,-1).join(",").trim();if(C){for(var j=C.split(/\s*,\s*/),H=0;H<j.length;H++){var J=j[H];_.test(J)||i.throwException(i.SYNTAX_ERROR,"Invalid function argument: "+J)}C=j.join(", ")}try{var X=i.parse_("(function("+C+") {"+b+"})","function"+i.functionCodeNumber_++)}catch(ue){i.throwException(i.SYNTAX_ERROR,"Invalid code: "+ue.message)}X.body.length!==1&&i.throwException(i.SYNTAX_ERROR,"Invalid code in function body");var Q=X.body[0].expression;return i.createFunction(Q,i.globalScope,"anonymous")},this.FUNCTION=this.createNativeFunction(y,!0),this.setProperty(s,"Function",this.FUNCTION,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,f.NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.nativeFunc=function(){},this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++,this.FUNCTION_PROTO.illegalConstructor=!0,this.setProperty(this.FUNCTION_PROTO,"length",0,f.READONLY_NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.class="Function",y=function(N,b){var C=i.stateStack[i.stateStack.length-1];C.func_=this,C.funcThis_=N,C.arguments_=[],b!=null&&(b instanceof f.Object?C.arguments_=i.arrayPseudoToNative(b):i.throwException(i.TYPE_ERROR,"CreateListFromArrayLike called on non-object")),C.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",y),y=function(N){var b=i.stateStack[i.stateStack.length-1];b.func_=this,b.funcThis_=N,b.arguments_=[];for(var C=1;C<arguments.length;C++)b.arguments_.push(arguments[C]);b.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",y),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',","{configurable: true, writable: true, value:","function bind(oThis) {","if (typeof this !== 'function') {","throw TypeError('What is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),y=function(){return String(this)},this.setNativeFunctionPrototype(this.FUNCTION,"toString",y),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),y=function(){return this.valueOf()},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",y),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR)},f.prototype.initObject=function(s){var i=this,y;y=function(N){if(N==null)return i.calledWithNew()?this:i.createObjectProto(i.OBJECT_PROTO);if(!(N instanceof f.Object)){var b=i.createObjectProto(i.getPrototype(N));return b.data=N,b}return N},this.OBJECT=this.createNativeFunction(y,!0),this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"Object",this.OBJECT,f.NONENUMERABLE_DESCRIPTOR);var _=function(R){R==null&&i.throwException(i.TYPE_ERROR,"Cannot convert '"+R+"' to object")};y=function(N){_(N);var b=N instanceof f.Object?N.properties:N;return i.arrayNativeToPseudo(Object.getOwnPropertyNames(b))},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),y=function(N){return _(N),N instanceof f.Object&&(N=N.properties),i.arrayNativeToPseudo(Object.keys(N))},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),y=function(N){return N===null?i.createObjectProto(null):(N instanceof f.Object||i.throwException(i.TYPE_ERROR,"Object prototype may only be an Object or null, not "+N),i.createObjectProto(N))},this.setProperty(this.OBJECT,"create",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var create_ = Object.create;","Object.create = function create(proto, props) {","var obj = create_(proto);","props && Object.defineProperties(obj, props);","return obj;","};","})();",""),y=function(N,b,C){return b=String(b),N instanceof f.Object||i.throwException(i.TYPE_ERROR,"Object.defineProperty called on non-object: "+N),C instanceof f.Object||i.throwException(i.TYPE_ERROR,"Property description must be an object"),N.preventExtensions&&!(b in N.properties)&&i.throwException(i.TYPE_ERROR,"Can't define property '"+b+"', object is not extensible"),i.setProperty(N,b,f.VALUE_IN_DESCRIPTOR,C.properties),N},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var defineProperty_ = Object.defineProperty;","Object.defineProperty = function defineProperty(obj, prop, d1) {","var d2 = {};","if ('configurable' in d1) d2.configurable = d1.configurable;","if ('enumerable' in d1) d2.enumerable = d1.enumerable;","if ('writable' in d1) d2.writable = d1.writable;","if ('value' in d1) d2.value = d1.value;","if ('get' in d1) d2.get = d1.get;","if ('set' in d1) d2.set = d1.set;","return defineProperty_(obj, prop, d2);","};","})();","Object.defineProperty(Object, 'defineProperties',","{configurable: true, writable: true, value:","function defineProperties(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),y=function(N,b){if(N instanceof f.Object||i.throwException(i.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object: "+N),b=String(b),b in N.properties){var C=Object.getOwnPropertyDescriptor(N.properties,b),j=N.getter[b],H=N.setter[b],J=i.createObjectProto(i.OBJECT_PROTO);return j||H?(i.setProperty(J,"get",j),i.setProperty(J,"set",H)):(i.setProperty(J,"value",C.value),i.setProperty(J,"writable",C.writable)),i.setProperty(J,"configurable",C.configurable),i.setProperty(J,"enumerable",C.enumerable),J}},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),y=function(N){return _(N),i.getPrototype(N)},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),y=function(N){return!!N&&!N.preventExtensions},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),y=function(N){return N instanceof f.Object&&(N.preventExtensions=!0),N},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),this.setNativeFunctionPrototype(this.OBJECT,"toString",f.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",f.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"valueOf",f.Object.prototype.valueOf),y=function(N){return _(this),this instanceof f.Object?String(N)in this.properties:this.hasOwnProperty(N)},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",y),y=function(N){return _(this),this instanceof f.Object?Object.prototype.propertyIsEnumerable.call(this.properties,N):this.propertyIsEnumerable(N)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",y),y=function(N){for(;;){if(N=i.getPrototype(N),!N)return!1;if(N===this)return!0}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",y)},f.prototype.initArray=function(s){var i=this,y;y=function(R){if(i.calledWithNew())var N=this;else var N=i.createArray();var b=arguments[0];if(arguments.length===1&&typeof b=="number")isNaN(f.legalArrayLength(b))&&i.throwException(i.RANGE_ERROR,"Invalid array length: "+b),N.properties.length=b;else{for(var C=0;C<arguments.length;C++)N.properties[C]=arguments[C];N.properties.length=C}return N},this.ARRAY=this.createNativeFunction(y,!0),this.ARRAY_PROTO=this.ARRAY.properties.prototype,this.setProperty(s,"Array",this.ARRAY,f.NONENUMERABLE_DESCRIPTOR),y=function(R){return R&&R.class==="Array"},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ARRAY_PROTO,"length",0,{configurable:!1,enumerable:!1,writable:!0}),this.ARRAY_PROTO.class="Array",this.polyfills_.push("(function() {","function createArrayMethod_(f) {","Object.defineProperty(Array.prototype, f.name,","{configurable: true, writable: true, value: f});","}","createArrayMethod_(","function pop() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","len--;","var x = o[len];","delete o[len];","o.length = len;","return x;","}",");","createArrayMethod_(","function push(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","for (var i = 0; i < arguments.length; i++) {","o[len] = arguments[i];","len++;","}","o.length = len;","return len;","}",");","createArrayMethod_(","function shift() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","var value = o[0];","for (var i = 0; i < len - 1; i++) {","if ((i + 1) in o) {","o[i] = o[i + 1];","} else {","delete o[i];","}","}","delete o[i];","o.length = len - 1;","return value;","}",");","createArrayMethod_(","function unshift(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","len = 0;","}","for (var i = len - 1; i >= 0; i--) {","if (i in o) {","o[i + arguments.length] = o[i];","} else {","delete o[i + arguments.length];","}","}","for (var i = 0; i < arguments.length; i++) {","o[i] = arguments[i];","}","return (o.length = len + arguments.length);","}",");","createArrayMethod_(","function reverse() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 2) {","return o;","}","for (var i = 0; i < len / 2 - 0.5; i++) {","var x = o[i];","var hasX = i in o;","if ((len - i - 1) in o) {","o[i] = o[len - i - 1];","} else {","delete o[i];","}","if (hasX) {","o[len - i - 1] = x;","} else {","delete o[len - i - 1];","}","}","return o;","}",");","createArrayMethod_(","function indexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var n = fromIndex | 0;","if (!len || n >= len) {","return -1;","}","var i = Math.max(n >= 0 ? n : len - Math.abs(n), 0);","while (i < len) {","if (i in o && o[i] === searchElement) {","return i;","}","i++;","}","return -1;","}",");","createArrayMethod_(","function lastIndexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len) {","return -1;","}","var n = len - 1;","if (arguments.length > 1) {","n = fromIndex | 0;","if (n) {","n = (n > 0 || -1) * Math.floor(Math.abs(n));","}","}","var i = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);","while (i >= 0) {","if (i in o && o[i] === searchElement) {","return i;","}","i--;","}","return -1;","}",");","createArrayMethod_(","function slice(start, end) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","start = (start >= 0) ? start : Math.max(0, len + start);","if (typeof end !== 'undefined') {","if (end !== Infinity) {","end |= 0;","}","if (end < 0) {","end = len + end;","} else {","end = Math.min(end, len);","}","} else {","end = len;","}","var size = end - start;","var cloned = new Array(size);","for (var i = 0; i < size; i++) {","if ((start + i) in o) {","cloned[i] = o[start + i];","}","}","return cloned;","}",");","createArrayMethod_(","function splice(start, deleteCount, var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","if (start < 0) {","start = Math.max(len + start, 0);","} else {","start = Math.min(start, len);","}","if (arguments.length < 1) {","deleteCount = len - start;","} else {","deleteCount |= 0;","deleteCount = Math.max(0, Math.min(deleteCount, len - start));","}","var removed = [];","for (var i = start; i < start + deleteCount; i++) {","if (i in o) {","removed.push(o[i]);","} else {","removed.length++;","}","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = start + deleteCount; i < len - deleteCount; i++) {","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = len - deleteCount; i < len; i++) {","delete o[i];","}","len -= deleteCount;","var arl = arguments.length - 2;","for (var i = len - 1; i >= start; i--) {","if (i in o) {","o[i + arl] = o[i];","} else {","delete o[i + arl];","}","}","len += arl;","for (var i = 2; i < arguments.length; i++) {","o[start + i - 2] = arguments[i];","}","o.length = len;","return removed;","}",");","createArrayMethod_(","function concat(var_args) {","if (!this) throw TypeError();","var o = Object(this);","var cloned = [];","for (var i = -1; i < arguments.length; i++) {","var value = (i === -1) ? o : arguments[i];","if (Array.isArray(value)) {","for (var j = 0, l = value.length; j < l; j++) {","if (j in value) {","cloned.push(value[j]);","} else {","cloned.length++;","}","}","} else {","cloned.push(value);","}","}","return cloned;","}",");","createArrayMethod_(","function join(opt_separator) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var sep = typeof opt_separator === 'undefined' ?","',' : ('' + opt_separator);","var str = '';","for (var i = 0; i < len; i++) {","if (i && sep) str += sep;","str += (o[i] === null || o[i] === undefined) ? '' : o[i];","}","return str;","}",");","createArrayMethod_(","function every(callbackfn, thisArg) {","if (!this || typeof callbackfn !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o && !callbackfn.call(t, o[k], k, o)) return false;","k++;","}","return true;","}",");","createArrayMethod_(","function filter(fun, var_args) {","if (this === void 0 || this === null || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o) {","var val = o[i];","if (fun.call(thisArg, val, i, o)) res.push(val);","}","}","return res;","}",");","createArrayMethod_(","function forEach(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o) callback.call(t, o[k], k, o);","k++;","}","}",");","createArrayMethod_(","function map(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","var a = new Array(len);","while (k < len) {","if (k in o) a[k] = callback.call(t, o[k], k, o);","k++;","}","return a;","}",");","createArrayMethod_(","function reduce(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = 0, value;","if (arguments.length === 2) {","value = arguments[1];","} else {","while (k < len && !(k in o)) k++;","if (k >= len) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k++];","}","for (; k < len; k++) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function reduceRight(callback /*, initialValue*/) {","if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in o)) k--;","if (k < 0) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k--];","}","for (; k >= 0; k--) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function some(fun/*, thisArg*/) {","if (!this || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o && fun.call(thisArg, o[i], i, o)) return true;","}","return false;","}",");","createArrayMethod_(","function sort(opt_comp) {","if (!this) throw TypeError();","if (typeof opt_comp !== 'function') {","opt_comp = undefined;","}","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp ? (opt_comp(this[j], this[j + 1]) > 0) :","(String(this[j]) > String(this[j + 1]))) {","var swap = this[j];","var hasSwap = j in this;","if ((j + 1) in this) {","this[j] = this[j + 1];","} else {","delete this[j];","}","if (hasSwap) {","this[j + 1] = swap;","} else {","delete this[j + 1];","}","changes++;","}","}","if (!changes) break;","}","return this;","}",");","createArrayMethod_(","function toLocaleString() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var out = [];","for (var i = 0; i < len; i++) {","out[i] = (o[i] === null || o[i] === undefined) ? '' : o[i].toLocaleString();","}","return out.join(',');","}",");","})();","")},f.prototype.initString=function(s){var i=this,y;y=function(b){return b=arguments.length?f.nativeGlobal.String(b):"",i.calledWithNew()?(this.data=b,this):b},this.STRING=this.createNativeFunction(y,!0),this.setProperty(s,"String",this.STRING,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),f.NONENUMERABLE_DESCRIPTOR);for(var _=["charAt","charCodeAt","concat","indexOf","lastIndexOf","slice","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],R=0;R<_.length;R++)this.setNativeFunctionPrototype(this.STRING,_[R],String.prototype[_[R]]);y=function(b,C,j){C=i.pseudoToNative(C),j=i.pseudoToNative(j);try{return String(this).localeCompare(b,C,j)}catch(H){i.throwException(i.ERROR,"localeCompare: "+H.message)}},this.setNativeFunctionPrototype(this.STRING,"localeCompare",y),y=function(b,C,j){var H=String(this);if(C=C?Number(C):void 0,i.isa(b,i.REGEXP)&&(b=b.data,i.maybeThrowRegExp(b,j),i.REGEXP_MODE===2)){if(f.vm){var J={string:H,separator:b,limit:C},X="string.split(separator, limit)",oe=i.vmCall(X,J,b,j);oe!==f.REGEXP_TIMEOUT&&j(i.arrayNativeToPseudo(oe))}else{var Q=i.createWorker(),ue=i.regExpTimeout(b,Q,j);Q.onmessage=function(ge){clearTimeout(ue),j(i.arrayNativeToPseudo(ge.data))},Q.postMessage(["split",H,b,C])}return}var oe=H.split(b,C);j(i.arrayNativeToPseudo(oe))},this.setAsyncFunctionPrototype(this.STRING,"split",y),y=function(b,C){var j=String(this);if(b=i.isa(b,i.REGEXP)?b.data:new RegExp(b),i.maybeThrowRegExp(b,C),i.REGEXP_MODE===2){if(f.vm){var H={string:j,regexp:b},J="string.match(regexp)",ue=i.vmCall(J,H,b,C);ue!==f.REGEXP_TIMEOUT&&C(ue&&i.arrayNativeToPseudo(ue))}else{var X=i.createWorker(),Q=i.regExpTimeout(b,X,C);X.onmessage=function(oe){clearTimeout(Q),C(oe.data&&i.arrayNativeToPseudo(oe.data))},X.postMessage(["match",j,b])}return}var ue=j.match(b);C(ue&&i.arrayNativeToPseudo(ue))},this.setAsyncFunctionPrototype(this.STRING,"match",y),y=function(b,C){var j=String(this);if(i.isa(b,i.REGEXP)?b=b.data:b=new RegExp(b),i.maybeThrowRegExp(b,C),i.REGEXP_MODE===2){if(f.vm){var H={string:j,regexp:b},J="string.search(regexp)",X=i.vmCall(J,H,b,C);X!==f.REGEXP_TIMEOUT&&C(X)}else{var Q=i.createWorker(),ue=i.regExpTimeout(b,Q,C);Q.onmessage=function(oe){clearTimeout(ue),C(oe.data)},Q.postMessage(["search",j,b])}return}C(j.search(b))},this.setAsyncFunctionPrototype(this.STRING,"search",y),y=function(b,C,j){var H=String(this);if(C=String(C),i.isa(b,i.REGEXP)&&(b=b.data,i.maybeThrowRegExp(b,j),i.REGEXP_MODE===2)){if(f.vm){var J={string:H,substr:b,newSubstr:C},X="string.replace(substr, newSubstr)",Q=i.vmCall(X,J,b,j);Q!==f.REGEXP_TIMEOUT&&j(Q)}else{var ue=i.createWorker(),oe=i.regExpTimeout(b,ue,j);ue.onmessage=function(ge){clearTimeout(oe),j(ge.data)},ue.postMessage(["replace",H,b,C])}return}j(H.replace(b,C))},this.setAsyncFunctionPrototype(this.STRING,"replace",y),this.polyfills_.push("(function() {","var replace_ = String.prototype.replace;","String.prototype.replace = function replace(substr, newSubstr) {","if (typeof newSubstr !== 'function') {","return replace_.call(this, substr, newSubstr);","}","var str = this;","if (substr instanceof RegExp) {","var subs = [];","var m = substr.exec(str);","while (m) {","m.push(m.index, str);","var inject = newSubstr.apply(null, m);","subs.push([m.index, m[0].length, inject]);","m = substr.global ? substr.exec(str) : null;","}","for (var i = subs.length - 1; i >= 0; i--) {","str = str.substring(0, subs[i][0]) + subs[i][2] + str.substring(subs[i][0] + subs[i][1]);","}","} else {","var i = str.indexOf(substr);","if (i !== -1) {","var inject = newSubstr(str.substr(i, substr.length), i, str);","str = str.substring(0, i) + inject + str.substring(i + substr.length);","}","}","return str;","};","})();","")},f.prototype.initBoolean=function(s){var i=this,y;y=function(R){return R=f.nativeGlobal.Boolean(R),i.calledWithNew()?(this.data=R,this):R},this.BOOLEAN=this.createNativeFunction(y,!0),this.setProperty(s,"Boolean",this.BOOLEAN,f.NONENUMERABLE_DESCRIPTOR)},f.prototype.initNumber=function(s){var i=this,y;y=function(b){return b=arguments.length?f.nativeGlobal.Number(b):0,i.calledWithNew()?(this.data=b,this):b},this.NUMBER=this.createNativeFunction(y,!0),this.setProperty(s,"Number",this.NUMBER,f.NONENUMERABLE_DESCRIPTOR);for(var _=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],R=0;R<_.length;R++)this.setProperty(this.NUMBER,_[R],Number[_[R]],f.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);y=function(b){try{return Number(this).toExponential(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",y),y=function(b){try{return Number(this).toFixed(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",y),y=function(b){try{return Number(this).toPrecision(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",y),y=function(b){try{return Number(this).toString(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toString",y),y=function(b,C){b=b?i.pseudoToNative(b):void 0,C=C?i.pseudoToNative(C):void 0;try{return Number(this).toLocaleString(b,C)}catch(j){i.throwException(i.ERROR,"toLocaleString: "+j.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",y)},f.prototype.initDate=function(s){var i=this,y;y=function(b,C){if(!i.calledWithNew())return f.nativeGlobal.Date();var j=[null].concat(Array.from(arguments));return this.data=new(Function.prototype.bind.apply(f.nativeGlobal.Date,j)),this},this.DATE=this.createNativeFunction(y,!0),this.DATE_PROTO=this.DATE.properties.prototype,this.setProperty(s,"Date",this.DATE,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,!1),f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),f.NONENUMERABLE_DESCRIPTOR);for(var _=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toISOString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],R=0;R<_.length;R++)y=function(N){return function(b){var C=this.data;C instanceof Date||i.throwException(i.TYPE_ERROR,N+" not called on a Date");for(var j=[],H=0;H<arguments.length;H++)j[H]=i.pseudoToNative(arguments[H]);return C[N].apply(C,j)}}(_[R]),this.setNativeFunctionPrototype(this.DATE,_[R],y)},f.prototype.initRegExp=function(s){var i=this,y;y=function(R,N){if(i.calledWithNew())var b=this;else{if(N===void 0&&i.isa(R,i.REGEXP))return R;var b=i.createObjectProto(i.REGEXP_PROTO)}R=R===void 0?"":String(R),N=N?String(N):"",/^[gmi]*$/.test(N)||i.throwException(i.SYNTAX_ERROR,"Invalid regexp flag: "+N);try{var C=new f.nativeGlobal.RegExp(R,N)}catch(j){i.throwException(i.SYNTAX_ERROR,j.message)}return i.populateRegExp(b,C),b},this.REGEXP=this.createNativeFunction(y,!0),this.REGEXP_PROTO=this.REGEXP.properties.prototype,this.setProperty(s,"RegExp",this.REGEXP,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"global",void 0,f.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,f.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,f.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source","(?:)",f.READONLY_NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("Object.defineProperty(RegExp.prototype, 'test',","{configurable: true, writable: true, value:","function test(str) {","return !!this.exec(str);","}","});"),y=function(R,N){var b=this.data;if(R=String(R),b.lastIndex=Number(i.getProperty(this,"lastIndex")),i.maybeThrowRegExp(b,N),i.REGEXP_MODE===2){if(f.vm){var C={string:R,regexp:b},j="regexp.exec(string)",Q=i.vmCall(j,C,b,N);Q!==f.REGEXP_TIMEOUT&&(i.setProperty(this,"lastIndex",b.lastIndex),N(ue(Q)))}else{var H=i.createWorker(),J=i.regExpTimeout(b,H,N),X=this;H.onmessage=function(oe){clearTimeout(J),i.setProperty(X,"lastIndex",oe.data[1]),N(ue(oe.data[0]))},H.postMessage(["exec",b,b.lastIndex,R])}return}var Q=b.exec(R);i.setProperty(this,"lastIndex",b.lastIndex),N(ue(Q));function ue(oe){if(oe){var ge=i.arrayNativeToPseudo(oe);return i.setProperty(ge,"index",oe.index),i.setProperty(ge,"input",oe.input),ge}return null}},this.setAsyncFunctionPrototype(this.REGEXP,"exec",y)},f.prototype.initError=function(s){var i=this;this.ERROR=this.createNativeFunction(function(R){if(i.calledWithNew())var N=this;else var N=i.createObject(i.ERROR);return i.populateError(N,R),N},!0),this.setProperty(s,"Error",this.ERROR,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"message","",f.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name","Error",f.NONENUMERABLE_DESCRIPTOR);var y=function(_){var R=i.createNativeFunction(function(N){if(i.calledWithNew())var b=this;else var b=i.createObject(R);return i.populateError(b,N),b},!0);return i.setProperty(R,"prototype",i.createObject(i.ERROR),f.NONENUMERABLE_DESCRIPTOR),i.setProperty(R.properties.prototype,"name",_,f.NONENUMERABLE_DESCRIPTOR),i.setProperty(s,_,R,f.NONENUMERABLE_DESCRIPTOR),R};this.EVAL_ERROR=y("EvalError"),this.RANGE_ERROR=y("RangeError"),this.REFERENCE_ERROR=y("ReferenceError"),this.SYNTAX_ERROR=y("SyntaxError"),this.TYPE_ERROR=y("TypeError"),this.URI_ERROR=y("URIError")},f.prototype.initMath=function(s){var i=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(s,"Math",i,f.NONENUMERABLE_DESCRIPTOR);for(var y=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],_=0;_<y.length;_++)this.setProperty(i,y[_],Math[y[_]],f.READONLY_NONENUMERABLE_DESCRIPTOR);for(var R=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"],_=0;_<R.length;_++)this.setProperty(i,R[_],this.createNativeFunction(Math[R[_]],!1),f.NONENUMERABLE_DESCRIPTOR)},f.prototype.initJSON=function(s){var i,y=this,_=y.createObjectProto(this.OBJECT_PROTO);this.setProperty(s,"JSON",_,f.NONENUMERABLE_DESCRIPTOR),i=function(N){try{var b=JSON.parse(String(N))}catch(C){y.throwException(y.SYNTAX_ERROR,C.message)}return y.nativeToPseudo(b)},this.setProperty(_,"parse",this.createNativeFunction(i,!1)),i=function(N,b,C){b&&b.class==="Function"?y.throwException(y.TYPE_ERROR,"Function replacer on JSON.stringify not supported"):b&&b.class==="Array"?(b=y.arrayPseudoToNative(b),b=b.filter(function(J){return typeof J=="string"||typeof J=="number"})):b=null,typeof C!="string"&&typeof C!="number"&&(C=void 0);var j=y.pseudoToNative(N);try{var H=JSON.stringify(j,b,C)}catch(J){y.throwException(y.TYPE_ERROR,J.message)}return H},this.setProperty(_,"stringify",this.createNativeFunction(i,!1))},f.prototype.isa=function(s,i){if(s==null||!i)return!1;var y=i.properties.prototype;if(s===y)return!0;for(s=this.getPrototype(s);s;){if(s===y)return!0;s=s.proto}return!1},f.prototype.populateRegExp=function(s,i){s.data=new RegExp(i.source,i.flags),this.setProperty(s,"lastIndex",i.lastIndex,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"source",i.source,f.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"global",i.global,f.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"ignoreCase",i.ignoreCase,f.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"multiline",i.multiline,f.READONLY_NONENUMERABLE_DESCRIPTOR)},f.prototype.populateError=function(s,i){i&&this.setProperty(s,"message",String(i),f.NONENUMERABLE_DESCRIPTOR);for(var y=[],_=this.stateStack.length-1;_>=0;_--){var R=this.stateStack[_],N=R.node;if(N.type==="CallExpression"){var b=R.func_;b&&y.length&&(y[y.length-1].datumName=this.getProperty(b,"name"))}N.loc&&(!y.length||N.type==="CallExpression")&&y.push({datumLoc:N.loc})}for(var C=String(this.getProperty(s,"name")),j=String(this.getProperty(s,"message")),H=C+": "+j+`
`,_=0;_<y.length;_++){var J=y[_].datumLoc,X=y[_].datumName,Q=J.source+":"+J.start.line+":"+J.start.column;X?H+="  at "+X+" ("+Q+`)
`:H+="  at "+Q+`
`}this.setProperty(s,"stack",H.trim(),f.NONENUMERABLE_DESCRIPTOR)},f.prototype.createWorker=function(){var s=this.createWorker.blob_;return s||(s=new Blob([f.WORKER_CODE.join(`
`)],{type:"application/javascript"}),this.createWorker.blob_=s),new Worker(URL.createObjectURL(s))},f.prototype.vmCall=function(s,i,y,_){var R={timeout:this.REGEXP_THREAD_TIMEOUT};try{return f.vm.runInNewContext(s,i,R)}catch{_(null),this.throwException(this.ERROR,"RegExp Timeout: "+y)}return f.REGEXP_TIMEOUT},f.prototype.maybeThrowRegExp=function(s,i){var y;if(this.REGEXP_MODE===0)y=!1;else if(this.REGEXP_MODE===1)y=!0;else if(f.vm)y=!0;else if(typeof Worker=="function"&&typeof URL=="function")y=!0;else{try{f.vm=F("vm")}catch{}y=!!f.vm}y||(i(null),this.throwException(this.ERROR,"Regular expressions not supported: "+s))},f.prototype.regExpTimeout=function(s,i,y){var _=this;return setTimeout(function(){i.terminate(),y(null);try{_.throwException(_.ERROR,"RegExp Timeout: "+s)}catch{}},this.REGEXP_THREAD_TIMEOUT)},f.prototype.createObject=function(s){return this.createObjectProto(s&&s.properties.prototype)},f.prototype.createObjectProto=function(s){if(typeof s!="object")throw Error("Non object prototype");var i=new f.Object(s);return this.isa(i,this.ERROR)&&(i.class="Error"),i},f.prototype.createArray=function(){var s=this.createObjectProto(this.ARRAY_PROTO);return this.setProperty(s,"length",0,{configurable:!1,enumerable:!1,writable:!0}),s.class="Array",s},f.prototype.createFunctionBase_=function(s,i){var y=this.createObjectProto(this.FUNCTION_PROTO);if(i){var _=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(y,"prototype",_,f.NONENUMERABLE_DESCRIPTOR),this.setProperty(_,"constructor",y,f.NONENUMERABLE_DESCRIPTOR)}else y.illegalConstructor=!0;return this.setProperty(y,"length",s,f.READONLY_NONENUMERABLE_DESCRIPTOR),y.class="Function",y},f.prototype.createFunction=function(s,i,y){var _=this.createFunctionBase_(s.params.length,!0);_.parentScope=i,_.node=s;var R=s.id?String(s.id.name):y||"";return this.setProperty(_,"name",R,f.READONLY_NONENUMERABLE_DESCRIPTOR),_},f.prototype.createNativeFunction=function(s,i){var y=this.createFunctionBase_(s.length,i);return y.nativeFunc=s,s.id=this.functionCounter_++,this.setProperty(y,"name",s.name,f.READONLY_NONENUMERABLE_DESCRIPTOR),y},f.prototype.createAsyncFunction=function(s){var i=this.createFunctionBase_(s.length,!0);return i.asyncFunc=s,s.id=this.functionCounter_++,this.setProperty(i,"name",s.name,f.READONLY_NONENUMERABLE_DESCRIPTOR),i},f.prototype.nativeToPseudo=function(s){if(s instanceof f.Object)throw Error("Object is already pseudo");if(s==null||s===!0||s===!1||typeof s=="string"||typeof s=="number")return s;if(s instanceof RegExp){var i=this.createObjectProto(this.REGEXP_PROTO);return this.populateRegExp(i,s),i}if(s instanceof Date){var y=this.createObjectProto(this.DATE_PROTO);return y.data=new Date(s.valueOf()),y}if(typeof s=="function"){var _=this,R=function(){var J=Array.prototype.slice.call(arguments).map(function(Q){return _.pseudoToNative(Q)}),X=s.apply(_,J);return _.nativeToPseudo(X)},N=Object.getOwnPropertyDescriptor(s,"prototype");return this.createNativeFunction(R,!!N)}if(Array.isArray(s)){for(var b=this.createArray(),C=0;C<s.length;C++)C in s&&this.setProperty(b,C,this.nativeToPseudo(s[C]));return b}var j=this.createObjectProto(this.OBJECT_PROTO);for(var H in s)this.setProperty(j,H,this.nativeToPseudo(s[H]));return j},f.prototype.pseudoToNative=function(s,i){if(typeof s!="object"&&typeof s!="function"||s===null)return s;if(!(s instanceof f.Object))throw Error("Object is not pseudo");if(this.isa(s,this.REGEXP)){var y=new RegExp(s.data.source,s.data.flags);return y.lastIndex=s.data.lastIndex,y}if(this.isa(s,this.DATE))return new Date(s.data.valueOf());var _=i||{pseudo:[],native:[]},R=_.pseudo.indexOf(s);if(R!==-1)return _.native[R];_.pseudo.push(s);var N;if(this.isa(s,this.ARRAY)){N=[],_.native.push(N);for(var b=this.getProperty(s,"length"),C=0;C<b;C++)this.hasProperty(s,C)&&(N[C]=this.pseudoToNative(this.getProperty(s,C),_))}else{N={},_.native.push(N);var j;for(var H in s.properties)j=this.pseudoToNative(s.properties[H],_),Object.defineProperty(N,H,{value:j,writable:!0,enumerable:!0,configurable:!0})}return _.pseudo.pop(),_.native.pop(),N},f.prototype.arrayNativeToPseudo=function(s){for(var i=this.createArray(),y=Object.getOwnPropertyNames(s),_=0;_<y.length;_++)this.setProperty(i,y[_],s[y[_]]);return i},f.prototype.arrayPseudoToNative=function(s){var i=[];for(var y in s.properties)i[y]=this.getProperty(s,y);return i.length=f.legalArrayLength(this.getProperty(s,"length"))||0,i},f.prototype.getPrototype=function(s){switch(typeof s){case"number":return this.NUMBER.properties.prototype;case"boolean":return this.BOOLEAN.properties.prototype;case"string":return this.STRING.properties.prototype}return s?s.proto:null},f.prototype.getProperty=function(s,i){if(this.getterStep_)throw Error("Getter not supported in that context");if(i=String(i),s==null&&this.throwException(this.TYPE_ERROR,"Cannot read property '"+i+"' of "+s),typeof s=="object"&&!(s instanceof f.Object))throw TypeError("Expecting native value or pseudo object");if(i==="length"){if(this.isa(s,this.STRING))return String(s).length}else if(i.charCodeAt(0)<64&&this.isa(s,this.STRING)){var y=f.legalArrayIndex(i);if(!isNaN(y)&&y<String(s).length)return String(s)[y]}do if(s.properties&&i in s.properties){var _=s.getter[i];return _?(this.getterStep_=!0,_):s.properties[i]}while(s=this.getPrototype(s))},f.prototype.hasProperty=function(s,i){if(!(s instanceof f.Object))throw TypeError("Primitive data type has no properties");if(i=String(i),i==="length"&&this.isa(s,this.STRING))return!0;if(this.isa(s,this.STRING)){var y=f.legalArrayIndex(i);if(!isNaN(y)&&y<String(s).length)return!0}do if(s.properties&&i in s.properties)return!0;while(s=this.getPrototype(s));return!1},f.prototype.setProperty=function(s,i,y,_){if(this.setterStep_)throw Error("Setter not supported in that context");if(i=String(i),s==null&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+i+"' of "+s),typeof s=="object"&&!(s instanceof f.Object))throw TypeError("Expecting native value or pseudo object");_&&("get"in _||"set"in _)&&("value"in _||"writable"in _)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var R=!this.stateStack||this.getScope().strict;if(!(s instanceof f.Object)){R&&this.throwException(this.TYPE_ERROR,"Can't create property '"+i+"' on '"+s+"'");return}if(this.isa(s,this.STRING)){var N=f.legalArrayIndex(i);if(i==="length"||!isNaN(N)&&N<String(s).length){R&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+i+"' of String '"+s.data+"'");return}}if(s.class==="Array"){var b=s.properties.length,C;if(i==="length"){if(_){if(!("value"in _))return;y=_.value}if(y=f.legalArrayLength(y),isNaN(y)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),y<b)for(C in s.properties)C=f.legalArrayIndex(C),!isNaN(C)&&y<=C&&delete s.properties[C]}else isNaN(C=f.legalArrayIndex(i))||(s.properties.length=Math.max(b,C+1))}if(s.preventExtensions&&!(i in s.properties)){R&&this.throwException(this.TYPE_ERROR,"Can't add property '"+i+"', object is not extensible");return}if(_){var j={};"get"in _&&_.get&&(s.getter[i]=_.get,j.get=this.setProperty.placeholderGet_),"set"in _&&_.set&&(s.setter[i]=_.set,j.set=this.setProperty.placeholderSet_),"configurable"in _&&(j.configurable=_.configurable),"enumerable"in _&&(j.enumerable=_.enumerable),"writable"in _&&(j.writable=_.writable,delete s.getter[i],delete s.setter[i]),"value"in _?(j.value=_.value,delete s.getter[i],delete s.setter[i]):y!==f.VALUE_IN_DESCRIPTOR&&(j.value=y,delete s.getter[i],delete s.setter[i]);try{Object.defineProperty(s.properties,i,j)}catch{this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+i)}"get"in _&&!_.get&&delete s.getter[i],"set"in _&&!_.set&&delete s.setter[i]}else{if(y===f.VALUE_IN_DESCRIPTOR)throw ReferenceError("Value not specified");for(var H=s;!(i in H.properties);)if(H=this.getPrototype(H),!H){H=s;break}if(H.setter&&H.setter[i])return this.setterStep_=!0,H.setter[i];if(H.getter&&H.getter[i])R&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+i+"' of object '"+s+"' which only has a getter");else try{s.properties[i]=y}catch{R&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+i+"' of object '"+s+"'")}}},f.prototype.setProperty.placeholderGet_=function(){throw Error("Placeholder getter")},f.prototype.setProperty.placeholderSet_=function(){throw Error("Placeholder setter")},f.prototype.setNativeFunctionPrototype=function(s,i,y){this.setProperty(s.properties.prototype,i,this.createNativeFunction(y,!1),f.NONENUMERABLE_DESCRIPTOR)},f.prototype.setAsyncFunctionPrototype=function(s,i,y){this.setProperty(s.properties.prototype,i,this.createAsyncFunction(y),f.NONENUMERABLE_DESCRIPTOR)},f.prototype.getScope=function(){var s=this.stateStack[this.stateStack.length-1].scope;if(!s)throw Error("No scope found");return s},f.prototype.createScope=function(s,i){var y=!1;if(i&&i.strict)y=!0;else{var _=s.body&&s.body[0];_&&_.expression&&_.expression.type==="Literal"&&_.expression.value==="use strict"&&(y=!0)}var R=this.createObjectProto(null),N=new f.Scope(i,y,R);return i||this.initGlobal(N.object),this.populateScope_(s,N),N},f.prototype.createSpecialScope=function(s,i){if(!s)throw Error("parentScope required");var y=i||this.createObjectProto(null);return new f.Scope(s,s.strict,y)},f.prototype.getValueFromScope=function(s){for(var i=this.getScope();i&&i!==this.globalScope;){if(s in i.object.properties)return i.object.properties[s];i=i.parentScope}if(i===this.globalScope&&this.hasProperty(i.object,s))return this.getProperty(i.object,s);var y=this.stateStack[this.stateStack.length-1].node;y.type==="UnaryExpression"&&y.operator==="typeof"||this.throwException(this.REFERENCE_ERROR,s+" is not defined")},f.prototype.setValueToScope=function(s,i){for(var y=this.getScope(),_=y.strict;y&&y!==this.globalScope;){if(s in y.object.properties){try{y.object.properties[s]=i}catch{_&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only variable '"+s+"'")}return}y=y.parentScope}if(y===this.globalScope&&(!_||this.hasProperty(y.object,s)))return this.setProperty(y.object,s,i);this.throwException(this.REFERENCE_ERROR,s+" is not defined")},f.prototype.populateScope_=function(s,i){var y;if(s.variableCache_)y=s.variableCache_;else{switch(y=Object.create(null),s.type){case"VariableDeclaration":for(var _=0;_<s.declarations.length;_++)y[s.declarations[_].id.name]=!0;break;case"FunctionDeclaration":y[s.id.name]=s;break;case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"Program":case"SwitchCase":case"SwitchStatement":case"TryStatement":case"WithStatement":case"WhileStatement":var R=s.constructor;for(var N in s)if(N!=="loc"){var b=s[N];if(b&&typeof b=="object"){var C;if(Array.isArray(b)){for(var _=0;_<b.length;_++)if(b[_]&&b[_].constructor===R){C=this.populateScope_(b[_],i);for(var N in C)y[N]=C[N]}}else if(b.constructor===R){C=this.populateScope_(b,i);for(var N in C)y[N]=C[N]}}}}s.variableCache_=y}for(var N in y)y[N]===!0?this.setProperty(i.object,N,void 0,f.VARIABLE_DESCRIPTOR):this.setProperty(i.object,N,this.createFunction(y[N],i),f.VARIABLE_DESCRIPTOR);return y},f.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor},f.prototype.getValue=function(s){return s[0]===f.SCOPE_REFERENCE?this.getValueFromScope(s[1]):this.getProperty(s[0],s[1])},f.prototype.setValue=function(s,i){return s[0]===f.SCOPE_REFERENCE?this.setValueToScope(s[1],i):this.setProperty(s[0],s[1],i)},f.prototype.throwException=function(s,i){if(!this.globalScope)throw i===void 0?s:i;if(i===void 0||!(s instanceof f.Object))var y=s;else{var y=this.createObject(s);this.populateError(y,i)}throw this.unwind(f.Completion.THROW,y,void 0),f.STEP_ERROR},f.prototype.unwind=function(s,i,y){if(s===f.Completion.NORMAL)throw TypeError("Should not unwind for NORMAL completions");e:for(var _=this.stateStack;_.length>0;_.pop()){var R=_[_.length-1];switch(R.node.type){case"TryStatement":R.cv={type:s,value:i,label:y};return;case"CallExpression":case"NewExpression":if(s===f.Completion.RETURN){R.value=i;return}else if(s!==f.Completion.THROW)throw Error("Unsyntactic break/continue not rejected by Acorn");break;case"Program":R.done=!0;break e}if(s===f.Completion.BREAK){if(y?R.labels&&R.labels.indexOf(y)!==-1:R.isLoop||R.isSwitch){_.pop();return}}else if(s===f.Completion.CONTINUE&&(y?R.labels&&R.labels.indexOf(y)!==-1:R.isLoop))return}var N;if(this.isa(i,this.ERROR)){var b={EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError},C=String(this.getProperty(i,"name")),j=this.getProperty(i,"message").valueOf(),H=b[C]||Error;N=H(j),N.stack=String(this.getProperty(i,"stack"))}else N=String(i);throw this.value=N,N},f.prototype.nodeSummary=function(s){switch(s.type){case"ArrayExpression":return"[...]";case"BinaryExpression":case"LogicalExpression":return this.nodeSummary(s.left)+" "+s.operator+" "+this.nodeSummary(s.right);case"CallExpression":return this.nodeSummary(s.callee)+"(...)";case"ConditionalExpression":return this.nodeSummary(s.test)+" ? "+this.nodeSummary(s.consequent)+" : "+this.nodeSummary(s.alternate);case"Identifier":return s.name;case"Literal":return s.raw;case"MemberExpression":var i=this.nodeSummary(s.object),y=this.nodeSummary(s.property);return s.computed?i+"["+y+"]":i+"."+y;case"NewExpression":return"new "+this.nodeSummary(s.callee)+"(...)";case"ObjectExpression":return"{...}";case"ThisExpression":return"this";case"UnaryExpression":return s.operator+" "+this.nodeSummary(s.argument);case"UpdateExpression":var _=this.nodeSummary(s.argument);return s.prefix?s.operator+_:_+s.operator}return"???"},f.prototype.createTask_=function(s,i){var y=this.stateStack[this.stateStack.length-1],_=Array.from(i),R=_.shift(),N=Math.max(Number(_.shift()||0),0),b=this.newNode(),C,j,H;if(R instanceof f.Object&&R.class==="Function")j=R,b.type="CallExpression",C=y.scope;else{try{H=this.parse_(String(R),"taskCode"+this.taskCodeNumber_++)}catch(oe){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+oe.message)}b.type="EvalProgram_",b.body=H.body;var J=y.node.arguments[0],X=J?J.start:void 0,Q=J?J.end:void 0;f.stripLocations_(b,X,Q),C=this.globalScope,_.length=0}var ue=new f.Task(j,_,C,b,s?N:-1);return this.scheduleTask_(ue,N),ue.pid},f.prototype.scheduleTask_=function(s,i){s.time=Date.now()+i,this.tasks.push(s),this.tasks.sort(function(y,_){return y.time-_.time})},f.prototype.deleteTask_=function(s){for(var i=0;i<this.tasks.length;i++)if(this.tasks[i].pid==s){this.tasks.splice(i,1);break}},f.prototype.nextTask_=function(){var s=this.tasks[0];if(!s||s.time>Date.now())return null;this.tasks.shift(),s.interval>=0&&this.scheduleTask_(s,s.interval);var i=new f.State(s.node,s.scope);return s.functionRef&&(i.doneCallee_=2,i.funcThis_=this.globalObject,i.func_=s.functionRef,i.doneArgs_=!0,i.arguments_=s.argsArray),i},f.prototype.createGetter_=function(s,i){if(!this.getterStep_)throw Error("Unexpected call to createGetter");this.getterStep_=!1;var y=Array.isArray(i)?i[0]:i,_=this.newNode();_.type="CallExpression";var R=new f.State(_,this.stateStack[this.stateStack.length-1].scope);return R.doneCallee_=2,R.funcThis_=y,R.func_=s,R.doneArgs_=!0,R.arguments_=[],R},f.prototype.createSetter_=function(s,i,y){if(!this.setterStep_)throw Error("Unexpected call to createSetter");this.setterStep_=!1;var _=Array.isArray(i)?i[0]:this.globalObject,R=this.newNode();R.type="CallExpression";var N=new f.State(R,this.stateStack[this.stateStack.length-1].scope);return N.doneCallee_=2,N.funcThis_=_,N.func_=s,N.doneArgs_=!0,N.arguments_=[y],N},f.prototype.boxThis_=function(s){if(s==null)return this.globalObject;if(!(s instanceof f.Object)){var i=this.createObjectProto(this.getPrototype(s));return i.data=s,i}return s},f.prototype.getGlobalScope=function(){return this.globalScope},f.prototype.getStateStack=function(){return this.stateStack},f.prototype.setStateStack=function(s){this.stateStack=s},f.Value,f.State=function(s,i){this.node=s,this.scope=i},f.Scope=function(s,i,y){this.parentScope=s,this.strict=i,this.object=y},f.Object=function(s){this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.proto=s},f.Object.prototype.proto=null,f.Object.prototype.class="Object",f.Object.prototype.data=null,f.Object.prototype.toString=function(){if(!f.currentInterpreter_)return"[object Interpreter.Object]";if(!(this instanceof f.Object))return String(this);if(this.class==="Array"){var s=f.toStringCycles_;s.push(this);try{var i=[],y=this.properties.length,_=!1;y>1024&&(y=1e3,_=!0);for(var R=0;R<y;R++){var N=this.properties[R];i[R]=N instanceof f.Object&&s.indexOf(N)!==-1?"...":N}_&&i.push("...")}finally{s.pop()}return i.join(",")}if(this.class==="Error"){var s=f.toStringCycles_;if(s.indexOf(this)!==-1)return"[object Error]";var b,C,j=this;do if("name"in j.properties){b=j.properties.name;break}while(j=j.proto);j=this;do if("message"in j.properties){C=j.properties.message;break}while(j=j.proto);s.push(this);try{b=b&&String(b),C=C&&String(C)}finally{s.pop()}return C?b+": "+C:String(b)}return this.data!==null?String(this.data):"[object "+this.class+"]"},f.Object.prototype.valueOf=function(){return f.currentInterpreter_?this.data===void 0||this.data===null||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data:this},f.Task=function(s,i,y,_,R){this.functionRef=s,this.argsArray=i,this.scope=y,this.node=_,this.interval=R,this.pid=++f.Task.pid,this.time=0},f.Task.pid=0,f.prototype.stepArrayExpression=function(s,i,y){var _=y.elements,R=i.n_||0;for(i.array_?(this.setProperty(i.array_,R,i.value),R++):(i.array_=this.createArray(),i.array_.properties.length=_.length);R<_.length;){if(_[R])return i.n_=R,new f.State(_[R],i.scope);R++}s.pop(),s[s.length-1].value=i.array_},f.prototype.stepAssignmentExpression=function(s,i,y){if(!i.doneLeft_){i.doneLeft_=!0;var _=new f.State(y.left,i.scope);return _.components=!0,_}if(!i.doneRight_){if(i.leftReference_||(i.leftReference_=i.value),i.doneGetter_&&(i.leftValue_=i.value),!i.doneGetter_&&y.operator!=="="){var R=this.getValue(i.leftReference_);if(i.leftValue_=R,this.getterStep_){i.doneGetter_=!0;var N=R;return this.createGetter_(N,i.leftReference_)}}return i.doneRight_=!0,y.operator==="="&&y.left.type==="Identifier"&&(i.destinationName=y.left.name),new f.State(y.right,i.scope)}if(i.doneSetter_){s.pop(),s[s.length-1].value=i.setterValue_;return}var b=i.leftValue_,C=i.value;switch(y.operator){case"=":b=C;break;case"+=":b+=C;break;case"-=":b-=C;break;case"*=":b*=C;break;case"/=":b/=C;break;case"%=":b%=C;break;case"<<=":b<<=C;break;case">>=":b>>=C;break;case">>>=":b>>>=C;break;case"&=":b&=C;break;case"^=":b^=C;break;case"|=":b|=C;break;default:throw SyntaxError("Unknown assignment expression: "+y.operator)}var j=this.setValue(i.leftReference_,b);if(j)return i.doneSetter_=!0,i.setterValue_=b,this.createSetter_(j,i.leftReference_,b);s.pop(),s[s.length-1].value=b},f.prototype.stepBinaryExpression=function(s,i,y){if(!i.doneLeft_)return i.doneLeft_=!0,new f.State(y.left,i.scope);if(!i.doneRight_)return i.doneRight_=!0,i.leftValue_=i.value,new f.State(y.right,i.scope);s.pop();var _=i.leftValue_,R=i.value,N;switch(y.operator){case"==":N=_==R;break;case"!=":N=_!=R;break;case"===":N=_===R;break;case"!==":N=_!==R;break;case">":N=_>R;break;case">=":N=_>=R;break;case"<":N=_<R;break;case"<=":N=_<=R;break;case"+":N=_+R;break;case"-":N=_-R;break;case"*":N=_*R;break;case"/":N=_/R;break;case"%":N=_%R;break;case"&":N=_&R;break;case"|":N=_|R;break;case"^":N=_^R;break;case"<<":N=_<<R;break;case">>":N=_>>R;break;case">>>":N=_>>>R;break;case"in":R instanceof f.Object||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+R+"'"),N=this.hasProperty(R,_);break;case"instanceof":this.isa(R,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"'instanceof' expects an object, not '"+R+"'"),N=_ instanceof f.Object?this.isa(_,R):!1;break;default:throw SyntaxError("Unknown binary operator: "+y.operator)}s[s.length-1].value=N},f.prototype.stepBlockStatement=function(s,i,y){var _=i.n_||0,R=y.body[_];if(R)return i.n_=_+1,new f.State(R,i.scope);s.pop()},f.prototype.stepBreakStatement=function(s,i,y){var _=y.label&&y.label.name;this.unwind(f.Completion.BREAK,void 0,_)},f.prototype.evalCodeNumber_=0,f.prototype.stepCallExpression=function(s,i,y){if(!i.doneCallee_){i.doneCallee_=1;var _=new f.State(y.callee,i.scope);return _.components=!0,_}if(i.doneCallee_===1){i.doneCallee_=2;var R=i.value;if(Array.isArray(R)){if(i.func_=this.getValue(R),R[0]===f.SCOPE_REFERENCE?i.directEval_=R[1]==="eval":i.funcThis_=R[0],R=i.func_,this.getterStep_)return i.doneCallee_=1,this.createGetter_(R,i.value)}else i.func_=R;i.arguments_=[],i.n_=0}var R=i.func_;if(!i.doneArgs_){if(i.n_!==0&&i.arguments_.push(i.value),y.arguments[i.n_])return new f.State(y.arguments[i.n_++],i.scope);if(y.type==="NewExpression"){if((!(R instanceof f.Object)||R.illegalConstructor)&&this.throwException(this.TYPE_ERROR,this.nodeSummary(y.callee)+" is not a constructor"),R===this.ARRAY)i.funcThis_=this.createArray();else{var N=R.properties.prototype;(typeof N!="object"||N===null)&&(N=this.OBJECT_PROTO),i.funcThis_=this.createObjectProto(N)}i.isConstructor=!0}i.doneArgs_=!0}if(i.doneExec_)s.pop(),i.isConstructor&&typeof i.value!="object"?s[s.length-1].value=i.funcThis_:s[s.length-1].value=i.value;else{i.doneExec_=!0,R instanceof f.Object||this.throwException(this.TYPE_ERROR,this.nodeSummary(y.callee)+" is not a function");var b=R.node;if(b){for(var C=this.createScope(b.body,R.parentScope),j=this.createArray(),H=0;H<i.arguments_.length;H++)this.setProperty(j,H,i.arguments_[H]);this.setProperty(C.object,"arguments",j);for(var H=0;H<b.params.length;H++){var J=b.params[H].name,X=i.arguments_.length>H?i.arguments_[H]:void 0;this.setProperty(C.object,J,X)}return C.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),this.setProperty(C.object,"this",i.funcThis_,f.READONLY_DESCRIPTOR),i.value=void 0,new f.State(b.body,C)}else if(R.eval){var Q=i.arguments_[0];if(typeof Q!="string")i.value=Q;else{try{var ue=this.parse_(String(Q),"eval"+this.evalCodeNumber_++)}catch(fe){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+fe.message)}var oe=this.newNode();oe.type="EvalProgram_",oe.body=ue.body,f.stripLocations_(oe,y.start,y.end);var C=i.directEval_?i.scope:this.globalScope;return C.strict?C=this.createScope(ue,C):this.populateScope_(ue,C),this.value=void 0,new f.State(oe,C)}}else if(R.nativeFunc)i.scope.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),i.value=R.nativeFunc.apply(i.funcThis_,i.arguments_);else if(R.asyncFunc){var ge=this,xe=function(Ie){i.value=Ie,ge.paused_=!1},we=R.asyncFunc.length-1,Ke=i.arguments_.concat(new Array(we)).slice(0,we);Ke.push(xe),this.paused_=!0,i.scope.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),R.asyncFunc.apply(i.funcThis_,Ke);return}else this.throwException(this.TYPE_ERROR,this.nodeSummary(y.callee)+" is not callable")}},f.prototype.stepConditionalExpression=function(s,i,y){var _=i.mode_||0;if(_===0)return i.mode_=1,new f.State(y.test,i.scope);if(_===1){i.mode_=2;var R=!!i.value;if(R&&y.consequent)return new f.State(y.consequent,i.scope);if(!R&&y.alternate)return new f.State(y.alternate,i.scope);this.value=void 0}s.pop(),y.type==="ConditionalExpression"&&(s[s.length-1].value=i.value)},f.prototype.stepContinueStatement=function(s,i,y){var _=y.label&&y.label.name;this.unwind(f.Completion.CONTINUE,void 0,_)},f.prototype.stepDebuggerStatement=function(s,i,y){s.pop()},f.prototype.stepDoWhileStatement=function(s,i,y){if(y.type==="DoWhileStatement"&&i.test_===void 0&&(i.value=!0,i.test_=!0),!i.test_)return i.test_=!0,new f.State(y.test,i.scope);if(!i.value)s.pop();else if(y.body)return i.test_=!1,i.isLoop=!0,new f.State(y.body,i.scope)},f.prototype.stepEmptyStatement=function(s,i,y){s.pop()},f.prototype.stepEvalProgram_=function(s,i,y){var _=i.n_||0,R=y.body[_];if(R)return i.n_=_+1,new f.State(R,i.scope);s.pop(),s[s.length-1].value=this.value},f.prototype.stepExpressionStatement=function(s,i,y){if(!i.done_)return this.value=void 0,i.done_=!0,new f.State(y.expression,i.scope);s.pop(),this.value=i.value},f.prototype.stepForInStatement=function(s,i,y){if(!i.doneInit_&&(i.doneInit_=!0,y.left.declarations&&y.left.declarations[0].init))return i.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer"),new f.State(y.left,i.scope);if(!i.doneObject_)return i.doneObject_=!0,i.variable_||(i.variable_=i.value),new f.State(y.right,i.scope);if(i.isLoop||(i.isLoop=!0,i.object_=i.value,i.visited_=Object.create(null)),i.name_===void 0)e:for(;;){if(i.object_ instanceof f.Object)for(i.props_||(i.props_=Object.getOwnPropertyNames(i.object_.properties));;){var _=i.props_.shift();if(_===void 0)break;if(Object.prototype.hasOwnProperty.call(i.object_.properties,_)&&!i.visited_[_]&&(i.visited_[_]=!0,!!Object.prototype.propertyIsEnumerable.call(i.object_.properties,_))){i.name_=_;break e}}else if(i.object_!==null&&i.object_!==void 0)for(i.props_||(i.props_=Object.getOwnPropertyNames(i.object_));;){var _=i.props_.shift();if(_===void 0)break;if(i.visited_[_]=!0,!!Object.prototype.propertyIsEnumerable.call(i.object_,_)){i.name_=_;break e}}if(i.object_=this.getPrototype(i.object_),i.props_=null,i.object_===null){s.pop();return}}if(!i.doneVariable_){i.doneVariable_=!0;var R=y.left;if(R.type==="VariableDeclaration")i.variable_=[f.SCOPE_REFERENCE,R.declarations[0].id.name];else{i.variable_=null;var N=new f.State(R,i.scope);return N.components=!0,N}}if(i.variable_||(i.variable_=i.value),!i.doneSetter_){i.doneSetter_=!0;var b=i.name_,C=this.setValue(i.variable_,b);if(C)return this.createSetter_(C,i.variable_,b)}if(i.name_=void 0,i.doneVariable_=!1,i.doneSetter_=!1,y.body)return new f.State(y.body,i.scope)},f.prototype.stepForStatement=function(s,i,y){switch(i.mode_){default:if(i.mode_=1,y.init)return new f.State(y.init,i.scope);break;case 1:if(i.mode_=2,y.test)return new f.State(y.test,i.scope);break;case 2:if(i.mode_=3,y.test&&!i.value)s.pop();else return i.isLoop=!0,new f.State(y.body,i.scope);break;case 3:if(i.mode_=1,y.update)return new f.State(y.update,i.scope);break}},f.prototype.stepFunctionDeclaration=function(s,i,y){s.pop()},f.prototype.stepFunctionExpression=function(s,i,y){s.pop(),i=s[s.length-1];var _=i.scope;y.id&&(_=this.createSpecialScope(_)),i.value=this.createFunction(y,_,i.destinationName),y.id&&this.setProperty(_.object,y.id.name,i.value,f.READONLY_DESCRIPTOR)},f.prototype.stepIdentifier=function(s,i,y){if(s.pop(),i.components){s[s.length-1].value=[f.SCOPE_REFERENCE,y.name];return}var _=this.getValueFromScope(y.name);if(this.getterStep_){var R=_;return this.createGetter_(R,this.globalObject)}s[s.length-1].value=_},f.prototype.stepIfStatement=f.prototype.stepConditionalExpression,f.prototype.stepLabeledStatement=function(s,i,y){s.pop();var _=i.labels||[];_.push(y.label.name);var R=new f.State(y.body,i.scope);return R.labels=_,R},f.prototype.stepLiteral=function(s,i,y){s.pop();var _=y.value;if(_ instanceof RegExp){var R=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(R,_),_=R}s[s.length-1].value=_},f.prototype.stepLogicalExpression=function(s,i,y){if(y.operator!=="&&"&&y.operator!=="||")throw SyntaxError("Unknown logical operator: "+y.operator);if(!i.doneLeft_)return i.doneLeft_=!0,new f.State(y.left,i.scope);if(i.doneRight_)s.pop(),s[s.length-1].value=i.value;else if(y.operator==="&&"&&!i.value||y.operator==="||"&&i.value)s.pop(),s[s.length-1].value=i.value;else return i.doneRight_=!0,new f.State(y.right,i.scope)},f.prototype.stepMemberExpression=function(s,i,y){if(!i.doneObject_)return i.doneObject_=!0,new f.State(y.object,i.scope);var _;if(!y.computed)i.object_=i.value,_=y.property.name;else if(i.doneProperty_)_=i.value;else return i.object_=i.value,i.doneProperty_=!0,new f.State(y.property,i.scope);if(s.pop(),i.components)s[s.length-1].value=[i.object_,_];else{var R=this.getProperty(i.object_,_);if(this.getterStep_){var N=R;return this.createGetter_(N,i.object_)}s[s.length-1].value=R}},f.prototype.stepNewExpression=f.prototype.stepCallExpression,f.prototype.stepObjectExpression=function(s,i,y){var _=i.n_||0,R=y.properties[_];if(!i.object_)i.object_=this.createObjectProto(this.OBJECT_PROTO),i.properties_=Object.create(null);else{var N=i.destinationName;i.properties_[N]||(i.properties_[N]={}),i.properties_[N][R.kind]=i.value,i.n_=++_,R=y.properties[_]}if(R){var b=R.key;if(b.type==="Identifier")var N=b.name;else if(b.type==="Literal")var N=b.value;else throw SyntaxError("Unknown object structure: "+b.type);return i.destinationName=N,new f.State(R.value,i.scope)}for(var b in i.properties_){var C=i.properties_[b];if("get"in C||"set"in C){var j={configurable:!0,enumerable:!0,get:C.get,set:C.set};this.setProperty(i.object_,b,f.VALUE_IN_DESCRIPTOR,j)}else this.setProperty(i.object_,b,C.init)}s.pop(),s[s.length-1].value=i.object_},f.prototype.stepProgram=function(s,i,y){var _=y.body.shift();if(_)return i.done=!1,new f.State(_,i.scope);i.done=!0},f.prototype.stepReturnStatement=function(s,i,y){if(y.argument&&!i.done_)return i.done_=!0,new f.State(y.argument,i.scope);this.unwind(f.Completion.RETURN,i.value,void 0)},f.prototype.stepSequenceExpression=function(s,i,y){var _=i.n_||0,R=y.expressions[_];if(R)return i.n_=_+1,new f.State(R,i.scope);s.pop(),s[s.length-1].value=i.value},f.prototype.stepSwitchStatement=function(s,i,y){if(!i.test_)return i.test_=1,new f.State(y.discriminant,i.scope);for(i.test_===1&&(i.test_=2,i.switchValue_=i.value,i.defaultCase_=-1);;){var _=i.index_||0,R=y.cases[_];if(!i.matched_&&R&&!R.test){i.defaultCase_=_,i.index_=_+1;continue}if(!R&&!i.matched_&&i.defaultCase_!==-1){i.matched_=!0,i.index_=i.defaultCase_;continue}if(R){if(!i.matched_&&!i.tested_&&R.test)return i.tested_=!0,new f.State(R.test,i.scope);if(i.matched_||i.value===i.switchValue_){i.matched_=!0;var N=i.n_||0;if(R.consequent[N])return i.isSwitch=!0,i.n_=N+1,new f.State(R.consequent[N],i.scope)}i.tested_=!1,i.n_=0,i.index_=_+1}else{s.pop();return}}},f.prototype.stepThisExpression=function(s,i,y){s.pop(),s[s.length-1].value=this.getValueFromScope("this")},f.prototype.stepThrowStatement=function(s,i,y){if(i.done_)this.throwException(i.value);else return i.done_=!0,new f.State(y.argument,i.scope)},f.prototype.stepTryStatement=function(s,i,y){if(!i.doneBlock_)return i.doneBlock_=!0,new f.State(y.block,i.scope);if(i.cv&&i.cv.type===f.Completion.THROW&&!i.doneHandler_&&y.handler){i.doneHandler_=!0;var _=this.createSpecialScope(i.scope);return this.setProperty(_.object,y.handler.param.name,i.cv.value),i.cv=void 0,new f.State(y.handler.body,_)}if(!i.doneFinalizer_&&y.finalizer)return i.doneFinalizer_=!0,new f.State(y.finalizer,i.scope);s.pop(),i.cv&&this.unwind(i.cv.type,i.cv.value,i.cv.label)},f.prototype.stepUnaryExpression=function(s,i,y){if(!i.done_){i.done_=!0;var _=new f.State(y.argument,i.scope);return _.components=y.operator==="delete",_}s.pop();var R=i.value;switch(y.operator){case"-":R=-R;break;case"+":R=+R;break;case"!":R=!R;break;case"~":R=~R;break;case"delete":var N=!0;if(Array.isArray(R)){var b=R[0];b===f.SCOPE_REFERENCE&&(b=i.scope);var C=String(R[1]);try{delete b.properties[C]}catch{i.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+C+"' of '"+b+"'"):N=!1}}R=N;break;case"typeof":R=R&&R.class==="Function"?"function":typeof R;break;case"void":R=void 0;break;default:throw SyntaxError("Unknown unary operator: "+y.operator)}s[s.length-1].value=R},f.prototype.stepUpdateExpression=function(s,i,y){if(!i.doneLeft_){i.doneLeft_=!0;var _=new f.State(y.argument,i.scope);return _.components=!0,_}if(i.leftSide_||(i.leftSide_=i.value),i.doneGetter_&&(i.leftValue_=i.value),!i.doneGetter_){var N=this.getValue(i.leftSide_);if(i.leftValue_=N,this.getterStep_){i.doneGetter_=!0;var R=N;return this.createGetter_(R,i.leftSide_)}}if(i.doneSetter_){s.pop(),s[s.length-1].value=i.setterValue_;return}var N=Number(i.leftValue_),b;if(y.operator==="++")b=N+1;else if(y.operator==="--")b=N-1;else throw SyntaxError("Unknown update expression: "+y.operator);var C=y.prefix?b:N,j=this.setValue(i.leftSide_,b);if(j)return i.doneSetter_=!0,i.setterValue_=C,this.createSetter_(j,i.leftSide_,b);s.pop(),s[s.length-1].value=C},f.prototype.stepVariableDeclaration=function(s,i,y){var _=y.declarations,R=i.n_||0,N=_[R];for(i.init_&&N&&(this.setValueToScope(N.id.name,i.value),i.init_=!1,N=_[++R]);N;){if(N.init)return i.n_=R,i.init_=!0,i.destinationName=N.id.name,new f.State(N.init,i.scope);N=_[++R]}s.pop()},f.prototype.stepWithStatement=function(s,i,y){if(!i.doneObject_)return i.doneObject_=!0,new f.State(y.object,i.scope);s.pop();var _=this.createSpecialScope(i.scope,i.value);return new f.State(y.body,_)},f.prototype.stepWhileStatement=f.prototype.stepDoWhileStatement,f.nativeGlobal.Interpreter=f,f.prototype.step=f.prototype.step,f.prototype.run=f.prototype.run,f.prototype.appendCode=f.prototype.appendCode,f.prototype.createObject=f.prototype.createObject,f.prototype.createObjectProto=f.prototype.createObjectProto,f.prototype.createAsyncFunction=f.prototype.createAsyncFunction,f.prototype.createNativeFunction=f.prototype.createNativeFunction,f.prototype.getProperty=f.prototype.getProperty,f.prototype.setProperty=f.prototype.setProperty,f.prototype.getStatus=f.prototype.getStatus,f.prototype.nativeToPseudo=f.prototype.nativeToPseudo,f.prototype.pseudoToNative=f.prototype.pseudoToNative,f.prototype.getGlobalScope=f.prototype.getGlobalScope,f.prototype.getStateStack=f.prototype.getStateStack,f.prototype.setStateStack=f.prototype.setStateStack,f.VALUE_IN_DESCRIPTOR=f.VALUE_IN_DESCRIPTOR,f.Status=f.Status,I.exports={Interpreter:f}},"./original-repo/acorn.js":function(I,$){(function(F,f){return f($)})(this,function(F){F.version="0.5.0";var f,s="",i,y;F.parse=function(P,L){return s=String(P),i=s.length,R(L),En(),xn(f.program)};var _={strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function R(P){f=P||{};for(var L in _)Object.prototype.hasOwnProperty.call(f,L)||(f[L]=_[L]);y=f.sourceFile}var N=function(P,L){for(var G=1,W=0;;){dr.lastIndex=W;var de=dr.exec(P);if(de&&de.index<L)++G,W=de.index+de[0].length;else break}return{line:G,column:L-W}},b=0,C=0,j=0,H,J,X,Q,ue,oe,ge,xe=0,we=0,Ke,Ie,fe,ke;function ce(P,L){var G=N(s,P);L+=" ("+G.line+":"+G.column+")";var W=new SyntaxError(L);throw W.pos=P,W.loc=G,W.raisedAt=b,W}var At=[],De={type:"num"},wt={type:"regexp"},ht={type:"string"},Ye={type:"name"},rt={type:"eof"},it={keyword:"break"},vt={keyword:"case",beforeExpr:!0},ut={keyword:"catch"},Pt={keyword:"continue"},It={keyword:"debugger"},$t={keyword:"default"},kt={keyword:"do",isLoop:!0},ct={keyword:"else",beforeExpr:!0},he={keyword:"finally"},ve={keyword:"for",isLoop:!0},Ee={keyword:"function"},Te={keyword:"if"},be={keyword:"return",beforeExpr:!0},$e={keyword:"switch"},ft={keyword:"throw",beforeExpr:!0},Ne={keyword:"try"},Ce={keyword:"var"},et={keyword:"while",isLoop:!0},Kt={keyword:"with"},Zt={keyword:"new",beforeExpr:!0},er={keyword:"this"},qe={keyword:"null",atomValue:null},ot={keyword:"true",atomValue:!0},jt={keyword:"false",atomValue:!1},zt={keyword:"in",binop:7,beforeExpr:!0},tr={break:it,case:vt,catch:ut,continue:Pt,debugger:It,default:$t,do:kt,else:ct,finally:he,for:ve,function:Ee,if:Te,return:be,switch:$e,throw:ft,try:Ne,var:Ce,while:et,with:Kt,null:qe,true:ot,false:jt,new:Zt,in:zt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:er,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},gr={type:"[",beforeExpr:!0},br={type:"]"},rr={type:"{",beforeExpr:!0},Vt={type:"}"},bt={type:"(",beforeExpr:!0},yt={type:")"},Nt={type:",",beforeExpr:!0},_t={type:";",beforeExpr:!0},nr={type:":",beforeExpr:!0},Dr={type:"."},Mr={type:"?",beforeExpr:!0},Ur={binop:10,beforeExpr:!0},Lr={isAssign:!0,beforeExpr:!0},Dt={isAssign:!0,beforeExpr:!0},en={postfix:!0,prefix:!0,isUpdate:!0},$r={prefix:!0,beforeExpr:!0},Fr={binop:1,beforeExpr:!0},Br={binop:2,beforeExpr:!0},tn={binop:3,beforeExpr:!0},rn={binop:4,beforeExpr:!0},nn={binop:5,beforeExpr:!0},an={binop:6,beforeExpr:!0},on={binop:7,beforeExpr:!0},sn={binop:8,beforeExpr:!0},un={binop:9,prefix:!0,beforeExpr:!0},cn={binop:10,beforeExpr:!0};function lr(P){for(var L=P.split(" "),G=Object.create(null),W=0;W<L.length;W++)G[L[W]]=!0;return function(de){return G[de]||!1}}var ln=lr("class enum extends super const export import"),jr=lr("implements interface let package private protected public static yield"),fr=lr("eval arguments"),fn=lr("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),pn=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,zr="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",dn="------------------------------------------------------------------------------------------------------------------------------------------",Vr=new RegExp("["+zr+"]"),hn=new RegExp("["+zr+dn+"]"),pr=/[\n\r\u2028\u2029]/,dr=/\r\n|[\n\r\u2028\u2029]/g,hr=function(P){return P<65?P===36:P<91?!0:P<97?P===95:P<123?!0:P>=170&&Vr.test(String.fromCharCode(P))},Gr=function(P){return P<48?P===36:P<58?!0:P<65?!1:P<91?!0:P<97?P===95:P<123?!0:P>=170&&hn.test(String.fromCharCode(P))};function Mt(){this.line=oe,this.column=b-ge}function En(){oe=1,b=ge=0,ue=!0,ar()}function Ae(P,L){j=b,f.locations&&(J=new Mt),X=P,ar(),Q=L,ue=P.beforeExpr}function yn(){var P=f.onComment&&f.locations&&new Mt,L=b,G=s.indexOf("*/",b+=2);if(G===-1&&ce(b-2,"Unterminated comment"),b=G+2,f.locations){dr.lastIndex=L;for(var W;(W=dr.exec(s))&&W.index<b;)++oe,ge=W.index+W[0].length}f.onComment&&f.onComment(!0,s.slice(L+2,G),L,b,P,f.locations&&new Mt)}function _r(){for(var P=b,L=f.onComment&&f.locations&&new Mt,G=s.charCodeAt(b+=2);b<i&&G!==10&&G!==13&&G!==8232&&G!==8233;)++b,G=s.charCodeAt(b);f.onComment&&f.onComment(!1,s.slice(P+2,b),P,b,L,f.locations&&new Mt)}function ar(){for(;b<i;){var P=s.charCodeAt(b);if(P===32)++b;else if(P===13){++b;var L=s.charCodeAt(b);L===10&&++b,f.locations&&(++oe,ge=b)}else if(P===10||P===8232||P===8233)++b,f.locations&&(++oe,ge=b);else if(P>8&&P<14)++b;else if(P===47){var L=s.charCodeAt(b+1);if(L===42)yn();else if(L===47)_r();else break}else if(P===160)++b;else if(P>=5760&&pn.test(String.fromCharCode(P)))++b;else break}}function vn(){var P=s.charCodeAt(b+1);P>=48&&P<=57?Hr(!0):(++b,Ae(Dr))}function mn(){var P=s.charCodeAt(b+1);ue?(++b,Wr()):P===61?Pe(Dt,2):Pe(Ur,1)}function gn(){var P=s.charCodeAt(b+1);P===61?Pe(Dt,2):Pe(cn,1)}function bn(P){var L=s.charCodeAt(b+1);L===P?Pe(P===124?Fr:Br,2):L===61?Pe(Dt,2):Pe(P===124?tn:nn,1)}function _n(){var P=s.charCodeAt(b+1);P===61?Pe(Dt,2):Pe(rn,1)}function Rn(P){var L=s.charCodeAt(b+1);if(L===P){if(L===45&&s.charCodeAt(b+2)===62&&pr.test(s.slice(we,b))){b+=3,_r(),ar(),Gt();return}Pe(en,2)}else L===61?Pe(Dt,2):Pe(un,1)}function Sn(P){var L=s.charCodeAt(b+1),G=1;if(L===P){G=P===62&&s.charCodeAt(b+2)===62?3:2,s.charCodeAt(b+G)===61?Pe(Dt,G+1):Pe(sn,G);return}if(L===33&&P===60&&s.charCodeAt(b+2)===45&&s.charCodeAt(b+3)===45){b+=4,_r(),ar(),Gt();return}L===61&&(G=s.charCodeAt(b+2)===61?3:2),Pe(on,G)}function Tn(P){var L=s.charCodeAt(b+1);L===61?Pe(an,s.charCodeAt(b+2)===61?3:2):Pe(P===61?Lr:$r,1)}function wn(P){switch(P){case 46:return vn();case 40:return++b,Ae(bt);case 41:return++b,Ae(yt);case 59:return++b,Ae(_t);case 44:return++b,Ae(Nt);case 91:return++b,Ae(gr);case 93:return++b,Ae(br);case 123:return++b,Ae(rr);case 125:return++b,Ae(Vt);case 58:return++b,Ae(nr);case 63:return++b,Ae(Mr);case 48:var L=s.charCodeAt(b+1);if(L===120||L===88)return Nn();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Hr(!1);case 34:case 39:return On(P);case 47:return mn();case 37:case 42:return gn();case 124:case 38:return bn(P);case 94:return _n();case 43:case 45:return Rn(P);case 60:case 62:return Sn(P);case 61:case 33:return Tn(P);case 126:return Pe($r,1)}return!1}function Gt(P){if(P?b=C+1:C=b,f.locations&&(H=new Mt),P)return Wr();if(b>=i)return Ae(rt);var L=s.charCodeAt(b);if(hr(L)||L===92)return Xr();var G=wn(L);if(G===!1){var W=String.fromCharCode(L);if(W==="\\"||Vr.test(W))return Xr();ce(b,"Unexpected character '"+W+"'")}}function Pe(P,L){var G=s.slice(b,b+L);b+=L,Ae(P,G)}function Wr(){for(var P,L,G=b;;){b>=i&&ce(G,"Unterminated regexp");var W=s.charAt(b);if(pr.test(W)&&ce(G,"Unterminated regexp"),P)P=!1;else{if(W==="[")L=!0;else if(W==="]"&&L)L=!1;else if(W==="/"&&!L)break;P=W==="\\"}++b}var de=s.slice(G,b);++b;var le=Yr();le&&!/^[gmi]*$/.test(le)&&ce(G,"Invalid regexp flag");try{var ye=new RegExp(de,le)}catch(_e){throw _e instanceof SyntaxError&&ce(G,_e.message),_e}Ae(wt,ye)}function ir(P,L){for(var G=b,W=0,de=L===void 0?1/0:L,le=0;le<de;++le){var ye=s.charCodeAt(b),_e;if(ye>=97?_e=ye-97+10:ye>=65?_e=ye-65+10:ye>=48&&ye<=57?_e=ye-48:_e=1/0,_e>=P)break;++b,W=W*P+_e}return b===G||L!==void 0&&b-G!==L?null:W}function Nn(){b+=2;var P=ir(16);P===null&&ce(C+2,"Expected hexadecimal number"),hr(s.charCodeAt(b))&&ce(b,"Identifier directly after number"),Ae(De,P)}function Hr(P){var L=b,G=!1,W=s.charCodeAt(b)===48;!P&&ir(10)===null&&ce(L,"Invalid number"),s.charCodeAt(b)===46&&(++b,ir(10),G=!0);var de=s.charCodeAt(b);(de===69||de===101)&&(de=s.charCodeAt(++b),(de===43||de===45)&&++b,ir(10)===null&&ce(L,"Invalid number"),G=!0),hr(s.charCodeAt(b))&&ce(b,"Identifier directly after number");var le=s.slice(L,b),ye;G?ye=parseFloat(le):!W||le.length===1?ye=parseInt(le,10):/[89]/.test(le)||ke?ce(L,"Invalid number"):ye=parseInt(le,8),Ae(De,ye)}function On(P){b++;for(var L="";;){b>=i&&ce(C,"Unterminated string constant");var G=s.charCodeAt(b);if(G===P){++b,Ae(ht,L);return}if(G===92){G=s.charCodeAt(++b);var W=/^[0-7]+/.exec(s.slice(b,b+3));for(W&&(W=W[0]);W&&parseInt(W,8)>255;)W=W.slice(0,-1);if(W==="0"&&(W=null),++b,W)ke&&ce(b-2,"Octal literal in strict mode"),L+=String.fromCharCode(parseInt(W,8)),b+=W.length-1;else switch(G){case 110:L+=`
`;break;case 114:L+="\r";break;case 120:L+=String.fromCharCode(Er(2));break;case 117:L+=String.fromCharCode(Er(4));break;case 85:L+=String.fromCharCode(Er(8));break;case 116:L+="	";break;case 98:L+="\b";break;case 118:L+="\v";break;case 102:L+="\f";break;case 48:L+="\0";break;case 13:s.charCodeAt(b)===10&&++b;case 10:f.locations&&(ge=b,++oe);break;default:L+=String.fromCharCode(G);break}}else(G===13||G===10||G===8232||G===8233)&&ce(C,"Unterminated string constant"),L+=String.fromCharCode(G),++b}}function Er(P){var L=ir(16,P);return L===null&&ce(C,"Bad character escape sequence"),L}var Xt;function Yr(){Xt=!1;for(var P,L=!0,G=b;;){var W=s.charCodeAt(b);if(Gr(W))Xt&&(P+=s.charAt(b)),++b;else if(W===92){Xt||(P=s.slice(G,b)),Xt=!0,s.charCodeAt(++b)!==117&&ce(b,"Expecting Unicode escape sequence \\uXXXX"),++b;var de=Er(4),le=String.fromCharCode(de);le||ce(b-1,"Invalid Unicode escape"),(L?hr(de):Gr(de))||ce(b-4,"Invalid Unicode escape"),P+=le}else break;L=!1}return Xt?P:s.slice(G,b)}function Xr(){var P=Yr(),L=Ye;!Xt&&fn(P)&&(L=tr[P]),Ae(L,P)}function me(){xe=C,we=j,Ke=J,Gt()}function Rr(P){if(ke=P,b=C,f.locations)for(;b<ge;)ge=s.lastIndexOf(`
`,ge-2)+1,--oe;ar(),Gt()}function qr(){this.type=null,this.start=C,this.end=null}function Jr(){this.start=H,this.end=null,y&&(this.source=y)}function Be(){var P=new qr;return f.locations&&(P.loc=new Jr),f.directSourceFile&&(P.sourceFile=f.directSourceFile),f.ranges&&(P.range=[C,0]),P}function Ot(P){var L=new qr;return L.start=P.start,f.locations&&(L.loc=new Jr,L.loc.start=P.loc.start),f.ranges&&(L.range=[P.range[0],0]),L}function pe(P,L){return P.type=L,P.end=we,f.locations&&(P.loc.end=Ke),f.ranges&&(P.range[1]=we),P}function Sr(P){return P.type==="ExpressionStatement"&&P.expression.type==="Literal"&&P.expression.value==="use strict"}function Se(P){return X===P?(me(),!0):!1}function yr(){return!f.strictSemicolons&&(X===rt||X===Vt||pr.test(s.slice(we,C)))}function Lt(){!Se(_t)&&!yr()&&St()}function Oe(P){X===P?me():St()}function St(){ce(C,"Unexpected token")}function vr(P){P.type!=="Identifier"&&P.type!=="MemberExpression"&&ce(P.start,"Assigning to rvalue"),ke&&P.type==="Identifier"&&fr(P.name)&&ce(P.start,"Assigning to "+P.name+" in strict mode")}function xn(P){xe=we=b,f.locations&&(Ke=new Mt),Ie=ke=!1,fe=[],Gt();var L=P||Be(),G=!0;for(P||(L.body=[]);X!==rt;){var W=pt();L.body.push(W),G&&Sr(W)&&Rr(!0),G=!1}return pe(L,"Program")}var Tr={kind:"loop"},Cn={kind:"switch"};function pt(){(X===Ur||X===Dt&&Q==="/=")&&Gt(!0);var P=X,L=Be();switch(P){case it:case Pt:me();var G=P===it;Se(_t)||yr()?L.label=null:X!==Ye?St():(L.label=Ct(),Lt());for(var W=0;W<fe.length;++W){var de=fe[W];if((L.label===null||de.name===L.label.name)&&(de.kind!==null&&(G||de.kind==="loop")||L.label&&G))break}return W===fe.length&&ce(L.start,"Unsyntactic "+P.keyword),pe(L,G?"BreakStatement":"ContinueStatement");case It:return me(),Lt(),pe(L,"DebuggerStatement");case kt:return me(),fe.push(Tr),L.body=pt(),fe.pop(),Oe(et),L.test=or(),Lt(),pe(L,"DoWhileStatement");case ve:if(me(),fe.push(Tr),Oe(bt),X===_t)return wr(L,null);if(X===Ce){var le=Be();return me(),Zr(le,!0),pe(le,"VariableDeclaration"),le.declarations.length===1&&Se(zt)?Kr(L,le):wr(L,le)}var le=Ve(!1,!0);return Se(zt)?(vr(le),Kr(L,le)):wr(L,le);case Ee:return me(),Ar(L,!0);case Te:return me(),L.test=or(),L.consequent=pt(),L.alternate=Se(ct)?pt():null,pe(L,"IfStatement");case be:return!Ie&&!f.allowReturnOutsideFunction&&ce(C,"'return' outside of function"),me(),Se(_t)||yr()?L.argument=null:(L.argument=Ve(),Lt()),pe(L,"ReturnStatement");case $e:me(),L.discriminant=or(),L.cases=[],Oe(rr),fe.push(Cn);for(var ye,_e;X!==Vt;)if(X===vt||X===$t){var cr=X===vt;ye&&pe(ye,"SwitchCase"),L.cases.push(ye=Be()),ye.consequent=[],me(),cr?ye.test=Ve():(_e&&ce(xe,"Multiple default clauses"),_e=!0,ye.test=null),Oe(nr)}else ye||St(),ye.consequent.push(pt());return ye&&pe(ye,"SwitchCase"),me(),fe.pop(),pe(L,"SwitchStatement");case ft:return me(),pr.test(s.slice(we,C))&&ce(we,"Illegal newline after throw"),L.argument=Ve(),Lt(),pe(L,"ThrowStatement");case Ne:if(me(),L.block=sr(),L.handler=null,X===ut){var Jt=Be();me(),Oe(bt),Jt.param=Ct(),ke&&fr(Jt.param.name)&&ce(Jt.param.start,"Binding "+Jt.param.name+" in strict mode"),Oe(yt),Jt.body=sr(),L.handler=pe(Jt,"CatchClause")}return L.finalizer=Se(he)?sr():null,!L.handler&&!L.finalizer&&ce(L.start,"Missing catch or finally clause"),pe(L,"TryStatement");case Ce:return me(),Zr(L),Lt(),pe(L,"VariableDeclaration");case et:return me(),L.test=or(),fe.push(Tr),L.body=pt(),fe.pop(),pe(L,"WhileStatement");case Kt:return ke&&ce(C,"'with' in strict mode"),me(),L.object=or(),L.body=pt(),pe(L,"WithStatement");case rr:return sr();case _t:return me(),pe(L,"EmptyStatement");default:var Ir=Q,mr=Ve();if(P===Ye&&mr.type==="Identifier"&&Se(nr)){for(var W=0;W<fe.length;++W)fe[W].name===Ir&&ce(mr.start,"Label '"+Ir+"' is already declared");var Mn=X.isLoop?"loop":X===$e?"switch":null;return fe.push({name:Ir,kind:Mn}),L.body=pt(),fe.pop(),L.label=mr,pe(L,"LabeledStatement")}else return L.expression=mr,Lt(),pe(L,"ExpressionStatement")}}function or(){Oe(bt);var P=Ve();return Oe(yt),P}function sr(P){var L=Be(),G=!0,W=!1,de;for(L.body=[],Oe(rr);!Se(Vt);){var le=pt();L.body.push(le),G&&P&&Sr(le)&&(de=W,Rr(W=!0)),G=!1}return W&&!de&&Rr(!1),pe(L,"BlockStatement")}function wr(P,L){return P.init=L,Oe(_t),P.test=X===_t?null:Ve(),Oe(_t),P.update=X===yt?null:Ve(),Oe(yt),P.body=pt(),fe.pop(),pe(P,"ForStatement")}function Kr(P,L){return P.left=L,P.right=Ve(),Oe(yt),P.body=pt(),fe.pop(),pe(P,"ForInStatement")}function Zr(P,L){for(P.declarations=[],P.kind="var";;){var G=Be();if(G.id=Ct(),ke&&fr(G.id.name)&&ce(G.id.start,"Binding "+G.id.name+" in strict mode"),G.init=Se(Lr)?Ve(!0,L):null,P.declarations.push(pe(G,"VariableDeclarator")),!Se(Nt))break}}function Ve(P,L){var G=Nr(L);if(!P&&X===Nt){var W=Ot(G);for(W.expressions=[G];Se(Nt);)W.expressions.push(Nr(L));return pe(W,"SequenceExpression")}return G}function Nr(P){var L=An(P);if(X.isAssign){var G=Ot(L);return G.operator=Q,G.left=L,me(),G.right=Nr(P),vr(L),pe(G,"AssignmentExpression")}return L}function An(P){var L=Pn(P);if(Se(Mr)){var G=Ot(L);return G.test=L,G.consequent=Ve(!0),Oe(nr),G.alternate=Ve(!0,P),pe(G,"ConditionalExpression")}return L}function Pn(P){return Or(xr(),-1,P)}function Or(P,L,G){var W=X.binop;if(W!==null&&(!G||X!==zt)&&W>L){var de=Ot(P);de.left=P,de.operator=Q;var le=X;me(),de.right=Or(xr(),W,G);var ye=pe(de,le===Fr||le===Br?"LogicalExpression":"BinaryExpression");return Or(ye,L,G)}return P}function xr(){if(X.prefix){var P=Be(),L=X.isUpdate;return P.operator=Q,P.prefix=!0,ue=!0,me(),P.argument=xr(),L?vr(P.argument):ke&&P.operator==="delete"&&P.argument.type==="Identifier"&&ce(P.start,"Deleting local variable in strict mode"),pe(P,L?"UpdateExpression":"UnaryExpression")}for(var G=In();X.postfix&&!yr();){var P=Ot(G);P.operator=Q,P.prefix=!1,P.argument=G,vr(G),me(),G=pe(P,"UpdateExpression")}return G}function In(){return ur(Cr())}function ur(P,L){var G;return Se(Dr)?(G=Ot(P),G.object=P,G.property=Ct(!0),G.computed=!1,ur(pe(G,"MemberExpression"),L)):Se(gr)?(G=Ot(P),G.object=P,G.property=Ve(),G.computed=!0,Oe(br),ur(pe(G,"MemberExpression"),L)):!L&&Se(bt)?(G=Ot(P),G.callee=P,G.arguments=Pr(yt,!1),ur(pe(G,"CallExpression"),L)):P}function Cr(){var P;switch(X){case er:return P=Be(),me(),pe(P,"ThisExpression");case Ye:return Ct();case De:case ht:case wt:return P=Be(),P.value=Q,P.raw=s.slice(C,j),me(),pe(P,"Literal");case qe:case ot:case jt:return P=Be(),P.value=X.atomValue,P.raw=X.keyword,me(),pe(P,"Literal");case bt:var L=H,G=C;me();var W=Ve();return W.start=G,W.end=j,f.locations&&(W.loc.start=L,W.loc.end=J),f.ranges&&(W.range=[G,j]),Oe(yt),W;case gr:return P=Be(),me(),P.elements=Pr(br,!0,!0),pe(P,"ArrayExpression");case rr:return Dn();case Ee:return P=Be(),me(),Ar(P,!1);case Zt:return kn()}St()}function kn(){var P=Be();return me(),P.callee=ur(Cr(),!0),P.arguments=Se(bt)?Pr(yt,!1):At,pe(P,"NewExpression")}function Dn(){var P=Be(),L=!0,G=!1;for(P.properties=[],me();!Se(Vt);){if(L)L=!1;else if(Oe(Nt),f.allowTrailingCommas&&Se(Vt))break;var W={key:Qr()},de=!1,le;if(Se(nr)?(W.value=Ve(!0),le=W.kind="init"):W.key.type==="Identifier"&&(W.key.name==="get"||W.key.name==="set")?(de=G=!0,le=W.kind=W.key.name,W.key=Qr(),X!==bt&&St(),W.value=Ar(Be(),!1)):St(),W.key.type==="Identifier"&&(ke||G))for(var ye=0;ye<P.properties.length;++ye){var _e=P.properties[ye];if(_e.key.name===W.key.name){var cr=le===_e.kind||de&&_e.kind==="init"||le==="init"&&(_e.kind==="get"||_e.kind==="set");cr&&!ke&&le==="init"&&_e.kind==="init"&&(cr=!1),cr&&ce(W.key.start,"Redefinition of property")}}P.properties.push(W)}return pe(P,"ObjectExpression")}function Qr(){return X===De||X===ht?Cr():Ct(!0)}function Ar(P,L){X===Ye?P.id=Ct():L?St():P.id=null,P.params=[];var G=!0;for(Oe(bt);!Se(yt);)G?G=!1:Oe(Nt),P.params.push(Ct());var W=Ie,de=fe;if(Ie=!0,fe=[],P.body=sr(!0),Ie=W,fe=de,ke||P.body.body.length&&Sr(P.body.body[0]))for(var le=P.id?-1:0;le<P.params.length;++le){var ye=le<0?P.id:P.params[le];if((jr(ye.name)||fr(ye.name))&&ce(ye.start,"Defining '"+ye.name+"' in strict mode"),le>=0)for(var _e=0;_e<le;++_e)ye.name===P.params[_e].name&&ce(ye.start,"Argument name clash in strict mode")}return pe(P,L?"FunctionDeclaration":"FunctionExpression")}function Pr(P,L,G){for(var W=[],de=!0;!Se(P);){if(de)de=!1;else if(Oe(Nt),L&&f.allowTrailingCommas&&Se(P))break;W.push(G&&X===Nt?null:Ve(!0))}return W}function Ct(P){var L=Be();return P&&f.forbidReserved==="everywhere"&&(P=!1),X===Ye?(!P&&(f.forbidReserved&&ln(Q)||ke&&jr(Q))&&s.slice(C,j).indexOf("\\")===-1&&ce(C,"The keyword '"+Q+"' is reserved"),L.name=Q):P&&X.keyword?L.name=X.keyword:St(),ue=!1,me(),pe(L,"Identifier")}})},vm:I=>{I.exports=requireVmBrowserify()}},g={};function S(I){var $=g[I];if($!==void 0)return $.exports;var F=g[I]={exports:{}};return d[I].call(F.exports,F,F.exports,S),F.exports}S.d=(I,$)=>{for(var F in $)S.o($,F)&&!S.o(I,F)&&Object.defineProperty(I,F,{enumerable:!0,get:$[F]})},S.o=(I,$)=>Object.prototype.hasOwnProperty.call(I,$),S.r=I=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})};var x={};return(()=>{S.r(x),S.d(x,{default:()=>F});const I=S("./original-repo/acorn.js");globalThis.acorn=I;const{Interpreter:$}=S("./original-repo/interpreter.js"),F=$})(),x=x.default,x})())})(jsInterpreter);var jsInterpreterExports=jsInterpreter.exports;const eo=getDefaultExportFromCjs(jsInterpreterExports);var Z=reactExports.createContext({registerProblem:noop$1});Z.displayName="ContestContext";function je({children:a}){let{student:o,setStudent:d,terminated:g}=v(),[S,x]=reactExports.useState({}),I=reactExports.useCallback((s,i)=>{x(y=>({...y,[s]:i}))},[]),[$,F]=reactExports.useState(!1),f=reactExports.useRef(null);return reactExports.useEffect(()=>{var s;g!==$&&(F(g),$||((s=f.current)==null||s.showModal()))},[g,$]),o.startedAt?c.createElement(Z.Provider,{value:{registerProblem:I}},c.createElement("div",{className:"break-before-page"},c.createElement("main",{className:"gap-x-10 [column-rule:solid_1px_var(--tw-prose-hr)] print:columns-2"},a)),c.createElement(Tt,{ref:f,schema:S})):c.createElement("div",{className:"flex h-[50vh] justify-center"},c.createElement("div",{className:"flex flex-col justify-center"},c.createElement("button",{className:"btn btn-success btn-lg",onClick:()=>{d({...o,startedAt:new Date,variant:gt()})}},"Inizia")))}var Tt=reactExports.forwardRef(function({schema:a},o){let{student:d}=v(),g=Object.keys(a);g.sort((I,$)=>I.localeCompare($,void 0,{numeric:!0}));let S=reactExports.useMemo(()=>{let I={id:d.variant,contestId:d.contestId,schema:a};return Me(d,{[I.id]:I})},[a,d]),x=sumBy(Object.values(a),"pointsCorrect");return c.createElement(Bt,{ref:o,title:"Prova terminata"},c.createElement("p",null,"La prova  terminata."),S!==void 0&&c.createElement(c.Fragment,null,c.createElement("p",null,"Hai ottenuto un punteggio di ",c.createElement("b",null,S)," su ",c.createElement("b",null,x),"."),c.createElement("div",{className:"w-full"},c.createElement("table",{className:"table-fixed prose-td:truncate"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{scope:"col"},"Domanda"),c.createElement("th",{scope:"col"},"Risposta"),c.createElement("th",{scope:"col"},"Soluzione"),c.createElement("th",{scope:"col"},"Punteggio"))),c.createElement("tbody",null,g.map(I=>{var f,s,i;let $=(i=(s=(f=d.answers)==null?void 0:f[I])==null?void 0:s.toString())==null?void 0:i.trim(),F=a[I];return c.createElement("tr",{key:I},c.createElement("td",null,I),c.createElement("td",null,$??"-"),c.createElement("td",null,F.solution),c.createElement("td",null,mt(F,$)))}))))))});function O(){return reactExports.useContext(Z)}var V=reactExports.createContext({id:void 0,points:[0,0,0]});V.displayName="ProblemContext";function ze({id:a,points:o,statement:d}){let{student:g}=v(),[S,x]=reactExports.useState(1),[I,$]=reactExports.useState(()=>g.variant?lt(`r#problem#${g.variant}#${a}`):0),F=reactExports.useCallback(()=>I,[I]),f=reactExports.useCallback(i=>{i&&i!==S&&defer(()=>x(i))},[S]),s=reactExports.useMemo(()=>reactExports.memo(d),[d]);return c.createElement(V.Provider,{value:{id:a,points:o}},c.createElement("div",{className:"relative"},!1,c.createElement(s,{variant:F,setVariantCount:f})),c.createElement("hr",{className:"last:hidden"}))}function Le({subId:a,children:o}){let{id:d,points:g}=reactExports.useContext(V),S=a?`${d}.${a}`:`${d}`;return c.createElement(V.Provider,{value:{id:S,points:g}},c.createElement("div",{className:"break-inside-avoid"},c.createElement("h3",null,"Domanda ",S),o))}function A(){return reactExports.useContext(V)}var Y=reactExports.createContext({id:""});Y.displayName="AnswerContext";function Fe({children:a}){let{student:o}=v(),{id:d}=A(),g=reactExports.useMemo(()=>{let S=reactExports.Children.toArray(a);return o.variant&&new T(`r#answers#${o.variant}#${d}`).shuffle(S),S},[o.variant,d,a]);return c.createElement("form",{className:D("answer-group my-5 flex-wrap rounded-xl bg-base-200 p-3","prose-p:my-1 print:flex print:border print:border-[var(--tw-prose-hr)] print:p-1")},g.map((S,x)=>c.createElement(Y.Provider,{key:x,value:{id:String.fromCodePoint(65+x)}},S)))}function Ue({correct:a,children:o}){var y;let{id:d}=reactExports.useContext(Y),{registerProblem:g}=O(),{id:S,points:x}=A(),{student:I,setStudent:$,terminated:F}=v(),f=(y=I.answers)==null?void 0:y[S],s=async _=>{await $({...I,answers:{...I.answers,[S]:_}})},i=reactExports.useId();return reactExports.useEffect(()=>{a&&g(`${S}`,{type:"text",pointsCorrect:x[0],pointsBlank:x[1],pointsWrong:x[2],solution:d})},[g,d,S,a,x]),c.createElement("div",{className:D("answer relative my-1 flex rounded-lg pl-2 pr-1 hover:bg-base-300 print:mr-4",F&&{"border-2 border-success":a===!0,"border-2 border-error":f===d&&a===!1})},c.createElement("input",{id:i,checked:f===d,className:D("radio radio-sm my-auto mr-4 bg-base-100 [print-color-adjust:exact] disabled:opacity-90 print:mr-2",F&&f===d&&{"radio-success":a===!0,"radio-error":a===!1}),onChange:_=>s(_.target.checked?d:void 0),type:"radio",disabled:F}),c.createElement("div",{className:"my-auto w-6 screen:hidden"},d,")"),c.createElement("label",{htmlFor:i,className:"grow"},o),c.createElement("div",{className:"absolute right-0 top-0 mr-1 flex h-full justify-center print:hidden"},c.createElement("button",{className:D("btn btn-square btn-ghost btn-sm my-auto",(f!==d||F)&&"hidden"),type:"button",onClick:()=>s(void 0),"aria-label":"Cancella risposta"},c.createElement(Trash2,{size:20}))))}function He({correct:a,type:o}){var s;let{registerProblem:d}=O(),{id:g,points:S}=A(),{student:x,setStudent:I,terminated:$}=v(),F=(s=x.answers)==null?void 0:s[g],f=async i=>{await I({...x,answers:{...x.answers,[g]:i}})};return reactExports.useEffect(()=>{d(`${g}`,{type:"text",pointsCorrect:S[0],pointsBlank:S[1],pointsWrong:S[2],solution:a})},[d,g,a,S]),c.createElement("div",{className:"px-2"},c.createElement("input",{className:D("input input-bordered w-72 max-w-full border-2 print:placeholder:text-transparent",$&&a!==void 0&&{"disabled:input-success":a===F,"disabled:input-error":a!==F}),onChange:i=>f(i.target.value||void 0),onWheel:i=>i.currentTarget.blur(),placeholder:"Inserisci la risposta",type:o,value:F??"",disabled:$,"aria-label":"Risposta"}))}function We({children:a}){let{terminated:o}=v();if(o)return c.createElement("div",{className:"my-5 rounded-xl bg-base-200 print:hidden"},c.createElement("div",{className:"collapse"},c.createElement("input",{type:"checkbox"}),c.createElement("div",{className:"collapse-title text-xl font-medium"},"Mostra soluzione"),c.createElement("div",{className:"collapse-content"},a)))}var Ge=z$2.enum(["Number","String","Array","Boolean"]),Ft=z$2.object({type:z$2.literal("input_value"),name:z$2.string(),check:Ge}),Je=z$2.object({type:z$2.string(),message0:z$2.string(),args0:z$2.array(Ft).optional(),colour:z$2.union([z$2.number(),z$2.string()]),tooltip:z$2.string(),helpUrl:z$2.string(),maxInstances:z$2.number().optional()}),Ut=Je.extend({nextStatement:z$2.literal(null).optional(),previousStatement:z$2.literal(null).optional(),js:z$2.string()}),Ht=Je.extend({output:Ge,js:z$2.tuple([z$2.string(),z$2.string().startsWith("ORDER_")])}),Qe=z$2.union([Ut,Ht]),Qt=reactExports.lazy(()=>__vitePreload(()=>import("./code-highlight-4YYAT6IQ-23GLYucv.js"),__vite__mapDeps([0,1,2])));function z(a){return c.createElement(reactExports.Suspense,{fallback:c.createElement(qt,{...a})},c.createElement(Qt,{...a}))}function qt({inline:a,code:o,noLineNumbers:d}){return a?c.createElement("code",null,o):c.createElement("pre",null,c.createElement("code",null,o.split(`
`).map((g,S)=>c.createElement("span",{key:S},c.createElement("span",{className:D("mr-6 inline-block w-7 select-none text-right",d&&"hidden")},S+1),c.createElement("span",null,g)))))}var Xe={kind:"categoryToolbox",contents:[{kind:"category",name:"Variabili",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"Matematica",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"math_arithmetic",fields:{OP:"ADD"}},{kind:"block",type:"math_number_property",fields:{PROPERTY:"EVEN"}},{kind:"block",type:"math_on_list",fields:{OP:"SUM"}}]},{kind:"category",name:"Logica",categorystyle:"logic_category",contents:[{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"controls_if"},{kind:"block",type:"controls_if",extraState:{hasElse:"true"}}]},{kind:"category",name:"Cicli",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{block:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for",fields:{VAR:"i"},inputs:{FROM:{block:{type:"math_number",fields:{NUM:1}}},TO:{block:{type:"math_number",fields:{NUM:10}}},BY:{block:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"controls_forEach"}]},{kind:"category",name:"Liste",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_repeat",inputs:{NUM:{block:{type:"math_number",fields:{NUM:5}}}}},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_getIndex",fields:{MODE:"GET",WHERE:"FROM_START"}},{kind:"block",type:"lists_setIndex",fields:{MODE:"SET",WHERE:"FROM_START"}}]}]},Ze={blocks:{languageVersion:0,blocks:[{type:"start",id:"y=zq)Uya2A/{vyOtN[i6",x:30,y:30}]},variables:[]},to=1e3,B=class extends eo{constructor(a,o){super(a,(d,g)=>{d.setProperty(g,"highlightBlock",d.createNativeFunction(S=>{this.highlightedBlock=S,this.stepFinished=!0})),d.setProperty(g,"exit",d.createNativeFunction((S,x)=>{this.running=!1,this.correct=S,this.msg=x})),d.setProperty(g,"hiddenState",d.nativeToPseudo(o)),d.setProperty(g,"loopTrap",to)}),this.stepFinished=!1,this.highlightedBlock="",this.running=!0,this.correct=!1,this.step=()=>{if(!this.running)return!1;do{this.stepFinished=!1;try{this.running=super.step()&&this.running}catch{this.running=!1}}while(this.running&&!this.stepFinished);return this.running}}};function ee(a,o){let[d,g]=reactExports.useState(),[S,x]=reactExports.useState({highlightedBlock:"",running:!0,correct:!1,msg:"",globalScope:{}}),I=reactExports.useCallback(()=>{let $=new B(a,o);g($),x({highlightedBlock:($==null?void 0:$.highlightedBlock)??"",running:($==null?void 0:$.running)??!1,correct:($==null?void 0:$.correct)??!1,msg:($==null?void 0:$.msg)??"",globalScope:($==null?void 0:$.pseudoToNative($.globalScope.object))??{}})},[a,o]);return reactExports.useEffect(()=>{I()},[I,a,o]),{step:()=>{d==null||d.step(),x({highlightedBlock:(d==null?void 0:d.highlightedBlock)??"",running:(d==null?void 0:d.running)??!1,correct:(d==null?void 0:d.correct)??!1,msg:(d==null?void 0:d.msg)??"",globalScope:(d==null?void 0:d.pseudoToNative(d.globalScope.object))??{}})},reset:I,...S}}function te(a,o){return reactExports.useEffect(()=>{return window.addEventListener("message",d),()=>window.removeEventListener("message",d);function d(g){g.source===a&&o(g.data)}},[a,o]),reactExports.useCallback(d=>a==null?void 0:a.postMessage(d,"*"),[a])}function ne({toolbox:a,initialBlocks:o,testcases:d,debug:g,customBlocks:S,Visualizer:x}){var ct;let{student:I,setStudent:$,terminated:F}=v(),{registerProblem:f}=O(),{id:s,points:i}=A();reactExports.useEffect(()=>{for(let he=0;he<d.length;he++)f(`${s}.${he+1}`,{type:"text",pointsCorrect:i[0],pointsBlank:i[1],pointsWrong:i[2],solution:""})},[f,s,d,i]);let y=((ct=I.extraData)==null?void 0:ct[`blockly-${s}`])??o??Ze,_=async he=>{await $({...I,extraData:{...I.extraData,[`blockly-${s}`]:he}})},[R,N]=reactExports.useState(null),[b,C]=reactExports.useState(!1),[j,H]=reactExports.useState(!0),[J,X]=reactExports.useState(!1),[Q,ue]=reactExports.useState({}),[oe,ge]=reactExports.useState(""),[xe,we]=reactExports.useState(0),[Ke,Ie]=reactExports.useState(()=>range(d.length).map(he=>({correct:!1,index:he}))),{step:fe,reset:ke,running:ce,highlightedBlock:At,globalScope:De,correct:wt,msg:ht}=ee(oe,d[xe]),Ye=reactExports.useMemo(()=>Object.fromEntries(Object.entries(Q).map(([he,ve])=>[ve,De[he]])),[Q,De]),rt=reactExports.useMemo(()=>xt(Qe.array(),S,{prefix:"Invalid custom block definition"}),[S]),it=te(R==null?void 0:R.contentWindow,he=>{switch(he.cmd){case"init":{it({cmd:"init",toolbox:a??Xe,initialBlocks:y,debug:g,customBlocks:rt,readonly:F});break}case"ready":{C(!0);break}case"blocks":{_(he.blocks),g!=null&&g.logBlocks&&console.info(JSON.stringify(he.blocks,void 0,2));break}case"code":{ge(he.code),X(!1),H(!0),g!=null&&g.logJs&&console.info(he.code);break}case"variables":{ue(he.variablesMapping),g!=null&&g.logVariables&&console.info(he.variablesMapping);break}}});reactExports.useEffect(()=>{it({cmd:"highlight",highlightedBlock:At})},[it,At]),reactExports.useEffect(()=>{ce||X(!1)},[ce]);let vt=reactExports.useRef(F);reactExports.useEffect(()=>{var he;vt.current!==F&&(vt.current=F,C(!1),(he=R==null?void 0:R.contentWindow)==null||he.location.reload())},[F,R==null?void 0:R.contentWindow]);let[ut,Pt]=reactExports.useState(3);reactExports.useEffect(()=>{let he=[5e3,2e3,1e3,500,200,100,10];if(J){let ve=setInterval(fe,he[ut]);return()=>clearInterval(ve)}},[fe,ut,J]);let It=async()=>{let he=await Promise.all(d.map(async(Ee,Te)=>{let be=new B(oe,Ee);for(let $e=0;be.running;$e++)be.step(),$e%64===0&&await new Promise(ft=>setTimeout(ft,5));return{...be,index:Te}}));Ie(he),H(!1);let ve={...I.answers};for(let Ee=0;Ee<d.length;Ee++)ve[`${s}.${Ee+1}`]=he[Ee].correct?"":"";await $({...I,answers:ve})},[$t,kt]=reactExports.useState(!1);return reactExports.useEffect(()=>kt(!1),[ht]),c.createElement("div",{className:D("not-prose relative inset-y-0 left-1/2 w-screen -translate-x-1/2 p-4 pt-8","flex flex-col-reverse items-start justify-between gap-6 overflow-x-hidden *:mx-3 lg:flex-row lg:gap-0")},c.createElement("div",{className:"flex h-full max-h-[min(720px,90vh)] basis-[min(auto,50%)] flex-col gap-6 self-stretch overflow-x-hidden"},c.createElement("div",{className:"join join-horizontal"},Ke.map(({index:he,correct:ve,msg:Ee})=>c.createElement("button",{key:he,onClick:()=>{we(he),X(!1)},className:D("btn join-item z-10 rounded-lg",!j&&"tooltip",he===xe&&"btn-info"),"data-tip":Ee},c.createElement("div",{className:"flex items-center gap-3"},c.createElement("p",null,"Livello ",he+1),j?c.createElement(HelpCircle,{size:32}):ve?c.createElement(CheckCircle2,{size:32,className:"fill-success stroke-success-content"}):c.createElement(XCircle,{size:32,className:"fill-error stroke-error-content"}))))),c.createElement("div",{className:"relative flex flex-col overflow-hidden shadow-xl"},c.createElement("div",{className:"overflow-auto rounded-xl border-2 border-[#c6c6c6] bg-white [color-scheme:light]"},x&&c.createElement(x,{variables:{blocklyVariables:Ye,hiddenState:De==null?void 0:De.hiddenState,msg:ht}}),ht&&!$t&&c.createElement("div",{className:"absolute inset-x-0 bottom-0 z-50 p-4"},c.createElement("div",{role:"alert",className:D("alert",wt?"alert-success":"alert-error")},wt?c.createElement(CheckCircle,null):c.createElement(AlertTriangle,null),c.createElement("span",null,ht),c.createElement("button",{onClick:()=>kt(!0),"aria-label":"Nascondi messaggio"},c.createElement(MessageSquareOff,null))))))),c.createElement("div",{className:"flex min-h-[min(720px,90vh)] flex-[1_0_50%] flex-col-reverse gap-6 self-stretch lg:flex-col"},c.createElement("div",{className:"flex gap-6"},c.createElement("div",{className:"join join-horizontal"},c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui/pausa"},c.createElement("button",{className:"btn btn-info rounded-[inherit]",disabled:!ce||j,onClick:()=>X(!J),"aria-label":"Esugui un blocco"},J?c.createElement(Pause,{className:"size-6"}):c.createElement(Play,{className:"size-6"}))),c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui un blocco"},c.createElement("button",{className:"btn btn-info rounded-[inherit]",disabled:!ce||j,onClick:fe,"aria-label":"Esugui un blocco"},c.createElement(SkipForward,{className:"size-6"}))),c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui da capo"},c.createElement("button",{className:"btn btn-info rounded-[inherit]","aria-label":"Esegui da capo",disabled:j,onClick:()=>{ke(),X(!1)}},c.createElement(RotateCcw,{className:"size-6"})))),c.createElement("div",{className:"tooltip","data-tip":"Correggi la soluzione"},c.createElement("button",{className:"btn btn-success","aria-label":"Correggi la soluzione",disabled:!j||!b,onClick:It},c.createElement(Send,{className:"size-6"}))),c.createElement("div",null,c.createElement("input",{className:"range",type:"range",min:"0",max:"6",value:ut,onChange:he=>Pt(+he.target.value),"aria-label":"Velocit di esecuzione"}),c.createElement("div",{className:"flex w-full justify-between px-2 text-xs"},c.createElement("span",null,"Lento"),c.createElement("span",null,"Veloce"))),!1),c.createElement(ko,{ref:N,ready:b})))}var ko=reactExports.forwardRef(function({ready:a},o){return c.createElement("div",{className:"relative flex grow flex-col overflow-hidden rounded-xl border-2 border-[#c6c6c6]"},c.createElement("iframe",{ref:o,src:new URL("iframe-DAft48MT.html",import.meta.url).href,className:"grow",title:"Area di lavoro di Blockly",loading:"lazy"}),!a&&c.createElement("div",{className:"absolute inset-0 z-50 bg-white text-slate-700"},c.createElement(Et,null)))});function re({src:a,alt:o,title:d}){return c.createElement("img",{className:"max-h-[90vh] min-w-0 p-4 first:rounded-l-xl last:rounded-r-xl dark:bg-white print:m-0 print:max-h-[60vh] print:max-w-full",src:a.src,width:a.width,height:a.height,alt:o,title:d,style:{maxWidth:`min(100%, calc(90vh * ${a.width} / ${a.height}))`}})}function se({display:a,children:o}){let d=reactExports.useRef(null);return reactExports.useEffect(()=>{d.current&&katex.render(o,d.current,{displayMode:a})},[d,o,a]),c.createElement("span",{ref:d})}function Re({children:a}){return a}var U={Answer:Ue,AnswerGroup:Fe,Blockly:ne,Code:z,Contest:je,Explanation:We,Image:re,MathExpr:reactExports.memo(se),OpenAnswer:He,Problem:ze,Section:Re,SubProblem:Le};function ie({children:a}){return c.createElement(MDXProvider,{components:U},c.createElement("div",{className:D("prose prose-lg mx-auto my-5 px-4 print:prose-sm screen:pb-10 lg:max-w-4xl print:max-w-full print:text-xs","prose-table:text-center print:prose-headings:mt-2 print:prose-hr:my-4","prose-headings:break-after-avoid prose-p:break-inside-avoid prose-ul:break-before-avoid prose-ul:break-inside-avoid")},a))}function tt({children:a}){var i,y;let o=reactExports.useRef(null),{contest:d,student:g,reset:S,participation:x,terminated:I,logout:$}=v(),F=(i=g.personalInformation)==null?void 0:i.name,f=(y=g.personalInformation)==null?void 0:y.surname,s=Math.round(sumBy(Object.values(g.answers??{}),_=>+!!_)/d.problemIds.length*100);return reactExports.useEffect(()=>{},[]),c.createElement("div",{className:"h-dvh screen:overflow-y-scroll"},c.createElement("div",{className:"navbar sticky top-0 z-20 h-16 justify-between bg-base-300/85 px-3 text-base-content backdrop-blur print:hidden"},c.createElement("div",{className:"dropdown max-w-full flex-none"},c.createElement("div",{tabIndex:0,role:"button",className:"btn btn-ghost no-animation w-full flex-nowrap"},c.createElement(User,{className:"flex-none"}),c.createElement("div",{className:"truncate uppercase"},F," ",f)),$&&c.createElement("ul",{className:"menu dropdown-content menu-sm z-30 mt-3 w-52 rounded-box bg-base-300 p-2 text-base-content shadow-lg"},c.createElement("li",null,c.createElement("button",{onClick:$},"Cambia utente")))),c.createElement("div",{className:"h-full gap-3"},c.createElement(z$1,{className:"hidden min-w-[5rem] sm:block",percentage:s},s,"%"),c.createElement("div",{className:"flex-none px-3"},I||!x.startingTime||!d.duration?c.createElement("span",{className:"font-mono"},"00:00"):c.createElement(Rt,{startTime:x.startingTime,duration:d.duration})),c.createElement("div",{className:"h-full flex-none py-0.5"},I&&S?c.createElement("button",{className:"btn btn-warning btn-sm h-full",onClick:S},"Ricomincia"):c.createElement("button",{className:"btn btn-success btn-sm h-full",disabled:I||!x.startingTime,onClick:()=>{var _;return(_=o.current)==null?void 0:_.showModal()}},"Termina")))),c.createElement(Vo,{ref:o}),c.createElement(ErrorBoundary,{FallbackComponent:Yt},c.createElement(ie,null,d.name&&c.createElement("h1",{className:"text-pretty"},d.name),a)))}var Vo=reactExports.forwardRef(function(a,o){let{submit:d}=v();return c.createElement(Bt,{ref:o,title:"Confermi di voler terminare?"},c.createElement("p",null,"Confermando non potrai pi modificare le tue risposte."),c.createElement("div",{className:"mt-3 flex flex-row justify-center gap-5"},c.createElement("button",{className:"btn btn-info"},"Annulla"),c.createElement("button",{className:"btn btn-error",onClick:()=>d()},"Conferma")))}),ae=reactExports.createContext({});ae.displayName="StudentContext";function M({children:a,...o}){return c.createElement(ae.Provider,{value:{...o}},c.createElement(tt,null,a))}function v(){return reactExports.useContext(ae)}function Go({contestName:a,duration:o,questionCount:d,children:g}){let[S,x]=nt("submit",!1),[I,$]=nt("student",{id:"",personalInformation:{name:"Utente",surname:"anonimo"},answers:{},variant:"0"}),F=reactExports.useMemo(()=>I.startedAt&&addMinutes(I.startedAt,o),[I.startedAt,o]),f=Wt(F),s={id:"",name:a,problemIds:range(d??0).map(_=>_.toString()),duration:o,personalInformation:[],hasVariants:!0,hasOnline:!0,hasPdf:!0,allowRestart:!0,allowImport:!0,statementVersion:1},i={id:"",schoolId:"",contestId:"",name:"",teacher:"",startingTime:I.startedAt,finalized:!1},y=reactExports.useCallback(()=>{x(!1),$(_=>({..._,answers:{},extraData:{},startedAt:void 0}))},[$,x]);return c.createElement(M,{contest:s,participation:i,student:I,setStudent:async _=>$(_),submit:()=>x(!0),reset:y,terminated:f||S},g)}function nt(a,o,d){let g=`${window.location.pathname}#${a}`,S=localStorage.getItem(g),[x,I]=reactExports.useState(S?(d??JSON.parse)(S):o),$=reactExports.useCallback(F=>{I(f=>{let s=isFunction$1(F)?F(f):F;return s===void 0?localStorage.removeItem(g):localStorage.setItem(g,JSON.stringify(s)),s})},[g]);return[x,$]}const OlinfoAuth=({children:a,...o})=>jsxRuntimeExports.jsx(Go,{...o,children:jsxRuntimeExports.jsx(OlinfoWrapper,{children:a})});function OlinfoWrapper({children:a}){const{student:o,setStudent:d}=v(),[g,S]=reactExports.useState();return reactExports.useEffect(()=>{getUser().then(S).catch(x=>console.log(`Error: failed to get user: ${x.message}`))},[]),reactExports.useEffect(()=>{const x=o.personalInformation;g&&(g.name!==x.name||g.surname!==x.surname)&&d({...o,personalInformation:{...x,...g}})},[o,g]),a}async function getUser(){const o=cookie.parse(window.document.cookie).training_token;if(!o)throw new Error("Not logged in");const g=jwtDecode(o).username,x=await(await fetch("https://training.olinfo.it/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get",username:g})})).json();return{name:x.first_name,surname:x.last_name}}export{D,OlinfoAuth as O,range as r,useMDXComponents as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/code-highlight-4YYAT6IQ-23GLYucv.js","assets/react-dom-DWilhIVE.js","assets/commonjs-helper-3Jsk8tIi.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=olinfo-auth-CYSVJCgl.js.map
