/*! For licenses information, see LICENSES.txt */
"use client";import{t as toDate,m as millisecondsInMinute,d as differenceInMilliseconds,e as createLucideIcon,r as reactExports,j as jsxRuntimeExports,T as TriangleAlert,C as Ct,i as isObject,f as baseGetTag,g as root,h as isObjectLike,l as freeGlobal,n as isSymbol,S as Symbol$1,c as clsx,p as p$3,k as kn,I as In,V as Vn,o as d,X as Xt,G as Gt,J as Jt,Y as Yt,q as Sn,s as Be,u as So,v as Co,w as le,x as n$3,A as At}from"../_virtual_quizms-routes-a97a59f5.js";import{z as z$1}from"../t/1a8a25e4-zod.js";import{i as isArray,t as toString}from"../y/e6512e24-toString.js";import{g as getDefaultExportFromCjs}from"../v/35e886f4-commonjs-helper.js";import{k as katex}from"../h/d558c6d7-katex.js";function addMinutes(R,T,L){const V=toDate(R);return V.setTime(V.getTime()+T*millisecondsInMinute),V}function getRoundingMethod(R){return T=>{const L=Math.trunc,V=L(T);return V===0?0:V}}function differenceInSeconds(R,T,L){const V=differenceInMilliseconds(R,T)/1e3;return getRoundingMethod()(V)}function isAfter(R,T){return+toDate(R)>+toDate(T)}const __iconNode$c=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CircleCheck=createLucideIcon("CircleCheck",__iconNode$c);const __iconNode$b=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CircleHelp=createLucideIcon("CircleHelp",__iconNode$b);const __iconNode$a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("CircleX",__iconNode$a);const __iconNode$9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-1",key:"zg0ygc"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"M16 18v-3",key:"j5jt4h"}]],FileChartColumn=createLucideIcon("FileChartColumn",__iconNode$9);const __iconNode$8=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],LogOut=createLucideIcon("LogOut",__iconNode$8);const __iconNode$7=[["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M3.6 3.6c-.4.3-.6.8-.6 1.4v16l4-4h10",key:"pwpm4a"}]],MessageSquareOff=createLucideIcon("MessageSquareOff",__iconNode$7);const __iconNode$6=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Pause=createLucideIcon("Pause",__iconNode$6);const __iconNode$5=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Play=createLucideIcon("Play",__iconNode$5);const __iconNode$4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("RotateCcw",__iconNode$4);const __iconNode$3=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],RotateCw=createLucideIcon("RotateCw",__iconNode$3);const __iconNode$2=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Send=createLucideIcon("Send",__iconNode$2);const __iconNode$1=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],SkipForward=createLucideIcon("SkipForward",__iconNode$1);const __iconNode=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("Trash2",__iconNode),ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(T){super(T),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(T){return{didCatch:!0,error:T}}resetErrorBoundary(){const{error:T}=this.state;if(T!==null){for(var L,V,Y=arguments.length,H=new Array(Y),K=0;K<Y;K++)H[K]=arguments[K];(L=(V=this.props).onReset)===null||L===void 0||L.call(V,{args:H,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(T,L){var V,Y;(V=(Y=this.props).onError)===null||V===void 0||V.call(Y,T,L)}componentDidUpdate(T,L){const{didCatch:V}=this.state,{resetKeys:Y}=this.props;if(V&&L.error!==null&&hasArrayChanged(T.resetKeys,Y)){var H,K;(H=(K=this.props).onReset)===null||H===void 0||H.call(K,{next:Y,prev:T.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:T,fallbackRender:L,FallbackComponent:V,fallback:Y}=this.props,{didCatch:H,error:K}=this.state;let ee=T;if(H){const te={error:K,resetErrorBoundary:this.resetErrorBoundary};if(typeof L=="function")ee=L(te);else if(V)ee=reactExports.createElement(V,te);else if(Y!==void 0)ee=Y;else throw K}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:H,error:K,resetErrorBoundary:this.resetErrorBoundary}},ee)}}function hasArrayChanged(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return R.length!==T.length||R.some((L,V)=>!Object.is(L,T[V]))}function assertErrorBoundaryContext(R){if(R==null||typeof R.didCatch!="boolean"||typeof R.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function useErrorBoundary(){const R=reactExports.useContext(ErrorBoundaryContext);assertErrorBoundaryContext(R);const[T,L]=reactExports.useState({error:null,hasError:!1}),V=reactExports.useMemo(()=>({resetBoundary:()=>{R.resetErrorBoundary(),L({error:null,hasError:!1})},showBoundary:Y=>L({error:Y,hasError:!0})}),[R.resetErrorBoundary]);if(T.hasError)throw T.error;return V}const n$2=!1;function b$2({children:R,...T}){return jsxRuntimeExports.jsx(ErrorBoundary,{...T,FallbackComponent:p$2,children:R})}function p$2({error:R,resetErrorBoundary:T}){return reactExports.useEffect(()=>()=>{},[]),jsxRuntimeExports.jsxs("div",{className:"not-prose text-base-content text-base flex w-full grow flex-col items-center justify-center p-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-bold",children:"Errore"}),jsxRuntimeExports.jsx("div",{className:"text-base-content/80",children:"Si è verificato un errore nell'applicazione."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-red-200 dark:bg-error text-red-900 dark:text-error-content text-lg font-medium p-4 rounded-lg",children:[jsxRuntimeExports.jsx(TriangleAlert,{size:16}),jsxRuntimeExports.jsx("div",{className:"break-words",children:R.message})]}),T&&jsxRuntimeExports.jsx(Ct,{className:"btn-ghost",icon:RotateCw,onClick:()=>T(),children:"Ricarica"}),n$2]})}function identity(R){return R}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(R){if(!isObject(R))return!1;var T=baseGetTag(R);return T==funcTag$1||T==genTag||T==asyncTag||T==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var R=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}();function isMasked(R){return!!maskSrcKey&&maskSrcKey in R}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(R){if(R!=null){try{return funcToString$1.call(R)}catch{}try{return R+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(R){if(!isObject(R)||isMasked(R))return!1;var T=isFunction(R)?reIsNative:reIsHostCtor;return T.test(toSource(R))}function getValue(R,T){return R?.[T]}function getNative(R,T){var L=getValue(R,T);return baseIsNative(L)?L:void 0}var WeakMap=getNative(root,"WeakMap"),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(R,T){var L=typeof R;return T=T??MAX_SAFE_INTEGER$1,!!T&&(L=="number"||L!="symbol"&&reIsUint.test(R))&&R>-1&&R%1==0&&R<T}function eq(R,T){return R===T||R!==R&&T!==T}var MAX_SAFE_INTEGER=9007199254740991;function isLength(R){return typeof R=="number"&&R>-1&&R%1==0&&R<=MAX_SAFE_INTEGER}function isArrayLike(R){return R!=null&&isLength(R.length)&&!isFunction(R)}var objectProto$8=Object.prototype;function isPrototype(R){var T=R&&R.constructor,L=typeof T=="function"&&T.prototype||objectProto$8;return R===L}function baseTimes(R,T){for(var L=-1,V=Array(R);++L<R;)V[L]=T(L);return V}var argsTag$2="[object Arguments]";function baseIsArguments(R){return isObjectLike(R)&&baseGetTag(R)==argsTag$2}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(R){return isObjectLike(R)&&hasOwnProperty$6.call(R,"callee")&&!propertyIsEnumerable$1.call(R,"callee")};function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(R){return isObjectLike(R)&&isLength(R.length)&&!!typedArrayTags[baseGetTag(R)]}function baseUnary(R){return function(T){return R(T)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var R=freeModule&&freeModule.require&&freeModule.require("util").types;return R||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function arrayLikeKeys(R,T){var L=isArray(R),V=!L&&isArguments(R),Y=!L&&!V&&isBuffer(R),H=!L&&!V&&!Y&&isTypedArray(R),K=L||V||Y||H,ee=K?baseTimes(R.length,String):[],te=ee.length;for(var O in R)hasOwnProperty$5.call(R,O)&&!(K&&(O=="length"||Y&&(O=="offset"||O=="parent")||H&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||isIndex(O,te)))&&ee.push(O);return ee}function overArg(R,T){return function(L){return R(T(L))}}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeys(R){if(!isPrototype(R))return nativeKeys(R);var T=[];for(var L in Object(R))hasOwnProperty$4.call(R,L)&&L!="constructor"&&T.push(L);return T}function keys(R){return isArrayLike(R)?arrayLikeKeys(R):baseKeys(R)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(R,T){if(isArray(R))return!1;var L=typeof R;return L=="number"||L=="symbol"||L=="boolean"||R==null||isSymbol(R)?!0:reIsPlainProp.test(R)||!reIsDeepProp.test(R)||T!=null&&R in Object(T)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(R){var T=this.has(R)&&delete this.__data__[R];return this.size-=T?1:0,T}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(R){var T=this.__data__;if(nativeCreate){var L=T[R];return L===HASH_UNDEFINED$2?void 0:L}return hasOwnProperty$3.call(T,R)?T[R]:void 0}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas(R){var T=this.__data__;return nativeCreate?T[R]!==void 0:hasOwnProperty$2.call(T,R)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(R,T){var L=this.__data__;return this.size+=this.has(R)?0:1,L[R]=nativeCreate&&T===void 0?HASH_UNDEFINED$1:T,this}function Hash(R){var T=-1,L=R==null?0:R.length;for(this.clear();++T<L;){var V=R[T];this.set(V[0],V[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(R,T){for(var L=R.length;L--;)if(eq(R[L][0],T))return L;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(R){var T=this.__data__,L=assocIndexOf(T,R);if(L<0)return!1;var V=T.length-1;return L==V?T.pop():splice.call(T,L,1),--this.size,!0}function listCacheGet(R){var T=this.__data__,L=assocIndexOf(T,R);return L<0?void 0:T[L][1]}function listCacheHas(R){return assocIndexOf(this.__data__,R)>-1}function listCacheSet(R,T){var L=this.__data__,V=assocIndexOf(L,R);return V<0?(++this.size,L.push([R,T])):L[V][1]=T,this}function ListCache(R){var T=-1,L=R==null?0:R.length;for(this.clear();++T<L;){var V=R[T];this.set(V[0],V[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(R){var T=typeof R;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?R!=="__proto__":R===null}function getMapData(R,T){var L=R.__data__;return isKeyable(T)?L[typeof T=="string"?"string":"hash"]:L.map}function mapCacheDelete(R){var T=getMapData(this,R).delete(R);return this.size-=T?1:0,T}function mapCacheGet(R){return getMapData(this,R).get(R)}function mapCacheHas(R){return getMapData(this,R).has(R)}function mapCacheSet(R,T){var L=getMapData(this,R),V=L.size;return L.set(R,T),this.size+=L.size==V?0:1,this}function MapCache(R){var T=-1,L=R==null?0:R.length;for(this.clear();++T<L;){var V=R[T];this.set(V[0],V[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(R,T){if(typeof R!="function"||T!=null&&typeof T!="function")throw new TypeError(FUNC_ERROR_TEXT);var L=function(){var V=arguments,Y=T?T.apply(this,V):V[0],H=L.cache;if(H.has(Y))return H.get(Y);var K=R.apply(this,V);return L.cache=H.set(Y,K)||H,K};return L.cache=new(memoize.Cache||MapCache),L}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(R){var T=memoize(R,function(V){return L.size===MAX_MEMOIZE_SIZE&&L.clear(),V}),L=T.cache;return T}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(R){var T=[];return R.charCodeAt(0)===46&&T.push(""),R.replace(rePropName,function(L,V,Y,H){T.push(Y?H.replace(reEscapeChar,"$1"):V||L)}),T});function castPath(R,T){return isArray(R)?R:isKey(R,T)?[R]:stringToPath(toString(R))}function toKey(R){if(typeof R=="string"||isSymbol(R))return R;var T=R+"";return T=="0"&&1/R==-1/0?"-0":T}function baseGet(R,T){T=castPath(T,R);for(var L=0,V=T.length;R!=null&&L<V;)R=R[toKey(T[L++])];return L&&L==V?R:void 0}function get(R,T,L){var V=R==null?void 0:baseGet(R,T);return V===void 0?L:V}function arrayPush(R,T){for(var L=-1,V=T.length,Y=R.length;++L<V;)R[Y+L]=T[L];return R}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(R){var T=this.__data__,L=T.delete(R);return this.size=T.size,L}function stackGet(R){return this.__data__.get(R)}function stackHas(R){return this.__data__.has(R)}var LARGE_ARRAY_SIZE=200;function stackSet(R,T){var L=this.__data__;if(L instanceof ListCache){var V=L.__data__;if(!Map||V.length<LARGE_ARRAY_SIZE-1)return V.push([R,T]),this.size=++L.size,this;L=this.__data__=new MapCache(V)}return L.set(R,T),this.size=L.size,this}function Stack(R){var T=this.__data__=new ListCache(R);this.size=T.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(R,T){for(var L=-1,V=R==null?0:R.length,Y=0,H=[];++L<V;){var K=R[L];T(K,L,R)&&(H[Y++]=K)}return H}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(R){return R==null?[]:(R=Object(R),arrayFilter(nativeGetSymbols(R),function(T){return propertyIsEnumerable.call(R,T)}))}:stubArray;function baseGetAllKeys(R,T,L){var V=T(R);return isArray(R)?V:arrayPush(V,L(R))}function getAllKeys(R){return baseGetAllKeys(R,keys,getSymbols)}var DataView=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map&&getTag(new Map)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(R){var T=baseGetTag(R),L=T==objectTag$1?R.constructor:void 0,V=L?toSource(L):"";if(V)switch(V){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return T});var Uint8Array=root.Uint8Array,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(R){return this.__data__.set(R,HASH_UNDEFINED),this}function setCacheHas(R){return this.__data__.has(R)}function SetCache(R){var T=-1,L=R==null?0:R.length;for(this.__data__=new MapCache;++T<L;)this.add(R[T])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(R,T){for(var L=-1,V=R==null?0:R.length;++L<V;)if(T(R[L],L,R))return!0;return!1}function cacheHas(R,T){return R.has(T)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(R,T,L,V,Y,H){var K=L&COMPARE_PARTIAL_FLAG$5,ee=R.length,te=T.length;if(ee!=te&&!(K&&te>ee))return!1;var O=H.get(R),g=H.get(T);if(O&&g)return O==T&&g==R;var y=-1,N=!0,M=L&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(H.set(R,T),H.set(T,R);++y<ee;){var k=R[y],D=T[y];if(V)var j=K?V(D,k,y,T,R,H):V(k,D,y,R,T,H);if(j!==void 0){if(j)continue;N=!1;break}if(M){if(!arraySome(T,function(U,W){if(!cacheHas(M,W)&&(k===U||Y(k,U,L,V,H)))return M.push(W)})){N=!1;break}}else if(!(k===D||Y(k,D,L,V,H))){N=!1;break}}return H.delete(R),H.delete(T),N}function mapToArray(R){var T=-1,L=Array(R.size);return R.forEach(function(V,Y){L[++T]=[Y,V]}),L}function setToArray(R){var T=-1,L=Array(R.size);return R.forEach(function(V){L[++T]=V}),L}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(R,T,L,V,Y,H,K){switch(L){case dataViewTag:if(R.byteLength!=T.byteLength||R.byteOffset!=T.byteOffset)return!1;R=R.buffer,T=T.buffer;case arrayBufferTag:return!(R.byteLength!=T.byteLength||!H(new Uint8Array(R),new Uint8Array(T)));case boolTag:case dateTag:case numberTag:return eq(+R,+T);case errorTag:return R.name==T.name&&R.message==T.message;case regexpTag:case stringTag:return R==T+"";case mapTag:var ee=mapToArray;case setTag:var te=V&COMPARE_PARTIAL_FLAG$4;if(ee||(ee=setToArray),R.size!=T.size&&!te)return!1;var O=K.get(R);if(O)return O==T;V|=COMPARE_UNORDERED_FLAG$2,K.set(R,T);var g=equalArrays(ee(R),ee(T),V,Y,H,K);return K.delete(R),g;case symbolTag:if(symbolValueOf)return symbolValueOf.call(R)==symbolValueOf.call(T)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(R,T,L,V,Y,H){var K=L&COMPARE_PARTIAL_FLAG$3,ee=getAllKeys(R),te=ee.length,O=getAllKeys(T),g=O.length;if(te!=g&&!K)return!1;for(var y=te;y--;){var N=ee[y];if(!(K?N in T:hasOwnProperty$1.call(T,N)))return!1}var M=H.get(R),k=H.get(T);if(M&&k)return M==T&&k==R;var D=!0;H.set(R,T),H.set(T,R);for(var j=K;++y<te;){N=ee[y];var U=R[N],W=T[N];if(V)var re=K?V(W,U,N,T,R,H):V(U,W,N,R,T,H);if(!(re===void 0?U===W||Y(U,W,L,V,H):re)){D=!1;break}j||(j=N=="constructor")}if(D&&!j){var ie=R.constructor,ne=T.constructor;ie!=ne&&"constructor"in R&&"constructor"in T&&!(typeof ie=="function"&&ie instanceof ie&&typeof ne=="function"&&ne instanceof ne)&&(D=!1)}return H.delete(R),H.delete(T),D}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(R,T,L,V,Y,H){var K=isArray(R),ee=isArray(T),te=K?arrayTag:getTag(R),O=ee?arrayTag:getTag(T);te=te==argsTag?objectTag:te,O=O==argsTag?objectTag:O;var g=te==objectTag,y=O==objectTag,N=te==O;if(N&&isBuffer(R)){if(!isBuffer(T))return!1;K=!0,g=!1}if(N&&!g)return H||(H=new Stack),K||isTypedArray(R)?equalArrays(R,T,L,V,Y,H):equalByTag(R,T,te,L,V,Y,H);if(!(L&COMPARE_PARTIAL_FLAG$2)){var M=g&&hasOwnProperty.call(R,"__wrapped__"),k=y&&hasOwnProperty.call(T,"__wrapped__");if(M||k){var D=M?R.value():R,j=k?T.value():T;return H||(H=new Stack),Y(D,j,L,V,H)}}return N?(H||(H=new Stack),equalObjects(R,T,L,V,Y,H)):!1}function baseIsEqual(R,T,L,V,Y){return R===T?!0:R==null||T==null||!isObjectLike(R)&&!isObjectLike(T)?R!==R&&T!==T:baseIsEqualDeep(R,T,L,V,baseIsEqual,Y)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(R,T,L,V){var Y=L.length,H=Y;if(R==null)return!H;for(R=Object(R);Y--;){var K=L[Y];if(K[2]?K[1]!==R[K[0]]:!(K[0]in R))return!1}for(;++Y<H;){K=L[Y];var ee=K[0],te=R[ee],O=K[1];if(K[2]){if(te===void 0&&!(ee in R))return!1}else{var g=new Stack,y;if(!(y===void 0?baseIsEqual(O,te,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,V,g):y))return!1}}return!0}function isStrictComparable(R){return R===R&&!isObject(R)}function getMatchData(R){for(var T=keys(R),L=T.length;L--;){var V=T[L],Y=R[V];T[L]=[V,Y,isStrictComparable(Y)]}return T}function matchesStrictComparable(R,T){return function(L){return L==null?!1:L[R]===T&&(T!==void 0||R in Object(L))}}function baseMatches(R){var T=getMatchData(R);return T.length==1&&T[0][2]?matchesStrictComparable(T[0][0],T[0][1]):function(L){return L===R||baseIsMatch(L,R,T)}}function baseHasIn(R,T){return R!=null&&T in Object(R)}function hasPath(R,T,L){T=castPath(T,R);for(var V=-1,Y=T.length,H=!1;++V<Y;){var K=toKey(T[V]);if(!(H=R!=null&&L(R,K)))break;R=R[K]}return H||++V!=Y?H:(Y=R==null?0:R.length,!!Y&&isLength(Y)&&isIndex(K,Y)&&(isArray(R)||isArguments(R)))}function hasIn(R,T){return R!=null&&hasPath(R,T,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(R,T){return isKey(R)&&isStrictComparable(T)?matchesStrictComparable(toKey(R),T):function(L){var V=get(L,R);return V===void 0&&V===T?hasIn(L,R):baseIsEqual(T,V,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(R){return function(T){return T?.[R]}}function basePropertyDeep(R){return function(T){return baseGet(T,R)}}function property(R){return isKey(R)?baseProperty(toKey(R)):basePropertyDeep(R)}function baseIteratee(R){return typeof R=="function"?R:R==null?identity:typeof R=="object"?isArray(R)?baseMatchesProperty(R[0],R[1]):baseMatches(R):property(R)}function baseSum(R,T){for(var L,V=-1,Y=R.length;++V<Y;){var H=T(R[V]);H!==void 0&&(L=L===void 0?H:L+H)}return L}function sumBy(R,T){return R&&R.length?baseSum(R,baseIteratee(T)):0}function p$1({children:R}){return jsxRuntimeExports.jsx("div",{className:clsx("prose prose-lg max-w-full","has-[img]:prose-p:flex has-[img]:prose-p:justify-center prose-img:m-0","prose-table:mx-auto prose-table:w-auto prose-table:text-center","print:prose-sm print:prose-headings:mt-2 print:prose-hr:my-4","prose-headings:break-inside-avoid prose-headings:break-after-avoid","prose-p:break-inside-avoid prose-ul:break-before-avoid prose-ul:break-inside-avoid"),children:R})}function A$1(R){const[T,L]=reactExports.useState(Date.now()),V=R.endTime??addMinutes(R.startTime,R.duration);reactExports.useEffect(()=>{const te=setInterval(()=>{const O=Date.now();L(O),isAfter(O,V)&&clearInterval(te)},100);return()=>clearInterval(te)},[V]);let Y=Math.max(differenceInSeconds(V,T),0);R.duration&&(Y=Math.min(Y,R.duration*60));const H=Math.floor(Y/3600),K=Math.floor(Y/60)%60,ee=Y%60;return H>0?jsxRuntimeExports.jsxs("span",{className:clsx("countdown font-mono",R.noAnimation&&"[&_*:before]:transition-none"),children:[jsxRuntimeExports.jsx("span",{style:{"--value":H}}),"h",jsxRuntimeExports.jsx("span",{style:{"--value":K}}),"m"]}):jsxRuntimeExports.jsxs("span",{className:clsx("countdown font-mono",R.noAnimation&&"[&_*:before]:transition-none"),children:[jsxRuntimeExports.jsx("span",{style:{"--value":K}}),"m",jsxRuntimeExports.jsx("span",{style:{"--value":ee}}),"s"]})}z$1.object({id:z$1.string(),createdAt:z$1.date(),contestIds:z$1.string().array(),level:z$1.enum(["info","warning","error"]),title:z$1.string(),body:z$1.string()});const l=z$1.object({name:z$1.string(),label:z$1.string(),size:z$1.enum(["xs","sm","md","lg","xl"]).optional(),pinned:z$1.boolean().optional()}),m=l.extend({type:z$1.literal("text")}),p=l.extend({type:z$1.literal("number"),min:z$1.number().optional(),max:z$1.number().optional()}),b$1=l.extend({type:z$1.literal("date"),min:z$1.coerce.date(),max:z$1.coerce.date()}),s$3=z$1.object({id:z$1.string(),name:z$1.string(),longName:z$1.string(),problemIds:z$1.coerce.string().array(),userData:z$1.array(z$1.discriminatedUnion("type",[m,p,b$1])),hasVariants:z$1.boolean(),hasOnline:z$1.boolean(),hasPdf:z$1.boolean(),allowStudentImport:z$1.boolean().default(!0),allowStudentEdit:z$1.boolean().default(!0),allowAnswerEdit:z$1.boolean().default(!0),allowStudentDelete:z$1.boolean().default(!0),instructions:z$1.string().optional()}),w$2=s$3.extend({hasOnline:z$1.literal(!0),contestWindowStart:z$1.date(),contestWindowEnd:z$1.date(),duration:z$1.coerce.number().positive(),allowRestart:z$1.boolean()});z$1.discriminatedUnion("hasOnline",[w$2,s$3.extend({hasOnline:z$1.literal(!1)})]);z$1.object({id:z$1.string(),schoolId:z$1.string(),contestId:z$1.string(),name:z$1.string(),teacher:z$1.string(),token:z$1.string().optional(),startingTime:z$1.date().optional(),endingTime:z$1.date().optional(),finalized:z$1.boolean().default(!1),pdfVariants:z$1.array(z$1.coerce.string()).optional(),disabled:z$1.boolean().default(!1)});z$1.object({id:z$1.string(),participationId:z$1.string(),contestId:z$1.string(),startingTime:z$1.date(),endingTime:z$1.date()});const a$3=z$1.union([z$1.string(),z$1.number(),z$1.null()]),c$1=z$1.object({value:a$3,points:z$1.number(),originalId:z$1.string().optional()});z$1.object({id:z$1.string(),contestId:z$1.string(),schema:z$1.record(z$1.object({type:z$1.enum(["text","number","points"]),maxPoints:z$1.number(),originalId:z$1.coerce.string().optional(),options:c$1.array().optional()}))});z$1.object({id:z$1.string(),variant:z$1.string()});function v$1(R,T){if(R.absent||R.disabled)return;const L=R.answers;if(!T||!L)return;let V=0;for(const Y in T){if(!(Y in L))continue;const H=T[Y],K=L[Y]?.toString()?.trim(),ee=f$3(H,K);if(ee===void 0)return;V+=ee}return V}function f$3(R,T){if(R.type==="points")return T;for(const L of R.options??[])if(L.value===(T??null))return L.points;return 0}const i$2=z$1.object({uid:z$1.string(),userData:z$1.record(z$1.union([z$1.string(),z$1.number(),z$1.date()]).optional()),absent:z$1.boolean(),disabled:z$1.boolean(),participationId:z$1.string(),contestId:z$1.string(),token:z$1.string(),startedAt:z$1.date(),finishedAt:z$1.date(),variant:z$1.string(),answers:z$1.record(a$3),score:z$1.number(),maxScore:z$1.number(),extraData:z$1.record(z$1.any()),createdAt:z$1.coerce.date(),updatedAt:z$1.date()}).partial().extend({id:z$1.string()});z$1.object({id:z$1.string(),studentId:z$1.string()});z$1.object({id:z$1.string(),studentId:z$1.string(),participationId:z$1.string()});z$1.object({id:z$1.string(),studentId:z$1.string(),participationId:z$1.string(),token:z$1.string(),name:z$1.string(),surname:z$1.string()});z$1.object({id:z$1.string(),uid:z$1.string(),student:i$2,submittedAt:z$1.date().optional()});function pt({children:R}){const T=p$3(),L=reactExports.useRef(null),V=reactExports.useRef(null),{contest:Y,student:H,schema:K,reset:ee,participation:te,terminated:O}=_(),g=sumBy(Object.values(H.answers??{}),k=>+(k===0||!!k)),y=Math.max(Object.keys(K).length,1),N=Math.round(g/y*100),M=async()=>{const k=V.current;k&&(k.returnValue="0",k.showModal(),await new Promise(D=>{k.onclose=()=>D()}),k.returnValue==="1"&&L.current?.showModal())};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(kn,{color:"bg-base-300 text-base-content",children:[jsxRuntimeExports.jsx(In,{children:jsxRuntimeExports.jsx("div",{className:"flex items-center h-full font-bold",children:T.title})}),jsxRuntimeExports.jsx(Vn,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(d,{className:"hidden w-20 sm:block",percentage:N,children:[N,"%"]}),jsxRuntimeExports.jsx("div",{className:"px-3",children:O||!te.startingTime||!Y.hasOnline?jsxRuntimeExports.jsx("span",{className:"font-mono",children:"00:00"}):jsxRuntimeExports.jsx(A$1,{startTime:te.startingTime,duration:Y.duration,noAnimation:!0})}),O&&ee?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"tooltip tooltip-bottom h-full","data-tip":"Mostra risultati",children:jsxRuntimeExports.jsx(Ct,{className:"btn-primary btn-sm h-full",onClick:()=>L.current?.showModal(),"aria-label":"Mostra risultati",children:jsxRuntimeExports.jsx(FileChartColumn,{})})}),jsxRuntimeExports.jsx("div",{className:"tooltip tooltip-bottom h-full","data-tip":"Ricomincia",children:jsxRuntimeExports.jsx(Ct,{className:"btn-primary btn-sm h-full",onClick:ee,"aria-label":"Ricomincia",children:jsxRuntimeExports.jsx(RotateCcw,{})})})]}):jsxRuntimeExports.jsx(Ct,{className:"btn-primary btn-sm h-full",disabled:O||!te.startingTime,onClick:M,children:"Termina"}),jsxRuntimeExports.jsx(q,{})]})})]}),jsxRuntimeExports.jsx("div",{className:"mx-auto flex w-full max-w-screen-xl grow flex-col p-4 pb-8",children:jsxRuntimeExports.jsxs(b$2,{children:[jsxRuntimeExports.jsx(G,{ref:L,schema:K}),jsxRuntimeExports.jsx(J,{ref:V}),jsxRuntimeExports.jsxs(p$1,{children:[Y.longName&&jsxRuntimeExports.jsx("h1",{className:"text-pretty",children:Y.longName}),R]})]})})]})}function q(){const{student:R,logout:T}=_(),L=R.userData?.name,V=R.userData?.surname;return jsxRuntimeExports.jsxs(Xt,{className:"dropdown-end",children:[jsxRuntimeExports.jsx(Gt,{children:jsxRuntimeExports.jsxs("div",{className:"truncate uppercase",children:[L," ",V]})}),jsxRuntimeExports.jsx(Jt,{children:jsxRuntimeExports.jsx(Yt,{children:jsxRuntimeExports.jsxs("button",{type:"button",className:"flex justify-between gap-4",onClick:T,children:["Esci ",jsxRuntimeExports.jsx(LogOut,{size:20})]})})})]})}const G=reactExports.forwardRef(function({schema:R},T){const{student:L}=_(),V=Object.keys(R);V.sort((H,K)=>H.localeCompare(K,void 0,{numeric:!0}));const Y=sumBy(Object.values(R),"maxPoints");return jsxRuntimeExports.jsxs(Sn,{ref:T,title:"Prova terminata",children:[jsxRuntimeExports.jsx("p",{children:"La prova è terminata."}),L.score!==void 0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{children:["Hai ottenuto un punteggio di ",jsxRuntimeExports.jsx("b",{children:L.score})," su ",jsxRuntimeExports.jsx("b",{children:Y}),"."]}),jsxRuntimeExports.jsxs("table",{className:"table table-sm text-center mt-4",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{scope:"col",children:"Domanda"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"Risposta"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"Soluzione"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"Punteggio"})]})}),jsxRuntimeExports.jsx("tbody",{children:V.map(H=>{const K=L.answers?.[H],ee=R[H],te=ee.options?.filter(O=>O.points===ee.maxPoints).map(O=>O.value);return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:H}),jsxRuntimeExports.jsx("td",{children:K??"-"}),jsxRuntimeExports.jsx("td",{children:te?.join(", ")}),jsxRuntimeExports.jsx("td",{children:f$3(ee,K)})]},H)})})]})]})]})}),J=reactExports.forwardRef(function(R,T){const{student:L,setStudent:V,onSubmit:Y}=_(),H=()=>{T&&"current"in T&&T.current?.close()};return jsxRuntimeExports.jsxs(Sn,{ref:T,title:"Confermi di voler terminare?",children:[jsxRuntimeExports.jsx("p",{children:"Confermando non potrai più modificare le tue risposte."}),jsxRuntimeExports.jsx(Be,{onSubmit:async()=>{try{await V({...L,finishedAt:new Date}),await Y?.(),T&&"current"in T&&T.current&&(T.current.returnValue="1")}finally{H()}},className:"!max-w-full",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[jsxRuntimeExports.jsx(So,{onClick:H,children:"Annulla"}),jsxRuntimeExports.jsx(Co,{className:"btn-error",children:"Conferma"})]})})]})}),i$1=reactExports.createContext({});i$1.displayName="StudentContext";function Z({setStudent:R,children:T,student:L,...V}){const[Y,H]=reactExports.useState({}),K=le(L.finishedAt)??!1,ee=reactExports.useCallback(async O=>{await R({...O,score:v$1(O,Y)})},[R,Y]),te={...V,student:L,setStudent:ee,terminated:K,schema:Y,registerSchema:H};return reactExports.useEffect(()=>{if(L.maxScore==null){let O=0;const g={...L.answers};for(const y in Y)O+=Y[y].maxPoints,g[y]??=null;R({...L,maxScore:O,answers:g})}},[L,R,Y]),jsxRuntimeExports.jsx(i$1.Provider,{value:te,children:jsxRuntimeExports.jsx(pt,{children:T})})}function _(){return reactExports.useContext(i$1)}function I({contestName:R,contestLongName:T,duration:L,children:V}){const[Y,H]=f$2({id:"",userData:{name:"Utente",surname:"anonimo"},answers:{},variant:"0"}),K={id:"",name:R,longName:T,problemIds:[],duration:L,userData:[],hasVariants:!0,hasOnline:!0,hasPdf:!0,allowRestart:!0,allowStudentImport:!0,allowStudentEdit:!0,allowStudentDelete:!0,allowAnswerEdit:!0,contestWindowEnd:new Date(0),contestWindowStart:new Date(Number.MAX_SAFE_INTEGER)},ee={id:"",schoolId:"",contestId:"",name:"",teacher:"",startingTime:Y.startedAt,finalized:!1,disabled:!1},te=reactExports.useCallback(async()=>{H(O=>({...O,answers:{},extraData:{},startedAt:void 0,finishedAt:void 0}))},[H]);return jsxRuntimeExports.jsx(Z,{contest:K,participation:ee,student:Y,setStudent:H,reset:te,children:V})}function f$2(R){const T=window.location.pathname,[L,V]=reactExports.useState(()=>JSON.parse(localStorage.getItem("quizms")??"{}")[T]??R);return reactExports.useEffect(()=>{const Y=JSON.parse(localStorage.getItem("quizms")??"{}");Y[T]=L,localStorage.setItem("quizms",JSON.stringify(Y))},[T,L]),[L,V]}const n$1=reactExports.createContext({registerProblem:()=>{}});n$1.displayName="ContestContext";function w$1({children:R}){const{student:T,setStudent:L,contest:V,registerSchema:Y}=_(),H=reactExports.useCallback((K,ee)=>{Y(te=>({...te,[K]:ee}))},[Y]);return T.startedAt?jsxRuntimeExports.jsx(n$1.Provider,{value:{registerProblem:H},children:jsxRuntimeExports.jsx("div",{className:"break-before-page",children:jsxRuntimeExports.jsx("main",{className:"gap-x-10 [column-rule:solid_1px_var(--tw-prose-hr)] print:columns-2",children:R})})}):jsxRuntimeExports.jsx("div",{className:"flex h-[50vh] flex-col items-center justify-center",children:jsxRuntimeExports.jsx(Ct,{className:"btn-success btn-lg",onClick:async()=>{const K=new Date;await L({...T,startedAt:K,finishedAt:addMinutes(K,V.hasOnline?V.duration:0),variant:""})},children:"Inizia"})})}function S$2(){return reactExports.useContext(n$1)}const e$3=reactExports.createContext({id:void 0,points:[0,0,0]});e$3.displayName="ProblemContext";function u$1({id:R,points:T,children:L}){return jsxRuntimeExports.jsxs(e$3.Provider,{value:{id:R,points:T},children:[jsxRuntimeExports.jsx("div",{className:"relative",children:L}),jsxRuntimeExports.jsx("hr",{className:"last:hidden"})]})}function v({subId:R,children:T}){const{id:L,points:V}=reactExports.useContext(e$3),Y=R?`${L}.${R}`:`${L}`;return jsxRuntimeExports.jsx(e$3.Provider,{value:{id:Y,points:V},children:jsxRuntimeExports.jsxs("div",{className:"break-inside-avoid",children:[jsxRuntimeExports.jsxs("h3",{children:["Domanda ",Y]}),T]})})}function h$1(){return reactExports.useContext(e$3)}function E({children:R}){return jsxRuntimeExports.jsx("form",{className:clsx("my-5 flex-wrap rounded-xl bg-base-200 p-3 prose-p:my-1 break-inside-avoid","print:flex print:border print:border-[var(--tw-prose-hr)] print:p-1"),children:R})}function $({id:R,correct:T,children:L}){const{registerProblem:V}=S$2(),{id:Y,points:H}=h$1(),{student:K,setStudent:ee,terminated:te}=_(),O=K.answers?.[Y],g=async N=>{await ee({...K,answers:{...K.answers,[Y]:N}})},y=reactExports.useId();return reactExports.useEffect(()=>{T&&V(`${Y}`,{type:"text",maxPoints:H[0],options:[{value:R,points:H[0]},{value:null,points:H[1]}]})},[V,R,Y,T,H]),jsxRuntimeExports.jsxs("div",{className:clsx("relative my-1 flex rounded-lg pl-2 pr-1 hover:bg-base-300 print:mr-4",te&&{"border-2 border-success":T===!0,"border-2 border-error":O===R&&T===!1}),children:[jsxRuntimeExports.jsx("input",{id:y,checked:O===R,className:clsx("radio radio-sm my-auto mr-4 bg-base-100 [print-color-adjust:exact] disabled:opacity-90 print:mr-2",te&&O===R&&{"radio-success":T===!0,"radio-error":T===!1}),onChange:N=>g(N.target.checked?R:null),type:"radio",disabled:te}),jsxRuntimeExports.jsxs("div",{className:"my-auto w-6 screen:hidden",children:[R,")"]}),jsxRuntimeExports.jsx("label",{htmlFor:y,className:"grow [&_pre]:!p-3",children:L}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 mr-1 flex h-full justify-center print:hidden",children:jsxRuntimeExports.jsx("button",{className:clsx("btn btn-square btn-ghost btn-sm my-auto",(O!==R||te)&&"hidden"),type:"button",onClick:()=>g(null),"aria-label":"Cancella risposta",children:jsxRuntimeExports.jsx(Trash2,{size:20})})})]})}function S$1({correct:R,type:T}){const{registerProblem:L}=S$2(),{id:V,points:Y}=h$1(),{student:H,setStudent:K,terminated:ee}=_(),te=H.answers?.[V],O=async g=>{await K({...H,answers:{...H.answers,[V]:g}})};return reactExports.useEffect(()=>{L(`${V}`,{type:"text",maxPoints:Y[0],options:[{value:R??null,points:Y[0]},{value:null,points:Y[1]}]})},[L,V,R,Y]),jsxRuntimeExports.jsx("div",{className:"px-2",children:jsxRuntimeExports.jsx("input",{id:`answer-${V}`,className:clsx("input input-bordered w-72 max-w-full border-2 print:placeholder:text-transparent",ee&&R!==void 0&&{"disabled:input-success":R===te,"disabled:input-error":R!==te}),onChange:g=>O(g.target.value||null),onWheel:g=>g.currentTarget.blur(),placeholder:"Inserisci la risposta",maxLength:100,type:T,value:te??"",disabled:ee,"aria-label":"Risposta"})})}function z({children:R}){const{terminated:T}=_(),{id:L}=h$1();if(T)return jsxRuntimeExports.jsx("div",{className:"my-5 rounded-xl bg-base-200 print:hidden",children:jsxRuntimeExports.jsxs("div",{className:"collapse",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",name:`show-solution-${L}`}),jsxRuntimeExports.jsx("div",{className:"collapse-title text-xl font-medium",children:"Mostra soluzione"}),jsxRuntimeExports.jsx("div",{className:"collapse-content",children:R})]})})}function c({field:R,value:T,children:L}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(e$2,{value:`${JSON.stringify(R)}:`}),T!==void 0&&jsxRuntimeExports.jsx(e$2,{value:`${JSON.stringify(T)},`}),L]})}function s$2({children:R}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(e$2,{value:"{"}),R,jsxRuntimeExports.jsx(e$2,{value:"},"})]})}function a$2({children:R}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(e$2,{value:"["}),R,jsxRuntimeExports.jsx(e$2,{value:"],"})]})}function e$2({value:R}){return console.log(R),null}function h({children:R}){return jsxRuntimeExports.jsx(E,{children:R})}function A({children:R}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(c,{field:"type",value:"text"}),jsxRuntimeExports.jsx(c,{field:"options",children:jsxRuntimeExports.jsx(a$2,{children:R})})]})}function w({correct:R}){const T=Number.isFinite(Number(R))?"number":"text";return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(c,{field:"type",value:T}),jsxRuntimeExports.jsx(c,{field:"options",children:jsxRuntimeExports.jsx(a$2,{children:jsxRuntimeExports.jsxs(s$2,{children:[jsxRuntimeExports.jsx(c,{field:"value",value:R??null}),jsxRuntimeExports.jsx(c,{field:"correct",value:!0})]})})}),jsxRuntimeExports.jsx(S$1,{correct:R,type:T})]})}function x({id:R,correct:T,children:L}){return jsxRuntimeExports.jsxs(s$2,{children:[jsxRuntimeExports.jsx(c,{field:"value",value:R}),jsxRuntimeExports.jsx(c,{field:"correct",value:!!T}),jsxRuntimeExports.jsx($,{id:R,correct:T,children:L})]})}function C({children:R}){return jsxRuntimeExports.jsx(z,{children:R})}const t$3={kind:"categoryToolbox",contents:[{kind:"category",name:"Variabili",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"Matematica",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"math_arithmetic",fields:{OP:"ADD"}},{kind:"block",type:"math_number_property",fields:{PROPERTY:"EVEN"}},{kind:"block",type:"math_on_list",fields:{OP:"SUM"}}]},{kind:"category",name:"Logica",categorystyle:"logic_category",contents:[{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"controls_if"},{kind:"block",type:"controls_if",extraState:{hasElse:"true"}}]},{kind:"category",name:"Cicli",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{block:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for",fields:{VAR:"i"},inputs:{FROM:{block:{type:"math_number",fields:{NUM:1}}},TO:{block:{type:"math_number",fields:{NUM:10}}},BY:{block:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"controls_forEach"}]},{kind:"category",name:"Liste",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_repeat",inputs:{NUM:{block:{type:"math_number",fields:{NUM:5}}}}},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_getIndex",fields:{MODE:"GET",WHERE:"FROM_START"}},{kind:"block",type:"lists_setIndex",fields:{MODE:"SET",WHERE:"FROM_START"}}]}]},e$1={blocks:{languageVersion:0,blocks:[{type:"start",id:"y=zq)Uya2A/{vyOtN[i6",x:30,y:30}]},variables:[]};var jsInterpreter$1={exports:{}},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(R,T){if(R.indexOf)return R.indexOf(T);for(var L=0;L<R.length;L++)if(R[L]===T)return L;return-1},Object_keys=function(R){if(Object.keys)return Object.keys(R);var T=[];for(var L in R)T.push(L);return T},forEach=function(R,T){if(R.forEach)return R.forEach(T);for(var L=0;L<R.length;L++)T(R[L],L,R)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(R,T,L){Object.defineProperty(R,T,{writable:!0,enumerable:!1,configurable:!0,value:L})}}catch{return function(T,L,V){T[L]=V}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(T){if(!(this instanceof Script))return new Script(T);this.code=T};Script.prototype.runInContext=function(R){if(!(R instanceof Context))throw new TypeError("needs a 'context' argument.");var T=document.createElement("iframe");T.style||(T.style={}),T.style.display="none",document.body.appendChild(T);var L=T.contentWindow,V=L.eval,Y=L.execScript;!V&&Y&&(Y.call(L,"null"),V=L.eval),forEach(Object_keys(R),function(ee){L[ee]=R[ee]}),forEach(globals,function(ee){R[ee]&&(L[ee]=R[ee])});var H=Object_keys(L),K=V.call(L,this.code);return forEach(Object_keys(L),function(ee){(ee in R||indexOf(H,ee)===-1)&&(R[ee]=L[ee])}),forEach(globals,function(ee){ee in R||defineProp(R,ee,L[ee])}),document.body.removeChild(T),K},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(R){var T=Script.createContext(R),L=this.runInContext(T);return R&&forEach(Object_keys(T),function(V){R[V]=T[V]}),L},forEach(Object_keys(Script.prototype),function(R){exports[R]=Script[R]=function(T){var L=Script(T);return L[R].apply(L,[].slice.call(arguments,1))}}),exports.isContext=function(R){return R instanceof Context},exports.createScript=function(R){return exports.Script(R)},exports.createContext=Script.createContext=function(R){var T=new Context;return typeof R=="object"&&forEach(Object_keys(R),function(L){T[L]=R[L]}),T}}(vmBrowserify)),vmBrowserify}var jsInterpreter=jsInterpreter$1.exports,hasRequiredJsInterpreter;function requireJsInterpreter(){return hasRequiredJsInterpreter||(hasRequiredJsInterpreter=1,function(R,T){(function(V,Y){R.exports=Y()})(jsInterpreter,()=>(()=>{var L={"./original-repo/interpreter.js":function(K,ee,te){var O=function(g,y){typeof g=="string"&&(g=this.parse_(g,"code"));var N=g.constructor;this.newNode=function(){return new N({options:{}})};var M=this.newNode();for(var k in g)M[k]=k==="body"?g[k].slice():g[k];this.ast=M,this.tasks=[],this.initFunc_=y,this.paused_=!1,this.polyfills_=[],this.functionCounter_=0,this.stepFunctions_=Object.create(null);var D=/^step([A-Z]\w*)$/,j;for(var U in this)typeof this[U]=="function"&&(j=U.match(D))&&(this.stepFunctions_[j[1]]=this[U].bind(this));this.globalScope=this.createScope(this.ast,null),this.globalObject=this.globalScope.object,this.ast=this.parse_(this.polyfills_.join(`
`),"polyfills"),this.polyfills_=void 0,O.stripLocations_(this.ast,void 0,void 0);var W=new O.State(this.ast,this.globalScope);W.done=!1,this.stateStack=[W],this.run(),this.value=void 0,this.ast=M,W=new O.State(this.ast,this.globalScope),W.done=!1,this.stateStack.length=0,this.stateStack[0]=W};O.Completion={NORMAL:0,BREAK:1,CONTINUE:2,RETURN:3,THROW:4},O.Status={DONE:0,STEP:1,TASK:2,ASYNC:3},O.PARSE_OPTIONS={locations:!0,ecmaVersion:5},O.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},O.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},O.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!1,enumerable:!1,writable:!1},O.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0},O.STEP_ERROR={STEP_ERROR:!0},O.SCOPE_REFERENCE={SCOPE_REFERENCE:!0},O.VALUE_IN_DESCRIPTOR={VALUE_IN_DESCRIPTOR:!0},O.REGEXP_TIMEOUT={REGEXP_TIMEOUT:!0},O.toStringCycles_=[],O.vm=null,O.currentInterpreter_=null,O.nativeGlobal=typeof globalThis>"u"?this||window:globalThis,O.WORKER_CODE=["onmessage = function(e) {","var result;","var data = e.data;","switch (data[0]) {","case 'split':","result = data[1].split(data[2], data[3]);","break;","case 'match':","result = data[1].match(data[2]);","break;","case 'search':","result = data[1].search(data[2]);","break;","case 'replace':","result = data[1].replace(data[2], data[3]);","break;","case 'exec':","var regexp = data[1];","regexp.lastIndex = data[2];","result = [regexp.exec(data[3]), data[1].lastIndex];","break;","default:","throw Error('Unknown RegExp operation: ' + data[0]);","}","postMessage(result);","close();","};"],O.legalArrayLength=function(g){var y=g>>>0;return y===Number(g)?y:NaN},O.legalArrayIndex=function(g){var y=g>>>0;return String(y)===String(g)&&y!==4294967295?y:NaN},O.stripLocations_=function(g,y,N){y?g.start=y:delete g.start,N?g.end=N:delete g.end;for(var M in g)if(g[M]!==g.loc&&g.hasOwnProperty(M)){var k=g[M];k&&typeof k=="object"&&O.stripLocations_(k,y,N)}},O.prototype.REGEXP_MODE=2,O.prototype.REGEXP_THREAD_TIMEOUT=1e3,O.prototype.POLYFILL_TIMEOUT=1e3,O.prototype.getterStep_=!1,O.prototype.setterStep_=!1,O.prototype.appendCodeNumber_=0,O.prototype.taskCodeNumber_=0,O.prototype.parse_=function(g,y){var N={};for(var M in O.PARSE_OPTIONS)N[M]=O.PARSE_OPTIONS[M];return N.sourceFile=y,O.nativeGlobal.acorn.parse(g,N)},O.prototype.appendCode=function(g){var y=this.stateStack[0];if(!y||y.node.type!=="Program")throw Error("Expecting original AST to start with a Program node");if(typeof g=="string"&&(g=this.parse_(g,"appendCode"+this.appendCodeNumber_++)),!g||g.type!=="Program")throw Error("Expecting new AST to start with a Program node");this.populateScope_(g,y.scope),Array.prototype.push.apply(y.node.body,g.body),y.node.body.variableCache_=null,y.done=!1},O.prototype.step=function(){var g=this.stateStack,y;do{var N=g[g.length-1];if(this.paused_)return!0;if(!N||N.node.type==="Program"&&N.done){if(!this.tasks.length)return!1;if(N=this.nextTask_(),!N)return!0}var M=N.node,k=O.currentInterpreter_;O.currentInterpreter_=this;try{var D=this.stepFunctions_[M.type](g,N,M)}catch(j){if(j!==O.STEP_ERROR)throw this.value!==j&&(this.value=void 0),j}finally{O.currentInterpreter_=k}if(D&&g.push(D),this.getterStep_)throw this.value=void 0,Error("Getter not supported in this context");if(this.setterStep_)throw this.value=void 0,Error("Setter not supported in this context");!y&&!M.end&&(y=Date.now()+this.POLYFILL_TIMEOUT)}while(!M.end&&y>Date.now());return!0},O.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},O.prototype.getStatus=function(){if(this.paused_)return O.Status.ASYNC;var g=this.stateStack,y=g[g.length-1];if(y&&(y.node.type!=="Program"||!y.done))return O.Status.STEP;var N=this.tasks[0];return N?N.time>Date.now()?O.Status.TASK:O.Status.STEP:O.Status.DONE},O.prototype.initGlobal=function(g){this.setProperty(g,"NaN",NaN,O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"Infinity",1/0,O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"undefined",void 0,O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"window",g,O.READONLY_DESCRIPTOR),this.setProperty(g,"this",g,O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"self",g),this.OBJECT_PROTO=new O.Object(null),this.FUNCTION_PROTO=new O.Object(this.OBJECT_PROTO),this.initFunction(g),this.initObject(g),g.proto=this.OBJECT_PROTO,this.setProperty(g,"constructor",this.OBJECT,O.NONENUMERABLE_DESCRIPTOR),this.initArray(g),this.initString(g),this.initBoolean(g),this.initNumber(g),this.initDate(g),this.initRegExp(g),this.initError(g),this.initMath(g),this.initJSON(g);var y=this,N,M=this.createNativeFunction(function(j){throw EvalError("Can't happen")},!1);M.eval=!0,this.setProperty(g,"eval",M,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"parseInt",this.createNativeFunction(parseInt,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"parseFloat",this.createNativeFunction(parseFloat,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"isNaN",this.createNativeFunction(isNaN,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"isFinite",this.createNativeFunction(isFinite,!1),O.NONENUMERABLE_DESCRIPTOR);for(var k=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],D=0;D<k.length;D++)N=function(j){return function(U){try{return j(U)}catch(W){y.throwException(y.URI_ERROR,W.message)}}}(k[D][0]),this.setProperty(g,k[D][1],this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR);N=function(U){return y.createTask_(!1,arguments)},this.setProperty(g,"setTimeout",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(U){return y.createTask_(!0,arguments)},this.setProperty(g,"setInterval",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(U){y.deleteTask_(U)},this.setProperty(g,"clearTimeout",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(U){y.deleteTask_(U)},this.setProperty(g,"clearInterval",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),this.OBJECT=this.OBJECT,this.OBJECT_PROTO=this.OBJECT_PROTO,this.FUNCTION=this.FUNCTION,this.FUNCTION_PROTO=this.FUNCTION_PROTO,this.ARRAY=this.ARRAY,this.ARRAY_PROTO=this.ARRAY_PROTO,this.REGEXP=this.REGEXP,this.REGEXP_PROTO=this.REGEXP_PROTO,this.DATE=this.DATE,this.DATE_PROTO=this.DATE_PROTO,this.initFunc_&&this.initFunc_(this,g)},O.prototype.functionCodeNumber_=0,O.prototype.initFunction=function(g){var y=this,N,M=/^[A-Za-z_$][\w$]*$/;N=function(D){if(arguments.length)var j=String(arguments[arguments.length-1]);else var j="";var U=Array.prototype.slice.call(arguments,0,-1).join(",").trim();if(U){for(var W=U.split(/\s*,\s*/),re=0;re<W.length;re++){var ie=W[re];M.test(ie)||y.throwException(y.SYNTAX_ERROR,"Invalid function argument: "+ie)}U=W.join(", ")}try{var ne=y.parse_("(function("+U+") {"+j+"})","function"+y.functionCodeNumber_++)}catch(oe){y.throwException(y.SYNTAX_ERROR,"Invalid code: "+oe.message)}ne.body.length!==1&&y.throwException(y.SYNTAX_ERROR,"Invalid code in function body");var ae=ne.body[0].expression;return y.createFunction(ae,y.globalScope,"anonymous")},this.FUNCTION=this.createNativeFunction(N,!0),this.setProperty(g,"Function",this.FUNCTION,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,O.NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.nativeFunc=function(){},this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++,this.FUNCTION_PROTO.illegalConstructor=!0,this.setProperty(this.FUNCTION_PROTO,"length",0,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.class="Function",N=function(D,j,U){var W=y.stateStack[y.stateStack.length-1];W.func_=D,W.funcThis_=j,W.arguments_=[],U!=null&&(U instanceof O.Object?W.arguments_=Array.from(U.properties):y.throwException(y.TYPE_ERROR,"CreateListFromArrayLike called on non-object")),W.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",N),this.polyfills_.push("(function() {","var apply_ = Function.prototype.apply;","Function.prototype.apply = function apply(thisArg, args) {","var a2 = [];","for (var i = 0; i < args.length; i++) {","a2[i] = args[i];","}","return apply_(this, thisArg, a2);","};","})();"),N=function(D){var j=y.stateStack[y.stateStack.length-1];j.func_=this,j.funcThis_=D,j.arguments_=[];for(var U=1;U<arguments.length;U++)j.arguments_.push(arguments[U]);j.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",N),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',","{configurable: true, writable: true, value:","function bind(oThis) {","if (typeof this !== 'function') {","throw TypeError('What is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),N=function(){return String(this)},this.setNativeFunctionPrototype(this.FUNCTION,"toString",N),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(){return this.valueOf()},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",N),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR)},O.prototype.initObject=function(g){var y=this,N;N=function(D){if(D==null)return y.calledWithNew()?this:y.createObjectProto(y.OBJECT_PROTO);if(!(D instanceof O.Object)){var j=y.createObjectProto(y.getPrototype(D));return j.data=D,j}return D},this.OBJECT=this.createNativeFunction(N,!0),this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"Object",this.OBJECT,O.NONENUMERABLE_DESCRIPTOR);var M=function(k){k==null&&y.throwException(y.TYPE_ERROR,"Cannot convert '"+k+"' to object")};N=function(D){M(D);var j=D instanceof O.Object?D.properties:D;return y.nativeToPseudo(Object.getOwnPropertyNames(j))},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(D){return M(D),D instanceof O.Object&&(D=D.properties),y.nativeToPseudo(Object.keys(D))},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(D){return D===null?y.createObjectProto(null):(D instanceof O.Object||y.throwException(y.TYPE_ERROR,"Object prototype may only be an Object or null, not "+D),y.createObjectProto(D))},this.setProperty(this.OBJECT,"create",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var create_ = Object.create;","Object.create = function create(proto, props) {","var obj = create_(proto);","props && Object.defineProperties(obj, props);","return obj;","};","})();",""),N=function(D,j,U){return j=String(j),D instanceof O.Object||y.throwException(y.TYPE_ERROR,"Object.defineProperty called on non-object: "+D),U instanceof O.Object||y.throwException(y.TYPE_ERROR,"Property description must be an object"),D.preventExtensions&&!(j in D.properties)&&y.throwException(y.TYPE_ERROR,"Can't define property '"+j+"', object is not extensible"),y.setProperty(D,j,O.VALUE_IN_DESCRIPTOR,U.properties),D},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var defineProperty_ = Object.defineProperty;","Object.defineProperty = function defineProperty(obj, prop, d1) {","var d2 = {};","if ('configurable' in d1) d2.configurable = d1.configurable;","if ('enumerable' in d1) d2.enumerable = d1.enumerable;","if ('writable' in d1) d2.writable = d1.writable;","if ('value' in d1) d2.value = d1.value;","if ('get' in d1) d2.get = d1.get;","if ('set' in d1) d2.set = d1.set;","return defineProperty_(obj, prop, d2);","};","})();","Object.defineProperty(Object, 'defineProperties',","{configurable: true, writable: true, value:","function defineProperties(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),N=function(D,j){if(D instanceof O.Object||y.throwException(y.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object: "+D),j=String(j),j in D.properties){var U=Object.getOwnPropertyDescriptor(D.properties,j),W=D.getter[j],re=D.setter[j],ie=y.createObjectProto(y.OBJECT_PROTO);return W||re?(y.setProperty(ie,"get",W),y.setProperty(ie,"set",re)):(y.setProperty(ie,"value",U.value),y.setProperty(ie,"writable",U.writable)),y.setProperty(ie,"configurable",U.configurable),y.setProperty(ie,"enumerable",U.enumerable),ie}},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(D){return M(D),y.getPrototype(D)},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(D){return!!D&&!D.preventExtensions},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(D){return D instanceof O.Object&&(D.preventExtensions=!0),D},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),this.setNativeFunctionPrototype(this.OBJECT,"toString",O.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",O.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"valueOf",O.Object.prototype.valueOf),N=function(D){return M(this),this instanceof O.Object?String(D)in this.properties:this.hasOwnProperty(D)},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",N),N=function(D){return M(this),this instanceof O.Object?Object.prototype.propertyIsEnumerable.call(this.properties,D):this.propertyIsEnumerable(D)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",N),N=function(D){for(;;){if(D=y.getPrototype(D),!D)return!1;if(D===this)return!0}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",N)},O.prototype.initArray=function(g){var y=this,N;N=function(k){if(y.calledWithNew())var D=this;else var D=y.createArray();var j=arguments[0];if(arguments.length===1&&typeof j=="number")isNaN(O.legalArrayLength(j))&&y.throwException(y.RANGE_ERROR,"Invalid array length: "+j),D.properties.length=j;else{for(var U=0;U<arguments.length;U++)D.properties[U]=arguments[U];D.properties.length=U}return D},this.ARRAY=this.createNativeFunction(N,!0),this.ARRAY_PROTO=this.ARRAY.properties.prototype,this.setProperty(g,"Array",this.ARRAY,O.NONENUMERABLE_DESCRIPTOR),N=function(k){return k&&k.class==="Array"},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ARRAY_PROTO,"length",0,{configurable:!1,enumerable:!1,writable:!0}),this.ARRAY_PROTO.class="Array",this.polyfills_.push("(function() {","function createArrayMethod_(name, func) {","Object.defineProperty(func, 'name', {value: name});","Object.defineProperty(Array.prototype, name,","{configurable: true, writable: true, value: func});","}","createArrayMethod_('pop',","function() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","len--;","var x = o[len];","delete o[len];","o.length = len;","return x;","}",");","createArrayMethod_('push',","function(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","for (var i = 0; i < arguments.length; i++) {","o[len] = arguments[i];","len++;","}","o.length = len;","return len;","}",");","createArrayMethod_('shift',","function() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","var value = o[0];","for (var i = 0; i < len - 1; i++) {","if ((i + 1) in o) {","o[i] = o[i + 1];","} else {","delete o[i];","}","}","delete o[i];","o.length = len - 1;","return value;","}",");","createArrayMethod_('unshift',","function(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","len = 0;","}","for (var i = len - 1; i >= 0; i--) {","if (i in o) {","o[i + arguments.length] = o[i];","} else {","delete o[i + arguments.length];","}","}","for (var i = 0; i < arguments.length; i++) {","o[i] = arguments[i];","}","return (o.length = len + arguments.length);","}",");","createArrayMethod_('reverse',","function() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 2) {","return o;","}","for (var i = 0; i < len / 2 - 0.5; i++) {","var x = o[i];","var hasX = i in o;","if ((len - i - 1) in o) {","o[i] = o[len - i - 1];","} else {","delete o[i];","}","if (hasX) {","o[len - i - 1] = x;","} else {","delete o[len - i - 1];","}","}","return o;","}",");","createArrayMethod_('indexOf',","function(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var n = fromIndex | 0;","if (!len || n >= len) {","return -1;","}","var i = Math.max(n >= 0 ? n : len - Math.abs(n), 0);","while (i < len) {","if (i in o && o[i] === searchElement) {","return i;","}","i++;","}","return -1;","}",");","createArrayMethod_('lastIndexOf',","function(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len) {","return -1;","}","var n = len - 1;","if (arguments.length > 1) {","n = fromIndex | 0;","if (n) {","n = (n > 0 || -1) * Math.floor(Math.abs(n));","}","}","var i = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);","while (i >= 0) {","if (i in o && o[i] === searchElement) {","return i;","}","i--;","}","return -1;","}",");","createArrayMethod_('slice',","function(start, end) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","start = (start >= 0) ? start : Math.max(0, len + start);","if (typeof end !== 'undefined') {","if (end !== Infinity) {","end |= 0;","}","if (end < 0) {","end = len + end;","} else {","end = Math.min(end, len);","}","} else {","end = len;","}","var size = end - start;","var cloned = new Array(size);","for (var i = 0; i < size; i++) {","if ((start + i) in o) {","cloned[i] = o[start + i];","}","}","return cloned;","}",");","createArrayMethod_('splice',","function(start, deleteCount, var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","if (start < 0) {","start = Math.max(len + start, 0);","} else {","start = Math.min(start, len);","}","if (arguments.length < 2) {","deleteCount = len - start;","} else {","deleteCount |= 0;","deleteCount = Math.max(0, Math.min(deleteCount, len - start));","}","var removed = [];","for (var i = start; i < start + deleteCount; i++) {","if (i in o) {","removed.push(o[i]);","} else {","removed.length++;","}","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = start + deleteCount; i < len - deleteCount; i++) {","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = len - deleteCount; i < len; i++) {","delete o[i];","}","len -= deleteCount;","if (arguments.length > 2) {","var arl = arguments.length - 2;","for (var i = len - 1; i >= start; i--) {","if (i in o) {","o[i + arl] = o[i];","} else {","delete o[i + arl];","}","}","len += arl;","for (var i = 2; i < arguments.length; i++) {","o[start + i - 2] = arguments[i];","}","}","o.length = len;","return removed;","}",");","createArrayMethod_('concat',","function(var_args) {","if (!this) throw TypeError();","var o = Object(this);","var cloned = [];","for (var i = -1; i < arguments.length; i++) {","var value = (i === -1) ? o : arguments[i];","if (Array.isArray(value)) {","for (var j = 0, l = value.length; j < l; j++) {","if (j in value) {","cloned.push(value[j]);","} else {","cloned.length++;","}","}","} else {","cloned.push(value);","}","}","return cloned;","}",");","createArrayMethod_('join',","function(opt_separator) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var sep = typeof opt_separator === 'undefined' ?","',' : ('' + opt_separator);","var str = '';","for (var i = 0; i < len; i++) {","if (i && sep) str += sep;","str += (o[i] === null || o[i] === undefined) ? '' : o[i];","}","return str;","}",");","createArrayMethod_('every',","function(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o && !callback.call(t, o[k], k, o)) return false;","k++;","}","return true;","}",");","createArrayMethod_('filter',","function(callback, var_args) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o) {","var val = o[i];","if (callback.call(thisArg, val, i, o)) res.push(val);","}","}","return res;","}",");","createArrayMethod_('forEach',","function(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o) callback.call(t, o[k], k, o);","k++;","}","}",");","createArrayMethod_('map',","function(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","var a = new Array(len);","while (k < len) {","if (k in o) a[k] = callback.call(t, o[k], k, o);","k++;","}","return a;","}",");","createArrayMethod_('reduce',","function(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = 0, value;","if (arguments.length === 2) {","value = arguments[1];","} else {","while (k < len && !(k in o)) k++;","if (k >= len) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k++];","}","for (; k < len; k++) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_('reduceRight',","function(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in o)) k--;","if (k < 0) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k--];","}","for (; k >= 0; k--) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_('some',","function(callback /*, thisArg*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o && callback.call(thisArg, o[i], i, o)) return true;","}","return false;","}",");","createArrayMethod_('sort',","function(opt_comp) {","if (!this) throw TypeError();","if (typeof opt_comp !== 'function') {","opt_comp = undefined;","}","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp ? (opt_comp(this[j], this[j + 1]) > 0) :","(String(this[j]) > String(this[j + 1]))) {","var swap = this[j];","var hasSwap = j in this;","if ((j + 1) in this) {","this[j] = this[j + 1];","} else {","delete this[j];","}","if (hasSwap) {","this[j + 1] = swap;","} else {","delete this[j + 1];","}","changes++;","}","}","if (!changes) break;","}","return this;","}",");","createArrayMethod_('toLocaleString',","function() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var out = [];","for (var i = 0; i < len; i++) {","out[i] = (o[i] === null || o[i] === undefined) ? '' : o[i].toLocaleString();","}","return out.join(',');","}",");","})();","")},O.prototype.initString=function(g){var y=this,N;N=function(j){return j=arguments.length?O.nativeGlobal.String(j):"",y.calledWithNew()?(this.data=j,this):j},this.STRING=this.createNativeFunction(N,!0),this.setProperty(g,"String",this.STRING,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),O.NONENUMERABLE_DESCRIPTOR);for(var M=["charAt","charCodeAt","concat","indexOf","lastIndexOf","slice","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],k=0;k<M.length;k++)this.setNativeFunctionPrototype(this.STRING,M[k],String.prototype[M[k]]);N=function(j,U,W){U=y.pseudoToNative(U),W=y.pseudoToNative(W);try{return String(this).localeCompare(j,U,W)}catch(re){y.throwException(y.ERROR,"localeCompare: "+re.message)}},this.setNativeFunctionPrototype(this.STRING,"localeCompare",N),N=function(j,U,W){var re=String(this);if(U=U?Number(U):void 0,y.isa(j,y.REGEXP)&&(j=j.data,y.maybeThrowRegExp(j,W),y.REGEXP_MODE===2)){if(O.vm){var ie={string:re,separator:j,limit:U},ne="string.split(separator, limit)",Ee=y.vmCall(ne,ie,j,W);Ee!==O.REGEXP_TIMEOUT&&W(y.nativeToPseudo(Ee))}else{var ae=y.createWorker(),oe=y.regExpTimeout(j,ae,W);ae.onmessage=function(xe){clearTimeout(oe),W(y.nativeToPseudo(xe.data))},ae.postMessage(["split",re,j,U])}return}var Ee=re.split(j,U);W(y.nativeToPseudo(Ee))},this.setAsyncFunctionPrototype(this.STRING,"split",N),N=function(j,U){var W=String(this);if(j=y.isa(j,y.REGEXP)?j.data:new RegExp(j),y.maybeThrowRegExp(j,U),y.REGEXP_MODE===2){if(O.vm){var re={string:W,regexp:j},ie="string.match(regexp)",oe=y.vmCall(ie,re,j,U);oe!==O.REGEXP_TIMEOUT&&U(oe&&y.matchToPseudo_(oe))}else{var ne=y.createWorker(),ae=y.regExpTimeout(j,ne,U);ne.onmessage=function(Ee){clearTimeout(ae),U(Ee.data&&y.matchToPseudo_(Ee.data))},ne.postMessage(["match",W,j])}return}var oe=W.match(j);U(oe&&y.matchToPseudo_(oe))},this.setAsyncFunctionPrototype(this.STRING,"match",N),N=function(j,U){var W=String(this);if(y.isa(j,y.REGEXP)?j=j.data:j=new RegExp(j),y.maybeThrowRegExp(j,U),y.REGEXP_MODE===2){if(O.vm){var re={string:W,regexp:j},ie="string.search(regexp)",ne=y.vmCall(ie,re,j,U);ne!==O.REGEXP_TIMEOUT&&U(ne)}else{var ae=y.createWorker(),oe=y.regExpTimeout(j,ae,U);ae.onmessage=function(Ee){clearTimeout(oe),U(Ee.data)},ae.postMessage(["search",W,j])}return}U(W.search(j))},this.setAsyncFunctionPrototype(this.STRING,"search",N),N=function(j,U,W){var re=String(this);if(U=String(U),y.isa(j,y.REGEXP)&&(j=j.data,y.maybeThrowRegExp(j,W),y.REGEXP_MODE===2)){if(O.vm){var ie={string:re,substr:j,newSubstr:U},ne="string.replace(substr, newSubstr)",ae=y.vmCall(ne,ie,j,W);ae!==O.REGEXP_TIMEOUT&&W(ae)}else{var oe=y.createWorker(),Ee=y.regExpTimeout(j,oe,W);oe.onmessage=function(xe){clearTimeout(Ee),W(xe.data)},oe.postMessage(["replace",re,j,U])}return}W(re.replace(j,U))},this.setAsyncFunctionPrototype(this.STRING,"replace",N),this.polyfills_.push("(function() {","var replace_ = String.prototype.replace;","String.prototype.replace = function replace(substr, newSubstr) {","if (typeof newSubstr !== 'function') {","return replace_.call(this, substr, newSubstr);","}","var str = this;","if (substr instanceof RegExp) {","var subs = [];","var m = substr.exec(str);","while (m) {","m.push(m.index, str);","var inject = newSubstr.apply(null, m);","subs.push([m.index, m[0].length, inject]);","m = substr.global ? substr.exec(str) : null;","}","for (var i = subs.length - 1; i >= 0; i--) {","str = str.substring(0, subs[i][0]) + subs[i][2] + ","str.substring(subs[i][0] + subs[i][1]);","}","} else {","var i = str.indexOf(substr);","if (i !== -1) {","var inject = newSubstr(str.substr(i, substr.length), i, str);","str = str.substring(0, i) + inject + ","str.substring(i + substr.length);","}","}","return str;","};","})();","")},O.prototype.initBoolean=function(g){var y=this,N;N=function(k){return k=O.nativeGlobal.Boolean(k),y.calledWithNew()?(this.data=k,this):k},this.BOOLEAN=this.createNativeFunction(N,!0),this.setProperty(g,"Boolean",this.BOOLEAN,O.NONENUMERABLE_DESCRIPTOR)},O.prototype.initNumber=function(g){var y=this,N;N=function(j){return j=arguments.length?O.nativeGlobal.Number(j):0,y.calledWithNew()?(this.data=j,this):j},this.NUMBER=this.createNativeFunction(N,!0),this.setProperty(g,"Number",this.NUMBER,O.NONENUMERABLE_DESCRIPTOR);for(var M=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],k=0;k<M.length;k++)this.setProperty(this.NUMBER,M[k],Number[M[k]],O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);N=function(j){try{return Number(this).toExponential(j)}catch(U){y.throwException(y.ERROR,U.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",N),N=function(j){try{return Number(this).toFixed(j)}catch(U){y.throwException(y.ERROR,U.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",N),N=function(j){try{return Number(this).toPrecision(j)}catch(U){y.throwException(y.ERROR,U.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",N),N=function(j){try{return Number(this).toString(j)}catch(U){y.throwException(y.ERROR,U.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toString",N),N=function(j,U){j=j?y.pseudoToNative(j):void 0,U=U?y.pseudoToNative(U):void 0;try{return Number(this).toLocaleString(j,U)}catch(W){y.throwException(y.ERROR,"toLocaleString: "+W.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",N)},O.prototype.initDate=function(g){var y=this,N;N=function(j,U){if(!y.calledWithNew())return O.nativeGlobal.Date();var W=[null].concat(Array.from(arguments));return this.data=new(Function.prototype.bind.apply(O.nativeGlobal.Date,W)),this},this.DATE=this.createNativeFunction(N,!0),this.DATE_PROTO=this.DATE.properties.prototype,this.setProperty(g,"Date",this.DATE,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),O.NONENUMERABLE_DESCRIPTOR);for(var M=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],k=0;k<M.length;k++)N=function(D){return function(j){var U=this.data;U instanceof Date||y.throwException(y.TYPE_ERROR,D+" not called on a Date");for(var W=[],re=0;re<arguments.length;re++)W[re]=y.pseudoToNative(arguments[re]);return U[D].apply(U,W)}}(M[k]),this.setNativeFunctionPrototype(this.DATE,M[k],N);N=function(){try{return this.data.toISOString()}catch(j){y.throwException(y.RANGE_ERROR,"toISOString: "+j.message)}},this.setNativeFunctionPrototype(this.DATE,"toISOString",N)},O.prototype.initRegExp=function(g){var y=this,N;N=function(k,D){if(y.calledWithNew())var j=this;else{if(D===void 0&&y.isa(k,y.REGEXP))return k;var j=y.createObjectProto(y.REGEXP_PROTO)}k=k===void 0?"":String(k),D=D?String(D):"",/^[gmi]*$/.test(D)||y.throwException(y.SYNTAX_ERROR,"Invalid regexp flag: "+D);try{var U=new O.nativeGlobal.RegExp(k,D)}catch(W){y.throwException(y.SYNTAX_ERROR,W.message)}return y.populateRegExp(j,U),j},this.REGEXP=this.createNativeFunction(N,!0),this.REGEXP_PROTO=this.REGEXP.properties.prototype,this.setProperty(g,"RegExp",this.REGEXP,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"global",void 0,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source","(?:)",O.READONLY_NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("Object.defineProperty(RegExp.prototype, 'test',","{configurable: true, writable: true, value:","function test(str) {","return !!this.exec(str);","}","});"),N=function(k,D){var j=this.data;if(k=String(k),j.lastIndex=Number(y.getProperty(this,"lastIndex")),y.maybeThrowRegExp(j,D),y.REGEXP_MODE===2){if(O.vm){var U={string:k,regexp:j},W="regexp.exec(string)",ae=y.vmCall(W,U,j,D);ae!==O.REGEXP_TIMEOUT&&(y.setProperty(this,"lastIndex",j.lastIndex),D(y.matchToPseudo_(ae)))}else{var re=y.createWorker(),ie=y.regExpTimeout(j,re,D),ne=this;re.onmessage=function(oe){clearTimeout(ie),y.setProperty(ne,"lastIndex",oe.data[1]),D(y.matchToPseudo_(oe.data[0]))},re.postMessage(["exec",j,j.lastIndex,k])}return}var ae=j.exec(k);y.setProperty(this,"lastIndex",j.lastIndex),D(y.matchToPseudo_(ae))},this.setAsyncFunctionPrototype(this.REGEXP,"exec",N)},O.prototype.matchToPseudo_=function(g){if(g){for(var y=Object.getOwnPropertyNames(g),N=0;N<y.length;N++){var M=y[N];isNaN(Number(M))&&M!=="length"&&M!=="input"&&M!=="index"&&delete g[M]}return this.nativeToPseudo(g)}return null},O.prototype.initError=function(g){var y=this;this.ERROR=this.createNativeFunction(function(k){if(y.calledWithNew())var D=this;else var D=y.createObject(y.ERROR);return y.populateError(D,k),D},!0),this.setProperty(g,"Error",this.ERROR,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"message","",O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name","Error",O.NONENUMERABLE_DESCRIPTOR);var N=function(M){var k=y.createNativeFunction(function(D){if(y.calledWithNew())var j=this;else var j=y.createObject(k);return y.populateError(j,D),j},!0);return y.setProperty(k,"prototype",y.createObject(y.ERROR),O.NONENUMERABLE_DESCRIPTOR),y.setProperty(k.properties.prototype,"name",M,O.NONENUMERABLE_DESCRIPTOR),y.setProperty(g,M,k,O.NONENUMERABLE_DESCRIPTOR),k};this.EVAL_ERROR=N("EvalError"),this.RANGE_ERROR=N("RangeError"),this.REFERENCE_ERROR=N("ReferenceError"),this.SYNTAX_ERROR=N("SyntaxError"),this.TYPE_ERROR=N("TypeError"),this.URI_ERROR=N("URIError")},O.prototype.initMath=function(g){var y=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(g,"Math",y,O.NONENUMERABLE_DESCRIPTOR);for(var N=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],M=0;M<N.length;M++)this.setProperty(y,N[M],Math[N[M]],O.READONLY_NONENUMERABLE_DESCRIPTOR);for(var k=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"],M=0;M<k.length;M++)this.setProperty(y,k[M],this.createNativeFunction(Math[k[M]],!1),O.NONENUMERABLE_DESCRIPTOR)},O.prototype.initJSON=function(g){var y,N=this,M=N.createObjectProto(this.OBJECT_PROTO);this.setProperty(g,"JSON",M,O.NONENUMERABLE_DESCRIPTOR),y=function(D){try{var j=JSON.parse(String(D))}catch(U){N.throwException(N.SYNTAX_ERROR,U.message)}return N.nativeToPseudo(j)},this.setProperty(M,"parse",this.createNativeFunction(y,!1)),y=function(D,j,U){j&&j.class==="Function"?N.throwException(N.TYPE_ERROR,"Function replacer on JSON.stringify not supported"):j&&j.class==="Array"?(j=N.pseudoToNative(j),j=j.filter(function(ie){return typeof ie=="string"||typeof ie=="number"})):j=null,typeof U!="string"&&typeof U!="number"&&(U=void 0);var W=N.pseudoToNative(D);try{var re=JSON.stringify(W,j,U)}catch(ie){N.throwException(N.TYPE_ERROR,ie.message)}return re},this.setProperty(M,"stringify",this.createNativeFunction(y,!1))},O.prototype.isa=function(g,y){if(g==null||!y)return!1;var N=y.properties.prototype;if(g===N)return!0;for(g=this.getPrototype(g);g;){if(g===N)return!0;g=g.proto}return!1},O.prototype.populateRegExp=function(g,y){g.data=new RegExp(y.source,y.flags),this.setProperty(g,"lastIndex",y.lastIndex,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"source",y.source,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"global",y.global,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"ignoreCase",y.ignoreCase,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"multiline",y.multiline,O.READONLY_NONENUMERABLE_DESCRIPTOR)},O.prototype.populateError=function(g,y){y&&this.setProperty(g,"message",String(y),O.NONENUMERABLE_DESCRIPTOR);for(var N=[],M=this.stateStack.length-1;M>=0;M--){var k=this.stateStack[M],D=k.node;if(D.type==="CallExpression"){var j=k.func_;j&&N.length&&(N[N.length-1].datumName=this.getProperty(j,"name"))}D.loc&&(!N.length||D.type==="CallExpression")&&N.push({datumLoc:D.loc})}for(var U=String(this.getProperty(g,"name")),W=String(this.getProperty(g,"message")),re=U+": "+W+`
`,M=0;M<N.length;M++){var ie=N[M].datumLoc,ne=N[M].datumName,ae=ie.source+":"+ie.start.line+":"+ie.start.column;ne?re+="  at "+ne+" ("+ae+`)
`:re+="  at "+ae+`
`}this.setProperty(g,"stack",re.trim(),O.NONENUMERABLE_DESCRIPTOR)},O.prototype.createWorker=function(){var g=this.createWorker.blob_;return g||(g=new Blob([O.WORKER_CODE.join(`
`)],{type:"application/javascript"}),this.createWorker.blob_=g),new Worker(URL.createObjectURL(g))},O.prototype.vmCall=function(g,y,N,M){var k={timeout:this.REGEXP_THREAD_TIMEOUT};try{return O.vm.runInNewContext(g,y,k)}catch{M(null),this.throwException(this.ERROR,"RegExp Timeout: "+N)}return O.REGEXP_TIMEOUT},O.prototype.maybeThrowRegExp=function(g,y){var N;if(this.REGEXP_MODE===0)N=!1;else if(this.REGEXP_MODE===1)N=!0;else if(O.vm)N=!0;else if(typeof Worker=="function"&&typeof URL=="function")N=!0;else{try{O.vm=te("vm")}catch{}N=!!O.vm}N||(y(null),this.throwException(this.ERROR,"Regular expressions not supported: "+g))},O.prototype.regExpTimeout=function(g,y,N){var M=this;return setTimeout(function(){y.terminate(),N(null);try{M.throwException(M.ERROR,"RegExp Timeout: "+g)}catch{}},this.REGEXP_THREAD_TIMEOUT)},O.prototype.createObject=function(g){return this.createObjectProto(g&&g.properties.prototype)},O.prototype.createObjectProto=function(g){if(typeof g!="object")throw Error("Non object prototype");var y=new O.Object(g);return this.isa(y,this.ERROR)&&(y.class="Error"),y},O.prototype.createArray=function(){var g=this.createObjectProto(this.ARRAY_PROTO);return this.setProperty(g,"length",0,{configurable:!1,enumerable:!1,writable:!0}),g.class="Array",g},O.prototype.createFunctionBase_=function(g,y){var N=this.createObjectProto(this.FUNCTION_PROTO);if(y){var M=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(N,"prototype",M,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(M,"constructor",N,O.NONENUMERABLE_DESCRIPTOR)}else N.illegalConstructor=!0;return this.setProperty(N,"length",g,O.READONLY_NONENUMERABLE_DESCRIPTOR),N.class="Function",N},O.prototype.createFunction=function(g,y,N){var M=this.createFunctionBase_(g.params.length,!0);M.parentScope=y,M.node=g;var k=g.id?String(g.id.name):N||"";return this.setProperty(M,"name",k,O.READONLY_NONENUMERABLE_DESCRIPTOR),M},O.prototype.createNativeFunction=function(g,y){var N=this.createFunctionBase_(g.length,y);return N.nativeFunc=g,g.id=this.functionCounter_++,this.setProperty(N,"name",g.name,O.READONLY_NONENUMERABLE_DESCRIPTOR),N},O.prototype.createAsyncFunction=function(g){var y=this.createFunctionBase_(g.length,!0);return y.asyncFunc=g,g.id=this.functionCounter_++,this.setProperty(y,"name",g.name,O.READONLY_NONENUMERABLE_DESCRIPTOR),y},O.prototype.nativeToPseudo=function(g,y){if(g==null||g===!0||g===!1||typeof g=="string"||typeof g=="number")return g;if(g instanceof O.Object)throw Error("Object is already pseudo");var N=y||{pseudo:[],native:[]},M=N.native.indexOf(g);if(M!==-1)return N.pseudo[M];if(N.native.push(g),g instanceof RegExp){var k=this.createObjectProto(this.REGEXP_PROTO);return this.populateRegExp(k,g),N.pseudo.push(k),k}if(g instanceof Date){var D=this.createObjectProto(this.DATE_PROTO);return D.data=new Date(g.valueOf()),N.pseudo.push(D),D}var j;if(g instanceof Number?j=this.createObject(this.NUMBER):g instanceof String?j=this.createObject(this.STRING):g instanceof Boolean&&(j=this.createObject(this.BOOLEAN)),j)return j.data=g.valueOf(),N.pseudo.push(j),j;if(typeof g=="function"){var U=this,W=function(){var oe=Array.prototype.slice.call(arguments).map(function(xe){return U.pseudoToNative(xe)}),Ee=g.apply(U,oe);return U.nativeToPseudo(Ee)},re=Object.getOwnPropertyDescriptor(g,"prototype"),ie=this.createNativeFunction(W,!!re);return N.pseudo.push(ie),ie}var ne;Array.isArray(g)?ne=this.createArray():ne=this.createObjectProto(this.OBJECT_PROTO),N.pseudo.push(ne);for(var ae in g)this.setProperty(ne,ae,this.nativeToPseudo(g[ae],N));return ne},O.prototype.pseudoToNative=function(g,y){if(g==null||g===!0||g===!1||typeof g=="string"||typeof g=="number")return g;if(!(g instanceof O.Object))throw Error("Object is not pseudo");var N=y||{pseudo:[],native:[]},M=N.pseudo.indexOf(g);if(M!==-1)return N.native[M];if(N.pseudo.push(g),this.isa(g,this.REGEXP)){var k=new RegExp(g.data.source,g.data.flags);return k.lastIndex=g.data.lastIndex,N.native.push(k),k}if(this.isa(g,this.DATE)){var D=new Date(g.data.valueOf());return N.native.push(D),D}if(this.isa(g,this.NUMBER)||this.isa(g,this.STRING)||this.isa(g,this.BOOLEAN)){var j=Object(g.data);return N.native.push(j),j}var U=this.isa(g,this.ARRAY)?[]:{};N.native.push(U);var W;for(var re in g.properties)W=this.pseudoToNative(g.properties[re],N),Object.defineProperty(U,re,{value:W,writable:!0,enumerable:!0,configurable:!0});return U},O.prototype.getPrototype=function(g){switch(typeof g){case"number":return this.NUMBER.properties.prototype;case"boolean":return this.BOOLEAN.properties.prototype;case"string":return this.STRING.properties.prototype}return g?g.proto:null},O.prototype.getProperty=function(g,y){if(this.getterStep_)throw Error("Getter not supported in that context");if(y=String(y),g==null&&this.throwException(this.TYPE_ERROR,"Cannot read property '"+y+"' of "+g),typeof g=="object"&&!(g instanceof O.Object))throw TypeError("Expecting native value or pseudo object");if(y==="length"){if(this.isa(g,this.STRING))return String(g).length}else if(y.charCodeAt(0)<64&&this.isa(g,this.STRING)){var N=O.legalArrayIndex(y);if(!isNaN(N)&&N<String(g).length)return String(g)[N]}do if(g.properties&&y in g.properties){var M=g.getter[y];return M?(this.getterStep_=!0,M):g.properties[y]}while(g=this.getPrototype(g))},O.prototype.hasProperty=function(g,y){if(!(g instanceof O.Object))throw TypeError("Primitive data type has no properties");if(y=String(y),y==="length"&&this.isa(g,this.STRING))return!0;if(this.isa(g,this.STRING)){var N=O.legalArrayIndex(y);if(!isNaN(N)&&N<String(g).length)return!0}do if(g.properties&&y in g.properties)return!0;while(g=this.getPrototype(g));return!1},O.prototype.setProperty=function(g,y,N,M){if(this.setterStep_)throw Error("Setter not supported in that context");if(y=String(y),g==null&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+y+"' of "+g),typeof g=="object"&&!(g instanceof O.Object))throw TypeError("Expecting native value or pseudo object");M&&("get"in M||"set"in M)&&("value"in M||"writable"in M)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var k=!this.stateStack||this.getScope().strict;if(!(g instanceof O.Object)){k&&this.throwException(this.TYPE_ERROR,"Can't create property '"+y+"' on '"+g+"'");return}if(this.isa(g,this.STRING)){var D=O.legalArrayIndex(y);if(y==="length"||!isNaN(D)&&D<String(g).length){k&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+y+"' of String '"+g.data+"'");return}}if(g.class==="Array"){var j=g.properties.length,U;if(y==="length"){if(M){if(!("value"in M))return;N=M.value}if(N=O.legalArrayLength(N),isNaN(N)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),N<j)for(U in g.properties)U=O.legalArrayIndex(U),!isNaN(U)&&N<=U&&delete g.properties[U]}else isNaN(U=O.legalArrayIndex(y))||(g.properties.length=Math.max(j,U+1))}if(g.preventExtensions&&!(y in g.properties)){k&&this.throwException(this.TYPE_ERROR,"Can't add property '"+y+"', object is not extensible");return}if(M){var W={};"get"in M&&M.get&&(g.getter[y]=M.get,W.get=this.setProperty.placeholderGet_),"set"in M&&M.set&&(g.setter[y]=M.set,W.set=this.setProperty.placeholderSet_),"configurable"in M&&(W.configurable=M.configurable),"enumerable"in M&&(W.enumerable=M.enumerable),"writable"in M&&(W.writable=M.writable,delete g.getter[y],delete g.setter[y]),"value"in M?(W.value=M.value,delete g.getter[y],delete g.setter[y]):N!==O.VALUE_IN_DESCRIPTOR&&(W.value=N,delete g.getter[y],delete g.setter[y]);try{Object.defineProperty(g.properties,y,W)}catch{this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+y)}"get"in M&&!M.get&&delete g.getter[y],"set"in M&&!M.set&&delete g.setter[y]}else{if(N===O.VALUE_IN_DESCRIPTOR)throw ReferenceError("Value not specified");for(var re=g;!(y in re.properties);)if(re=this.getPrototype(re),!re){re=g;break}if(re.setter&&re.setter[y])return this.setterStep_=!0,re.setter[y];if(re.getter&&re.getter[y])k&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+y+"' of object '"+g+"' which only has a getter");else try{g.properties[y]=N}catch{k&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+y+"' of object '"+g+"'")}}},O.prototype.setProperty.placeholderGet_=function(){throw Error("Placeholder getter")},O.prototype.setProperty.placeholderSet_=function(){throw Error("Placeholder setter")},O.prototype.setNativeFunctionPrototype=function(g,y,N){this.setProperty(g.properties.prototype,y,this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR)},O.prototype.setAsyncFunctionPrototype=function(g,y,N){this.setProperty(g.properties.prototype,y,this.createAsyncFunction(N),O.NONENUMERABLE_DESCRIPTOR)},O.prototype.getScope=function(){var g=this.stateStack[this.stateStack.length-1].scope;if(!g)throw Error("No scope found");return g},O.prototype.createScope=function(g,y){var N=!1;if(y&&y.strict)N=!0;else{var M=g.body&&g.body[0];M&&M.expression&&M.expression.type==="Literal"&&M.expression.value==="use strict"&&(N=!0)}var k=this.createObjectProto(null),D=new O.Scope(y,N,k);return y||this.initGlobal(D.object),this.populateScope_(g,D),D},O.prototype.createSpecialScope=function(g,y){if(!g)throw Error("parentScope required");var N=y||this.createObjectProto(null);return new O.Scope(g,g.strict,N)},O.prototype.getValueFromScope=function(g){for(var y=this.getScope();y&&y!==this.globalScope;){if(g in y.object.properties)return y.object.properties[g];y=y.parentScope}if(y===this.globalScope&&this.hasProperty(y.object,g))return this.getProperty(y.object,g);var N=this.stateStack[this.stateStack.length-1].node;N.type==="UnaryExpression"&&N.operator==="typeof"||this.throwException(this.REFERENCE_ERROR,g+" is not defined")},O.prototype.setValueToScope=function(g,y){for(var N=this.getScope(),M=N.strict;N&&N!==this.globalScope;){if(g in N.object.properties){try{N.object.properties[g]=y}catch{M&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only variable '"+g+"'")}return}N=N.parentScope}if(N===this.globalScope&&(!M||this.hasProperty(N.object,g)))return this.setProperty(N.object,g,y);this.throwException(this.REFERENCE_ERROR,g+" is not defined")},O.prototype.populateScope_=function(g,y){var N;if(g.variableCache_)N=g.variableCache_;else{switch(N=Object.create(null),g.type){case"VariableDeclaration":for(var M=0;M<g.declarations.length;M++)N[g.declarations[M].id.name]=!0;break;case"FunctionDeclaration":N[g.id.name]=g;break;case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"Program":case"SwitchCase":case"SwitchStatement":case"TryStatement":case"WithStatement":case"WhileStatement":var k=g.constructor;for(var D in g)if(g[D]!==g.loc){var j=g[D];if(j&&typeof j=="object"){var U;if(Array.isArray(j)){for(var M=0;M<j.length;M++)if(j[M]&&j[M].constructor===k){U=this.populateScope_(j[M],y);for(var D in U)N[D]=U[D]}}else if(j.constructor===k){U=this.populateScope_(j,y);for(var D in U)N[D]=U[D]}}}}g.variableCache_=N}for(var D in N)N[D]===!0?this.setProperty(y.object,D,void 0,O.VARIABLE_DESCRIPTOR):this.setProperty(y.object,D,this.createFunction(N[D],y),O.VARIABLE_DESCRIPTOR);return N},O.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor},O.prototype.getValue=function(g){return g[0]===O.SCOPE_REFERENCE?this.getValueFromScope(g[1]):this.getProperty(g[0],g[1])},O.prototype.setValue=function(g,y){return g[0]===O.SCOPE_REFERENCE?this.setValueToScope(g[1],y):this.setProperty(g[0],g[1],y)},O.prototype.throwException=function(g,y){if(!this.globalScope)throw y===void 0?g:y;if(y===void 0||!(g instanceof O.Object))var N=g;else{var N=this.createObject(g);this.populateError(N,y)}throw this.unwind(O.Completion.THROW,N,void 0),O.STEP_ERROR},O.prototype.unwind=function(g,y,N){if(g===O.Completion.NORMAL)throw TypeError("Should not unwind for NORMAL completions");e:for(var M=this.stateStack;M.length>0;M.pop()){var k=M[M.length-1];switch(k.node.type){case"TryStatement":k.cv={type:g,value:y,label:N};return;case"CallExpression":case"NewExpression":if(g===O.Completion.RETURN){k.value=y;return}else if(g===O.Completion.BREAK||g===O.Completion.CONTINUE)throw Error("Unsyntactic break/continue not rejected by Acorn");break;case"Program":if(g===O.Completion.RETURN)return;k.done=!0;break e}if(g===O.Completion.BREAK){if(N?k.labels&&k.labels.indexOf(N)!==-1:k.isLoop||k.isSwitch){M.pop();return}}else if(g===O.Completion.CONTINUE&&(N?k.labels&&k.labels.indexOf(N)!==-1:k.isLoop))return}var D;if(this.isa(y,this.ERROR)){var j={EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError},U=String(this.getProperty(y,"name")),W=this.getProperty(y,"message").valueOf(),re=j[U]||Error;D=re(W),D.stack=String(this.getProperty(y,"stack"))}else D=String(y);throw this.value=D,D},O.prototype.nodeSummary=function(g){switch(g.type){case"ArrayExpression":return"[...]";case"BinaryExpression":case"LogicalExpression":return this.nodeSummary(g.left)+" "+g.operator+" "+this.nodeSummary(g.right);case"CallExpression":return this.nodeSummary(g.callee)+"(...)";case"ConditionalExpression":return this.nodeSummary(g.test)+" ? "+this.nodeSummary(g.consequent)+" : "+this.nodeSummary(g.alternate);case"Identifier":return g.name;case"Literal":return g.raw;case"MemberExpression":var y=this.nodeSummary(g.object),N=this.nodeSummary(g.property);return g.computed?y+"["+N+"]":y+"."+N;case"NewExpression":return"new "+this.nodeSummary(g.callee)+"(...)";case"ObjectExpression":return"{...}";case"ThisExpression":return"this";case"UnaryExpression":return g.operator+" "+this.nodeSummary(g.argument);case"UpdateExpression":var M=this.nodeSummary(g.argument);return g.prefix?g.operator+M:M+g.operator}return"???"},O.prototype.createTask_=function(g,y){var N=this.stateStack[this.stateStack.length-1],M=Array.from(y),k=M.shift(),D=Math.max(Number(M.shift()||0),0),j=this.newNode(),U,W,re;if(k instanceof O.Object&&k.class==="Function")W=k,j.type="CallExpression",U=N.scope;else{try{re=this.parse_(String(k),"taskCode"+this.taskCodeNumber_++)}catch(Ee){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+Ee.message)}j.type="EvalProgram_",j.body=re.body;var ie=N.node.arguments[0],ne=ie?ie.start:void 0,ae=ie?ie.end:void 0;O.stripLocations_(j,ne,ae),U=this.globalScope,M.length=0}var oe=new O.Task(W,M,U,j,g?D:-1);return this.scheduleTask_(oe,D),oe.pid},O.prototype.scheduleTask_=function(g,y){g.time=Date.now()+y,this.tasks.push(g),this.tasks.sort(function(N,M){return N.time-M.time})},O.prototype.deleteTask_=function(g){for(var y=0;y<this.tasks.length;y++)if(this.tasks[y].pid==g){this.tasks.splice(y,1);break}},O.prototype.nextTask_=function(){var g=this.tasks[0];if(!g||g.time>Date.now())return null;this.tasks.shift(),g.interval>=0&&this.scheduleTask_(g,g.interval);var y=new O.State(g.node,g.scope);return g.functionRef&&(y.doneCallee_=2,y.funcThis_=this.globalObject,y.func_=g.functionRef,y.doneArgs_=!0,y.arguments_=g.argsArray),y},O.prototype.createGetter_=function(g,y){if(!this.getterStep_)throw Error("Unexpected call to createGetter");this.getterStep_=!1;var N=Array.isArray(y)?y[0]:y,M=this.newNode();M.type="CallExpression";var k=new O.State(M,this.stateStack[this.stateStack.length-1].scope);return k.doneCallee_=2,k.funcThis_=N,k.func_=g,k.doneArgs_=!0,k.arguments_=[],k},O.prototype.createSetter_=function(g,y,N){if(!this.setterStep_)throw Error("Unexpected call to createSetter");this.setterStep_=!1;var M=Array.isArray(y)?y[0]:this.globalObject,k=this.newNode();k.type="CallExpression";var D=new O.State(k,this.stateStack[this.stateStack.length-1].scope);return D.doneCallee_=2,D.funcThis_=M,D.func_=g,D.doneArgs_=!0,D.arguments_=[N],D},O.prototype.boxThis_=function(g){if(g==null)return this.globalObject;if(!(g instanceof O.Object)){var y=this.createObjectProto(this.getPrototype(g));return y.data=g,y}return g},O.prototype.getGlobalScope=function(){return this.globalScope},O.prototype.setGlobalScope=function(g){this.globalScope=g,this.stateStack[0].scope=g},O.prototype.getStateStack=function(){return this.stateStack},O.prototype.setStateStack=function(g){this.stateStack=g},O.Value,O.State=function(g,y){this.node=g,this.scope=y},O.Scope=function(g,y,N){this.parentScope=g,this.strict=y,this.object=N},O.Object=function(g){this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.proto=g},O.Object.prototype.proto=null,O.Object.prototype.class="Object",O.Object.prototype.data=null,O.Object.prototype.toString=function(){if(!O.currentInterpreter_)return"[object Interpreter.Object]";if(!(this instanceof O.Object))return String(this);if(this.class==="Array"){var g=O.toStringCycles_;g.push(this);try{var y=[],N=this.properties.length,M=!1;N>1024&&(N=1e3,M=!0);for(var k=0;k<N;k++){var D=this.properties[k];y[k]=D instanceof O.Object&&g.indexOf(D)!==-1?"...":D}M&&y.push("...")}finally{g.pop()}return y.join(",")}if(this.class==="Error"){var g=O.toStringCycles_;if(g.indexOf(this)!==-1)return"[object Error]";var j,U,W=this;do if("name"in W.properties){j=W.properties.name;break}while(W=W.proto);W=this;do if("message"in W.properties){U=W.properties.message;break}while(W=W.proto);g.push(this);try{j=j&&String(j),U=U&&String(U)}finally{g.pop()}return U?j+": "+U:String(j)}return this.data!==null?String(this.data):"[object "+this.class+"]"},O.Object.prototype.valueOf=function(){return O.currentInterpreter_?this.data===void 0||this.data===null||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data:this},O.Task=function(g,y,N,M,k){this.functionRef=g,this.argsArray=y,this.scope=N,this.node=M,this.interval=k,this.pid=++O.Task.pid,this.time=0},O.Task.pid=0,O.prototype.stepArrayExpression=function(g,y,N){var M=N.elements,k=y.n_||0;for(y.array_?(this.setProperty(y.array_,k,y.value),k++):(y.array_=this.createArray(),y.array_.properties.length=M.length);k<M.length;){if(M[k])return y.n_=k,new O.State(M[k],y.scope);k++}g.pop(),g[g.length-1].value=y.array_},O.prototype.stepAssignmentExpression=function(g,y,N){if(!y.doneLeft_){y.doneLeft_=!0;var M=new O.State(N.left,y.scope);return M.components=!0,M}if(!y.doneRight_){if(y.leftReference_||(y.leftReference_=y.value),y.doneGetter_&&(y.leftValue_=y.value),!y.doneGetter_&&N.operator!=="="){var k=this.getValue(y.leftReference_);if(y.leftValue_=k,this.getterStep_){y.doneGetter_=!0;var D=k;return this.createGetter_(D,y.leftReference_)}}return y.doneRight_=!0,N.operator==="="&&N.left.type==="Identifier"&&(y.destinationName=N.left.name),new O.State(N.right,y.scope)}if(y.doneSetter_){g.pop(),g[g.length-1].value=y.setterValue_;return}var j=y.leftValue_,U=y.value;switch(N.operator){case"=":j=U;break;case"+=":j+=U;break;case"-=":j-=U;break;case"*=":j*=U;break;case"/=":j/=U;break;case"%=":j%=U;break;case"<<=":j<<=U;break;case">>=":j>>=U;break;case">>>=":j>>>=U;break;case"&=":j&=U;break;case"^=":j^=U;break;case"|=":j|=U;break;default:throw SyntaxError("Unknown assignment expression: "+N.operator)}var W=this.setValue(y.leftReference_,j);if(W)return y.doneSetter_=!0,y.setterValue_=j,this.createSetter_(W,y.leftReference_,j);g.pop(),g[g.length-1].value=j},O.prototype.stepBinaryExpression=function(g,y,N){if(!y.doneLeft_)return y.doneLeft_=!0,new O.State(N.left,y.scope);if(!y.doneRight_)return y.doneRight_=!0,y.leftValue_=y.value,new O.State(N.right,y.scope);g.pop();var M=y.leftValue_,k=y.value,D;switch(N.operator){case"==":D=M==k;break;case"!=":D=M!=k;break;case"===":D=M===k;break;case"!==":D=M!==k;break;case">":D=M>k;break;case">=":D=M>=k;break;case"<":D=M<k;break;case"<=":D=M<=k;break;case"+":D=M+k;break;case"-":D=M-k;break;case"*":D=M*k;break;case"/":D=M/k;break;case"%":D=M%k;break;case"&":D=M&k;break;case"|":D=M|k;break;case"^":D=M^k;break;case"<<":D=M<<k;break;case">>":D=M>>k;break;case">>>":D=M>>>k;break;case"in":k instanceof O.Object||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+k+"'"),D=this.hasProperty(k,M);break;case"instanceof":this.isa(k,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"'instanceof' expects an object, not '"+k+"'"),D=M instanceof O.Object?this.isa(M,k):!1;break;default:throw SyntaxError("Unknown binary operator: "+N.operator)}g[g.length-1].value=D},O.prototype.stepBlockStatement=function(g,y,N){var M=y.n_||0,k=N.body[M];if(k)return y.n_=M+1,new O.State(k,y.scope);g.pop()},O.prototype.stepBreakStatement=function(g,y,N){var M=N.label&&N.label.name;this.unwind(O.Completion.BREAK,void 0,M)},O.prototype.evalCodeNumber_=0,O.prototype.stepCallExpression=function(g,y,N){if(!y.doneCallee_){y.doneCallee_=1;var M=new O.State(N.callee,y.scope);return M.components=!0,M}if(y.doneCallee_===1){y.doneCallee_=2;var k=y.value;if(Array.isArray(k)){if(y.func_=this.getValue(k),k[0]===O.SCOPE_REFERENCE?y.directEval_=k[1]==="eval":y.funcThis_=k[0],k=y.func_,this.getterStep_)return y.doneCallee_=1,this.createGetter_(k,y.value)}else y.func_=k;y.arguments_=[],y.n_=0}var k=y.func_;if(!y.doneArgs_){if(y.n_!==0&&y.arguments_.push(y.value),N.arguments[y.n_])return new O.State(N.arguments[y.n_++],y.scope);if(N.type==="NewExpression"){if((!(k instanceof O.Object)||k.illegalConstructor)&&this.throwException(this.TYPE_ERROR,this.nodeSummary(N.callee)+" is not a constructor"),k===this.ARRAY)y.funcThis_=this.createArray();else{var D=k.properties.prototype;(typeof D!="object"||D===null)&&(D=this.OBJECT_PROTO),y.funcThis_=this.createObjectProto(D)}y.isConstructor=!0}y.doneArgs_=!0}if(y.doneExec_)g.pop(),y.isConstructor&&typeof y.value!="object"?g[g.length-1].value=y.funcThis_:g[g.length-1].value=y.value;else{y.doneExec_=!0,k instanceof O.Object||this.throwException(this.TYPE_ERROR,this.nodeSummary(N.callee)+" is not a function");var j=k.node;if(j){for(var U=this.createScope(j.body,k.parentScope),W=this.createArray(),re=0;re<y.arguments_.length;re++)this.setProperty(W,re,y.arguments_[re]);this.setProperty(U.object,"arguments",W);for(var re=0;re<j.params.length;re++){var ie=j.params[re].name,ne=y.arguments_.length>re?y.arguments_[re]:void 0;this.setProperty(U.object,ie,ne)}return U.strict||(y.funcThis_=this.boxThis_(y.funcThis_)),this.setProperty(U.object,"this",y.funcThis_,O.READONLY_DESCRIPTOR),y.value=void 0,new O.State(j.body,U)}else if(k.eval){var ae=y.arguments_[0];if(typeof ae!="string")y.value=ae;else{try{var oe=this.parse_(String(ae),"eval"+this.evalCodeNumber_++)}catch(ye){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+ye.message)}var Ee=this.newNode();Ee.type="EvalProgram_",Ee.body=oe.body,O.stripLocations_(Ee,N.start,N.end);var U=y.directEval_?y.scope:this.globalScope;return U.strict?U=this.createScope(oe,U):this.populateScope_(oe,U),this.value=void 0,new O.State(Ee,U)}}else if(k.nativeFunc)y.scope.strict||(y.funcThis_=this.boxThis_(y.funcThis_)),y.value=k.nativeFunc.apply(y.funcThis_,y.arguments_);else if(k.asyncFunc){var xe=this,We=function(Ae){y.value=Ae,xe.paused_=!1},Ne=k.asyncFunc.length-1,je=y.arguments_.concat(new Array(Ne)).slice(0,Ne);je.push(We),this.paused_=!0,y.scope.strict||(y.funcThis_=this.boxThis_(y.funcThis_)),k.asyncFunc.apply(y.funcThis_,je);return}else this.throwException(this.TYPE_ERROR,this.nodeSummary(N.callee)+" is not callable")}},O.prototype.stepConditionalExpression=function(g,y,N){var M=y.mode_||0;if(M===0)return y.mode_=1,new O.State(N.test,y.scope);if(M===1){y.mode_=2;var k=!!y.value;if(k&&N.consequent)return new O.State(N.consequent,y.scope);if(!k&&N.alternate)return new O.State(N.alternate,y.scope);this.value=void 0}g.pop(),N.type==="ConditionalExpression"&&(g[g.length-1].value=y.value)},O.prototype.stepContinueStatement=function(g,y,N){var M=N.label&&N.label.name;this.unwind(O.Completion.CONTINUE,void 0,M)},O.prototype.stepDebuggerStatement=function(g,y,N){g.pop()},O.prototype.stepDoWhileStatement=function(g,y,N){if(N.type==="DoWhileStatement"&&y.test_===void 0&&(y.value=!0,y.test_=!0),!y.test_)return y.test_=!0,new O.State(N.test,y.scope);if(!y.value)g.pop();else if(N.body)return y.test_=!1,y.isLoop=!0,new O.State(N.body,y.scope)},O.prototype.stepEmptyStatement=function(g,y,N){g.pop()},O.prototype.stepEvalProgram_=function(g,y,N){var M=y.n_||0,k=N.body[M];if(k)return y.n_=M+1,new O.State(k,y.scope);g.pop(),g[g.length-1].value=this.value},O.prototype.stepExpressionStatement=function(g,y,N){if(!y.done_)return this.value=void 0,y.done_=!0,new O.State(N.expression,y.scope);g.pop(),this.value=y.value},O.prototype.stepForInStatement=function(g,y,N){if(!y.doneInit_&&(y.doneInit_=!0,N.left.declarations&&N.left.declarations[0].init))return y.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer"),new O.State(N.left,y.scope);if(!y.doneObject_)return y.doneObject_=!0,y.variable_||(y.variable_=y.value),new O.State(N.right,y.scope);if(y.isLoop||(y.isLoop=!0,y.object_=y.value,y.visited_=Object.create(null)),y.name_===void 0)e:for(;;){if(y.object_ instanceof O.Object)for(y.props_||(y.props_=Object.getOwnPropertyNames(y.object_.properties));;){var M=y.props_.shift();if(M===void 0)break;if(Object.prototype.hasOwnProperty.call(y.object_.properties,M)&&!y.visited_[M]&&(y.visited_[M]=!0,!!Object.prototype.propertyIsEnumerable.call(y.object_.properties,M))){y.name_=M;break e}}else if(y.object_!==null&&y.object_!==void 0)for(y.props_||(y.props_=Object.getOwnPropertyNames(y.object_));;){var M=y.props_.shift();if(M===void 0)break;if(y.visited_[M]=!0,!!Object.prototype.propertyIsEnumerable.call(y.object_,M)){y.name_=M;break e}}if(y.object_=this.getPrototype(y.object_),y.props_=null,y.object_===null){g.pop();return}}if(!y.doneVariable_){y.doneVariable_=!0;var k=N.left;if(k.type==="VariableDeclaration")y.variable_=[O.SCOPE_REFERENCE,k.declarations[0].id.name];else{y.variable_=null;var D=new O.State(k,y.scope);return D.components=!0,D}}if(y.variable_||(y.variable_=y.value),!y.doneSetter_){y.doneSetter_=!0;var j=y.name_,U=this.setValue(y.variable_,j);if(U)return this.createSetter_(U,y.variable_,j)}if(y.name_=void 0,y.doneVariable_=!1,y.doneSetter_=!1,N.body)return new O.State(N.body,y.scope)},O.prototype.stepForStatement=function(g,y,N){switch(y.mode_){default:if(y.mode_=1,N.init)return new O.State(N.init,y.scope);break;case 1:if(y.mode_=2,N.test)return new O.State(N.test,y.scope);break;case 2:if(y.mode_=3,N.test&&!y.value)g.pop();else return y.isLoop=!0,new O.State(N.body,y.scope);break;case 3:if(y.mode_=1,N.update)return new O.State(N.update,y.scope);break}},O.prototype.stepFunctionDeclaration=function(g,y,N){g.pop()},O.prototype.stepFunctionExpression=function(g,y,N){g.pop(),y=g[g.length-1];var M=y.scope;N.id&&(M=this.createSpecialScope(M)),y.value=this.createFunction(N,M,y.destinationName),N.id&&this.setProperty(M.object,N.id.name,y.value,O.READONLY_DESCRIPTOR)},O.prototype.stepIdentifier=function(g,y,N){if(g.pop(),y.components){g[g.length-1].value=[O.SCOPE_REFERENCE,N.name];return}var M=this.getValueFromScope(N.name);if(this.getterStep_){var k=M;return this.createGetter_(k,this.globalObject)}g[g.length-1].value=M},O.prototype.stepIfStatement=O.prototype.stepConditionalExpression,O.prototype.stepLabeledStatement=function(g,y,N){g.pop();var M=y.labels||[];M.push(N.label.name);var k=new O.State(N.body,y.scope);return k.labels=M,k},O.prototype.stepLiteral=function(g,y,N){g.pop();var M=N.value;if(M instanceof RegExp){var k=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(k,M),M=k}g[g.length-1].value=M},O.prototype.stepLogicalExpression=function(g,y,N){if(N.operator!=="&&"&&N.operator!=="||")throw SyntaxError("Unknown logical operator: "+N.operator);if(!y.doneLeft_)return y.doneLeft_=!0,new O.State(N.left,y.scope);if(y.doneRight_)g.pop(),g[g.length-1].value=y.value;else if(N.operator==="&&"&&!y.value||N.operator==="||"&&y.value)g.pop(),g[g.length-1].value=y.value;else return y.doneRight_=!0,new O.State(N.right,y.scope)},O.prototype.stepMemberExpression=function(g,y,N){if(!y.doneObject_)return y.doneObject_=!0,new O.State(N.object,y.scope);var M;if(!N.computed)y.object_=y.value,M=N.property.name;else if(y.doneProperty_)M=y.value;else return y.object_=y.value,y.doneProperty_=!0,new O.State(N.property,y.scope);if(g.pop(),y.components)g[g.length-1].value=[y.object_,M];else{var k=this.getProperty(y.object_,M);if(this.getterStep_){var D=k;return this.createGetter_(D,y.object_)}g[g.length-1].value=k}},O.prototype.stepNewExpression=O.prototype.stepCallExpression,O.prototype.stepObjectExpression=function(g,y,N){var M=y.n_||0,k=N.properties[M];if(!y.object_)y.object_=this.createObjectProto(this.OBJECT_PROTO),y.properties_=Object.create(null);else{var D=y.destinationName;y.properties_[D]||(y.properties_[D]={}),y.properties_[D][k.kind]=y.value,y.n_=++M,k=N.properties[M]}if(k){var j=k.key;if(j.type==="Identifier")var D=j.name;else if(j.type==="Literal")var D=j.value;else throw SyntaxError("Unknown object structure: "+j.type);return y.destinationName=D,new O.State(k.value,y.scope)}for(var j in y.properties_){var U=y.properties_[j];if("get"in U||"set"in U){var W={configurable:!0,enumerable:!0,get:U.get,set:U.set};this.setProperty(y.object_,j,O.VALUE_IN_DESCRIPTOR,W)}else this.setProperty(y.object_,j,U.init)}g.pop(),g[g.length-1].value=y.object_},O.prototype.stepProgram=function(g,y,N){var M=N.body.shift();if(M)return y.done=!1,new O.State(M,y.scope);y.done=!0},O.prototype.stepReturnStatement=function(g,y,N){if(N.argument&&!y.done_)return y.done_=!0,new O.State(N.argument,y.scope);this.unwind(O.Completion.RETURN,y.value,void 0)},O.prototype.stepSequenceExpression=function(g,y,N){var M=y.n_||0,k=N.expressions[M];if(k)return y.n_=M+1,new O.State(k,y.scope);g.pop(),g[g.length-1].value=y.value},O.prototype.stepSwitchStatement=function(g,y,N){if(!y.test_)return y.test_=1,new O.State(N.discriminant,y.scope);for(y.test_===1&&(y.test_=2,y.switchValue_=y.value,y.defaultCase_=-1);;){var M=y.index_||0,k=N.cases[M];if(!y.matched_&&k&&!k.test){y.defaultCase_=M,y.index_=M+1;continue}if(!k&&!y.matched_&&y.defaultCase_!==-1){y.matched_=!0,y.index_=y.defaultCase_;continue}if(k){if(!y.matched_&&!y.tested_&&k.test)return y.tested_=!0,new O.State(k.test,y.scope);if(y.matched_||y.value===y.switchValue_){y.matched_=!0;var D=y.n_||0;if(k.consequent[D])return y.isSwitch=!0,y.n_=D+1,new O.State(k.consequent[D],y.scope)}y.tested_=!1,y.n_=0,y.index_=M+1}else{g.pop();return}}},O.prototype.stepThisExpression=function(g,y,N){g.pop(),g[g.length-1].value=this.getValueFromScope("this")},O.prototype.stepThrowStatement=function(g,y,N){if(y.done_)this.throwException(y.value);else return y.done_=!0,new O.State(N.argument,y.scope)},O.prototype.stepTryStatement=function(g,y,N){if(!y.doneBlock_)return y.doneBlock_=!0,new O.State(N.block,y.scope);if(y.cv&&y.cv.type===O.Completion.THROW&&!y.doneHandler_&&N.handler){y.doneHandler_=!0;var M=this.createSpecialScope(y.scope);return this.setProperty(M.object,N.handler.param.name,y.cv.value),y.cv=void 0,new O.State(N.handler.body,M)}if(!y.doneFinalizer_&&N.finalizer)return y.doneFinalizer_=!0,new O.State(N.finalizer,y.scope);g.pop(),y.cv&&this.unwind(y.cv.type,y.cv.value,y.cv.label)},O.prototype.stepUnaryExpression=function(g,y,N){if(!y.done_){y.done_=!0;var M=new O.State(N.argument,y.scope);return M.components=N.operator==="delete",M}g.pop();var k=y.value;switch(N.operator){case"-":k=-k;break;case"+":k=+k;break;case"!":k=!k;break;case"~":k=~k;break;case"delete":var D=!0;if(Array.isArray(k)){var j=k[0];j===O.SCOPE_REFERENCE&&(j=y.scope);var U=String(k[1]);try{delete j.properties[U]}catch{y.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+U+"' of '"+j+"'"):D=!1}}k=D;break;case"typeof":k=k&&k.class==="Function"?"function":typeof k;break;case"void":k=void 0;break;default:throw SyntaxError("Unknown unary operator: "+N.operator)}g[g.length-1].value=k},O.prototype.stepUpdateExpression=function(g,y,N){if(!y.doneLeft_){y.doneLeft_=!0;var M=new O.State(N.argument,y.scope);return M.components=!0,M}if(y.leftSide_||(y.leftSide_=y.value),y.doneGetter_&&(y.leftValue_=y.value),!y.doneGetter_){var D=this.getValue(y.leftSide_);if(y.leftValue_=D,this.getterStep_){y.doneGetter_=!0;var k=D;return this.createGetter_(k,y.leftSide_)}}if(y.doneSetter_){g.pop(),g[g.length-1].value=y.setterValue_;return}var D=Number(y.leftValue_),j;if(N.operator==="++")j=D+1;else if(N.operator==="--")j=D-1;else throw SyntaxError("Unknown update expression: "+N.operator);var U=N.prefix?j:D,W=this.setValue(y.leftSide_,j);if(W)return y.doneSetter_=!0,y.setterValue_=U,this.createSetter_(W,y.leftSide_,j);g.pop(),g[g.length-1].value=U},O.prototype.stepVariableDeclaration=function(g,y,N){var M=N.declarations,k=y.n_||0,D=M[k];for(y.init_&&D&&(this.setValueToScope(D.id.name,y.value),y.init_=!1,D=M[++k]);D;){if(D.init)return y.n_=k,y.init_=!0,y.destinationName=D.id.name,new O.State(D.init,y.scope);D=M[++k]}g.pop()},O.prototype.stepWithStatement=function(g,y,N){if(!y.doneObject_)return y.doneObject_=!0,new O.State(N.object,y.scope);g.pop();var M=this.createSpecialScope(y.scope,y.value);return new O.State(N.body,M)},O.prototype.stepWhileStatement=O.prototype.stepDoWhileStatement,O.nativeGlobal.Interpreter=O,O.prototype.step=O.prototype.step,O.prototype.run=O.prototype.run,O.prototype.getStatus=O.prototype.getStatus,O.prototype.appendCode=O.prototype.appendCode,O.prototype.createObject=O.prototype.createObject,O.prototype.createObjectProto=O.prototype.createObjectProto,O.prototype.createNativeFunction=O.prototype.createNativeFunction,O.prototype.createAsyncFunction=O.prototype.createAsyncFunction,O.prototype.getProperty=O.prototype.getProperty,O.prototype.setProperty=O.prototype.setProperty,O.prototype.nativeToPseudo=O.prototype.nativeToPseudo,O.prototype.pseudoToNative=O.prototype.pseudoToNative,O.prototype.getGlobalScope=O.prototype.getGlobalScope,O.prototype.setGlobalScope=O.prototype.setGlobalScope,O.prototype.getStateStack=O.prototype.getStateStack,O.prototype.setStateStack=O.prototype.setStateStack,O.Status=O.Status,O.VALUE_IN_DESCRIPTOR=O.VALUE_IN_DESCRIPTOR,K.exports={Interpreter:O}},"./original-repo/acorn.js":function(K,ee){(function(te,O){return O(ee)})(typeof globalThis>"u"?this||window:globalThis,function(te){te.version="0.5.0";var O,g="",y,N;te.parse=function(F,B){return g=String(F),y=g.length,k(B),Gr(),rn(O.program)};var M={strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function k(F){O=F||{};for(var B in M)Object.prototype.hasOwnProperty.call(O,B)||(O[B]=M[B]);N=O.sourceFile}var D=function(F,B){for(var X=1,Q=0;;){wt.lastIndex=Q;var ce=wt.exec(F);if(ce&&ce.index<B)++X,Q=ce.index+ce[0].length;else break}return{line:X,column:B-Q}},j=0,U=0,W=0,re,ie,ne,ae,oe,Ee,xe,We=0,Ne=0,je,Ae,ye,Oe;function pe(F,B){var X=D(g,F);B+=" ("+X.line+":"+X.column+")";var Q=new SyntaxError(B);throw Q.pos=F,Q.loc=X,Q.raisedAt=j,Q}var Mt=[],Le={type:"num"},at={type:"regexp"},Fe={type:"string"},Ie={type:"name"},Ue={type:"eof"},Ke={keyword:"break"},Xe={keyword:"case",beforeExpr:!0},bt={keyword:"catch"},Ze={keyword:"continue"},st={keyword:"debugger"},Qe={keyword:"default"},Rt={keyword:"do",isLoop:!0},_t={keyword:"else",beforeExpr:!0},ot={keyword:"finally"},ut={keyword:"for",isLoop:!0},he={keyword:"function"},Te={keyword:"if"},we={keyword:"return",beforeExpr:!0},ct={keyword:"switch"},et={keyword:"throw",beforeExpr:!0},lt={keyword:"try"},ft={keyword:"var"},Lt={keyword:"while",isLoop:!0},rr={keyword:"with"},nr={keyword:"new",beforeExpr:!0},ir={keyword:"this"},ar={keyword:"null",atomValue:null},sr={keyword:"true",atomValue:!0},or={keyword:"false",atomValue:!1},St={keyword:"in",binop:7,beforeExpr:!0},wr={break:Ke,case:Xe,catch:bt,continue:Ze,debugger:st,default:Qe,do:Rt,else:_t,finally:ot,for:ut,function:he,if:Te,return:we,switch:ct,throw:et,try:lt,var:ft,while:Lt,with:rr,null:ar,true:sr,false:or,new:nr,in:St,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:ir,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Dt={type:"[",beforeExpr:!0},Ft={type:"]"},ht={type:"{",beforeExpr:!0},tt={type:"}"},ke={type:"(",beforeExpr:!0},Ce={type:")"},ze={type:",",beforeExpr:!0},$e={type:";",beforeExpr:!0},dt={type:":",beforeExpr:!0},ur={type:"."},cr={type:"?",beforeExpr:!0},lr={binop:10,beforeExpr:!0},pr={isAssign:!0,beforeExpr:!0},Je={isAssign:!0,beforeExpr:!0},Pr={postfix:!0,prefix:!0,isUpdate:!0},fr={prefix:!0,beforeExpr:!0},hr={binop:1,beforeExpr:!0},dr={binop:2,beforeExpr:!0},Cr={binop:3,beforeExpr:!0},jr={binop:4,beforeExpr:!0},Ar={binop:5,beforeExpr:!0},Ir={binop:6,beforeExpr:!0},kr={binop:7,beforeExpr:!0},$r={binop:8,beforeExpr:!0},Mr={binop:9,prefix:!0,beforeExpr:!0},Lr={binop:10,beforeExpr:!0};function Ot(F){for(var B=F.split(" "),X=Object.create(null),Q=0;Q<B.length;Q++)X[B[Q]]=!0;return function(ce){return X[ce]||!1}}var Dr=Ot("class enum extends super const export import"),Er=Ot("implements interface let package private protected public static yield"),Nt=Ot("eval arguments"),Fr=Ot("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Ur=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,yr="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",Br="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",gr=new RegExp("["+yr+"]"),zr=new RegExp("["+yr+Br+"]"),Tt=/[\n\r\u2028\u2029]/,wt=/\r\n|[\n\r\u2028\u2029]/g,Pt=function(F){return F<65?F===36:F<91?!0:F<97?F===95:F<123?!0:F>=170&&gr.test(String.fromCharCode(F))},vr=function(F){return F<48?F===36:F<58?!0:F<65?!1:F<91?!0:F<97?F===95:F<123?!0:F>=170&&zr.test(String.fromCharCode(F))};function qe(){this.line=Ee,this.column=j-xe}function Gr(){Ee=1,j=xe=0,oe=!0,Et()}function be(F,B){W=j,O.locations&&(ie=new qe),ne=F,Et(),ae=B,oe=F.beforeExpr}function Vr(){var F=O.onComment&&O.locations&&new qe,B=j,X=g.indexOf("*/",j+=2);if(X===-1&&pe(j-2,"Unterminated comment"),j=X+2,O.locations){wt.lastIndex=B;for(var Q;(Q=wt.exec(g))&&Q.index<j;)++Ee,xe=Q.index+Q[0].length}O.onComment&&O.onComment(!0,g.slice(B+2,X),B,j,F,O.locations&&new qe)}function Ut(){for(var F=j,B=O.onComment&&O.locations&&new qe,X=g.charCodeAt(j+=2);j<y&&X!==10&&X!==13&&X!==8232&&X!==8233;)++j,X=g.charCodeAt(j);O.onComment&&O.onComment(!1,g.slice(F+2,j),F,j,B,O.locations&&new qe)}function Et(){for(;j<y;){var F=g.charCodeAt(j);if(F===32)++j;else if(F===13){++j;var B=g.charCodeAt(j);B===10&&++j,O.locations&&(++Ee,xe=j)}else if(F===10||F===8232||F===8233)++j,O.locations&&(++Ee,xe=j);else if(F>8&&F<14)++j;else if(F===47){var B=g.charCodeAt(j+1);if(B===42)Vr();else if(B===47)Ut();else break}else if(F===160)++j;else if(F>=5760&&Ur.test(String.fromCharCode(F)))++j;else break}}function Yr(){var F=g.charCodeAt(j+1);F>=48&&F<=57?xr(!0):(++j,be(ur))}function Xr(){var F=g.charCodeAt(j+1);oe?(++j,mr()):F===61?Re(Je,2):Re(lr,1)}function Jr(){var F=g.charCodeAt(j+1);F===61?Re(Je,2):Re(Lr,1)}function qr(F){var B=g.charCodeAt(j+1);B===F?Re(F===124?hr:dr,2):B===61?Re(Je,2):Re(F===124?Cr:Ar,1)}function Hr(){var F=g.charCodeAt(j+1);F===61?Re(Je,2):Re(jr,1)}function Wr(F){var B=g.charCodeAt(j+1);if(B===F){if(B===45&&g.charCodeAt(j+2)===62&&Tt.test(g.slice(Ne,j))){j+=3,Ut(),Et(),rt();return}Re(Pr,2)}else B===61?Re(Je,2):Re(Mr,1)}function Kr(F){var B=g.charCodeAt(j+1),X=1;if(B===F){X=F===62&&g.charCodeAt(j+2)===62?3:2,g.charCodeAt(j+X)===61?Re(Je,X+1):Re($r,X);return}if(B===33&&F===60&&g.charCodeAt(j+2)===45&&g.charCodeAt(j+3)===45){j+=4,Ut(),Et(),rt();return}B===61&&(X=g.charCodeAt(j+2)===61?3:2),Re(kr,X)}function Zr(F){var B=g.charCodeAt(j+1);B===61?Re(Ir,g.charCodeAt(j+2)===61?3:2):Re(F===61?pr:fr,1)}function Qr(F){switch(F){case 46:return Yr();case 40:return++j,be(ke);case 41:return++j,be(Ce);case 59:return++j,be($e);case 44:return++j,be(ze);case 91:return++j,be(Dt);case 93:return++j,be(Ft);case 123:return++j,be(ht);case 125:return++j,be(tt);case 58:return++j,be(dt);case 63:return++j,be(cr);case 48:var B=g.charCodeAt(j+1);if(B===120||B===88)return en();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return xr(!1);case 34:case 39:return tn(F);case 47:return Xr();case 37:case 42:return Jr();case 124:case 38:return qr(F);case 94:return Hr();case 43:case 45:return Wr(F);case 60:case 62:return Kr(F);case 61:case 33:return Zr(F);case 126:return Re(fr,1)}return!1}function rt(F){if(F?j=U+1:U=j,O.locations&&(re=new qe),F)return mr();if(j>=y)return be(Ue);var B=g.charCodeAt(j);if(Pt(B)||B===92)return Rr();var X=Qr(B);if(X===!1){var Q=String.fromCharCode(B);if(Q==="\\"||gr.test(Q))return Rr();pe(j,"Unexpected character '"+Q+"'")}}function Re(F,B){var X=g.slice(j,j+B);j+=B,be(F,X)}function mr(){for(var F,B,X=j;;){j>=y&&pe(X,"Unterminated regexp");var Q=g.charAt(j);if(Tt.test(Q)&&pe(X,"Unterminated regexp"),F)F=!1;else{if(Q==="[")B=!0;else if(Q==="]"&&B)B=!1;else if(Q==="/"&&!B)break;F=Q==="\\"}++j}var ce=g.slice(X,j);++j;var se=br();se&&!/^[gmi]*$/.test(se)&&pe(X,"Invalid regexp flag");try{var fe=new RegExp(ce,se)}catch(ge){throw ge instanceof SyntaxError&&pe(X,ge.message),ge}be(at,fe)}function yt(F,B){for(var X=j,Q=0,ce=B===void 0?1/0:B,se=0;se<ce;++se){var fe=g.charCodeAt(j),ge;if(fe>=97?ge=fe-97+10:fe>=65?ge=fe-65+10:fe>=48&&fe<=57?ge=fe-48:ge=1/0,ge>=F)break;++j,Q=Q*F+ge}return j===X||B!==void 0&&j-X!==B?null:Q}function en(){j+=2;var F=yt(16);F===null&&pe(U+2,"Expected hexadecimal number"),Pt(g.charCodeAt(j))&&pe(j,"Identifier directly after number"),be(Le,F)}function xr(F){var B=j,X=!1,Q=g.charCodeAt(j)===48;!F&&yt(10)===null&&pe(B,"Invalid number"),g.charCodeAt(j)===46&&(++j,yt(10),X=!0);var ce=g.charCodeAt(j);(ce===69||ce===101)&&(ce=g.charCodeAt(++j),(ce===43||ce===45)&&++j,yt(10)===null&&pe(B,"Invalid number"),X=!0),Pt(g.charCodeAt(j))&&pe(j,"Identifier directly after number");var se=g.slice(B,j),fe;X?fe=parseFloat(se):!Q||se.length===1?fe=parseInt(se,10):/[89]/.test(se)||Oe?pe(B,"Invalid number"):fe=parseInt(se,8),be(Le,fe)}function tn(F){j++;for(var B="";;){j>=y&&pe(U,"Unterminated string constant");var X=g.charCodeAt(j);if(X===F){++j,be(Fe,B);return}if(X===92){X=g.charCodeAt(++j);var Q=/^[0-7]+/.exec(g.slice(j,j+3));for(Q&&(Q=Q[0]);Q&&parseInt(Q,8)>255;)Q=Q.slice(0,-1);if(Q==="0"&&(Q=null),++j,Q)Oe&&pe(j-2,"Octal literal in strict mode"),B+=String.fromCharCode(parseInt(Q,8)),j+=Q.length-1;else switch(X){case 110:B+=`
`;break;case 114:B+="\r";break;case 120:B+=String.fromCharCode(jt(2));break;case 117:B+=String.fromCharCode(jt(4));break;case 85:B+=String.fromCharCode(jt(8));break;case 116:B+="	";break;case 98:B+="\b";break;case 118:B+="\v";break;case 102:B+="\f";break;case 48:B+="\0";break;case 13:g.charCodeAt(j)===10&&++j;case 10:O.locations&&(xe=j,++Ee);break;default:B+=String.fromCharCode(X);break}}else(X===13||X===10||X===8232||X===8233)&&pe(U,"Unterminated string constant"),B+=String.fromCharCode(X),++j}}function jt(F){var B=yt(16,F);return B===null&&pe(U,"Bad character escape sequence"),B}var nt;function br(){nt=!1;for(var F,B=!0,X=j;;){var Q=g.charCodeAt(j);if(vr(Q))nt&&(F+=g.charAt(j)),++j;else if(Q===92){nt||(F=g.slice(X,j)),nt=!0,g.charCodeAt(++j)!==117&&pe(j,"Expecting Unicode escape sequence \\uXXXX"),++j;var ce=jt(4),se=String.fromCharCode(ce);se||pe(j-1,"Invalid Unicode escape"),(B?Pt(ce):vr(ce))||pe(j-4,"Invalid Unicode escape"),F+=se}else break;B=!1}return nt?F:g.slice(X,j)}function Rr(){var F=br(),B=Ie;!nt&&Fr(F)&&(B=wr[F]),be(B,F)}function de(){We=U,Ne=W,je=ie,rt()}function Bt(F){if(Oe=F,j=U,O.locations)for(;j<xe;)xe=g.lastIndexOf(`
`,xe-2)+1,--Ee;Et(),rt()}function _r(){this.type=null,this.start=U,this.end=null}function Sr(){this.start=re,this.end=null,N&&(this.source=N)}function _e(){var F=new _r;return O.locations&&(F.loc=new Sr),O.directSourceFile&&(F.sourceFile=O.directSourceFile),O.ranges&&(F.range=[U,0]),F}function Ve(F){var B=new _r;return B.start=F.start,O.locations&&(B.loc=new Sr,B.loc.start=F.loc.start),O.ranges&&(B.range=[F.range[0],0]),B}function ue(F,B){return F.type=B,F.end=Ne,O.locations&&(F.loc.end=je),O.ranges&&(F.range[1]=Ne),F}function zt(F){return F.type==="ExpressionStatement"&&F.expression.type==="Literal"&&F.expression.value==="use strict"}function ve(F){return ne===F?(de(),!0):!1}function It(){return!O.strictSemicolons&&(ne===Ue||ne===tt||Tt.test(g.slice(Ne,U)))}function He(){!ve($e)&&!It()&&Me()}function me(F){ne===F?de():Me()}function Me(){pe(U,"Unexpected token")}function kt(F){F.type!=="Identifier"&&F.type!=="MemberExpression"&&pe(F.start,"Assigning to rvalue"),Oe&&F.type==="Identifier"&&Nt(F.name)&&pe(F.start,"Assigning to "+F.name+" in strict mode")}function rn(F){We=Ne=j,O.locations&&(je=new qe),Ae=Oe=!1,ye=[],rt();var B=F||_e(),X=!0;for(F||(B.body=[]);ne!==Ue;){var Q=Pe();B.body.push(Q),X&&zt(Q)&&Bt(!0),X=!1}return ue(B,"Program")}var Vt={kind:"loop"},nn={kind:"switch"};function Pe(){(ne===lr||ne===Je&&ae==="/=")&&rt(!0);var F=ne,B=_e();switch(F){case Ke:case Ze:de();var X=F===Ke;ve($e)||It()?B.label=null:ne!==Ie?Me():(B.label=Ye(),He());for(var Q=0;Q<ye.length;++Q){var ce=ye[Q];if((B.label===null||ce.name===B.label.name)&&(ce.kind!==null&&(X||ce.kind==="loop")||B.label&&X))break}return Q===ye.length&&pe(B.start,"Unsyntactic "+F.keyword),ue(B,X?"BreakStatement":"ContinueStatement");case st:return de(),He(),ue(B,"DebuggerStatement");case Rt:return de(),ye.push(Vt),B.body=Pe(),ye.pop(),me(Lt),B.test=gt(),He(),ue(B,"DoWhileStatement");case ut:if(de(),ye.push(Vt),me(ke),ne===$e)return qt(B,null);if(ne===ft){var se=_e();return de(),Nr(se,!0),ue(se,"VariableDeclaration"),se.declarations.length===1&&ve(St)?Or(B,se):qt(B,se)}var se=Se(!1,!0);return ve(St)?(kt(se),Or(B,se)):qt(B,se);case he:return de(),Qt(B,!0);case Te:return de(),B.test=gt(),B.consequent=Pe(),B.alternate=ve(_t)?Pe():null,ue(B,"IfStatement");case we:return!Ae&&!O.allowReturnOutsideFunction&&pe(U,"'return' outside of function"),de(),ve($e)||It()?B.argument=null:(B.argument=Se(),He()),ue(B,"ReturnStatement");case ct:de(),B.discriminant=gt(),B.cases=[],me(ht),ye.push(nn);for(var fe,ge;ne!==tt;)if(ne===Xe||ne===Qe){var xt=ne===Xe;fe&&ue(fe,"SwitchCase"),B.cases.push(fe=_e()),fe.consequent=[],de(),xt?fe.test=Se():(ge&&pe(We,"Multiple default clauses"),ge=!0,fe.test=null),me(dt)}else fe||Me(),fe.consequent.push(Pe());return fe&&ue(fe,"SwitchCase"),de(),ye.pop(),ue(B,"SwitchStatement");case et:return de(),Tt.test(g.slice(Ne,U))&&pe(Ne,"Illegal newline after throw"),B.argument=Se(),He(),ue(B,"ThrowStatement");case lt:if(de(),B.block=vt(),B.handler=null,ne===bt){var it=_e();de(),me(ke),it.param=Ye(),Oe&&Nt(it.param.name)&&pe(it.param.start,"Binding "+it.param.name+" in strict mode"),me(Ce),it.body=vt(),B.handler=ue(it,"CatchClause")}return B.finalizer=ve(ot)?vt():null,!B.handler&&!B.finalizer&&pe(B.start,"Missing catch or finally clause"),ue(B,"TryStatement");case ft:return de(),Nr(B),He(),ue(B,"VariableDeclaration");case Lt:return de(),B.test=gt(),ye.push(Vt),B.body=Pe(),ye.pop(),ue(B,"WhileStatement");case rr:return Oe&&pe(U,"'with' in strict mode"),de(),B.object=gt(),B.body=Pe(),ue(B,"WithStatement");case ht:return vt();case $e:return de(),ue(B,"EmptyStatement");default:var tr=ae,$t=Se();if(F===Ie&&$t.type==="Identifier"&&ve(dt)){for(var Q=0;Q<ye.length;++Q)ye[Q].name===tr&&pe($t.start,"Label '"+tr+"' is already declared");var ln=ne.isLoop?"loop":ne===ct?"switch":null;return ye.push({name:tr,kind:ln}),B.body=Pe(),ye.pop(),B.label=$t,ue(B,"LabeledStatement")}else return B.expression=$t,He(),ue(B,"ExpressionStatement")}}function gt(){me(ke);var F=Se();return me(Ce),F}function vt(F){var B=_e(),X=!0,Q=!1,ce;for(B.body=[],me(ht);!ve(tt);){var se=Pe();B.body.push(se),X&&F&&zt(se)&&(ce=Q,Bt(Q=!0)),X=!1}return Q&&!ce&&Bt(!1),ue(B,"BlockStatement")}function qt(F,B){return F.init=B,me($e),F.test=ne===$e?null:Se(),me($e),F.update=ne===Ce?null:Se(),me(Ce),F.body=Pe(),ye.pop(),ue(F,"ForStatement")}function Or(F,B){return F.left=B,F.right=Se(),me(Ce),F.body=Pe(),ye.pop(),ue(F,"ForInStatement")}function Nr(F,B){for(F.declarations=[],F.kind="var";;){var X=_e();if(X.id=Ye(),Oe&&Nt(X.id.name)&&pe(X.id.start,"Binding "+X.id.name+" in strict mode"),X.init=ve(pr)?Se(!0,B):null,F.declarations.push(ue(X,"VariableDeclarator")),!ve(ze))break}}function Se(F,B){var X=Ht(B);if(!F&&ne===ze){var Q=Ve(X);for(Q.expressions=[X];ve(ze);)Q.expressions.push(Ht(B));return ue(Q,"SequenceExpression")}return X}function Ht(F){var B=an(F);if(ne.isAssign){var X=Ve(B);return X.operator=ae,X.left=B,de(),X.right=Ht(F),kt(B),ue(X,"AssignmentExpression")}return B}function an(F){var B=sn(F);if(ve(cr)){var X=Ve(B);return X.test=B,X.consequent=Se(!0),me(dt),X.alternate=Se(!0,F),ue(X,"ConditionalExpression")}return B}function sn(F){return Wt(Kt(),-1,F)}function Wt(F,B,X){var Q=ne.binop;if(Q!==null&&(!X||ne!==St)&&Q>B){var ce=Ve(F);ce.left=F,ce.operator=ae;var se=ne;de(),ce.right=Wt(Kt(),Q,X);var fe=ue(ce,se===hr||se===dr?"LogicalExpression":"BinaryExpression");return Wt(fe,B,X)}return F}function Kt(){if(ne.prefix){var F=_e(),B=ne.isUpdate;return F.operator=ae,F.prefix=!0,oe=!0,de(),F.argument=Kt(),B?kt(F.argument):Oe&&F.operator==="delete"&&F.argument.type==="Identifier"&&pe(F.start,"Deleting local variable in strict mode"),ue(F,B?"UpdateExpression":"UnaryExpression")}for(var X=on();ne.postfix&&!It();){var F=Ve(X);F.operator=ae,F.prefix=!1,F.argument=X,kt(X),de(),X=ue(F,"UpdateExpression")}return X}function on(){return mt(Zt())}function mt(F,B){var X;return ve(ur)?(X=Ve(F),X.object=F,X.property=Ye(!0),X.computed=!1,mt(ue(X,"MemberExpression"),B)):ve(Dt)?(X=Ve(F),X.object=F,X.property=Se(),X.computed=!0,me(Ft),mt(ue(X,"MemberExpression"),B)):!B&&ve(ke)?(X=Ve(F),X.callee=F,X.arguments=er(Ce,!1),mt(ue(X,"CallExpression"),B)):F}function Zt(){var F;switch(ne){case ir:return F=_e(),de(),ue(F,"ThisExpression");case Ie:return Ye();case Le:case Fe:case at:return F=_e(),F.value=ae,F.raw=g.slice(U,W),de(),ue(F,"Literal");case ar:case sr:case or:return F=_e(),F.value=ne.atomValue,F.raw=ne.keyword,de(),ue(F,"Literal");case ke:var B=re,X=U;de();var Q=Se();return Q.start=X,Q.end=W,O.locations&&(Q.loc.start=B,Q.loc.end=ie),O.ranges&&(Q.range=[X,W]),me(Ce),Q;case Dt:return F=_e(),de(),F.elements=er(Ft,!0,!0),ue(F,"ArrayExpression");case ht:return cn();case he:return F=_e(),de(),Qt(F,!1);case nr:return un()}Me()}function un(){var F=_e();return de(),F.callee=mt(Zt(),!0),F.arguments=ve(ke)?er(Ce,!1):Mt,ue(F,"NewExpression")}function cn(){var F=_e(),B=!0,X=!1;for(F.properties=[],de();!ve(tt);){if(B)B=!1;else if(me(ze),O.allowTrailingCommas&&ve(tt))break;var Q={key:Tr()},ce=!1,se;if(ve(dt)?(Q.value=Se(!0),se=Q.kind="init"):Q.key.type==="Identifier"&&(Q.key.name==="get"||Q.key.name==="set")?(ce=X=!0,se=Q.kind=Q.key.name,Q.key=Tr(),ne!==ke&&Me(),Q.value=Qt(_e(),!1)):Me(),Q.key.type==="Identifier"&&(Oe||X))for(var fe=0;fe<F.properties.length;++fe){var ge=F.properties[fe];if(ge.key.name===Q.key.name){var xt=se===ge.kind||ce&&ge.kind==="init"||se==="init"&&(ge.kind==="get"||ge.kind==="set");xt&&!Oe&&se==="init"&&ge.kind==="init"&&(xt=!1),xt&&pe(Q.key.start,"Redefinition of property")}}F.properties.push(Q)}return ue(F,"ObjectExpression")}function Tr(){return ne===Le||ne===Fe?Zt():Ye(!0)}function Qt(F,B){ne===Ie?F.id=Ye():B?Me():F.id=null,F.params=[];var X=!0;for(me(ke);!ve(Ce);)X?X=!1:me(ze),F.params.push(Ye());var Q=Ae,ce=ye;if(Ae=!0,ye=[],F.body=vt(!0),Ae=Q,ye=ce,Oe||F.body.body.length&&zt(F.body.body[0]))for(var se=F.id?-1:0;se<F.params.length;++se){var fe=se<0?F.id:F.params[se];if((Er(fe.name)||Nt(fe.name))&&pe(fe.start,"Defining '"+fe.name+"' in strict mode"),se>=0)for(var ge=0;ge<se;++ge)fe.name===F.params[ge].name&&pe(fe.start,"Argument name clash in strict mode")}return ue(F,B?"FunctionDeclaration":"FunctionExpression")}function er(F,B,X){for(var Q=[],ce=!0;!ve(F);){if(ce)ce=!1;else if(me(ze),B&&O.allowTrailingCommas&&ve(F))break;Q.push(X&&ne===ze?null:Se(!0))}return Q}function Ye(F){var B=_e();return F&&O.forbidReserved==="everywhere"&&(F=!1),ne===Ie?(!F&&(O.forbidReserved&&Dr(ae)||Oe&&Er(ae))&&g.slice(U,W).indexOf("\\")===-1&&pe(U,"The keyword '"+ae+"' is reserved"),B.name=ae):F&&ne.keyword?B.name=ne.keyword:Me(),oe=!1,de(),ue(B,"Identifier")}})},vm:K=>{K.exports=requireVmBrowserify()}},V={};function Y(K){var ee=V[K];if(ee!==void 0)return ee.exports;var te=V[K]={exports:{}};return L[K].call(te.exports,te,te.exports,Y),te.exports}Y.d=(K,ee)=>{for(var te in ee)Y.o(ee,te)&&!Y.o(K,te)&&Object.defineProperty(K,te,{enumerable:!0,get:ee[te]})},Y.o=(K,ee)=>Object.prototype.hasOwnProperty.call(K,ee),Y.r=K=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(K,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(K,"__esModule",{value:!0})};var H={};return(()=>{Y.r(H),Y.d(H,{default:()=>te});const K=Y("./original-repo/acorn.js");globalThis.acorn=K;const{Interpreter:ee}=Y("./original-repo/interpreter.js"),te=ee})(),H=H.default,H})())}(jsInterpreter$1)),jsInterpreter$1.exports}var jsInterpreterExports=requireJsInterpreter();const r$1=getDefaultExportFromCjs(jsInterpreterExports),o$1=1e3;let a$1=class extends r$1{stepFinished=!1;highlightedBlock="";running=!0;correct=!1;msg;constructor(T,L){super(T,(V,Y)=>{V.setProperty(Y,"highlightBlock",V.createNativeFunction(H=>{this.highlightedBlock=H,this.stepFinished=!0})),V.setProperty(Y,"pause",V.createNativeFunction(()=>{this.stepFinished=!0})),V.setProperty(Y,"exit",V.createNativeFunction((H,K)=>{this.running=!1,this.correct=H,this.msg=K})),V.setProperty(Y,"state",V.nativeToPseudo(L)),V.setProperty(Y,"loopTrap",o$1)})}step=()=>{if(!this.running)return!1;do{this.stepFinished=!1;try{this.running=super.step()&&this.running}catch{this.running=!1}}while(this.running&&!this.stepFinished);return this.running}};function S(R,T){const[L,V]=reactExports.useState(),[Y,H]=reactExports.useState({highlightedBlock:"",running:!0,correct:!1,msg:"",globalScope:{}}),K=reactExports.useCallback(()=>{let ee;try{ee=new a$1(R,T)}catch(te){if(te instanceof SyntaxError){const O=URL.createObjectURL(new Blob([R])),g=te.loc.line,y=te.loc.column+1,N=new Error(`The generated code contains syntax errors: ${te.message}`,{cause:te});throw N.stack=`   at ${O}:${g}:${y}`,N}throw te}V(ee),H({highlightedBlock:ee?.highlightedBlock??"",running:ee?.running??!1,correct:ee?.correct??!1,msg:ee?.msg??"",globalScope:ee?.pseudoToNative(ee.globalScope.object)??{}})},[R,T]);return reactExports.useEffect(()=>K(),[K]),{step:()=>{L?.step(),H({highlightedBlock:L?.highlightedBlock??"",running:L?.running??!1,correct:L?.correct??!1,msg:L?.msg??"",globalScope:L?.pseudoToNative(L.globalScope.object)??{}})},reset:K,...Y}}function f$1(R,T){return reactExports.useEffect(()=>{return window.addEventListener("message",L),()=>window.removeEventListener("message",L);function L(V){V.source===R&&T(V.data)}},[R,T]),reactExports.useCallback(L=>R?.postMessage(L,"*"),[R])}const t$2="_workspace_14w98_1",s$1="_visualizerButtons_14w98_21",o="_visualizer_14w98_21",e="_editorButtons_14w98_34",i="_editor_14w98_34",r={workspace:t$2,visualizerButtons:s$1,visualizer:o,editorButtons:e,editor:i};function Ge({toolbox:R,initialBlocks:T,testcases:L,debug:V,customBlocks:Y,visualizer:H}){const{student:K,setStudent:ee,terminated:te}=_(),{registerProblem:O}=S$2(),{id:g,points:y}=h$1(),{showBoundary:N}=useErrorBoundary();reactExports.useEffect(()=>{for(let he=0;he<L.length;he++)O(`${g}.${he+1}`,{type:"text",maxPoints:y[0],options:[{value:"✅",points:y[0]},{value:null,points:y[1]},{value:"❌",points:y[2]}]})},[O,g,L,y]);const M=K.extraData?.[`blockly-${g}`],k=M?JSON.parse(M):T??e$1,D=async he=>{await ee({...K,extraData:{...K.extraData,[`blockly-${g}`]:JSON.stringify(he)}})},[j,U]=reactExports.useState(null),[W,re]=reactExports.useState(!1),[ie,ne]=reactExports.useState(!0),[ae,oe]=reactExports.useState(!1),[Ee,xe]=reactExports.useState({}),[We,Ne]=reactExports.useState(""),[je,Ae]=reactExports.useState(""),[ye,Oe]=reactExports.useState(0),[pe,Mt]=reactExports.useState(()=>L.map((he,Te)=>({correct:!1,index:Te}))),{step:Le,reset:at,running:Fe,highlightedBlock:Ie,globalScope:Ue,correct:Ke,msg:Xe}=S(je,L[ye]),bt=reactExports.useMemo(()=>Object.fromEntries(Object.entries(Ee).map(([he,Te])=>[Te,Ue[he]])),[Ee,Ue]),Ze=f$1(j?.contentWindow,he=>{switch(he.cmd){case"init":{Ze({cmd:"init",toolbox:R??t$3,initialBlocks:k,customBlocks:Y,readonly:te});break}case"ready":{re(!0);break}case"blocks":{D(he.blocks),V?.logBlocks&&console.info(JSON.stringify(he.blocks,void 0,2));break}case"code":{Ae(he.code),oe(!1),ne(!0),V?.logJs&&console.info(he.code);break}case"variables":{xe(he.variablesMapping),V?.logVariables&&console.info(he.variablesMapping);break}case"svg":{Ne(he.svg);break}case"error":{N(new Error(he.message));break}}});reactExports.useEffect(()=>{Ze({cmd:"highlight",highlightedBlock:Ie})},[Ze,Ie]),reactExports.useEffect(()=>{Fe||oe(!1)},[Fe]);const st=reactExports.useRef(te);reactExports.useEffect(()=>{st.current!==te&&(st.current=te,re(!1),j?.contentWindow?.location.reload())},[te,j?.contentWindow]);const[Qe,Rt]=reactExports.useState(3);reactExports.useEffect(()=>{const he=[5e3,2e3,1e3,500,200,100,10];if(ae){const Te=setInterval(Le,he[Qe]);return()=>clearInterval(Te)}},[Le,Qe,ae]);const _t=async()=>{const he=await Promise.all(L.map(async(we,ct)=>{const et=new a$1(je,we);for(let lt=0;et.running;lt++)et.step(),lt%64===0&&await new Promise(ft=>setTimeout(ft,5));return{...et,index:ct}}));Mt(he),ne(!1);const Te={...K.answers};for(let we=0;we<L.length;we++)Te[`${g}.${we+1}`]=he[we].correct?"✅":"❌";await ee({...K,answers:Te})},[ot,ut]=reactExports.useState();return reactExports.useEffect(()=>ut(Xe),[Xe]),jsxRuntimeExports.jsxs("div",{className:clsx(r.workspace,"not-prose"),children:[jsxRuntimeExports.jsxs("div",{className:r.visualizerButtons,children:[jsxRuntimeExports.jsx("div",{className:"pl-2 text-xl font-bold max-sm:hidden lg:max-xl:hidden",children:"Livello"}),jsxRuntimeExports.jsx("div",{className:"join",children:pe.map(({index:he,correct:Te,msg:we})=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{Oe(he),oe(!1)},className:clsx("btn join-item z-10 px-3",!ie&&"tooltip",he===ye&&"btn-info"),"data-tip":we,children:ie?jsxRuntimeExports.jsx(CircleHelp,{size:24}):Te?jsxRuntimeExports.jsx(CircleCheck,{size:24,className:"fill-success stroke-success-content"}):jsxRuntimeExports.jsx(CircleX,{size:24,className:"fill-error stroke-error-content"})},he))})]}),jsxRuntimeExports.jsxs("div",{className:r.visualizer,children:[jsxRuntimeExports.jsx(b$2,{onError:he=>{he.message="Visualizzazione del livello fallita"},onReset:at,children:H&&Ue?.state&&jsxRuntimeExports.jsx(H,{variables:bt,state:Ue.state,testcase:ye,message:Xe})}),jsxRuntimeExports.jsx("div",{className:clsx("sticky left-0 bottom-0 z-50 p-4",!ot&&"invisible"),children:jsxRuntimeExports.jsxs("div",{role:"alert",className:clsx("alert",Ke?"alert-success":"alert-error"),children:[Ke?jsxRuntimeExports.jsx(CircleCheck,{}):jsxRuntimeExports.jsx(TriangleAlert,{}),jsxRuntimeExports.jsx("span",{children:ot}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ut(void 0),"aria-label":"Nascondi messaggio",children:jsxRuntimeExports.jsx(MessageSquareOff,{})})]})})]}),jsxRuntimeExports.jsxs("div",{className:r.editorButtons,children:[jsxRuntimeExports.jsxs("div",{className:"join join-horizontal",children:[jsxRuntimeExports.jsx("div",{className:"join-item tooltip","data-tip":"Esegui/pausa",children:jsxRuntimeExports.jsx("button",{type:"button",className:"btn btn-info rounded-[inherit]",disabled:!Fe||ie,onClick:()=>oe(!ae),"aria-label":"Esugui un blocco",children:ae?jsxRuntimeExports.jsx(Pause,{className:"size-6"}):jsxRuntimeExports.jsx(Play,{className:"size-6"})})}),jsxRuntimeExports.jsx("div",{className:"join-item tooltip","data-tip":"Esegui un blocco",children:jsxRuntimeExports.jsx("button",{type:"button",className:"btn btn-info rounded-[inherit]",disabled:!Fe||ie,onClick:Le,"aria-label":"Esugui un blocco",children:jsxRuntimeExports.jsx(SkipForward,{className:"size-6"})})}),jsxRuntimeExports.jsx("div",{className:"join-item tooltip","data-tip":"Esegui da capo",children:jsxRuntimeExports.jsx("button",{type:"button",className:"btn btn-info rounded-[inherit]","aria-label":"Esegui da capo",disabled:ie,onClick:()=>{at(),oe(!1)},children:jsxRuntimeExports.jsx(RotateCcw,{className:"size-6"})})})]}),jsxRuntimeExports.jsx("div",{className:"tooltip","data-tip":"Correggi la soluzione",children:jsxRuntimeExports.jsx("button",{type:"button",className:"btn btn-success","aria-label":"Correggi la soluzione",disabled:!ie||!W,onClick:_t,children:jsxRuntimeExports.jsx(Send,{className:"size-6"})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{className:"range",type:"range",min:"0",max:"6",value:Qe,onChange:he=>Rt(+he.target.value),"aria-label":"Velocità di esecuzione"}),jsxRuntimeExports.jsxs("div",{className:"flex w-full justify-between px-2 text-xs",children:[jsxRuntimeExports.jsx("span",{children:"Lento"}),jsxRuntimeExports.jsx("span",{children:"Veloce"})]})]}),!1]}),jsxRuntimeExports.jsx(De,{ref:U,ready:W})]})}const De=reactExports.forwardRef(function({ready:R},T){return jsxRuntimeExports.jsxs("div",{className:r.editor,children:[jsxRuntimeExports.jsx("iframe",{ref:T,src:"/__blockly_iframe/",className:"size-full",title:"Area di lavoro di Blockly",loading:"lazy"}),!R&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 z-50 bg-white",children:jsxRuntimeExports.jsx("div",{className:"flex h-full text-slate-700",children:jsxRuntimeExports.jsx(n$3,{})})})]})});function u(R){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(c,{field:"type",value:"text"}),jsxRuntimeExports.jsx(c,{field:"options",children:jsxRuntimeExports.jsxs(a$2,{children:[jsxRuntimeExports.jsxs(s$2,{children:[jsxRuntimeExports.jsx(c,{field:"value",value:"✅"}),jsxRuntimeExports.jsx(c,{field:"correct",value:!0})]}),jsxRuntimeExports.jsxs(s$2,{children:[jsxRuntimeExports.jsx(c,{field:"value",value:"❌"}),jsxRuntimeExports.jsx(c,{field:"correct",value:!1})]})]})}),jsxRuntimeExports.jsx(Ge,{...R})]})}const t$1=At;function a({display:R,children:T}){const L=reactExports.useRef(null);return reactExports.useEffect(()=>{L.current&&katex.render(T,L.current,{displayMode:R})},[T,R]),jsxRuntimeExports.jsx("span",{ref:L})}function f({children:R}){return jsxRuntimeExports.jsx(a$2,{children:jsxRuntimeExports.jsx(w$1,{children:R})})}function n({src:R,alt:T,title:L}){return R?jsxRuntimeExports.jsx("img",{className:"max-h-[90vh] min-w-0 p-4 first:rounded-l-xl last:rounded-r-xl dark:bg-white print:m-0 print:max-h-[60vh] print:max-w-full",src:R.src,width:R.width,height:R.height,alt:T,title:L,style:{maxWidth:`min(100%, ${90*R.width/R.height}vh)`}}):jsxRuntimeExports.jsx("div",{className:"rounded-box bg-error p-4 text-error-content",children:"Missing image"})}function b({id:R,points:T,children:L}){return jsxRuntimeExports.jsxs(s$2,{children:[jsxRuntimeExports.jsx(c,{field:"id",value:R.toString()}),jsxRuntimeExports.jsx(c,{field:"pointsCorrect",value:T[0]}),jsxRuntimeExports.jsx(c,{field:"pointsBlank",value:T[1]}),jsxRuntimeExports.jsx(c,{field:"pointsWrong",value:T[2]}),jsxRuntimeExports.jsx(c,{field:"subProblems",children:jsxRuntimeExports.jsx(a$2,{children:jsxRuntimeExports.jsx(u$1,{id:R,points:T,children:L})})})]})}function s({subId:R,children:T}){return jsxRuntimeExports.jsxs(s$2,{children:[R&&jsxRuntimeExports.jsx(c,{field:"id",value:R.toString()}),jsxRuntimeExports.jsx(v,{subId:R,children:T})]})}function t({children:R}){return R}function P(){return{Answer:x,AnswerGroup:h,Blockly:u,Code:t$1,Contest:f,Equation:a,Explanation:C,Image:n,MultipleChoiceAnswer:A,OpenAnswer:w,Problem:b,Section:t,SubProblem:s}}export{I,P,isIndex as a,eq as e,isArrayLike as i};
//# sourceMappingURL=201b7b02-components.js.map
