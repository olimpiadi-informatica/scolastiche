const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/r/a5bce105-highlight-UOJF2D5K.js","assets/_virtual_quizms-routes-f9dad0bd.js","assets/v/35e886f4-commonjs-helper.js","assets/s/49759605-react-dom.js","assets/a/ac2f498e-_virtual_quizms-routes.css","assets/w/2603d3c3-index.js","assets/w/a34e1755-index.js"])))=>i.map(i=>d[i]);
/*! For licenses information, see LICENSES.txt */
"use client";import{b as toDate,m as millisecondsInMinute,e as differenceInMilliseconds,f as createLucideIcon,r as reactExports,j as jsxRuntimeExports,T as TriangleAlert,w as wt$1,a as isObject,g as baseGetTag,h as root,k as isObjectLike,l as freeGlobal,i as isSymbol,S as Symbol$1,c as clsx,p as p$3,n as kn,I as In,V as Vn,o as d,Q as Qt,q as _t,G as Gt,J as Jt,s as Sn,B as Be,u as So,v as wo,x as le,_ as __vitePreload,X,y as n$3}from"../_virtual_quizms-routes-f9dad0bd.js";import{z as z$1}from"../t/7202b475-zod.js";import{i as isArray,t as toString}from"../y/80db17da-toString.js";import{g as getDefaultExportFromCjs}from"../v/35e886f4-commonjs-helper.js";import{k as katex}from"../h/b7b0baed-katex.js";function addMinutes(R,T,M){const V=toDate(R);return V.setTime(V.getTime()+T*millisecondsInMinute),V}function getRoundingMethod(R){return T=>{const M=Math.trunc,V=M(T);return V===0?0:V}}function differenceInSeconds(R,T,M){const V=differenceInMilliseconds(R,T)/1e3;return getRoundingMethod()(V)}function isAfter(R,T){return+toDate(R)>+toDate(T)}const __iconNode$c=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],CircleCheck=createLucideIcon("circle-check",__iconNode$c);const __iconNode$b=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],CircleHelp=createLucideIcon("circle-help",__iconNode$b);const __iconNode$a=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CircleX=createLucideIcon("circle-x",__iconNode$a);const __iconNode$9=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 18v-1",key:"zg0ygc"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"M16 18v-3",key:"j5jt4h"}]],FileChartColumn=createLucideIcon("file-chart-column",__iconNode$9);const __iconNode$8=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],LogOut=createLucideIcon("log-out",__iconNode$8);const __iconNode$7=[["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M3.6 3.6c-.4.3-.6.8-.6 1.4v16l4-4h10",key:"pwpm4a"}]],MessageSquareOff=createLucideIcon("message-square-off",__iconNode$7);const __iconNode$6=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Pause=createLucideIcon("pause",__iconNode$6);const __iconNode$5=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Play=createLucideIcon("play",__iconNode$5);const __iconNode$4=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],RotateCcw=createLucideIcon("rotate-ccw",__iconNode$4);const __iconNode$3=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],RotateCw=createLucideIcon("rotate-cw",__iconNode$3);const __iconNode$2=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Send=createLucideIcon("send",__iconNode$2);const __iconNode$1=[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]],SkipForward=createLucideIcon("skip-forward",__iconNode$1);const __iconNode=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Trash2=createLucideIcon("trash-2",__iconNode),ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(T){super(T),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(T){return{didCatch:!0,error:T}}resetErrorBoundary(){const{error:T}=this.state;if(T!==null){for(var M,V,Y=arguments.length,W=new Array(Y),Q=0;Q<Y;Q++)W[Q]=arguments[Q];(M=(V=this.props).onReset)===null||M===void 0||M.call(V,{args:W,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(T,M){var V,Y;(V=(Y=this.props).onError)===null||V===void 0||V.call(Y,T,M)}componentDidUpdate(T,M){const{didCatch:V}=this.state,{resetKeys:Y}=this.props;if(V&&M.error!==null&&hasArrayChanged(T.resetKeys,Y)){var W,Q;(W=(Q=this.props).onReset)===null||W===void 0||W.call(Q,{next:Y,prev:T.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:T,fallbackRender:M,FallbackComponent:V,fallback:Y}=this.props,{didCatch:W,error:Q}=this.state;let te=T;if(W){const re={error:Q,resetErrorBoundary:this.resetErrorBoundary};if(typeof M=="function")te=M(re);else if(V)te=reactExports.createElement(V,re);else if(Y!==void 0)te=Y;else throw Q}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:W,error:Q,resetErrorBoundary:this.resetErrorBoundary}},te)}}function hasArrayChanged(){let R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return R.length!==T.length||R.some((M,V)=>!Object.is(M,T[V]))}function assertErrorBoundaryContext(R){if(R==null||typeof R.didCatch!="boolean"||typeof R.resetErrorBoundary!="function")throw new Error("ErrorBoundaryContext not found")}function useErrorBoundary(){const R=reactExports.useContext(ErrorBoundaryContext);assertErrorBoundaryContext(R);const[T,M]=reactExports.useState({error:null,hasError:!1}),V=reactExports.useMemo(()=>({resetBoundary:()=>{R.resetErrorBoundary(),M({error:null,hasError:!1})},showBoundary:Y=>M({error:Y,hasError:!0})}),[R.resetErrorBoundary]);if(T.hasError)throw T.error;return V}const n$2=!1;function b$2({children:R,...T}){return jsxRuntimeExports.jsx(ErrorBoundary,{...T,FallbackComponent:p$2,children:R})}function p$2({error:R,resetErrorBoundary:T}){return reactExports.useEffect(()=>()=>{},[]),jsxRuntimeExports.jsxs("div",{className:"not-prose text-base-content text-base flex w-full grow flex-col items-center justify-center p-4 gap-4",children:[jsxRuntimeExports.jsxs("div",{className:"text-center",children:[jsxRuntimeExports.jsx("div",{className:"text-lg font-bold",children:"Errore"}),jsxRuntimeExports.jsx("div",{className:"text-base-content/80",children:"Si Ã¨ verificato un errore nell'applicazione."})]}),jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2 bg-red-200 dark:bg-error text-red-900 dark:text-error-content text-lg font-medium p-4 rounded-lg",children:[jsxRuntimeExports.jsx(TriangleAlert,{size:16}),jsxRuntimeExports.jsx("div",{className:"break-words",children:R.message})]}),T&&jsxRuntimeExports.jsx(wt$1,{className:"btn-ghost",icon:RotateCw,onClick:()=>T(),children:"Ricarica"}),n$2]})}function identity(R){return R}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction(R){if(!isObject(R))return!1;var T=baseGetTag(R);return T==funcTag$1||T==genTag||T==asyncTag||T==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var R=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return R?"Symbol(src)_1."+R:""}();function isMasked(R){return!!maskSrcKey&&maskSrcKey in R}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(R){if(R!=null){try{return funcToString$1.call(R)}catch{}try{return R+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(R){if(!isObject(R)||isMasked(R))return!1;var T=isFunction(R)?reIsNative:reIsHostCtor;return T.test(toSource(R))}function getValue(R,T){return R?.[T]}function getNative(R,T){var M=getValue(R,T);return baseIsNative(M)?M:void 0}var WeakMap=getNative(root,"WeakMap"),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(R,T){var M=typeof R;return T=T??MAX_SAFE_INTEGER$1,!!T&&(M=="number"||M!="symbol"&&reIsUint.test(R))&&R>-1&&R%1==0&&R<T}function eq(R,T){return R===T||R!==R&&T!==T}var MAX_SAFE_INTEGER=9007199254740991;function isLength(R){return typeof R=="number"&&R>-1&&R%1==0&&R<=MAX_SAFE_INTEGER}function isArrayLike(R){return R!=null&&isLength(R.length)&&!isFunction(R)}var objectProto$8=Object.prototype;function isPrototype(R){var T=R&&R.constructor,M=typeof T=="function"&&T.prototype||objectProto$8;return R===M}function baseTimes(R,T){for(var M=-1,V=Array(R);++M<R;)V[M]=T(M);return V}var argsTag$2="[object Arguments]";function baseIsArguments(R){return isObjectLike(R)&&baseGetTag(R)==argsTag$2}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(R){return isObjectLike(R)&&hasOwnProperty$6.call(R,"callee")&&!propertyIsEnumerable$1.call(R,"callee")};function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(R){return isObjectLike(R)&&isLength(R.length)&&!!typedArrayTags[baseGetTag(R)]}function baseUnary(R){return function(T){return R(T)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var R=freeModule&&freeModule.require&&freeModule.require("util").types;return R||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function arrayLikeKeys(R,T){var M=isArray(R),V=!M&&isArguments(R),Y=!M&&!V&&isBuffer(R),W=!M&&!V&&!Y&&isTypedArray(R),Q=M||V||Y||W,te=Q?baseTimes(R.length,String):[],re=te.length;for(var O in R)hasOwnProperty$5.call(R,O)&&!(Q&&(O=="length"||Y&&(O=="offset"||O=="parent")||W&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||isIndex(O,re)))&&te.push(O);return te}function overArg(R,T){return function(M){return R(T(M))}}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeys(R){if(!isPrototype(R))return nativeKeys(R);var T=[];for(var M in Object(R))hasOwnProperty$4.call(R,M)&&M!="constructor"&&T.push(M);return T}function keys(R){return isArrayLike(R)?arrayLikeKeys(R):baseKeys(R)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(R,T){if(isArray(R))return!1;var M=typeof R;return M=="number"||M=="symbol"||M=="boolean"||R==null||isSymbol(R)?!0:reIsPlainProp.test(R)||!reIsDeepProp.test(R)||T!=null&&R in Object(T)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(R){var T=this.has(R)&&delete this.__data__[R];return this.size-=T?1:0,T}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(R){var T=this.__data__;if(nativeCreate){var M=T[R];return M===HASH_UNDEFINED$2?void 0:M}return hasOwnProperty$3.call(T,R)?T[R]:void 0}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas(R){var T=this.__data__;return nativeCreate?T[R]!==void 0:hasOwnProperty$2.call(T,R)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(R,T){var M=this.__data__;return this.size+=this.has(R)?0:1,M[R]=nativeCreate&&T===void 0?HASH_UNDEFINED$1:T,this}function Hash(R){var T=-1,M=R==null?0:R.length;for(this.clear();++T<M;){var V=R[T];this.set(V[0],V[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(R,T){for(var M=R.length;M--;)if(eq(R[M][0],T))return M;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(R){var T=this.__data__,M=assocIndexOf(T,R);if(M<0)return!1;var V=T.length-1;return M==V?T.pop():splice.call(T,M,1),--this.size,!0}function listCacheGet(R){var T=this.__data__,M=assocIndexOf(T,R);return M<0?void 0:T[M][1]}function listCacheHas(R){return assocIndexOf(this.__data__,R)>-1}function listCacheSet(R,T){var M=this.__data__,V=assocIndexOf(M,R);return V<0?(++this.size,M.push([R,T])):M[V][1]=T,this}function ListCache(R){var T=-1,M=R==null?0:R.length;for(this.clear();++T<M;){var V=R[T];this.set(V[0],V[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map||ListCache),string:new Hash}}function isKeyable(R){var T=typeof R;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?R!=="__proto__":R===null}function getMapData(R,T){var M=R.__data__;return isKeyable(T)?M[typeof T=="string"?"string":"hash"]:M.map}function mapCacheDelete(R){var T=getMapData(this,R).delete(R);return this.size-=T?1:0,T}function mapCacheGet(R){return getMapData(this,R).get(R)}function mapCacheHas(R){return getMapData(this,R).has(R)}function mapCacheSet(R,T){var M=getMapData(this,R),V=M.size;return M.set(R,T),this.size+=M.size==V?0:1,this}function MapCache(R){var T=-1,M=R==null?0:R.length;for(this.clear();++T<M;){var V=R[T];this.set(V[0],V[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(R,T){if(typeof R!="function"||T!=null&&typeof T!="function")throw new TypeError(FUNC_ERROR_TEXT);var M=function(){var V=arguments,Y=T?T.apply(this,V):V[0],W=M.cache;if(W.has(Y))return W.get(Y);var Q=R.apply(this,V);return M.cache=W.set(Y,Q)||W,Q};return M.cache=new(memoize.Cache||MapCache),M}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(R){var T=memoize(R,function(V){return M.size===MAX_MEMOIZE_SIZE&&M.clear(),V}),M=T.cache;return T}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(R){var T=[];return R.charCodeAt(0)===46&&T.push(""),R.replace(rePropName,function(M,V,Y,W){T.push(Y?W.replace(reEscapeChar,"$1"):V||M)}),T});function castPath(R,T){return isArray(R)?R:isKey(R,T)?[R]:stringToPath(toString(R))}function toKey(R){if(typeof R=="string"||isSymbol(R))return R;var T=R+"";return T=="0"&&1/R==-1/0?"-0":T}function baseGet(R,T){T=castPath(T,R);for(var M=0,V=T.length;R!=null&&M<V;)R=R[toKey(T[M++])];return M&&M==V?R:void 0}function get(R,T,M){var V=R==null?void 0:baseGet(R,T);return V===void 0?M:V}function arrayPush(R,T){for(var M=-1,V=T.length,Y=R.length;++M<V;)R[Y+M]=T[M];return R}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(R){var T=this.__data__,M=T.delete(R);return this.size=T.size,M}function stackGet(R){return this.__data__.get(R)}function stackHas(R){return this.__data__.has(R)}var LARGE_ARRAY_SIZE=200;function stackSet(R,T){var M=this.__data__;if(M instanceof ListCache){var V=M.__data__;if(!Map||V.length<LARGE_ARRAY_SIZE-1)return V.push([R,T]),this.size=++M.size,this;M=this.__data__=new MapCache(V)}return M.set(R,T),this.size=M.size,this}function Stack(R){var T=this.__data__=new ListCache(R);this.size=T.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(R,T){for(var M=-1,V=R==null?0:R.length,Y=0,W=[];++M<V;){var Q=R[M];T(Q,M,R)&&(W[Y++]=Q)}return W}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(R){return R==null?[]:(R=Object(R),arrayFilter(nativeGetSymbols(R),function(T){return propertyIsEnumerable.call(R,T)}))}:stubArray;function baseGetAllKeys(R,T,M){var V=T(R);return isArray(R)?V:arrayPush(V,M(R))}function getAllKeys(R){return baseGetAllKeys(R,keys,getSymbols)}var DataView=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView),mapCtorString=toSource(Map),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap),getTag=baseGetTag;(DataView&&getTag(new DataView(new ArrayBuffer(1)))!=dataViewTag$1||Map&&getTag(new Map)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap&&getTag(new WeakMap)!=weakMapTag)&&(getTag=function(R){var T=baseGetTag(R),M=T==objectTag$1?R.constructor:void 0,V=M?toSource(M):"";if(V)switch(V){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return T});var Uint8Array=root.Uint8Array,HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(R){return this.__data__.set(R,HASH_UNDEFINED),this}function setCacheHas(R){return this.__data__.has(R)}function SetCache(R){var T=-1,M=R==null?0:R.length;for(this.__data__=new MapCache;++T<M;)this.add(R[T])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(R,T){for(var M=-1,V=R==null?0:R.length;++M<V;)if(T(R[M],M,R))return!0;return!1}function cacheHas(R,T){return R.has(T)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(R,T,M,V,Y,W){var Q=M&COMPARE_PARTIAL_FLAG$5,te=R.length,re=T.length;if(te!=re&&!(Q&&re>te))return!1;var O=W.get(R),g=W.get(T);if(O&&g)return O==T&&g==R;var y=-1,N=!0,L=M&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(W.set(R,T),W.set(T,R);++y<te;){var k=R[y],D=T[y];if(V)var j=Q?V(D,k,y,T,R,W):V(k,D,y,R,T,W);if(j!==void 0){if(j)continue;N=!1;break}if(L){if(!arraySome(T,function(U,K){if(!cacheHas(L,K)&&(k===U||Y(k,U,M,V,W)))return L.push(K)})){N=!1;break}}else if(!(k===D||Y(k,D,M,V,W))){N=!1;break}}return W.delete(R),W.delete(T),N}function mapToArray(R){var T=-1,M=Array(R.size);return R.forEach(function(V,Y){M[++T]=[Y,V]}),M}function setToArray(R){var T=-1,M=Array(R.size);return R.forEach(function(V){M[++T]=V}),M}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(R,T,M,V,Y,W,Q){switch(M){case dataViewTag:if(R.byteLength!=T.byteLength||R.byteOffset!=T.byteOffset)return!1;R=R.buffer,T=T.buffer;case arrayBufferTag:return!(R.byteLength!=T.byteLength||!W(new Uint8Array(R),new Uint8Array(T)));case boolTag:case dateTag:case numberTag:return eq(+R,+T);case errorTag:return R.name==T.name&&R.message==T.message;case regexpTag:case stringTag:return R==T+"";case mapTag:var te=mapToArray;case setTag:var re=V&COMPARE_PARTIAL_FLAG$4;if(te||(te=setToArray),R.size!=T.size&&!re)return!1;var O=Q.get(R);if(O)return O==T;V|=COMPARE_UNORDERED_FLAG$2,Q.set(R,T);var g=equalArrays(te(R),te(T),V,Y,W,Q);return Q.delete(R),g;case symbolTag:if(symbolValueOf)return symbolValueOf.call(R)==symbolValueOf.call(T)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(R,T,M,V,Y,W){var Q=M&COMPARE_PARTIAL_FLAG$3,te=getAllKeys(R),re=te.length,O=getAllKeys(T),g=O.length;if(re!=g&&!Q)return!1;for(var y=re;y--;){var N=te[y];if(!(Q?N in T:hasOwnProperty$1.call(T,N)))return!1}var L=W.get(R),k=W.get(T);if(L&&k)return L==T&&k==R;var D=!0;W.set(R,T),W.set(T,R);for(var j=Q;++y<re;){N=te[y];var U=R[N],K=T[N];if(V)var ne=Q?V(K,U,N,T,R,W):V(U,K,N,R,T,W);if(!(ne===void 0?U===K||Y(U,K,M,V,W):ne)){D=!1;break}j||(j=N=="constructor")}if(D&&!j){var ae=R.constructor,ie=T.constructor;ae!=ie&&"constructor"in R&&"constructor"in T&&!(typeof ae=="function"&&ae instanceof ae&&typeof ie=="function"&&ie instanceof ie)&&(D=!1)}return W.delete(R),W.delete(T),D}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(R,T,M,V,Y,W){var Q=isArray(R),te=isArray(T),re=Q?arrayTag:getTag(R),O=te?arrayTag:getTag(T);re=re==argsTag?objectTag:re,O=O==argsTag?objectTag:O;var g=re==objectTag,y=O==objectTag,N=re==O;if(N&&isBuffer(R)){if(!isBuffer(T))return!1;Q=!0,g=!1}if(N&&!g)return W||(W=new Stack),Q||isTypedArray(R)?equalArrays(R,T,M,V,Y,W):equalByTag(R,T,re,M,V,Y,W);if(!(M&COMPARE_PARTIAL_FLAG$2)){var L=g&&hasOwnProperty.call(R,"__wrapped__"),k=y&&hasOwnProperty.call(T,"__wrapped__");if(L||k){var D=L?R.value():R,j=k?T.value():T;return W||(W=new Stack),Y(D,j,M,V,W)}}return N?(W||(W=new Stack),equalObjects(R,T,M,V,Y,W)):!1}function baseIsEqual(R,T,M,V,Y){return R===T?!0:R==null||T==null||!isObjectLike(R)&&!isObjectLike(T)?R!==R&&T!==T:baseIsEqualDeep(R,T,M,V,baseIsEqual,Y)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(R,T,M,V){var Y=M.length,W=Y;if(R==null)return!W;for(R=Object(R);Y--;){var Q=M[Y];if(Q[2]?Q[1]!==R[Q[0]]:!(Q[0]in R))return!1}for(;++Y<W;){Q=M[Y];var te=Q[0],re=R[te],O=Q[1];if(Q[2]){if(re===void 0&&!(te in R))return!1}else{var g=new Stack,y;if(!(y===void 0?baseIsEqual(O,re,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,V,g):y))return!1}}return!0}function isStrictComparable(R){return R===R&&!isObject(R)}function getMatchData(R){for(var T=keys(R),M=T.length;M--;){var V=T[M],Y=R[V];T[M]=[V,Y,isStrictComparable(Y)]}return T}function matchesStrictComparable(R,T){return function(M){return M==null?!1:M[R]===T&&(T!==void 0||R in Object(M))}}function baseMatches(R){var T=getMatchData(R);return T.length==1&&T[0][2]?matchesStrictComparable(T[0][0],T[0][1]):function(M){return M===R||baseIsMatch(M,R,T)}}function baseHasIn(R,T){return R!=null&&T in Object(R)}function hasPath(R,T,M){T=castPath(T,R);for(var V=-1,Y=T.length,W=!1;++V<Y;){var Q=toKey(T[V]);if(!(W=R!=null&&M(R,Q)))break;R=R[Q]}return W||++V!=Y?W:(Y=R==null?0:R.length,!!Y&&isLength(Y)&&isIndex(Q,Y)&&(isArray(R)||isArguments(R)))}function hasIn(R,T){return R!=null&&hasPath(R,T,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(R,T){return isKey(R)&&isStrictComparable(T)?matchesStrictComparable(toKey(R),T):function(M){var V=get(M,R);return V===void 0&&V===T?hasIn(M,R):baseIsEqual(T,V,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(R){return function(T){return T?.[R]}}function basePropertyDeep(R){return function(T){return baseGet(T,R)}}function property(R){return isKey(R)?baseProperty(toKey(R)):basePropertyDeep(R)}function baseIteratee(R){return typeof R=="function"?R:R==null?identity:typeof R=="object"?isArray(R)?baseMatchesProperty(R[0],R[1]):baseMatches(R):property(R)}function baseSum(R,T){for(var M,V=-1,Y=R.length;++V<Y;){var W=T(R[V]);W!==void 0&&(M=M===void 0?W:M+W)}return M}function sumBy(R,T){return R&&R.length?baseSum(R,baseIteratee(T)):0}function p$1({children:R}){return jsxRuntimeExports.jsx("div",{className:clsx("prose prose-lg max-w-full","has-[img]:prose-p:flex has-[img]:prose-p:justify-center prose-img:m-0","prose-table:mx-auto prose-table:w-auto prose-table:text-center","print:prose-sm print:prose-headings:mt-2 print:prose-hr:my-4","prose-headings:break-inside-avoid prose-headings:break-after-avoid","prose-p:break-inside-avoid prose-ul:break-before-avoid prose-ul:break-inside-avoid"),children:R})}function A$1(R){const[T,M]=reactExports.useState(Date.now()),V=R.endTime??addMinutes(R.startTime,R.duration);reactExports.useEffect(()=>{const re=setInterval(()=>{const O=Date.now();M(O),isAfter(O,V)&&clearInterval(re)},100);return()=>clearInterval(re)},[V]);let Y=Math.max(differenceInSeconds(V,T),0);R.duration&&(Y=Math.min(Y,R.duration*60));const W=Math.floor(Y/3600),Q=Math.floor(Y/60)%60,te=Y%60;return W>0?jsxRuntimeExports.jsxs("span",{className:clsx("countdown font-mono",R.noAnimation&&"[&_*:before]:transition-none"),children:[jsxRuntimeExports.jsx("span",{style:{"--value":W}}),"h",jsxRuntimeExports.jsx("span",{style:{"--value":Q}}),"m"]}):jsxRuntimeExports.jsxs("span",{className:clsx("countdown font-mono",R.noAnimation&&"[&_*:before]:transition-none"),children:[jsxRuntimeExports.jsx("span",{style:{"--value":Q}}),"m",jsxRuntimeExports.jsx("span",{style:{"--value":te}}),"s"]})}z$1.object({id:z$1.string(),createdAt:z$1.date(),contestIds:z$1.string().array(),level:z$1.enum(["info","warning","error"]),title:z$1.string(),body:z$1.string()});const l=z$1.object({name:z$1.string(),label:z$1.string(),size:z$1.enum(["xs","sm","md","lg","xl"]).optional(),pinned:z$1.boolean().optional()}),m=l.extend({type:z$1.literal("text")}),p=l.extend({type:z$1.literal("number"),min:z$1.number().optional(),max:z$1.number().optional()}),b$1=l.extend({type:z$1.literal("date"),min:z$1.coerce.date(),max:z$1.coerce.date()}),s$3=z$1.object({id:z$1.string(),name:z$1.string(),longName:z$1.string(),problemIds:z$1.coerce.string().array(),userData:z$1.array(z$1.discriminatedUnion("type",[m,p,b$1])),hasVariants:z$1.boolean(),hasOnline:z$1.boolean(),hasPdf:z$1.boolean(),allowStudentImport:z$1.boolean().default(!0),allowStudentEdit:z$1.boolean().default(!0),allowAnswerEdit:z$1.boolean().default(!0),allowStudentDelete:z$1.boolean().default(!0),instructions:z$1.string().optional()}),w$2=s$3.extend({hasOnline:z$1.literal(!0),contestWindowStart:z$1.date(),contestWindowEnd:z$1.date(),duration:z$1.coerce.number().positive(),allowRestart:z$1.boolean()});z$1.discriminatedUnion("hasOnline",[w$2,s$3.extend({hasOnline:z$1.literal(!1)})]);z$1.object({id:z$1.string(),schoolId:z$1.string(),contestId:z$1.string(),name:z$1.string(),teacher:z$1.string(),token:z$1.string().optional(),startingTime:z$1.date().optional(),endingTime:z$1.date().optional(),finalized:z$1.boolean().default(!1),pdfVariants:z$1.array(z$1.coerce.string()).optional(),disabled:z$1.boolean().default(!1)});z$1.object({id:z$1.string(),participationId:z$1.string(),contestId:z$1.string(),startingTime:z$1.date(),endingTime:z$1.date()});const a$3=z$1.union([z$1.string(),z$1.number(),z$1.null()]),c$1=z$1.object({value:a$3,points:z$1.number(),originalId:z$1.string().optional()});z$1.object({id:z$1.string(),contestId:z$1.string(),schema:z$1.record(z$1.object({type:z$1.enum(["text","number","points"]),maxPoints:z$1.number(),originalId:z$1.coerce.string().optional(),options:c$1.array().optional()}))});z$1.object({id:z$1.string(),variant:z$1.string()});function v$1(R,T){if(R.absent||R.disabled)return;const M=R.answers;if(!T||!M)return;let V=0;for(const Y in T){if(!(Y in M))continue;const W=T[Y],Q=M[Y]?.toString()?.trim(),te=f$3(W,Q);if(te===void 0)return;V+=te}return V}function f$3(R,T){if(R.type==="points")return T;for(const M of R.options??[])if(M.value===(T??null))return M.points;return 0}const i$2=z$1.object({uid:z$1.string(),userData:z$1.record(z$1.union([z$1.string(),z$1.number(),z$1.date()]).optional()),absent:z$1.boolean(),disabled:z$1.boolean(),participationId:z$1.string(),contestId:z$1.string(),token:z$1.string(),startedAt:z$1.date(),finishedAt:z$1.date(),variant:z$1.string(),answers:z$1.record(a$3),score:z$1.number(),maxScore:z$1.number(),extraData:z$1.record(z$1.any()),createdAt:z$1.coerce.date(),updatedAt:z$1.date()}).partial().extend({id:z$1.string()});z$1.object({id:z$1.string(),studentId:z$1.string()});z$1.object({id:z$1.string(),studentId:z$1.string(),participationId:z$1.string()});z$1.object({id:z$1.string(),studentId:z$1.string(),participationId:z$1.string(),token:z$1.string(),name:z$1.string(),surname:z$1.string()});z$1.object({id:z$1.string(),uid:z$1.string(),student:i$2,submittedAt:z$1.date().optional()});function pt({children:R}){const T=p$3(),M=reactExports.useRef(null),V=reactExports.useRef(null),{contest:Y,student:W,schema:Q,reset:te,participation:re,terminated:O}=_(),g=sumBy(Object.values(W.answers??{}),k=>+(k===0||!!k)),y=Math.max(Object.keys(Q).length,1),N=Math.round(g/y*100),L=async()=>{const k=V.current;k&&(k.returnValue="0",k.showModal(),await new Promise(D=>{k.onclose=()=>D()}),k.returnValue==="1"&&M.current?.showModal())};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs(kn,{color:"bg-base-300 text-base-content",children:[jsxRuntimeExports.jsx(In,{children:jsxRuntimeExports.jsx("div",{className:"flex items-center h-full font-bold",children:T.title})}),jsxRuntimeExports.jsx(Vn,{children:jsxRuntimeExports.jsxs("div",{className:"flex items-center gap-2",children:[jsxRuntimeExports.jsxs(d,{className:"hidden w-20 sm:block",percentage:N,children:[N,"%"]}),jsxRuntimeExports.jsx("div",{className:"px-3",children:O||!re.startingTime||!Y.hasOnline?jsxRuntimeExports.jsx("span",{className:"font-mono",children:"00:00"}):jsxRuntimeExports.jsx(A$1,{startTime:re.startingTime,duration:Y.duration,noAnimation:!0})}),O&&te?jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("div",{className:"tooltip tooltip-bottom h-full","data-tip":"Mostra risultati",children:jsxRuntimeExports.jsx(wt$1,{className:"btn-primary btn-sm h-full",onClick:()=>M.current?.showModal(),"aria-label":"Mostra risultati",children:jsxRuntimeExports.jsx(FileChartColumn,{})})}),jsxRuntimeExports.jsx("div",{className:"tooltip tooltip-bottom h-full","data-tip":"Ricomincia",children:jsxRuntimeExports.jsx(wt$1,{className:"btn-primary btn-sm h-full",onClick:te,"aria-label":"Ricomincia",children:jsxRuntimeExports.jsx(RotateCcw,{})})})]}):jsxRuntimeExports.jsx(wt$1,{className:"btn-primary btn-sm h-full",disabled:O||!re.startingTime,onClick:L,children:"Termina"}),jsxRuntimeExports.jsx(q,{})]})})]}),jsxRuntimeExports.jsx("div",{className:"mx-auto flex w-full max-w-screen-xl grow flex-col p-4 pb-8",children:jsxRuntimeExports.jsxs(b$2,{children:[jsxRuntimeExports.jsx(G,{ref:M,schema:Q}),jsxRuntimeExports.jsx(J,{ref:V}),jsxRuntimeExports.jsxs(p$1,{children:[Y.longName&&jsxRuntimeExports.jsx("h1",{className:"text-pretty",children:Y.longName}),R]})]})})]})}function q(){const{student:R,logout:T}=_(),M=R.userData?.name,V=R.userData?.surname;return jsxRuntimeExports.jsxs(Qt,{className:"dropdown-end",children:[jsxRuntimeExports.jsx(_t,{children:jsxRuntimeExports.jsxs("div",{className:"truncate uppercase",children:[M," ",V]})}),jsxRuntimeExports.jsx(Gt,{children:jsxRuntimeExports.jsx(Jt,{children:jsxRuntimeExports.jsxs("button",{type:"button",className:"flex justify-between gap-4",onClick:T,children:["Esci ",jsxRuntimeExports.jsx(LogOut,{size:20})]})})})]})}const G=reactExports.forwardRef(function({schema:R},T){const{student:M}=_(),V=Object.keys(R);V.sort((W,Q)=>W.localeCompare(Q,void 0,{numeric:!0}));const Y=sumBy(Object.values(R),"maxPoints");return jsxRuntimeExports.jsxs(Sn,{ref:T,title:"Prova terminata",children:[jsxRuntimeExports.jsx("p",{children:"La prova Ã¨ terminata."}),M.score!==void 0&&jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsxs("p",{children:["Hai ottenuto un punteggio di ",jsxRuntimeExports.jsx("b",{children:M.score})," su ",jsxRuntimeExports.jsx("b",{children:Y}),"."]}),jsxRuntimeExports.jsxs("table",{className:"table table-sm text-center mt-4",children:[jsxRuntimeExports.jsx("thead",{children:jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("th",{scope:"col",children:"Domanda"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"Risposta"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"Soluzione"}),jsxRuntimeExports.jsx("th",{scope:"col",children:"Punteggio"})]})}),jsxRuntimeExports.jsx("tbody",{children:V.map(W=>{const Q=M.answers?.[W],te=R[W],re=te.options?.filter(O=>O.points===te.maxPoints).map(O=>O.value);return jsxRuntimeExports.jsxs("tr",{children:[jsxRuntimeExports.jsx("td",{children:W}),jsxRuntimeExports.jsx("td",{children:Q??"-"}),jsxRuntimeExports.jsx("td",{children:re?.join(", ")}),jsxRuntimeExports.jsx("td",{children:f$3(te,Q)})]},W)})})]})]})]})}),J=reactExports.forwardRef(function(R,T){const{student:M,setStudent:V,onSubmit:Y}=_(),W=()=>{T&&"current"in T&&T.current?.close()};return jsxRuntimeExports.jsxs(Sn,{ref:T,title:"Confermi di voler terminare?",children:[jsxRuntimeExports.jsx("p",{children:"Confermando non potrai piÃ¹ modificare le tue risposte."}),jsxRuntimeExports.jsx(Be,{onSubmit:async()=>{try{await V({...M,finishedAt:new Date}),await Y?.(),T&&"current"in T&&T.current&&(T.current.returnValue="1")}finally{W()}},className:"!max-w-full",children:jsxRuntimeExports.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[jsxRuntimeExports.jsx(So,{onClick:W,children:"Annulla"}),jsxRuntimeExports.jsx(wo,{className:"btn-error",children:"Conferma"})]})})]})}),i$1=reactExports.createContext({});i$1.displayName="StudentContext";function Z({setStudent:R,children:T,student:M,...V}){const[Y,W]=reactExports.useState({}),Q=le(M.finishedAt)??!1,te=reactExports.useCallback(async O=>{await R({...O,score:v$1(O,Y)})},[R,Y]),re={...V,student:M,setStudent:te,terminated:Q,schema:Y,registerSchema:W};return reactExports.useEffect(()=>{if(M.maxScore==null){let O=0;const g={...M.answers};for(const y in Y)O+=Y[y].maxPoints,g[y]??=null;R({...M,maxScore:O,answers:g})}},[M,R,Y]),jsxRuntimeExports.jsx(i$1.Provider,{value:re,children:jsxRuntimeExports.jsx(pt,{children:T})})}function _(){return reactExports.useContext(i$1)}function I({contestName:R,contestLongName:T,duration:M,children:V}){const[Y,W]=f$2({id:"",userData:{name:"Utente",surname:"anonimo"},answers:{},variant:"0"}),Q={id:"",name:R,longName:T,problemIds:[],duration:M,userData:[],hasVariants:!0,hasOnline:!0,hasPdf:!0,allowRestart:!0,allowStudentImport:!0,allowStudentEdit:!0,allowStudentDelete:!0,allowAnswerEdit:!0,contestWindowEnd:new Date(0),contestWindowStart:new Date(Number.MAX_SAFE_INTEGER)},te={id:"",schoolId:"",contestId:"",name:"",teacher:"",startingTime:Y.startedAt,finalized:!1,disabled:!1},re=reactExports.useCallback(async()=>{W(O=>({...O,answers:{},extraData:{},startedAt:void 0,finishedAt:void 0}))},[W]);return jsxRuntimeExports.jsx(Z,{contest:Q,participation:te,student:Y,setStudent:W,reset:re,children:V})}function f$2(R){const T=window.location.pathname,[M,V]=reactExports.useState(()=>JSON.parse(localStorage.getItem("quizms")??"{}")[T]??R);return reactExports.useEffect(()=>{const Y=JSON.parse(localStorage.getItem("quizms")??"{}");Y[T]=M,localStorage.setItem("quizms",JSON.stringify(Y))},[T,M]),[M,V]}const pre="_pre_165zj_1",h$2={pre};function wt({onClick:R,icon:T,disabled:M,className:V,children:Y}){let[W,Q]=reactExports.useState(!1),te=async()=>{Q(!0);try{await R?.()}finally{Q(!1)}};return jsxRuntimeExports.jsxs("button",{className:clsx("btn",V),onClick:te,disabled:W||M,type:"button",children:[W?jsxRuntimeExports.jsx("span",{className:"loading loading-spinner"}):T&&jsxRuntimeExports.jsx(T,{size:22}),Y]})}var Se=reactExports.lazy(()=>__vitePreload(()=>import("../r/a5bce105-highlight-UOJF2D5K.js"),__vite__mapDeps([0,1,2,3,4,5,6])));function At({lang:R,...T}){return jsxRuntimeExports.jsx(reactExports.Suspense,{fallback:jsxRuntimeExports.jsx(Te,{...T}),children:jsxRuntimeExports.jsx(Se,{lang:R,...T})})}function Te({code:R,inline:T,className:M}){return T?jsxRuntimeExports.jsx("code",{className:M,children:R}):jsxRuntimeExports.jsx("div",{className:M,children:jsxRuntimeExports.jsx("pre",{className:h$2.pre,children:jsxRuntimeExports.jsx("code",{children:R.split(`
`).map((V,Y)=>jsxRuntimeExports.jsxs("span",{className:"line",children:[jsxRuntimeExports.jsx("span",{children:V}),jsxRuntimeExports.jsx("br",{})]},Y))})})})}reactExports.createContext({state:{},setState:()=>{},globalDisabled:!1,pending:!1});reactExports.createContext({notify:()=>{}});reactExports.forwardRef(function({title:R,className:T,children:M},V){return jsxRuntimeExports.jsxs("dialog",{ref:V,className:"modal",children:[jsxRuntimeExports.jsxs("div",{className:clsx("modal-box",T),children:[jsxRuntimeExports.jsx("form",{method:"dialog",children:jsxRuntimeExports.jsx("button",{className:"btn btn-circle btn-ghost btn-sm absolute right-2 top-2","aria-label":"Chiudi",type:"submit",children:jsxRuntimeExports.jsx(X,{})})}),jsxRuntimeExports.jsx("h1",{className:"mb-3 mt-0 text-lg font-bold",children:R}),M]}),jsxRuntimeExports.jsx("form",{method:"dialog",className:"modal-backdrop",children:jsxRuntimeExports.jsx("button",{type:"submit",children:"Chiudi"})})]})});const n$1=reactExports.createContext({registerProblem:()=>{}});n$1.displayName="ContestContext";function w$1({children:R}){const{student:T,setStudent:M,contest:V,registerSchema:Y}=_(),W=reactExports.useCallback((Q,te)=>{Y(re=>({...re,[Q]:te}))},[Y]);return T.startedAt?jsxRuntimeExports.jsx(n$1.Provider,{value:{registerProblem:W},children:jsxRuntimeExports.jsx("div",{className:"break-before-page",children:jsxRuntimeExports.jsx("main",{className:"gap-x-10 [column-rule:solid_1px_var(--tw-prose-hr)] print:columns-2",children:R})})}):jsxRuntimeExports.jsx("div",{className:"flex h-[50vh] flex-col items-center justify-center",children:jsxRuntimeExports.jsx(wt,{className:"btn-success btn-lg",onClick:async()=>{const Q=new Date;await M({...T,startedAt:Q,finishedAt:addMinutes(Q,V.hasOnline?V.duration:0),variant:""})},children:"Inizia"})})}function S$2(){return reactExports.useContext(n$1)}const e$3=reactExports.createContext({id:void 0,points:[0,0,0]});e$3.displayName="ProblemContext";function u$1({id:R,points:T,children:M}){return jsxRuntimeExports.jsxs(e$3.Provider,{value:{id:R,points:T},children:[jsxRuntimeExports.jsx("div",{className:"relative",children:M}),jsxRuntimeExports.jsx("hr",{className:"last:hidden"})]})}function v({subId:R,children:T}){const{id:M,points:V}=reactExports.useContext(e$3),Y=R?`${M}.${R}`:`${M}`;return jsxRuntimeExports.jsx(e$3.Provider,{value:{id:Y,points:V},children:jsxRuntimeExports.jsxs("div",{className:"break-inside-avoid",children:[jsxRuntimeExports.jsxs("h3",{children:["Domanda ",Y]}),T]})})}function h$1(){return reactExports.useContext(e$3)}function E({children:R}){return jsxRuntimeExports.jsx("form",{className:clsx("my-5 flex-wrap rounded-xl bg-base-200 p-3 prose-p:my-1 break-inside-avoid","print:flex print:border print:border-[var(--tw-prose-hr)] print:p-1"),children:R})}function $({id:R,correct:T,children:M}){const{registerProblem:V}=S$2(),{id:Y,points:W}=h$1(),{student:Q,setStudent:te,terminated:re}=_(),O=Q.answers?.[Y],g=async N=>{await te({...Q,answers:{...Q.answers,[Y]:N}})},y=reactExports.useId();return reactExports.useEffect(()=>{T&&V(`${Y}`,{type:"text",maxPoints:W[0],options:[{value:R,points:W[0]},{value:null,points:W[1]}]})},[V,R,Y,T,W]),jsxRuntimeExports.jsxs("div",{className:clsx("relative my-1 flex rounded-lg pl-2 pr-1 hover:bg-base-300 print:mr-4",re&&{"border-2 border-success":T===!0,"border-2 border-error":O===R&&T===!1}),children:[jsxRuntimeExports.jsx("input",{id:y,checked:O===R,className:clsx("radio radio-sm my-auto mr-4 bg-base-100 [print-color-adjust:exact] disabled:opacity-90 print:mr-2",re&&O===R&&{"radio-success":T===!0,"radio-error":T===!1}),onChange:N=>g(N.target.checked?R:null),type:"radio",disabled:re}),jsxRuntimeExports.jsxs("div",{className:"my-auto w-6 screen:hidden",children:[R,")"]}),jsxRuntimeExports.jsx("label",{htmlFor:y,className:"grow [&_pre]:!p-3",children:M}),jsxRuntimeExports.jsx("div",{className:"absolute right-0 top-0 mr-1 flex h-full justify-center print:hidden",children:jsxRuntimeExports.jsx("button",{className:clsx("btn btn-square btn-ghost btn-sm my-auto",(O!==R||re)&&"hidden"),type:"button",onClick:()=>g(null),"aria-label":"Cancella risposta",children:jsxRuntimeExports.jsx(Trash2,{size:20})})})]})}function S$1({correct:R,type:T}){const{registerProblem:M}=S$2(),{id:V,points:Y}=h$1(),{student:W,setStudent:Q,terminated:te}=_(),re=W.answers?.[V],O=async g=>{await Q({...W,answers:{...W.answers,[V]:g}})};return reactExports.useEffect(()=>{M(`${V}`,{type:"text",maxPoints:Y[0],options:[{value:R??null,points:Y[0]},{value:null,points:Y[1]}]})},[M,V,R,Y]),jsxRuntimeExports.jsx("div",{className:"px-2",children:jsxRuntimeExports.jsx("input",{id:`answer-${V}`,className:clsx("input input-bordered w-72 max-w-full border-2 print:placeholder:text-transparent",te&&R!==void 0&&{"disabled:input-success":R===re,"disabled:input-error":R!==re}),onChange:g=>O(g.target.value||null),onWheel:g=>g.currentTarget.blur(),placeholder:"Inserisci la risposta",maxLength:100,type:T,value:re??"",disabled:te,"aria-label":"Risposta"})})}function z({children:R}){const{terminated:T}=_(),{id:M}=h$1();if(T)return jsxRuntimeExports.jsx("div",{className:"my-5 rounded-xl bg-base-200 print:hidden",children:jsxRuntimeExports.jsxs("div",{className:"collapse",children:[jsxRuntimeExports.jsx("input",{type:"checkbox",name:`show-solution-${M}`}),jsxRuntimeExports.jsx("div",{className:"collapse-title text-xl font-medium",children:"Mostra soluzione"}),jsxRuntimeExports.jsx("div",{className:"collapse-content",children:R})]})})}function c({field:R,value:T,children:M}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(e$2,{value:`${JSON.stringify(R)}:`}),T!==void 0&&jsxRuntimeExports.jsx(e$2,{value:`${JSON.stringify(T)},`}),M]})}function s$2({children:R}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(e$2,{value:"{"}),R,jsxRuntimeExports.jsx(e$2,{value:"},"})]})}function a$2({children:R}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(e$2,{value:"["}),R,jsxRuntimeExports.jsx(e$2,{value:"],"})]})}function e$2({value:R}){return console.log(R),null}function h({children:R}){return jsxRuntimeExports.jsx(E,{children:R})}function A({children:R}){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(c,{field:"type",value:"text"}),jsxRuntimeExports.jsx(c,{field:"options",children:jsxRuntimeExports.jsx(a$2,{children:R})})]})}function w({correct:R}){const T=Number.isFinite(Number(R))?"number":"text";return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(c,{field:"type",value:T}),jsxRuntimeExports.jsx(c,{field:"options",children:jsxRuntimeExports.jsx(a$2,{children:jsxRuntimeExports.jsxs(s$2,{children:[jsxRuntimeExports.jsx(c,{field:"value",value:R??null}),jsxRuntimeExports.jsx(c,{field:"correct",value:!0})]})})}),jsxRuntimeExports.jsx(S$1,{correct:R,type:T})]})}function x({id:R,correct:T,children:M}){return jsxRuntimeExports.jsxs(s$2,{children:[jsxRuntimeExports.jsx(c,{field:"value",value:R}),jsxRuntimeExports.jsx(c,{field:"correct",value:!!T}),jsxRuntimeExports.jsx($,{id:R,correct:T,children:M})]})}function C({children:R}){return jsxRuntimeExports.jsx(z,{children:R})}const t$3={kind:"categoryToolbox",contents:[{kind:"category",name:"Variabili",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"Matematica",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"math_arithmetic",fields:{OP:"ADD"}},{kind:"block",type:"math_number_property",fields:{PROPERTY:"EVEN"}},{kind:"block",type:"math_on_list",fields:{OP:"SUM"}}]},{kind:"category",name:"Logica",categorystyle:"logic_category",contents:[{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"controls_if"},{kind:"block",type:"controls_if",extraState:{hasElse:"true"}}]},{kind:"category",name:"Cicli",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{block:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for",fields:{VAR:"i"},inputs:{FROM:{block:{type:"math_number",fields:{NUM:1}}},TO:{block:{type:"math_number",fields:{NUM:10}}},BY:{block:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"controls_forEach"}]},{kind:"category",name:"Liste",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_repeat",inputs:{NUM:{block:{type:"math_number",fields:{NUM:5}}}}},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_getIndex",fields:{MODE:"GET",WHERE:"FROM_START"}},{kind:"block",type:"lists_setIndex",fields:{MODE:"SET",WHERE:"FROM_START"}}]}]},e$1={blocks:{languageVersion:0,blocks:[{type:"start",id:"y=zq)Uya2A/{vyOtN[i6",x:30,y:30}]},variables:[]};var jsInterpreter$1={exports:{}},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(R,T){if(R.indexOf)return R.indexOf(T);for(var M=0;M<R.length;M++)if(R[M]===T)return M;return-1},Object_keys=function(R){if(Object.keys)return Object.keys(R);var T=[];for(var M in R)T.push(M);return T},forEach=function(R,T){if(R.forEach)return R.forEach(T);for(var M=0;M<R.length;M++)T(R[M],M,R)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(R,T,M){Object.defineProperty(R,T,{writable:!0,enumerable:!1,configurable:!0,value:M})}}catch{return function(T,M,V){T[M]=V}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(T){if(!(this instanceof Script))return new Script(T);this.code=T};Script.prototype.runInContext=function(R){if(!(R instanceof Context))throw new TypeError("needs a 'context' argument.");var T=document.createElement("iframe");T.style||(T.style={}),T.style.display="none",document.body.appendChild(T);var M=T.contentWindow,V=M.eval,Y=M.execScript;!V&&Y&&(Y.call(M,"null"),V=M.eval),forEach(Object_keys(R),function(te){M[te]=R[te]}),forEach(globals,function(te){R[te]&&(M[te]=R[te])});var W=Object_keys(M),Q=V.call(M,this.code);return forEach(Object_keys(M),function(te){(te in R||indexOf(W,te)===-1)&&(R[te]=M[te])}),forEach(globals,function(te){te in R||defineProp(R,te,M[te])}),document.body.removeChild(T),Q},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(R){var T=Script.createContext(R),M=this.runInContext(T);return R&&forEach(Object_keys(T),function(V){R[V]=T[V]}),M},forEach(Object_keys(Script.prototype),function(R){exports[R]=Script[R]=function(T){var M=Script(T);return M[R].apply(M,[].slice.call(arguments,1))}}),exports.isContext=function(R){return R instanceof Context},exports.createScript=function(R){return exports.Script(R)},exports.createContext=Script.createContext=function(R){var T=new Context;return typeof R=="object"&&forEach(Object_keys(R),function(M){T[M]=R[M]}),T}}(vmBrowserify)),vmBrowserify}var jsInterpreter=jsInterpreter$1.exports,hasRequiredJsInterpreter;function requireJsInterpreter(){return hasRequiredJsInterpreter||(hasRequiredJsInterpreter=1,function(R,T){(function(V,Y){R.exports=Y()})(jsInterpreter,()=>(()=>{var M={"./original-repo/interpreter.js":function(Q,te,re){var O=function(g,y){typeof g=="string"&&(g=this.parse_(g,"code"));var N=g.constructor;this.newNode=function(){return new N({options:{}})};var L=this.newNode();for(var k in g)L[k]=k==="body"?g[k].slice():g[k];this.ast=L,this.tasks=[],this.initFunc_=y,this.paused_=!1,this.polyfills_=[],this.functionCounter_=0,this.stepFunctions_=Object.create(null);var D=/^step([A-Z]\w*)$/,j;for(var U in this)typeof this[U]=="function"&&(j=U.match(D))&&(this.stepFunctions_[j[1]]=this[U].bind(this));this.globalScope=this.createScope(this.ast,null),this.globalObject=this.globalScope.object,this.ast=this.parse_(this.polyfills_.join(`
`),"polyfills"),this.polyfills_=void 0,O.stripLocations_(this.ast,void 0,void 0);var K=new O.State(this.ast,this.globalScope);K.done=!1,this.stateStack=[K],this.run(),this.value=void 0,this.ast=L,K=new O.State(this.ast,this.globalScope),K.done=!1,this.stateStack.length=0,this.stateStack[0]=K};O.Completion={NORMAL:0,BREAK:1,CONTINUE:2,RETURN:3,THROW:4},O.Status={DONE:0,STEP:1,TASK:2,ASYNC:3},O.PARSE_OPTIONS={locations:!0,ecmaVersion:5},O.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},O.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},O.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!1,enumerable:!1,writable:!1},O.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0},O.STEP_ERROR={STEP_ERROR:!0},O.SCOPE_REFERENCE={SCOPE_REFERENCE:!0},O.VALUE_IN_DESCRIPTOR={VALUE_IN_DESCRIPTOR:!0},O.REGEXP_TIMEOUT={REGEXP_TIMEOUT:!0},O.toStringCycles_=[],O.vm=null,O.currentInterpreter_=null,O.nativeGlobal=typeof globalThis>"u"?this||window:globalThis,O.WORKER_CODE=["onmessage = function(e) {","var result;","var data = e.data;","switch (data[0]) {","case 'split':","result = data[1].split(data[2], data[3]);","break;","case 'match':","result = data[1].match(data[2]);","break;","case 'search':","result = data[1].search(data[2]);","break;","case 'replace':","result = data[1].replace(data[2], data[3]);","break;","case 'exec':","var regexp = data[1];","regexp.lastIndex = data[2];","result = [regexp.exec(data[3]), data[1].lastIndex];","break;","default:","throw Error('Unknown RegExp operation: ' + data[0]);","}","postMessage(result);","close();","};"],O.legalArrayLength=function(g){var y=g>>>0;return y===Number(g)?y:NaN},O.legalArrayIndex=function(g){var y=g>>>0;return String(y)===String(g)&&y!==4294967295?y:NaN},O.stripLocations_=function(g,y,N){y?g.start=y:delete g.start,N?g.end=N:delete g.end;for(var L in g)if(g[L]!==g.loc&&g.hasOwnProperty(L)){var k=g[L];k&&typeof k=="object"&&O.stripLocations_(k,y,N)}},O.prototype.REGEXP_MODE=2,O.prototype.REGEXP_THREAD_TIMEOUT=1e3,O.prototype.POLYFILL_TIMEOUT=1e3,O.prototype.getterStep_=!1,O.prototype.setterStep_=!1,O.prototype.appendCodeNumber_=0,O.prototype.taskCodeNumber_=0,O.prototype.parse_=function(g,y){var N={};for(var L in O.PARSE_OPTIONS)N[L]=O.PARSE_OPTIONS[L];return N.sourceFile=y,O.nativeGlobal.acorn.parse(g,N)},O.prototype.appendCode=function(g){var y=this.stateStack[0];if(!y||y.node.type!=="Program")throw Error("Expecting original AST to start with a Program node");if(typeof g=="string"&&(g=this.parse_(g,"appendCode"+this.appendCodeNumber_++)),!g||g.type!=="Program")throw Error("Expecting new AST to start with a Program node");this.populateScope_(g,y.scope),Array.prototype.push.apply(y.node.body,g.body),y.node.body.variableCache_=null,y.done=!1},O.prototype.step=function(){var g=this.stateStack,y;do{var N=g[g.length-1];if(this.paused_)return!0;if(!N||N.node.type==="Program"&&N.done){if(!this.tasks.length)return!1;if(N=this.nextTask_(),!N)return!0}var L=N.node,k=O.currentInterpreter_;O.currentInterpreter_=this;try{var D=this.stepFunctions_[L.type](g,N,L)}catch(j){if(j!==O.STEP_ERROR)throw this.value!==j&&(this.value=void 0),j}finally{O.currentInterpreter_=k}if(D&&g.push(D),this.getterStep_)throw this.value=void 0,Error("Getter not supported in this context");if(this.setterStep_)throw this.value=void 0,Error("Setter not supported in this context");!y&&!L.end&&(y=Date.now()+this.POLYFILL_TIMEOUT)}while(!L.end&&y>Date.now());return!0},O.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},O.prototype.getStatus=function(){if(this.paused_)return O.Status.ASYNC;var g=this.stateStack,y=g[g.length-1];if(y&&(y.node.type!=="Program"||!y.done))return O.Status.STEP;var N=this.tasks[0];return N?N.time>Date.now()?O.Status.TASK:O.Status.STEP:O.Status.DONE},O.prototype.initGlobal=function(g){this.setProperty(g,"NaN",NaN,O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"Infinity",1/0,O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"undefined",void 0,O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"window",g,O.READONLY_DESCRIPTOR),this.setProperty(g,"this",g,O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"self",g),this.OBJECT_PROTO=new O.Object(null),this.FUNCTION_PROTO=new O.Object(this.OBJECT_PROTO),this.initFunction(g),this.initObject(g),g.proto=this.OBJECT_PROTO,this.setProperty(g,"constructor",this.OBJECT,O.NONENUMERABLE_DESCRIPTOR),this.initArray(g),this.initString(g),this.initBoolean(g),this.initNumber(g),this.initDate(g),this.initRegExp(g),this.initError(g),this.initMath(g),this.initJSON(g);var y=this,N,L=this.createNativeFunction(function(j){throw EvalError("Can't happen")},!1);L.eval=!0,this.setProperty(g,"eval",L,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"parseInt",this.createNativeFunction(parseInt,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"parseFloat",this.createNativeFunction(parseFloat,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"isNaN",this.createNativeFunction(isNaN,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"isFinite",this.createNativeFunction(isFinite,!1),O.NONENUMERABLE_DESCRIPTOR);for(var k=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],D=0;D<k.length;D++)N=function(j){return function(U){try{return j(U)}catch(K){y.throwException(y.URI_ERROR,K.message)}}}(k[D][0]),this.setProperty(g,k[D][1],this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR);N=function(U){return y.createTask_(!1,arguments)},this.setProperty(g,"setTimeout",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(U){return y.createTask_(!0,arguments)},this.setProperty(g,"setInterval",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(U){y.deleteTask_(U)},this.setProperty(g,"clearTimeout",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(U){y.deleteTask_(U)},this.setProperty(g,"clearInterval",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),this.OBJECT=this.OBJECT,this.OBJECT_PROTO=this.OBJECT_PROTO,this.FUNCTION=this.FUNCTION,this.FUNCTION_PROTO=this.FUNCTION_PROTO,this.ARRAY=this.ARRAY,this.ARRAY_PROTO=this.ARRAY_PROTO,this.REGEXP=this.REGEXP,this.REGEXP_PROTO=this.REGEXP_PROTO,this.DATE=this.DATE,this.DATE_PROTO=this.DATE_PROTO,this.initFunc_&&this.initFunc_(this,g)},O.prototype.functionCodeNumber_=0,O.prototype.initFunction=function(g){var y=this,N,L=/^[A-Za-z_$][\w$]*$/;N=function(D){if(arguments.length)var j=String(arguments[arguments.length-1]);else var j="";var U=Array.prototype.slice.call(arguments,0,-1).join(",").trim();if(U){for(var K=U.split(/\s*,\s*/),ne=0;ne<K.length;ne++){var ae=K[ne];L.test(ae)||y.throwException(y.SYNTAX_ERROR,"Invalid function argument: "+ae)}U=K.join(", ")}try{var ie=y.parse_("(function("+U+") {"+j+"})","function"+y.functionCodeNumber_++)}catch(ue){y.throwException(y.SYNTAX_ERROR,"Invalid code: "+ue.message)}ie.body.length!==1&&y.throwException(y.SYNTAX_ERROR,"Invalid code in function body");var se=ie.body[0].expression;return y.createFunction(se,y.globalScope,"anonymous")},this.FUNCTION=this.createNativeFunction(N,!0),this.setProperty(g,"Function",this.FUNCTION,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,O.NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.nativeFunc=function(){},this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++,this.FUNCTION_PROTO.illegalConstructor=!0,this.setProperty(this.FUNCTION_PROTO,"length",0,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.class="Function",N=function(D,j,U){var K=y.stateStack[y.stateStack.length-1];K.func_=D,K.funcThis_=j,K.arguments_=[],U!=null&&(U instanceof O.Object?K.arguments_=Array.from(U.properties):y.throwException(y.TYPE_ERROR,"CreateListFromArrayLike called on non-object")),K.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",N),this.polyfills_.push("(function() {","var apply_ = Function.prototype.apply;","Function.prototype.apply = function apply(thisArg, args) {","var a2 = [];","for (var i = 0; i < args.length; i++) {","a2[i] = args[i];","}","return apply_(this, thisArg, a2);","};","})();"),N=function(D){var j=y.stateStack[y.stateStack.length-1];j.func_=this,j.funcThis_=D,j.arguments_=[];for(var U=1;U<arguments.length;U++)j.arguments_.push(arguments[U]);j.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",N),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',","{configurable: true, writable: true, value:","function bind(oThis) {","if (typeof this !== 'function') {","throw TypeError('What is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),N=function(){return String(this)},this.setNativeFunctionPrototype(this.FUNCTION,"toString",N),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(){return this.valueOf()},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",N),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR)},O.prototype.initObject=function(g){var y=this,N;N=function(D){if(D==null)return y.calledWithNew()?this:y.createObjectProto(y.OBJECT_PROTO);if(!(D instanceof O.Object)){var j=y.createObjectProto(y.getPrototype(D));return j.data=D,j}return D},this.OBJECT=this.createNativeFunction(N,!0),this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"Object",this.OBJECT,O.NONENUMERABLE_DESCRIPTOR);var L=function(k){k==null&&y.throwException(y.TYPE_ERROR,"Cannot convert '"+k+"' to object")};N=function(D){L(D);var j=D instanceof O.Object?D.properties:D;return y.nativeToPseudo(Object.getOwnPropertyNames(j))},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(D){return L(D),D instanceof O.Object&&(D=D.properties),y.nativeToPseudo(Object.keys(D))},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(D){return D===null?y.createObjectProto(null):(D instanceof O.Object||y.throwException(y.TYPE_ERROR,"Object prototype may only be an Object or null, not "+D),y.createObjectProto(D))},this.setProperty(this.OBJECT,"create",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var create_ = Object.create;","Object.create = function create(proto, props) {","var obj = create_(proto);","props && Object.defineProperties(obj, props);","return obj;","};","})();",""),N=function(D,j,U){return j=String(j),D instanceof O.Object||y.throwException(y.TYPE_ERROR,"Object.defineProperty called on non-object: "+D),U instanceof O.Object||y.throwException(y.TYPE_ERROR,"Property description must be an object"),D.preventExtensions&&!(j in D.properties)&&y.throwException(y.TYPE_ERROR,"Can't define property '"+j+"', object is not extensible"),y.setProperty(D,j,O.VALUE_IN_DESCRIPTOR,U.properties),D},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var defineProperty_ = Object.defineProperty;","Object.defineProperty = function defineProperty(obj, prop, d1) {","var d2 = {};","if ('configurable' in d1) d2.configurable = d1.configurable;","if ('enumerable' in d1) d2.enumerable = d1.enumerable;","if ('writable' in d1) d2.writable = d1.writable;","if ('value' in d1) d2.value = d1.value;","if ('get' in d1) d2.get = d1.get;","if ('set' in d1) d2.set = d1.set;","return defineProperty_(obj, prop, d2);","};","})();","Object.defineProperty(Object, 'defineProperties',","{configurable: true, writable: true, value:","function defineProperties(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),N=function(D,j){if(D instanceof O.Object||y.throwException(y.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object: "+D),j=String(j),j in D.properties){var U=Object.getOwnPropertyDescriptor(D.properties,j),K=D.getter[j],ne=D.setter[j],ae=y.createObjectProto(y.OBJECT_PROTO);return K||ne?(y.setProperty(ae,"get",K),y.setProperty(ae,"set",ne)):(y.setProperty(ae,"value",U.value),y.setProperty(ae,"writable",U.writable)),y.setProperty(ae,"configurable",U.configurable),y.setProperty(ae,"enumerable",U.enumerable),ae}},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(D){return L(D),y.getPrototype(D)},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(D){return!!D&&!D.preventExtensions},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),N=function(D){return D instanceof O.Object&&(D.preventExtensions=!0),D},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),this.setNativeFunctionPrototype(this.OBJECT,"toString",O.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",O.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"valueOf",O.Object.prototype.valueOf),N=function(D){return L(this),this instanceof O.Object?String(D)in this.properties:this.hasOwnProperty(D)},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",N),N=function(D){return L(this),this instanceof O.Object?Object.prototype.propertyIsEnumerable.call(this.properties,D):this.propertyIsEnumerable(D)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",N),N=function(D){for(;;){if(D=y.getPrototype(D),!D)return!1;if(D===this)return!0}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",N)},O.prototype.initArray=function(g){var y=this,N;N=function(k){if(y.calledWithNew())var D=this;else var D=y.createArray();var j=arguments[0];if(arguments.length===1&&typeof j=="number")isNaN(O.legalArrayLength(j))&&y.throwException(y.RANGE_ERROR,"Invalid array length: "+j),D.properties.length=j;else{for(var U=0;U<arguments.length;U++)D.properties[U]=arguments[U];D.properties.length=U}return D},this.ARRAY=this.createNativeFunction(N,!0),this.ARRAY_PROTO=this.ARRAY.properties.prototype,this.setProperty(g,"Array",this.ARRAY,O.NONENUMERABLE_DESCRIPTOR),N=function(k){return k&&k.class==="Array"},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ARRAY_PROTO,"length",0,{configurable:!1,enumerable:!1,writable:!0}),this.ARRAY_PROTO.class="Array",this.polyfills_.push("(function() {","function createArrayMethod_(name, func) {","Object.defineProperty(func, 'name', {value: name});","Object.defineProperty(Array.prototype, name,","{configurable: true, writable: true, value: func});","}","createArrayMethod_('pop',","function() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","len--;","var x = o[len];","delete o[len];","o.length = len;","return x;","}",");","createArrayMethod_('push',","function(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","for (var i = 0; i < arguments.length; i++) {","o[len] = arguments[i];","len++;","}","o.length = len;","return len;","}",");","createArrayMethod_('shift',","function() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","var value = o[0];","for (var i = 0; i < len - 1; i++) {","if ((i + 1) in o) {","o[i] = o[i + 1];","} else {","delete o[i];","}","}","delete o[i];","o.length = len - 1;","return value;","}",");","createArrayMethod_('unshift',","function(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","len = 0;","}","for (var i = len - 1; i >= 0; i--) {","if (i in o) {","o[i + arguments.length] = o[i];","} else {","delete o[i + arguments.length];","}","}","for (var i = 0; i < arguments.length; i++) {","o[i] = arguments[i];","}","return (o.length = len + arguments.length);","}",");","createArrayMethod_('reverse',","function() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 2) {","return o;","}","for (var i = 0; i < len / 2 - 0.5; i++) {","var x = o[i];","var hasX = i in o;","if ((len - i - 1) in o) {","o[i] = o[len - i - 1];","} else {","delete o[i];","}","if (hasX) {","o[len - i - 1] = x;","} else {","delete o[len - i - 1];","}","}","return o;","}",");","createArrayMethod_('indexOf',","function(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var n = fromIndex | 0;","if (!len || n >= len) {","return -1;","}","var i = Math.max(n >= 0 ? n : len - Math.abs(n), 0);","while (i < len) {","if (i in o && o[i] === searchElement) {","return i;","}","i++;","}","return -1;","}",");","createArrayMethod_('lastIndexOf',","function(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len) {","return -1;","}","var n = len - 1;","if (arguments.length > 1) {","n = fromIndex | 0;","if (n) {","n = (n > 0 || -1) * Math.floor(Math.abs(n));","}","}","var i = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);","while (i >= 0) {","if (i in o && o[i] === searchElement) {","return i;","}","i--;","}","return -1;","}",");","createArrayMethod_('slice',","function(start, end) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","start = (start >= 0) ? start : Math.max(0, len + start);","if (typeof end !== 'undefined') {","if (end !== Infinity) {","end |= 0;","}","if (end < 0) {","end = len + end;","} else {","end = Math.min(end, len);","}","} else {","end = len;","}","var size = end - start;","var cloned = new Array(size);","for (var i = 0; i < size; i++) {","if ((start + i) in o) {","cloned[i] = o[start + i];","}","}","return cloned;","}",");","createArrayMethod_('splice',","function(start, deleteCount, var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","if (start < 0) {","start = Math.max(len + start, 0);","} else {","start = Math.min(start, len);","}","if (arguments.length < 2) {","deleteCount = len - start;","} else {","deleteCount |= 0;","deleteCount = Math.max(0, Math.min(deleteCount, len - start));","}","var removed = [];","for (var i = start; i < start + deleteCount; i++) {","if (i in o) {","removed.push(o[i]);","} else {","removed.length++;","}","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = start + deleteCount; i < len - deleteCount; i++) {","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = len - deleteCount; i < len; i++) {","delete o[i];","}","len -= deleteCount;","if (arguments.length > 2) {","var arl = arguments.length - 2;","for (var i = len - 1; i >= start; i--) {","if (i in o) {","o[i + arl] = o[i];","} else {","delete o[i + arl];","}","}","len += arl;","for (var i = 2; i < arguments.length; i++) {","o[start + i - 2] = arguments[i];","}","}","o.length = len;","return removed;","}",");","createArrayMethod_('concat',","function(var_args) {","if (!this) throw TypeError();","var o = Object(this);","var cloned = [];","for (var i = -1; i < arguments.length; i++) {","var value = (i === -1) ? o : arguments[i];","if (Array.isArray(value)) {","for (var j = 0, l = value.length; j < l; j++) {","if (j in value) {","cloned.push(value[j]);","} else {","cloned.length++;","}","}","} else {","cloned.push(value);","}","}","return cloned;","}",");","createArrayMethod_('join',","function(opt_separator) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var sep = typeof opt_separator === 'undefined' ?","',' : ('' + opt_separator);","var str = '';","for (var i = 0; i < len; i++) {","if (i && sep) str += sep;","str += (o[i] === null || o[i] === undefined) ? '' : o[i];","}","return str;","}",");","createArrayMethod_('every',","function(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o && !callback.call(t, o[k], k, o)) return false;","k++;","}","return true;","}",");","createArrayMethod_('filter',","function(callback, var_args) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o) {","var val = o[i];","if (callback.call(thisArg, val, i, o)) res.push(val);","}","}","return res;","}",");","createArrayMethod_('forEach',","function(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o) callback.call(t, o[k], k, o);","k++;","}","}",");","createArrayMethod_('map',","function(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","var a = new Array(len);","while (k < len) {","if (k in o) a[k] = callback.call(t, o[k], k, o);","k++;","}","return a;","}",");","createArrayMethod_('reduce',","function(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = 0, value;","if (arguments.length === 2) {","value = arguments[1];","} else {","while (k < len && !(k in o)) k++;","if (k >= len) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k++];","}","for (; k < len; k++) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_('reduceRight',","function(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in o)) k--;","if (k < 0) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k--];","}","for (; k >= 0; k--) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_('some',","function(callback /*, thisArg*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o && callback.call(thisArg, o[i], i, o)) return true;","}","return false;","}",");","createArrayMethod_('sort',","function(opt_comp) {","if (!this) throw TypeError();","if (typeof opt_comp !== 'function') {","opt_comp = undefined;","}","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp ? (opt_comp(this[j], this[j + 1]) > 0) :","(String(this[j]) > String(this[j + 1]))) {","var swap = this[j];","var hasSwap = j in this;","if ((j + 1) in this) {","this[j] = this[j + 1];","} else {","delete this[j];","}","if (hasSwap) {","this[j + 1] = swap;","} else {","delete this[j + 1];","}","changes++;","}","}","if (!changes) break;","}","return this;","}",");","createArrayMethod_('toLocaleString',","function() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var out = [];","for (var i = 0; i < len; i++) {","out[i] = (o[i] === null || o[i] === undefined) ? '' : o[i].toLocaleString();","}","return out.join(',');","}",");","})();","")},O.prototype.initString=function(g){var y=this,N;N=function(j){return j=arguments.length?O.nativeGlobal.String(j):"",y.calledWithNew()?(this.data=j,this):j},this.STRING=this.createNativeFunction(N,!0),this.setProperty(g,"String",this.STRING,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),O.NONENUMERABLE_DESCRIPTOR);for(var L=["charAt","charCodeAt","concat","indexOf","lastIndexOf","slice","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],k=0;k<L.length;k++)this.setNativeFunctionPrototype(this.STRING,L[k],String.prototype[L[k]]);N=function(j,U,K){U=y.pseudoToNative(U),K=y.pseudoToNative(K);try{return String(this).localeCompare(j,U,K)}catch(ne){y.throwException(y.ERROR,"localeCompare: "+ne.message)}},this.setNativeFunctionPrototype(this.STRING,"localeCompare",N),N=function(j,U,K){var ne=String(this);if(U=U?Number(U):void 0,y.isa(j,y.REGEXP)&&(j=j.data,y.maybeThrowRegExp(j,K),y.REGEXP_MODE===2)){if(O.vm){var ae={string:ne,separator:j,limit:U},ie="string.split(separator, limit)",ye=y.vmCall(ie,ae,j,K);ye!==O.REGEXP_TIMEOUT&&K(y.nativeToPseudo(ye))}else{var se=y.createWorker(),ue=y.regExpTimeout(j,se,K);se.onmessage=function(be){clearTimeout(ue),K(y.nativeToPseudo(be.data))},se.postMessage(["split",ne,j,U])}return}var ye=ne.split(j,U);K(y.nativeToPseudo(ye))},this.setAsyncFunctionPrototype(this.STRING,"split",N),N=function(j,U){var K=String(this);if(j=y.isa(j,y.REGEXP)?j.data:new RegExp(j),y.maybeThrowRegExp(j,U),y.REGEXP_MODE===2){if(O.vm){var ne={string:K,regexp:j},ae="string.match(regexp)",ue=y.vmCall(ae,ne,j,U);ue!==O.REGEXP_TIMEOUT&&U(ue&&y.matchToPseudo_(ue))}else{var ie=y.createWorker(),se=y.regExpTimeout(j,ie,U);ie.onmessage=function(ye){clearTimeout(se),U(ye.data&&y.matchToPseudo_(ye.data))},ie.postMessage(["match",K,j])}return}var ue=K.match(j);U(ue&&y.matchToPseudo_(ue))},this.setAsyncFunctionPrototype(this.STRING,"match",N),N=function(j,U){var K=String(this);if(y.isa(j,y.REGEXP)?j=j.data:j=new RegExp(j),y.maybeThrowRegExp(j,U),y.REGEXP_MODE===2){if(O.vm){var ne={string:K,regexp:j},ae="string.search(regexp)",ie=y.vmCall(ae,ne,j,U);ie!==O.REGEXP_TIMEOUT&&U(ie)}else{var se=y.createWorker(),ue=y.regExpTimeout(j,se,U);se.onmessage=function(ye){clearTimeout(ue),U(ye.data)},se.postMessage(["search",K,j])}return}U(K.search(j))},this.setAsyncFunctionPrototype(this.STRING,"search",N),N=function(j,U,K){var ne=String(this);if(U=String(U),y.isa(j,y.REGEXP)&&(j=j.data,y.maybeThrowRegExp(j,K),y.REGEXP_MODE===2)){if(O.vm){var ae={string:ne,substr:j,newSubstr:U},ie="string.replace(substr, newSubstr)",se=y.vmCall(ie,ae,j,K);se!==O.REGEXP_TIMEOUT&&K(se)}else{var ue=y.createWorker(),ye=y.regExpTimeout(j,ue,K);ue.onmessage=function(be){clearTimeout(ye),K(be.data)},ue.postMessage(["replace",ne,j,U])}return}K(ne.replace(j,U))},this.setAsyncFunctionPrototype(this.STRING,"replace",N),this.polyfills_.push("(function() {","var replace_ = String.prototype.replace;","String.prototype.replace = function replace(substr, newSubstr) {","if (typeof newSubstr !== 'function') {","return replace_.call(this, substr, newSubstr);","}","var str = this;","if (substr instanceof RegExp) {","var subs = [];","var m = substr.exec(str);","while (m) {","m.push(m.index, str);","var inject = newSubstr.apply(null, m);","subs.push([m.index, m[0].length, inject]);","m = substr.global ? substr.exec(str) : null;","}","for (var i = subs.length - 1; i >= 0; i--) {","str = str.substring(0, subs[i][0]) + subs[i][2] + ","str.substring(subs[i][0] + subs[i][1]);","}","} else {","var i = str.indexOf(substr);","if (i !== -1) {","var inject = newSubstr(str.substr(i, substr.length), i, str);","str = str.substring(0, i) + inject + ","str.substring(i + substr.length);","}","}","return str;","};","})();","")},O.prototype.initBoolean=function(g){var y=this,N;N=function(k){return k=O.nativeGlobal.Boolean(k),y.calledWithNew()?(this.data=k,this):k},this.BOOLEAN=this.createNativeFunction(N,!0),this.setProperty(g,"Boolean",this.BOOLEAN,O.NONENUMERABLE_DESCRIPTOR)},O.prototype.initNumber=function(g){var y=this,N;N=function(j){return j=arguments.length?O.nativeGlobal.Number(j):0,y.calledWithNew()?(this.data=j,this):j},this.NUMBER=this.createNativeFunction(N,!0),this.setProperty(g,"Number",this.NUMBER,O.NONENUMERABLE_DESCRIPTOR);for(var L=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],k=0;k<L.length;k++)this.setProperty(this.NUMBER,L[k],Number[L[k]],O.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);N=function(j){try{return Number(this).toExponential(j)}catch(U){y.throwException(y.ERROR,U.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",N),N=function(j){try{return Number(this).toFixed(j)}catch(U){y.throwException(y.ERROR,U.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",N),N=function(j){try{return Number(this).toPrecision(j)}catch(U){y.throwException(y.ERROR,U.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",N),N=function(j){try{return Number(this).toString(j)}catch(U){y.throwException(y.ERROR,U.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toString",N),N=function(j,U){j=j?y.pseudoToNative(j):void 0,U=U?y.pseudoToNative(U):void 0;try{return Number(this).toLocaleString(j,U)}catch(K){y.throwException(y.ERROR,"toLocaleString: "+K.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",N)},O.prototype.initDate=function(g){var y=this,N;N=function(j,U){if(!y.calledWithNew())return O.nativeGlobal.Date();var K=[null].concat(Array.from(arguments));return this.data=new(Function.prototype.bind.apply(O.nativeGlobal.Date,K)),this},this.DATE=this.createNativeFunction(N,!0),this.DATE_PROTO=this.DATE.properties.prototype,this.setProperty(g,"Date",this.DATE,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),O.NONENUMERABLE_DESCRIPTOR);for(var L=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],k=0;k<L.length;k++)N=function(D){return function(j){var U=this.data;U instanceof Date||y.throwException(y.TYPE_ERROR,D+" not called on a Date");for(var K=[],ne=0;ne<arguments.length;ne++)K[ne]=y.pseudoToNative(arguments[ne]);return U[D].apply(U,K)}}(L[k]),this.setNativeFunctionPrototype(this.DATE,L[k],N);N=function(){try{return this.data.toISOString()}catch(j){y.throwException(y.RANGE_ERROR,"toISOString: "+j.message)}},this.setNativeFunctionPrototype(this.DATE,"toISOString",N)},O.prototype.initRegExp=function(g){var y=this,N;N=function(k,D){if(y.calledWithNew())var j=this;else{if(D===void 0&&y.isa(k,y.REGEXP))return k;var j=y.createObjectProto(y.REGEXP_PROTO)}k=k===void 0?"":String(k),D=D?String(D):"",/^[gmi]*$/.test(D)||y.throwException(y.SYNTAX_ERROR,"Invalid regexp flag: "+D);try{var U=new O.nativeGlobal.RegExp(k,D)}catch(K){y.throwException(y.SYNTAX_ERROR,K.message)}return y.populateRegExp(j,U),j},this.REGEXP=this.createNativeFunction(N,!0),this.REGEXP_PROTO=this.REGEXP.properties.prototype,this.setProperty(g,"RegExp",this.REGEXP,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"global",void 0,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source","(?:)",O.READONLY_NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("Object.defineProperty(RegExp.prototype, 'test',","{configurable: true, writable: true, value:","function test(str) {","return !!this.exec(str);","}","});"),N=function(k,D){var j=this.data;if(k=String(k),j.lastIndex=Number(y.getProperty(this,"lastIndex")),y.maybeThrowRegExp(j,D),y.REGEXP_MODE===2){if(O.vm){var U={string:k,regexp:j},K="regexp.exec(string)",se=y.vmCall(K,U,j,D);se!==O.REGEXP_TIMEOUT&&(y.setProperty(this,"lastIndex",j.lastIndex),D(y.matchToPseudo_(se)))}else{var ne=y.createWorker(),ae=y.regExpTimeout(j,ne,D),ie=this;ne.onmessage=function(ue){clearTimeout(ae),y.setProperty(ie,"lastIndex",ue.data[1]),D(y.matchToPseudo_(ue.data[0]))},ne.postMessage(["exec",j,j.lastIndex,k])}return}var se=j.exec(k);y.setProperty(this,"lastIndex",j.lastIndex),D(y.matchToPseudo_(se))},this.setAsyncFunctionPrototype(this.REGEXP,"exec",N)},O.prototype.matchToPseudo_=function(g){if(g){for(var y=Object.getOwnPropertyNames(g),N=0;N<y.length;N++){var L=y[N];isNaN(Number(L))&&L!=="length"&&L!=="input"&&L!=="index"&&delete g[L]}return this.nativeToPseudo(g)}return null},O.prototype.initError=function(g){var y=this;this.ERROR=this.createNativeFunction(function(k){if(y.calledWithNew())var D=this;else var D=y.createObject(y.ERROR);return y.populateError(D,k),D},!0),this.setProperty(g,"Error",this.ERROR,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"message","",O.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name","Error",O.NONENUMERABLE_DESCRIPTOR);var N=function(L){var k=y.createNativeFunction(function(D){if(y.calledWithNew())var j=this;else var j=y.createObject(k);return y.populateError(j,D),j},!0);return y.setProperty(k,"prototype",y.createObject(y.ERROR),O.NONENUMERABLE_DESCRIPTOR),y.setProperty(k.properties.prototype,"name",L,O.NONENUMERABLE_DESCRIPTOR),y.setProperty(g,L,k,O.NONENUMERABLE_DESCRIPTOR),k};this.EVAL_ERROR=N("EvalError"),this.RANGE_ERROR=N("RangeError"),this.REFERENCE_ERROR=N("ReferenceError"),this.SYNTAX_ERROR=N("SyntaxError"),this.TYPE_ERROR=N("TypeError"),this.URI_ERROR=N("URIError")},O.prototype.initMath=function(g){var y=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(g,"Math",y,O.NONENUMERABLE_DESCRIPTOR);for(var N=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],L=0;L<N.length;L++)this.setProperty(y,N[L],Math[N[L]],O.READONLY_NONENUMERABLE_DESCRIPTOR);for(var k=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"],L=0;L<k.length;L++)this.setProperty(y,k[L],this.createNativeFunction(Math[k[L]],!1),O.NONENUMERABLE_DESCRIPTOR)},O.prototype.initJSON=function(g){var y,N=this,L=N.createObjectProto(this.OBJECT_PROTO);this.setProperty(g,"JSON",L,O.NONENUMERABLE_DESCRIPTOR),y=function(D){try{var j=JSON.parse(String(D))}catch(U){N.throwException(N.SYNTAX_ERROR,U.message)}return N.nativeToPseudo(j)},this.setProperty(L,"parse",this.createNativeFunction(y,!1)),y=function(D,j,U){j&&j.class==="Function"?N.throwException(N.TYPE_ERROR,"Function replacer on JSON.stringify not supported"):j&&j.class==="Array"?(j=N.pseudoToNative(j),j=j.filter(function(ae){return typeof ae=="string"||typeof ae=="number"})):j=null,typeof U!="string"&&typeof U!="number"&&(U=void 0);var K=N.pseudoToNative(D);try{var ne=JSON.stringify(K,j,U)}catch(ae){N.throwException(N.TYPE_ERROR,ae.message)}return ne},this.setProperty(L,"stringify",this.createNativeFunction(y,!1))},O.prototype.isa=function(g,y){if(g==null||!y)return!1;var N=y.properties.prototype;if(g===N)return!0;for(g=this.getPrototype(g);g;){if(g===N)return!0;g=g.proto}return!1},O.prototype.populateRegExp=function(g,y){g.data=new RegExp(y.source,y.flags),this.setProperty(g,"lastIndex",y.lastIndex,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"source",y.source,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"global",y.global,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"ignoreCase",y.ignoreCase,O.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(g,"multiline",y.multiline,O.READONLY_NONENUMERABLE_DESCRIPTOR)},O.prototype.populateError=function(g,y){y&&this.setProperty(g,"message",String(y),O.NONENUMERABLE_DESCRIPTOR);for(var N=[],L=this.stateStack.length-1;L>=0;L--){var k=this.stateStack[L],D=k.node;if(D.type==="CallExpression"){var j=k.func_;j&&N.length&&(N[N.length-1].datumName=this.getProperty(j,"name"))}D.loc&&(!N.length||D.type==="CallExpression")&&N.push({datumLoc:D.loc})}for(var U=String(this.getProperty(g,"name")),K=String(this.getProperty(g,"message")),ne=U+": "+K+`
`,L=0;L<N.length;L++){var ae=N[L].datumLoc,ie=N[L].datumName,se=ae.source+":"+ae.start.line+":"+ae.start.column;ie?ne+="  at "+ie+" ("+se+`)
`:ne+="  at "+se+`
`}this.setProperty(g,"stack",ne.trim(),O.NONENUMERABLE_DESCRIPTOR)},O.prototype.createWorker=function(){var g=this.createWorker.blob_;return g||(g=new Blob([O.WORKER_CODE.join(`
`)],{type:"application/javascript"}),this.createWorker.blob_=g),new Worker(URL.createObjectURL(g))},O.prototype.vmCall=function(g,y,N,L){var k={timeout:this.REGEXP_THREAD_TIMEOUT};try{return O.vm.runInNewContext(g,y,k)}catch{L(null),this.throwException(this.ERROR,"RegExp Timeout: "+N)}return O.REGEXP_TIMEOUT},O.prototype.maybeThrowRegExp=function(g,y){var N;if(this.REGEXP_MODE===0)N=!1;else if(this.REGEXP_MODE===1)N=!0;else if(O.vm)N=!0;else if(typeof Worker=="function"&&typeof URL=="function")N=!0;else{try{O.vm=re("vm")}catch{}N=!!O.vm}N||(y(null),this.throwException(this.ERROR,"Regular expressions not supported: "+g))},O.prototype.regExpTimeout=function(g,y,N){var L=this;return setTimeout(function(){y.terminate(),N(null);try{L.throwException(L.ERROR,"RegExp Timeout: "+g)}catch{}},this.REGEXP_THREAD_TIMEOUT)},O.prototype.createObject=function(g){return this.createObjectProto(g&&g.properties.prototype)},O.prototype.createObjectProto=function(g){if(typeof g!="object")throw Error("Non object prototype");var y=new O.Object(g);return this.isa(y,this.ERROR)&&(y.class="Error"),y},O.prototype.createArray=function(){var g=this.createObjectProto(this.ARRAY_PROTO);return this.setProperty(g,"length",0,{configurable:!1,enumerable:!1,writable:!0}),g.class="Array",g},O.prototype.createFunctionBase_=function(g,y){var N=this.createObjectProto(this.FUNCTION_PROTO);if(y){var L=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(N,"prototype",L,O.NONENUMERABLE_DESCRIPTOR),this.setProperty(L,"constructor",N,O.NONENUMERABLE_DESCRIPTOR)}else N.illegalConstructor=!0;return this.setProperty(N,"length",g,O.READONLY_NONENUMERABLE_DESCRIPTOR),N.class="Function",N},O.prototype.createFunction=function(g,y,N){var L=this.createFunctionBase_(g.params.length,!0);L.parentScope=y,L.node=g;var k=g.id?String(g.id.name):N||"";return this.setProperty(L,"name",k,O.READONLY_NONENUMERABLE_DESCRIPTOR),L},O.prototype.createNativeFunction=function(g,y){var N=this.createFunctionBase_(g.length,y);return N.nativeFunc=g,g.id=this.functionCounter_++,this.setProperty(N,"name",g.name,O.READONLY_NONENUMERABLE_DESCRIPTOR),N},O.prototype.createAsyncFunction=function(g){var y=this.createFunctionBase_(g.length,!0);return y.asyncFunc=g,g.id=this.functionCounter_++,this.setProperty(y,"name",g.name,O.READONLY_NONENUMERABLE_DESCRIPTOR),y},O.prototype.nativeToPseudo=function(g,y){if(g==null||g===!0||g===!1||typeof g=="string"||typeof g=="number")return g;if(g instanceof O.Object)throw Error("Object is already pseudo");var N=y||{pseudo:[],native:[]},L=N.native.indexOf(g);if(L!==-1)return N.pseudo[L];if(N.native.push(g),g instanceof RegExp){var k=this.createObjectProto(this.REGEXP_PROTO);return this.populateRegExp(k,g),N.pseudo.push(k),k}if(g instanceof Date){var D=this.createObjectProto(this.DATE_PROTO);return D.data=new Date(g.valueOf()),N.pseudo.push(D),D}var j;if(g instanceof Number?j=this.createObject(this.NUMBER):g instanceof String?j=this.createObject(this.STRING):g instanceof Boolean&&(j=this.createObject(this.BOOLEAN)),j)return j.data=g.valueOf(),N.pseudo.push(j),j;if(typeof g=="function"){var U=this,K=function(){var ue=Array.prototype.slice.call(arguments).map(function(be){return U.pseudoToNative(be)}),ye=g.apply(U,ue);return U.nativeToPseudo(ye)},ne=Object.getOwnPropertyDescriptor(g,"prototype"),ae=this.createNativeFunction(K,!!ne);return N.pseudo.push(ae),ae}var ie;Array.isArray(g)?ie=this.createArray():ie=this.createObjectProto(this.OBJECT_PROTO),N.pseudo.push(ie);for(var se in g)this.setProperty(ie,se,this.nativeToPseudo(g[se],N));return ie},O.prototype.pseudoToNative=function(g,y){if(g==null||g===!0||g===!1||typeof g=="string"||typeof g=="number")return g;if(!(g instanceof O.Object))throw Error("Object is not pseudo");var N=y||{pseudo:[],native:[]},L=N.pseudo.indexOf(g);if(L!==-1)return N.native[L];if(N.pseudo.push(g),this.isa(g,this.REGEXP)){var k=new RegExp(g.data.source,g.data.flags);return k.lastIndex=g.data.lastIndex,N.native.push(k),k}if(this.isa(g,this.DATE)){var D=new Date(g.data.valueOf());return N.native.push(D),D}if(this.isa(g,this.NUMBER)||this.isa(g,this.STRING)||this.isa(g,this.BOOLEAN)){var j=Object(g.data);return N.native.push(j),j}var U=this.isa(g,this.ARRAY)?[]:{};N.native.push(U);var K;for(var ne in g.properties)K=this.pseudoToNative(g.properties[ne],N),Object.defineProperty(U,ne,{value:K,writable:!0,enumerable:!0,configurable:!0});return U},O.prototype.getPrototype=function(g){switch(typeof g){case"number":return this.NUMBER.properties.prototype;case"boolean":return this.BOOLEAN.properties.prototype;case"string":return this.STRING.properties.prototype}return g?g.proto:null},O.prototype.getProperty=function(g,y){if(this.getterStep_)throw Error("Getter not supported in that context");if(y=String(y),g==null&&this.throwException(this.TYPE_ERROR,"Cannot read property '"+y+"' of "+g),typeof g=="object"&&!(g instanceof O.Object))throw TypeError("Expecting native value or pseudo object");if(y==="length"){if(this.isa(g,this.STRING))return String(g).length}else if(y.charCodeAt(0)<64&&this.isa(g,this.STRING)){var N=O.legalArrayIndex(y);if(!isNaN(N)&&N<String(g).length)return String(g)[N]}do if(g.properties&&y in g.properties){var L=g.getter[y];return L?(this.getterStep_=!0,L):g.properties[y]}while(g=this.getPrototype(g))},O.prototype.hasProperty=function(g,y){if(!(g instanceof O.Object))throw TypeError("Primitive data type has no properties");if(y=String(y),y==="length"&&this.isa(g,this.STRING))return!0;if(this.isa(g,this.STRING)){var N=O.legalArrayIndex(y);if(!isNaN(N)&&N<String(g).length)return!0}do if(g.properties&&y in g.properties)return!0;while(g=this.getPrototype(g));return!1},O.prototype.setProperty=function(g,y,N,L){if(this.setterStep_)throw Error("Setter not supported in that context");if(y=String(y),g==null&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+y+"' of "+g),typeof g=="object"&&!(g instanceof O.Object))throw TypeError("Expecting native value or pseudo object");L&&("get"in L||"set"in L)&&("value"in L||"writable"in L)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var k=!this.stateStack||this.getScope().strict;if(!(g instanceof O.Object)){k&&this.throwException(this.TYPE_ERROR,"Can't create property '"+y+"' on '"+g+"'");return}if(this.isa(g,this.STRING)){var D=O.legalArrayIndex(y);if(y==="length"||!isNaN(D)&&D<String(g).length){k&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+y+"' of String '"+g.data+"'");return}}if(g.class==="Array"){var j=g.properties.length,U;if(y==="length"){if(L){if(!("value"in L))return;N=L.value}if(N=O.legalArrayLength(N),isNaN(N)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),N<j)for(U in g.properties)U=O.legalArrayIndex(U),!isNaN(U)&&N<=U&&delete g.properties[U]}else isNaN(U=O.legalArrayIndex(y))||(g.properties.length=Math.max(j,U+1))}if(g.preventExtensions&&!(y in g.properties)){k&&this.throwException(this.TYPE_ERROR,"Can't add property '"+y+"', object is not extensible");return}if(L){var K={};"get"in L&&L.get&&(g.getter[y]=L.get,K.get=this.setProperty.placeholderGet_),"set"in L&&L.set&&(g.setter[y]=L.set,K.set=this.setProperty.placeholderSet_),"configurable"in L&&(K.configurable=L.configurable),"enumerable"in L&&(K.enumerable=L.enumerable),"writable"in L&&(K.writable=L.writable,delete g.getter[y],delete g.setter[y]),"value"in L?(K.value=L.value,delete g.getter[y],delete g.setter[y]):N!==O.VALUE_IN_DESCRIPTOR&&(K.value=N,delete g.getter[y],delete g.setter[y]);try{Object.defineProperty(g.properties,y,K)}catch{this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+y)}"get"in L&&!L.get&&delete g.getter[y],"set"in L&&!L.set&&delete g.setter[y]}else{if(N===O.VALUE_IN_DESCRIPTOR)throw ReferenceError("Value not specified");for(var ne=g;!(y in ne.properties);)if(ne=this.getPrototype(ne),!ne){ne=g;break}if(ne.setter&&ne.setter[y])return this.setterStep_=!0,ne.setter[y];if(ne.getter&&ne.getter[y])k&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+y+"' of object '"+g+"' which only has a getter");else try{g.properties[y]=N}catch{k&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+y+"' of object '"+g+"'")}}},O.prototype.setProperty.placeholderGet_=function(){throw Error("Placeholder getter")},O.prototype.setProperty.placeholderSet_=function(){throw Error("Placeholder setter")},O.prototype.setNativeFunctionPrototype=function(g,y,N){this.setProperty(g.properties.prototype,y,this.createNativeFunction(N,!1),O.NONENUMERABLE_DESCRIPTOR)},O.prototype.setAsyncFunctionPrototype=function(g,y,N){this.setProperty(g.properties.prototype,y,this.createAsyncFunction(N),O.NONENUMERABLE_DESCRIPTOR)},O.prototype.getScope=function(){var g=this.stateStack[this.stateStack.length-1].scope;if(!g)throw Error("No scope found");return g},O.prototype.createScope=function(g,y){var N=!1;if(y&&y.strict)N=!0;else{var L=g.body&&g.body[0];L&&L.expression&&L.expression.type==="Literal"&&L.expression.value==="use strict"&&(N=!0)}var k=this.createObjectProto(null),D=new O.Scope(y,N,k);return y||this.initGlobal(D.object),this.populateScope_(g,D),D},O.prototype.createSpecialScope=function(g,y){if(!g)throw Error("parentScope required");var N=y||this.createObjectProto(null);return new O.Scope(g,g.strict,N)},O.prototype.getValueFromScope=function(g){for(var y=this.getScope();y&&y!==this.globalScope;){if(g in y.object.properties)return y.object.properties[g];y=y.parentScope}if(y===this.globalScope&&this.hasProperty(y.object,g))return this.getProperty(y.object,g);var N=this.stateStack[this.stateStack.length-1].node;N.type==="UnaryExpression"&&N.operator==="typeof"||this.throwException(this.REFERENCE_ERROR,g+" is not defined")},O.prototype.setValueToScope=function(g,y){for(var N=this.getScope(),L=N.strict;N&&N!==this.globalScope;){if(g in N.object.properties){try{N.object.properties[g]=y}catch{L&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only variable '"+g+"'")}return}N=N.parentScope}if(N===this.globalScope&&(!L||this.hasProperty(N.object,g)))return this.setProperty(N.object,g,y);this.throwException(this.REFERENCE_ERROR,g+" is not defined")},O.prototype.populateScope_=function(g,y){var N;if(g.variableCache_)N=g.variableCache_;else{switch(N=Object.create(null),g.type){case"VariableDeclaration":for(var L=0;L<g.declarations.length;L++)N[g.declarations[L].id.name]=!0;break;case"FunctionDeclaration":N[g.id.name]=g;break;case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"Program":case"SwitchCase":case"SwitchStatement":case"TryStatement":case"WithStatement":case"WhileStatement":var k=g.constructor;for(var D in g)if(g[D]!==g.loc){var j=g[D];if(j&&typeof j=="object"){var U;if(Array.isArray(j)){for(var L=0;L<j.length;L++)if(j[L]&&j[L].constructor===k){U=this.populateScope_(j[L],y);for(var D in U)N[D]=U[D]}}else if(j.constructor===k){U=this.populateScope_(j,y);for(var D in U)N[D]=U[D]}}}}g.variableCache_=N}for(var D in N)N[D]===!0?this.setProperty(y.object,D,void 0,O.VARIABLE_DESCRIPTOR):this.setProperty(y.object,D,this.createFunction(N[D],y),O.VARIABLE_DESCRIPTOR);return N},O.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor},O.prototype.getValue=function(g){return g[0]===O.SCOPE_REFERENCE?this.getValueFromScope(g[1]):this.getProperty(g[0],g[1])},O.prototype.setValue=function(g,y){return g[0]===O.SCOPE_REFERENCE?this.setValueToScope(g[1],y):this.setProperty(g[0],g[1],y)},O.prototype.throwException=function(g,y){if(!this.globalScope)throw y===void 0?g:y;if(y===void 0||!(g instanceof O.Object))var N=g;else{var N=this.createObject(g);this.populateError(N,y)}throw this.unwind(O.Completion.THROW,N,void 0),O.STEP_ERROR},O.prototype.unwind=function(g,y,N){if(g===O.Completion.NORMAL)throw TypeError("Should not unwind for NORMAL completions");e:for(var L=this.stateStack;L.length>0;L.pop()){var k=L[L.length-1];switch(k.node.type){case"TryStatement":k.cv={type:g,value:y,label:N};return;case"CallExpression":case"NewExpression":if(g===O.Completion.RETURN){k.value=y;return}else if(g===O.Completion.BREAK||g===O.Completion.CONTINUE)throw Error("Unsyntactic break/continue not rejected by Acorn");break;case"Program":if(g===O.Completion.RETURN)return;k.done=!0;break e}if(g===O.Completion.BREAK){if(N?k.labels&&k.labels.indexOf(N)!==-1:k.isLoop||k.isSwitch){L.pop();return}}else if(g===O.Completion.CONTINUE&&(N?k.labels&&k.labels.indexOf(N)!==-1:k.isLoop))return}var D;if(this.isa(y,this.ERROR)){var j={EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError},U=String(this.getProperty(y,"name")),K=this.getProperty(y,"message").valueOf(),ne=j[U]||Error;D=ne(K),D.stack=String(this.getProperty(y,"stack"))}else D=String(y);throw this.value=D,D},O.prototype.nodeSummary=function(g){switch(g.type){case"ArrayExpression":return"[...]";case"BinaryExpression":case"LogicalExpression":return this.nodeSummary(g.left)+" "+g.operator+" "+this.nodeSummary(g.right);case"CallExpression":return this.nodeSummary(g.callee)+"(...)";case"ConditionalExpression":return this.nodeSummary(g.test)+" ? "+this.nodeSummary(g.consequent)+" : "+this.nodeSummary(g.alternate);case"Identifier":return g.name;case"Literal":return g.raw;case"MemberExpression":var y=this.nodeSummary(g.object),N=this.nodeSummary(g.property);return g.computed?y+"["+N+"]":y+"."+N;case"NewExpression":return"new "+this.nodeSummary(g.callee)+"(...)";case"ObjectExpression":return"{...}";case"ThisExpression":return"this";case"UnaryExpression":return g.operator+" "+this.nodeSummary(g.argument);case"UpdateExpression":var L=this.nodeSummary(g.argument);return g.prefix?g.operator+L:L+g.operator}return"???"},O.prototype.createTask_=function(g,y){var N=this.stateStack[this.stateStack.length-1],L=Array.from(y),k=L.shift(),D=Math.max(Number(L.shift()||0),0),j=this.newNode(),U,K,ne;if(k instanceof O.Object&&k.class==="Function")K=k,j.type="CallExpression",U=N.scope;else{try{ne=this.parse_(String(k),"taskCode"+this.taskCodeNumber_++)}catch(ye){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+ye.message)}j.type="EvalProgram_",j.body=ne.body;var ae=N.node.arguments[0],ie=ae?ae.start:void 0,se=ae?ae.end:void 0;O.stripLocations_(j,ie,se),U=this.globalScope,L.length=0}var ue=new O.Task(K,L,U,j,g?D:-1);return this.scheduleTask_(ue,D),ue.pid},O.prototype.scheduleTask_=function(g,y){g.time=Date.now()+y,this.tasks.push(g),this.tasks.sort(function(N,L){return N.time-L.time})},O.prototype.deleteTask_=function(g){for(var y=0;y<this.tasks.length;y++)if(this.tasks[y].pid==g){this.tasks.splice(y,1);break}},O.prototype.nextTask_=function(){var g=this.tasks[0];if(!g||g.time>Date.now())return null;this.tasks.shift(),g.interval>=0&&this.scheduleTask_(g,g.interval);var y=new O.State(g.node,g.scope);return g.functionRef&&(y.doneCallee_=2,y.funcThis_=this.globalObject,y.func_=g.functionRef,y.doneArgs_=!0,y.arguments_=g.argsArray),y},O.prototype.createGetter_=function(g,y){if(!this.getterStep_)throw Error("Unexpected call to createGetter");this.getterStep_=!1;var N=Array.isArray(y)?y[0]:y,L=this.newNode();L.type="CallExpression";var k=new O.State(L,this.stateStack[this.stateStack.length-1].scope);return k.doneCallee_=2,k.funcThis_=N,k.func_=g,k.doneArgs_=!0,k.arguments_=[],k},O.prototype.createSetter_=function(g,y,N){if(!this.setterStep_)throw Error("Unexpected call to createSetter");this.setterStep_=!1;var L=Array.isArray(y)?y[0]:this.globalObject,k=this.newNode();k.type="CallExpression";var D=new O.State(k,this.stateStack[this.stateStack.length-1].scope);return D.doneCallee_=2,D.funcThis_=L,D.func_=g,D.doneArgs_=!0,D.arguments_=[N],D},O.prototype.boxThis_=function(g){if(g==null)return this.globalObject;if(!(g instanceof O.Object)){var y=this.createObjectProto(this.getPrototype(g));return y.data=g,y}return g},O.prototype.getGlobalScope=function(){return this.globalScope},O.prototype.setGlobalScope=function(g){this.globalScope=g,this.stateStack[0].scope=g},O.prototype.getStateStack=function(){return this.stateStack},O.prototype.setStateStack=function(g){this.stateStack=g},O.Value,O.State=function(g,y){this.node=g,this.scope=y},O.Scope=function(g,y,N){this.parentScope=g,this.strict=y,this.object=N},O.Object=function(g){this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.proto=g},O.Object.prototype.proto=null,O.Object.prototype.class="Object",O.Object.prototype.data=null,O.Object.prototype.toString=function(){if(!O.currentInterpreter_)return"[object Interpreter.Object]";if(!(this instanceof O.Object))return String(this);if(this.class==="Array"){var g=O.toStringCycles_;g.push(this);try{var y=[],N=this.properties.length,L=!1;N>1024&&(N=1e3,L=!0);for(var k=0;k<N;k++){var D=this.properties[k];y[k]=D instanceof O.Object&&g.indexOf(D)!==-1?"...":D}L&&y.push("...")}finally{g.pop()}return y.join(",")}if(this.class==="Error"){var g=O.toStringCycles_;if(g.indexOf(this)!==-1)return"[object Error]";var j,U,K=this;do if("name"in K.properties){j=K.properties.name;break}while(K=K.proto);K=this;do if("message"in K.properties){U=K.properties.message;break}while(K=K.proto);g.push(this);try{j=j&&String(j),U=U&&String(U)}finally{g.pop()}return U?j+": "+U:String(j)}return this.data!==null?String(this.data):"[object "+this.class+"]"},O.Object.prototype.valueOf=function(){return O.currentInterpreter_?this.data===void 0||this.data===null||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data:this},O.Task=function(g,y,N,L,k){this.functionRef=g,this.argsArray=y,this.scope=N,this.node=L,this.interval=k,this.pid=++O.Task.pid,this.time=0},O.Task.pid=0,O.prototype.stepArrayExpression=function(g,y,N){var L=N.elements,k=y.n_||0;for(y.array_?(this.setProperty(y.array_,k,y.value),k++):(y.array_=this.createArray(),y.array_.properties.length=L.length);k<L.length;){if(L[k])return y.n_=k,new O.State(L[k],y.scope);k++}g.pop(),g[g.length-1].value=y.array_},O.prototype.stepAssignmentExpression=function(g,y,N){if(!y.doneLeft_){y.doneLeft_=!0;var L=new O.State(N.left,y.scope);return L.components=!0,L}if(!y.doneRight_){if(y.leftReference_||(y.leftReference_=y.value),y.doneGetter_&&(y.leftValue_=y.value),!y.doneGetter_&&N.operator!=="="){var k=this.getValue(y.leftReference_);if(y.leftValue_=k,this.getterStep_){y.doneGetter_=!0;var D=k;return this.createGetter_(D,y.leftReference_)}}return y.doneRight_=!0,N.operator==="="&&N.left.type==="Identifier"&&(y.destinationName=N.left.name),new O.State(N.right,y.scope)}if(y.doneSetter_){g.pop(),g[g.length-1].value=y.setterValue_;return}var j=y.leftValue_,U=y.value;switch(N.operator){case"=":j=U;break;case"+=":j+=U;break;case"-=":j-=U;break;case"*=":j*=U;break;case"/=":j/=U;break;case"%=":j%=U;break;case"<<=":j<<=U;break;case">>=":j>>=U;break;case">>>=":j>>>=U;break;case"&=":j&=U;break;case"^=":j^=U;break;case"|=":j|=U;break;default:throw SyntaxError("Unknown assignment expression: "+N.operator)}var K=this.setValue(y.leftReference_,j);if(K)return y.doneSetter_=!0,y.setterValue_=j,this.createSetter_(K,y.leftReference_,j);g.pop(),g[g.length-1].value=j},O.prototype.stepBinaryExpression=function(g,y,N){if(!y.doneLeft_)return y.doneLeft_=!0,new O.State(N.left,y.scope);if(!y.doneRight_)return y.doneRight_=!0,y.leftValue_=y.value,new O.State(N.right,y.scope);g.pop();var L=y.leftValue_,k=y.value,D;switch(N.operator){case"==":D=L==k;break;case"!=":D=L!=k;break;case"===":D=L===k;break;case"!==":D=L!==k;break;case">":D=L>k;break;case">=":D=L>=k;break;case"<":D=L<k;break;case"<=":D=L<=k;break;case"+":D=L+k;break;case"-":D=L-k;break;case"*":D=L*k;break;case"/":D=L/k;break;case"%":D=L%k;break;case"&":D=L&k;break;case"|":D=L|k;break;case"^":D=L^k;break;case"<<":D=L<<k;break;case">>":D=L>>k;break;case">>>":D=L>>>k;break;case"in":k instanceof O.Object||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+k+"'"),D=this.hasProperty(k,L);break;case"instanceof":this.isa(k,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"'instanceof' expects an object, not '"+k+"'"),D=L instanceof O.Object?this.isa(L,k):!1;break;default:throw SyntaxError("Unknown binary operator: "+N.operator)}g[g.length-1].value=D},O.prototype.stepBlockStatement=function(g,y,N){var L=y.n_||0,k=N.body[L];if(k)return y.n_=L+1,new O.State(k,y.scope);g.pop()},O.prototype.stepBreakStatement=function(g,y,N){var L=N.label&&N.label.name;this.unwind(O.Completion.BREAK,void 0,L)},O.prototype.evalCodeNumber_=0,O.prototype.stepCallExpression=function(g,y,N){if(!y.doneCallee_){y.doneCallee_=1;var L=new O.State(N.callee,y.scope);return L.components=!0,L}if(y.doneCallee_===1){y.doneCallee_=2;var k=y.value;if(Array.isArray(k)){if(y.func_=this.getValue(k),k[0]===O.SCOPE_REFERENCE?y.directEval_=k[1]==="eval":y.funcThis_=k[0],k=y.func_,this.getterStep_)return y.doneCallee_=1,this.createGetter_(k,y.value)}else y.func_=k;y.arguments_=[],y.n_=0}var k=y.func_;if(!y.doneArgs_){if(y.n_!==0&&y.arguments_.push(y.value),N.arguments[y.n_])return new O.State(N.arguments[y.n_++],y.scope);if(N.type==="NewExpression"){if((!(k instanceof O.Object)||k.illegalConstructor)&&this.throwException(this.TYPE_ERROR,this.nodeSummary(N.callee)+" is not a constructor"),k===this.ARRAY)y.funcThis_=this.createArray();else{var D=k.properties.prototype;(typeof D!="object"||D===null)&&(D=this.OBJECT_PROTO),y.funcThis_=this.createObjectProto(D)}y.isConstructor=!0}y.doneArgs_=!0}if(y.doneExec_)g.pop(),y.isConstructor&&typeof y.value!="object"?g[g.length-1].value=y.funcThis_:g[g.length-1].value=y.value;else{y.doneExec_=!0,k instanceof O.Object||this.throwException(this.TYPE_ERROR,this.nodeSummary(N.callee)+" is not a function");var j=k.node;if(j){for(var U=this.createScope(j.body,k.parentScope),K=this.createArray(),ne=0;ne<y.arguments_.length;ne++)this.setProperty(K,ne,y.arguments_[ne]);this.setProperty(U.object,"arguments",K);for(var ne=0;ne<j.params.length;ne++){var ae=j.params[ne].name,ie=y.arguments_.length>ne?y.arguments_[ne]:void 0;this.setProperty(U.object,ae,ie)}return U.strict||(y.funcThis_=this.boxThis_(y.funcThis_)),this.setProperty(U.object,"this",y.funcThis_,O.READONLY_DESCRIPTOR),y.value=void 0,new O.State(j.body,U)}else if(k.eval){var se=y.arguments_[0];if(typeof se!="string")y.value=se;else{try{var ue=this.parse_(String(se),"eval"+this.evalCodeNumber_++)}catch(me){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+me.message)}var ye=this.newNode();ye.type="EvalProgram_",ye.body=ue.body,O.stripLocations_(ye,N.start,N.end);var U=y.directEval_?y.scope:this.globalScope;return U.strict?U=this.createScope(ue,U):this.populateScope_(ue,U),this.value=void 0,new O.State(ye,U)}}else if(k.nativeFunc)y.scope.strict||(y.funcThis_=this.boxThis_(y.funcThis_)),y.value=k.nativeFunc.apply(y.funcThis_,y.arguments_);else if(k.asyncFunc){var be=this,Qe=function($e){y.value=$e,be.paused_=!1},Pe=k.asyncFunc.length-1,ke=y.arguments_.concat(new Array(Pe)).slice(0,Pe);ke.push(Qe),this.paused_=!0,y.scope.strict||(y.funcThis_=this.boxThis_(y.funcThis_)),k.asyncFunc.apply(y.funcThis_,ke);return}else this.throwException(this.TYPE_ERROR,this.nodeSummary(N.callee)+" is not callable")}},O.prototype.stepConditionalExpression=function(g,y,N){var L=y.mode_||0;if(L===0)return y.mode_=1,new O.State(N.test,y.scope);if(L===1){y.mode_=2;var k=!!y.value;if(k&&N.consequent)return new O.State(N.consequent,y.scope);if(!k&&N.alternate)return new O.State(N.alternate,y.scope);this.value=void 0}g.pop(),N.type==="ConditionalExpression"&&(g[g.length-1].value=y.value)},O.prototype.stepContinueStatement=function(g,y,N){var L=N.label&&N.label.name;this.unwind(O.Completion.CONTINUE,void 0,L)},O.prototype.stepDebuggerStatement=function(g,y,N){g.pop()},O.prototype.stepDoWhileStatement=function(g,y,N){if(N.type==="DoWhileStatement"&&y.test_===void 0&&(y.value=!0,y.test_=!0),!y.test_)return y.test_=!0,new O.State(N.test,y.scope);if(!y.value)g.pop();else if(N.body)return y.test_=!1,y.isLoop=!0,new O.State(N.body,y.scope)},O.prototype.stepEmptyStatement=function(g,y,N){g.pop()},O.prototype.stepEvalProgram_=function(g,y,N){var L=y.n_||0,k=N.body[L];if(k)return y.n_=L+1,new O.State(k,y.scope);g.pop(),g[g.length-1].value=this.value},O.prototype.stepExpressionStatement=function(g,y,N){if(!y.done_)return this.value=void 0,y.done_=!0,new O.State(N.expression,y.scope);g.pop(),this.value=y.value},O.prototype.stepForInStatement=function(g,y,N){if(!y.doneInit_&&(y.doneInit_=!0,N.left.declarations&&N.left.declarations[0].init))return y.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer"),new O.State(N.left,y.scope);if(!y.doneObject_)return y.doneObject_=!0,y.variable_||(y.variable_=y.value),new O.State(N.right,y.scope);if(y.isLoop||(y.isLoop=!0,y.object_=y.value,y.visited_=Object.create(null)),y.name_===void 0)e:for(;;){if(y.object_ instanceof O.Object)for(y.props_||(y.props_=Object.getOwnPropertyNames(y.object_.properties));;){var L=y.props_.shift();if(L===void 0)break;if(Object.prototype.hasOwnProperty.call(y.object_.properties,L)&&!y.visited_[L]&&(y.visited_[L]=!0,!!Object.prototype.propertyIsEnumerable.call(y.object_.properties,L))){y.name_=L;break e}}else if(y.object_!==null&&y.object_!==void 0)for(y.props_||(y.props_=Object.getOwnPropertyNames(y.object_));;){var L=y.props_.shift();if(L===void 0)break;if(y.visited_[L]=!0,!!Object.prototype.propertyIsEnumerable.call(y.object_,L)){y.name_=L;break e}}if(y.object_=this.getPrototype(y.object_),y.props_=null,y.object_===null){g.pop();return}}if(!y.doneVariable_){y.doneVariable_=!0;var k=N.left;if(k.type==="VariableDeclaration")y.variable_=[O.SCOPE_REFERENCE,k.declarations[0].id.name];else{y.variable_=null;var D=new O.State(k,y.scope);return D.components=!0,D}}if(y.variable_||(y.variable_=y.value),!y.doneSetter_){y.doneSetter_=!0;var j=y.name_,U=this.setValue(y.variable_,j);if(U)return this.createSetter_(U,y.variable_,j)}if(y.name_=void 0,y.doneVariable_=!1,y.doneSetter_=!1,N.body)return new O.State(N.body,y.scope)},O.prototype.stepForStatement=function(g,y,N){switch(y.mode_){default:if(y.mode_=1,N.init)return new O.State(N.init,y.scope);break;case 1:if(y.mode_=2,N.test)return new O.State(N.test,y.scope);break;case 2:if(y.mode_=3,N.test&&!y.value)g.pop();else return y.isLoop=!0,new O.State(N.body,y.scope);break;case 3:if(y.mode_=1,N.update)return new O.State(N.update,y.scope);break}},O.prototype.stepFunctionDeclaration=function(g,y,N){g.pop()},O.prototype.stepFunctionExpression=function(g,y,N){g.pop(),y=g[g.length-1];var L=y.scope;N.id&&(L=this.createSpecialScope(L)),y.value=this.createFunction(N,L,y.destinationName),N.id&&this.setProperty(L.object,N.id.name,y.value,O.READONLY_DESCRIPTOR)},O.prototype.stepIdentifier=function(g,y,N){if(g.pop(),y.components){g[g.length-1].value=[O.SCOPE_REFERENCE,N.name];return}var L=this.getValueFromScope(N.name);if(this.getterStep_){var k=L;return this.createGetter_(k,this.globalObject)}g[g.length-1].value=L},O.prototype.stepIfStatement=O.prototype.stepConditionalExpression,O.prototype.stepLabeledStatement=function(g,y,N){g.pop();var L=y.labels||[];L.push(N.label.name);var k=new O.State(N.body,y.scope);return k.labels=L,k},O.prototype.stepLiteral=function(g,y,N){g.pop();var L=N.value;if(L instanceof RegExp){var k=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(k,L),L=k}g[g.length-1].value=L},O.prototype.stepLogicalExpression=function(g,y,N){if(N.operator!=="&&"&&N.operator!=="||")throw SyntaxError("Unknown logical operator: "+N.operator);if(!y.doneLeft_)return y.doneLeft_=!0,new O.State(N.left,y.scope);if(y.doneRight_)g.pop(),g[g.length-1].value=y.value;else if(N.operator==="&&"&&!y.value||N.operator==="||"&&y.value)g.pop(),g[g.length-1].value=y.value;else return y.doneRight_=!0,new O.State(N.right,y.scope)},O.prototype.stepMemberExpression=function(g,y,N){if(!y.doneObject_)return y.doneObject_=!0,new O.State(N.object,y.scope);var L;if(!N.computed)y.object_=y.value,L=N.property.name;else if(y.doneProperty_)L=y.value;else return y.object_=y.value,y.doneProperty_=!0,new O.State(N.property,y.scope);if(g.pop(),y.components)g[g.length-1].value=[y.object_,L];else{var k=this.getProperty(y.object_,L);if(this.getterStep_){var D=k;return this.createGetter_(D,y.object_)}g[g.length-1].value=k}},O.prototype.stepNewExpression=O.prototype.stepCallExpression,O.prototype.stepObjectExpression=function(g,y,N){var L=y.n_||0,k=N.properties[L];if(!y.object_)y.object_=this.createObjectProto(this.OBJECT_PROTO),y.properties_=Object.create(null);else{var D=y.destinationName;y.properties_[D]||(y.properties_[D]={}),y.properties_[D][k.kind]=y.value,y.n_=++L,k=N.properties[L]}if(k){var j=k.key;if(j.type==="Identifier")var D=j.name;else if(j.type==="Literal")var D=j.value;else throw SyntaxError("Unknown object structure: "+j.type);return y.destinationName=D,new O.State(k.value,y.scope)}for(var j in y.properties_){var U=y.properties_[j];if("get"in U||"set"in U){var K={configurable:!0,enumerable:!0,get:U.get,set:U.set};this.setProperty(y.object_,j,O.VALUE_IN_DESCRIPTOR,K)}else this.setProperty(y.object_,j,U.init)}g.pop(),g[g.length-1].value=y.object_},O.prototype.stepProgram=function(g,y,N){var L=N.body.shift();if(L)return y.done=!1,new O.State(L,y.scope);y.done=!0},O.prototype.stepReturnStatement=function(g,y,N){if(N.argument&&!y.done_)return y.done_=!0,new O.State(N.argument,y.scope);this.unwind(O.Completion.RETURN,y.value,void 0)},O.prototype.stepSequenceExpression=function(g,y,N){var L=y.n_||0,k=N.expressions[L];if(k)return y.n_=L+1,new O.State(k,y.scope);g.pop(),g[g.length-1].value=y.value},O.prototype.stepSwitchStatement=function(g,y,N){if(!y.test_)return y.test_=1,new O.State(N.discriminant,y.scope);for(y.test_===1&&(y.test_=2,y.switchValue_=y.value,y.defaultCase_=-1);;){var L=y.index_||0,k=N.cases[L];if(!y.matched_&&k&&!k.test){y.defaultCase_=L,y.index_=L+1;continue}if(!k&&!y.matched_&&y.defaultCase_!==-1){y.matched_=!0,y.index_=y.defaultCase_;continue}if(k){if(!y.matched_&&!y.tested_&&k.test)return y.tested_=!0,new O.State(k.test,y.scope);if(y.matched_||y.value===y.switchValue_){y.matched_=!0;var D=y.n_||0;if(k.consequent[D])return y.isSwitch=!0,y.n_=D+1,new O.State(k.consequent[D],y.scope)}y.tested_=!1,y.n_=0,y.index_=L+1}else{g.pop();return}}},O.prototype.stepThisExpression=function(g,y,N){g.pop(),g[g.length-1].value=this.getValueFromScope("this")},O.prototype.stepThrowStatement=function(g,y,N){if(y.done_)this.throwException(y.value);else return y.done_=!0,new O.State(N.argument,y.scope)},O.prototype.stepTryStatement=function(g,y,N){if(!y.doneBlock_)return y.doneBlock_=!0,new O.State(N.block,y.scope);if(y.cv&&y.cv.type===O.Completion.THROW&&!y.doneHandler_&&N.handler){y.doneHandler_=!0;var L=this.createSpecialScope(y.scope);return this.setProperty(L.object,N.handler.param.name,y.cv.value),y.cv=void 0,new O.State(N.handler.body,L)}if(!y.doneFinalizer_&&N.finalizer)return y.doneFinalizer_=!0,new O.State(N.finalizer,y.scope);g.pop(),y.cv&&this.unwind(y.cv.type,y.cv.value,y.cv.label)},O.prototype.stepUnaryExpression=function(g,y,N){if(!y.done_){y.done_=!0;var L=new O.State(N.argument,y.scope);return L.components=N.operator==="delete",L}g.pop();var k=y.value;switch(N.operator){case"-":k=-k;break;case"+":k=+k;break;case"!":k=!k;break;case"~":k=~k;break;case"delete":var D=!0;if(Array.isArray(k)){var j=k[0];j===O.SCOPE_REFERENCE&&(j=y.scope);var U=String(k[1]);try{delete j.properties[U]}catch{y.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+U+"' of '"+j+"'"):D=!1}}k=D;break;case"typeof":k=k&&k.class==="Function"?"function":typeof k;break;case"void":k=void 0;break;default:throw SyntaxError("Unknown unary operator: "+N.operator)}g[g.length-1].value=k},O.prototype.stepUpdateExpression=function(g,y,N){if(!y.doneLeft_){y.doneLeft_=!0;var L=new O.State(N.argument,y.scope);return L.components=!0,L}if(y.leftSide_||(y.leftSide_=y.value),y.doneGetter_&&(y.leftValue_=y.value),!y.doneGetter_){var D=this.getValue(y.leftSide_);if(y.leftValue_=D,this.getterStep_){y.doneGetter_=!0;var k=D;return this.createGetter_(k,y.leftSide_)}}if(y.doneSetter_){g.pop(),g[g.length-1].value=y.setterValue_;return}var D=Number(y.leftValue_),j;if(N.operator==="++")j=D+1;else if(N.operator==="--")j=D-1;else throw SyntaxError("Unknown update expression: "+N.operator);var U=N.prefix?j:D,K=this.setValue(y.leftSide_,j);if(K)return y.doneSetter_=!0,y.setterValue_=U,this.createSetter_(K,y.leftSide_,j);g.pop(),g[g.length-1].value=U},O.prototype.stepVariableDeclaration=function(g,y,N){var L=N.declarations,k=y.n_||0,D=L[k];for(y.init_&&D&&(this.setValueToScope(D.id.name,y.value),y.init_=!1,D=L[++k]);D;){if(D.init)return y.n_=k,y.init_=!0,y.destinationName=D.id.name,new O.State(D.init,y.scope);D=L[++k]}g.pop()},O.prototype.stepWithStatement=function(g,y,N){if(!y.doneObject_)return y.doneObject_=!0,new O.State(N.object,y.scope);g.pop();var L=this.createSpecialScope(y.scope,y.value);return new O.State(N.body,L)},O.prototype.stepWhileStatement=O.prototype.stepDoWhileStatement,O.nativeGlobal.Interpreter=O,O.prototype.step=O.prototype.step,O.prototype.run=O.prototype.run,O.prototype.getStatus=O.prototype.getStatus,O.prototype.appendCode=O.prototype.appendCode,O.prototype.createObject=O.prototype.createObject,O.prototype.createObjectProto=O.prototype.createObjectProto,O.prototype.createNativeFunction=O.prototype.createNativeFunction,O.prototype.createAsyncFunction=O.prototype.createAsyncFunction,O.prototype.getProperty=O.prototype.getProperty,O.prototype.setProperty=O.prototype.setProperty,O.prototype.nativeToPseudo=O.prototype.nativeToPseudo,O.prototype.pseudoToNative=O.prototype.pseudoToNative,O.prototype.getGlobalScope=O.prototype.getGlobalScope,O.prototype.setGlobalScope=O.prototype.setGlobalScope,O.prototype.getStateStack=O.prototype.getStateStack,O.prototype.setStateStack=O.prototype.setStateStack,O.Status=O.Status,O.VALUE_IN_DESCRIPTOR=O.VALUE_IN_DESCRIPTOR,Q.exports={Interpreter:O}},"./original-repo/acorn.js":function(Q,te){(function(re,O){return O(te)})(typeof globalThis>"u"?this||window:globalThis,function(re){re.version="0.5.0";var O,g="",y,N;re.parse=function(F,B){return g=String(F),y=g.length,k(B),Xr(),sn(O.program)};var L={strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function k(F){O=F||{};for(var B in L)Object.prototype.hasOwnProperty.call(O,B)||(O[B]=L[B]);N=O.sourceFile}var D=function(F,B){for(var H=1,ee=0;;){kt.lastIndex=ee;var pe=kt.exec(F);if(pe&&pe.index<B)++H,ee=pe.index+pe[0].length;else break}return{line:H,column:B-ee}},j=0,U=0,K=0,ne,ae,ie,se,ue,ye,be,Qe=0,Pe=0,ke,$e,me,we;function fe(F,B){var H=D(g,F);B+=" ("+H.line+":"+H.column+")";var ee=new SyntaxError(B);throw ee.pos=F,ee.loc=H,ee.raisedAt=j,ee}var Ut=[],ze={type:"num"},ut={type:"regexp"},Ve={type:"string"},Me={type:"name"},Ye={type:"eof"},et={keyword:"break"},He={keyword:"case",beforeExpr:!0},Ot={keyword:"catch"},tt={keyword:"continue"},ct={keyword:"debugger"},rt={keyword:"default"},Nt={keyword:"do",isLoop:!0},Tt={keyword:"else",beforeExpr:!0},lt={keyword:"finally"},ft={keyword:"for",isLoop:!0},de={keyword:"function"},je={keyword:"if"},Ce={keyword:"return",beforeExpr:!0},ht={keyword:"switch"},nt={keyword:"throw",beforeExpr:!0},dt={keyword:"try"},Et={keyword:"var"},Bt={keyword:"while",isLoop:!0},ar={keyword:"with"},sr={keyword:"new",beforeExpr:!0},or={keyword:"this"},ur={keyword:"null",atomValue:null},cr={keyword:"true",atomValue:!0},lr={keyword:"false",atomValue:!1},Pt={keyword:"in",binop:7,beforeExpr:!0},Cr={break:et,case:He,catch:Ot,continue:tt,debugger:ct,default:rt,do:Nt,else:Tt,finally:lt,for:ft,function:de,if:je,return:Ce,switch:ht,throw:nt,try:dt,var:Et,while:Bt,with:ar,null:ur,true:cr,false:lr,new:sr,in:Pt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:or,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},zt={type:"[",beforeExpr:!0},Vt={type:"]"},yt={type:"{",beforeExpr:!0},it={type:"}"},Le={type:"(",beforeExpr:!0},Ie={type:")"},Xe={type:",",beforeExpr:!0},Fe={type:";",beforeExpr:!0},mt={type:":",beforeExpr:!0},pr={type:"."},fr={type:"?",beforeExpr:!0},hr={binop:10,beforeExpr:!0},dr={isAssign:!0,beforeExpr:!0},We={isAssign:!0,beforeExpr:!0},Ar={postfix:!0,prefix:!0,isUpdate:!0},Er={prefix:!0,beforeExpr:!0},yr={binop:1,beforeExpr:!0},mr={binop:2,beforeExpr:!0},Ir={binop:3,beforeExpr:!0},kr={binop:4,beforeExpr:!0},$r={binop:5,beforeExpr:!0},Mr={binop:6,beforeExpr:!0},Lr={binop:7,beforeExpr:!0},Dr={binop:8,beforeExpr:!0},Fr={binop:9,prefix:!0,beforeExpr:!0},Ur={binop:10,beforeExpr:!0};function jt(F){for(var B=F.split(" "),H=Object.create(null),ee=0;ee<B.length;ee++)H[B[ee]]=!0;return function(pe){return H[pe]||!1}}var Br=jt("class enum extends super const export import"),gr=jt("implements interface let package private protected public static yield"),Ct=jt("eval arguments"),zr=jt("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),Gr=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,xr="ÂªÂµÂºÃ-ÃÃ-Ã¶Ã¸-ËË-ËË -Ë¤Ë¬Ë®Í°-Í´Í¶Í·Íº-Í½ÎÎ-ÎÎÎ-Î¡Î£-ÏµÏ·-ÒÒ-Ô§Ô±-ÕÕÕ¡-Ö×-×ª×°-×²Ø -ÙÙ®Ù¯Ù±-ÛÛÛ¥Û¦Û®Û¯Ûº-Û¼Û¿ÜÜ-Ü¯Ý-Þ¥Þ±ß-ßªß´ßµßºà -à à à ¤à ¨à¡-à¡à¢ à¢¢-à¢¬à¤-à¤¹à¤½à¥à¥-à¥¡à¥±-à¥·à¥¹-à¥¿à¦-à¦à¦à¦à¦-à¦¨à¦ª-à¦°à¦²à¦¶-à¦¹à¦½à§à§à§à§-à§¡à§°à§±à¨-à¨à¨à¨à¨-à¨¨à¨ª-à¨°à¨²à¨³à¨µà¨¶à¨¸à¨¹à©-à©à©à©²-à©´àª-àªàª-àªàª-àª¨àªª-àª°àª²àª³àªµ-àª¹àª½à«à« à«¡à¬-à¬à¬à¬à¬-à¬¨à¬ª-à¬°à¬²à¬³à¬µ-à¬¹à¬½à­à­à­-à­¡à­±à®à®-à®à®-à®à®-à®à®à®à®à®à®à®£à®¤à®¨-à®ªà®®-à®¹à¯à°-à°à°-à°à°-à°¨à°ª-à°³à°µ-à°¹à°½à±à±à± à±¡à²-à²à²-à²à²-à²¨à²ª-à²³à²µ-à²¹à²½à³à³ à³¡à³±à³²à´-à´à´-à´à´-à´ºà´½àµàµ àµ¡àµº-àµ¿à¶-à¶à¶-à¶±à¶³-à¶»à¶½à·-à·à¸-à¸°à¸²à¸³à¹-à¹àºàºàºàºàºàºàºàº-àºàº-àºàº¡-àº£àº¥àº§àºªàº«àº­-àº°àº²àº³àº½à»-à»à»à»-à»à¼à½-à½à½-à½¬à¾-à¾á-áªá¿á-áá-áá¡á¥á¦á®-á°áµ-ááá -áááá-áºá¼-áá-áá-ááá-áá -áá-áá-á°á²-áµá¸-á¾áá-áá-áá-áá-áá-áá-áá -á´á-á¬á¯-á¿á-áá -áªá®-á°á-áá-áá -á±á-áá -á¬á®-á°á-á³ááá  -á¡·á¢-á¢¨á¢ªá¢°-á£µá¤-á¤á¥-á¥­á¥°-á¥´á¦-á¦«á§-á§á¨-á¨á¨ -á©áª§á¬-á¬³á­-á­á®-á® á®®á®¯á®º-á¯¥á°-á°£á±-á±á±-á±½á³©-á³¬á³®-á³±á³µá³¶á´-á¶¿á¸-á¼á¼-á¼á¼ -á½á½-á½á½-á½á½á½á½á½-á½½á¾-á¾´á¾¶-á¾¼á¾¾á¿-á¿á¿-á¿á¿-á¿á¿-á¿á¿ -á¿¬á¿²-á¿´á¿¶-á¿¼â±â¿â-ââââ-âââ-ââ¤â¦â¨âª-â­â¯-â¹â¼-â¿â-âââ -ââ°-â°®â°°-â±â± -â³¤â³«-â³®â³²â³³â´-â´¥â´§â´­â´°-âµ§âµ¯â¶-â¶â¶ -â¶¦â¶¨-â¶®â¶°-â¶¶â¶¸-â¶¾â·-â·â·-â·â·-â·â·-â·â¸¯ã-ãã¡-ã©ã±-ãµã¸-ã¼ã-ãã-ãã¡-ãºã¼-ã¿ã-ã­ã±-ãã -ãºã°-ã¿ã-ä¶µä¸-é¿ê-êê-ê½ê-êê-êêªê«ê-ê®ê¿-êê -ê¯ê-êê¢-êê-êê-êê -êªê¸-ê ê -ê ê -ê ê -ê ¢ê¡-ê¡³ê¢-ê¢³ê£²-ê£·ê£»ê¤-ê¤¥ê¤°-ê¥ê¥ -ê¥¼ê¦-ê¦²ê§ê¨-ê¨¨ê©-ê©ê©-ê©ê© -ê©¶ê©ºêª-êª¯êª±êªµêª¶êª¹-êª½ê«ê«ê«-ê«ê« -ê«ªê«²-ê«´ê¬-ê¬ê¬-ê¬ê¬-ê¬ê¬ -ê¬¦ê¬¨-ê¬®ê¯-ê¯¢ê°-í£í°-íí-í»ï¤-ï©­ï©°-ï«ï¬-ï¬ï¬-ï¬ï¬ï¬-ï¬¨ï¬ª-ï¬¶ï¬¸-ï¬¼ï¬¾ï­ï­ï­ï­ï­-ï®±ï¯-ï´½ïµ-ï¶ï¶-ï·ï·°-ï·»ï¹°-ï¹´ï¹¶-ï»¼ï¼¡-ï¼ºï½-ï½ï½¦-ï¾¾ï¿-ï¿ï¿-ï¿ï¿-ï¿ï¿-ï¿",Vr="Ì-Í¯Ò-ÒÖ-Ö½Ö¿×××××Ø-ØØ -ÙÙ²-ÛÛ§-Û¨Û»-Û¼Ü°-Ýà -à à -à £à ¥-à §à ©-à ­à¡-à¡à£¤-à£¾à¤-à¤à¤º-à¤¼à¤¾-à¥à¥-à¥à¥¢-à¥£à¥¦-à¥¯à¦-à¦à¦¼à¦¾-à§à§à§à§à§-à§ à¨-à¨à¨¼à¨¾-à©à©à©à©-à©à©à©¦-à©±à©µàª-àªàª¼àª¾-à«à«-à«à«-à«à«¢-à«£à«¦-à«¯à¬-à¬à¬¼à¬¾-à­à­à­à­-à­à­à­à­-à­ à­¦-à­¯à®à®¾-à¯à¯-à¯à¯-à¯à¯à¯¦-à¯¯à°-à°à±-à±à±-à±à±à±à±¢-à±£à±¦-à±¯à²à²à²¼à²¾-à³à³-à³à³-à³à³à³à³¢-à³£à³¦-à³¯à´à´àµ-àµàµàµ¢-àµ£àµ¦-àµ¯à¶à¶à·à·-à·à·à·-à·à·²à·³à¸´-à¸ºà¹-à¹à¹-à¹àº´-àº¹à»-à»à»-à»à¼à¼à¼ -à¼©à¼µà¼·à¼¹à½-à½à½±-à¾à¾-à¾à¾-à¾à¾-à¾¼à¿á-á©á-áá§-á­á±-á´á-áá-áá-áá-áá -á°á-áá²á³á-á²áá -á©á -á á -á á¤ -á¤«á¤°-á¤»á¥-á¥­á¦°-á§á§-á§á§-á§á¨-á¨á¨ -á©á© -á©¼á©¿-áªáª-áªá­-á­á­-á­á­«-á­³á®°-á®¹á¯¦-á¯³á°-á°¢á±-á±á±-á±½á³-á³á´-á¶¾á¸-á¼âââ¿âââ-ââ¡â¥-â°â¶-â¶â· -â·¿ã¡-ã¨ããê-ê­ê´-ê½êê°-ê±ê¸-ê ê ê ê £-ê §ê¢-ê¢ê¢´-ê£ê£-ê£ê£³-ê£·ê¤-ê¤ê¤¦-ê¤­ê¤°-ê¥ê¦-ê¦ê¦³-ê§ê¨-ê¨§ê©-ê©ê©-ê©ê©-ê©ê©»ê« -ê«©ê«²-ê«³ê¯-ê¯¡ê¯¬ê¯­ê¯°-ê¯¹ï¬ -ï¬¨ï¸-ï¸ï¸ -ï¸¦ï¸³ï¸´ï¹-ï¹ï¼-ï¼ï¼¿",vr=new RegExp("["+xr+"]"),Yr=new RegExp("["+xr+Vr+"]"),It=/[\n\r\u2028\u2029]/,kt=/\r\n|[\n\r\u2028\u2029]/g,$t=function(F){return F<65?F===36:F<91?!0:F<97?F===95:F<123?!0:F>=170&&vr.test(String.fromCharCode(F))},br=function(F){return F<48?F===36:F<58?!0:F<65?!1:F<91?!0:F<97?F===95:F<123?!0:F>=170&&Yr.test(String.fromCharCode(F))};function Ke(){this.line=ye,this.column=j-be}function Xr(){ye=1,j=be=0,ue=!0,gt()}function Re(F,B){K=j,O.locations&&(ae=new Ke),ie=F,gt(),se=B,ue=F.beforeExpr}function Jr(){var F=O.onComment&&O.locations&&new Ke,B=j,H=g.indexOf("*/",j+=2);if(H===-1&&fe(j-2,"Unterminated comment"),j=H+2,O.locations){kt.lastIndex=B;for(var ee;(ee=kt.exec(g))&&ee.index<j;)++ye,be=ee.index+ee[0].length}O.onComment&&O.onComment(!0,g.slice(B+2,H),B,j,F,O.locations&&new Ke)}function Yt(){for(var F=j,B=O.onComment&&O.locations&&new Ke,H=g.charCodeAt(j+=2);j<y&&H!==10&&H!==13&&H!==8232&&H!==8233;)++j,H=g.charCodeAt(j);O.onComment&&O.onComment(!1,g.slice(F+2,j),F,j,B,O.locations&&new Ke)}function gt(){for(;j<y;){var F=g.charCodeAt(j);if(F===32)++j;else if(F===13){++j;var B=g.charCodeAt(j);B===10&&++j,O.locations&&(++ye,be=j)}else if(F===10||F===8232||F===8233)++j,O.locations&&(++ye,be=j);else if(F>8&&F<14)++j;else if(F===47){var B=g.charCodeAt(j+1);if(B===42)Jr();else if(B===47)Yt();else break}else if(F===160)++j;else if(F>=5760&&Gr.test(String.fromCharCode(F)))++j;else break}}function qr(){var F=g.charCodeAt(j+1);F>=48&&F<=57?_r(!0):(++j,Re(pr))}function Hr(){var F=g.charCodeAt(j+1);ue?(++j,Rr()):F===61?_e(We,2):_e(hr,1)}function Wr(){var F=g.charCodeAt(j+1);F===61?_e(We,2):_e(Ur,1)}function Kr(F){var B=g.charCodeAt(j+1);B===F?_e(F===124?yr:mr,2):B===61?_e(We,2):_e(F===124?Ir:$r,1)}function Zr(){var F=g.charCodeAt(j+1);F===61?_e(We,2):_e(kr,1)}function Qr(F){var B=g.charCodeAt(j+1);if(B===F){if(B===45&&g.charCodeAt(j+2)===62&&It.test(g.slice(Pe,j))){j+=3,Yt(),gt(),at();return}_e(Ar,2)}else B===61?_e(We,2):_e(Fr,1)}function en(F){var B=g.charCodeAt(j+1),H=1;if(B===F){H=F===62&&g.charCodeAt(j+2)===62?3:2,g.charCodeAt(j+H)===61?_e(We,H+1):_e(Dr,H);return}if(B===33&&F===60&&g.charCodeAt(j+2)===45&&g.charCodeAt(j+3)===45){j+=4,Yt(),gt(),at();return}B===61&&(H=g.charCodeAt(j+2)===61?3:2),_e(Lr,H)}function tn(F){var B=g.charCodeAt(j+1);B===61?_e(Mr,g.charCodeAt(j+2)===61?3:2):_e(F===61?dr:Er,1)}function rn(F){switch(F){case 46:return qr();case 40:return++j,Re(Le);case 41:return++j,Re(Ie);case 59:return++j,Re(Fe);case 44:return++j,Re(Xe);case 91:return++j,Re(zt);case 93:return++j,Re(Vt);case 123:return++j,Re(yt);case 125:return++j,Re(it);case 58:return++j,Re(mt);case 63:return++j,Re(fr);case 48:var B=g.charCodeAt(j+1);if(B===120||B===88)return nn();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return _r(!1);case 34:case 39:return an(F);case 47:return Hr();case 37:case 42:return Wr();case 124:case 38:return Kr(F);case 94:return Zr();case 43:case 45:return Qr(F);case 60:case 62:return en(F);case 61:case 33:return tn(F);case 126:return _e(Er,1)}return!1}function at(F){if(F?j=U+1:U=j,O.locations&&(ne=new Ke),F)return Rr();if(j>=y)return Re(Ye);var B=g.charCodeAt(j);if($t(B)||B===92)return Or();var H=rn(B);if(H===!1){var ee=String.fromCharCode(B);if(ee==="\\"||vr.test(ee))return Or();fe(j,"Unexpected character '"+ee+"'")}}function _e(F,B){var H=g.slice(j,j+B);j+=B,Re(F,H)}function Rr(){for(var F,B,H=j;;){j>=y&&fe(H,"Unterminated regexp");var ee=g.charAt(j);if(It.test(ee)&&fe(H,"Unterminated regexp"),F)F=!1;else{if(ee==="[")B=!0;else if(ee==="]"&&B)B=!1;else if(ee==="/"&&!B)break;F=ee==="\\"}++j}var pe=g.slice(H,j);++j;var oe=Sr();oe&&!/^[gmi]*$/.test(oe)&&fe(H,"Invalid regexp flag");try{var he=new RegExp(pe,oe)}catch(ge){throw ge instanceof SyntaxError&&fe(H,ge.message),ge}Re(ut,he)}function xt(F,B){for(var H=j,ee=0,pe=B===void 0?1/0:B,oe=0;oe<pe;++oe){var he=g.charCodeAt(j),ge;if(he>=97?ge=he-97+10:he>=65?ge=he-65+10:he>=48&&he<=57?ge=he-48:ge=1/0,ge>=F)break;++j,ee=ee*F+ge}return j===H||B!==void 0&&j-H!==B?null:ee}function nn(){j+=2;var F=xt(16);F===null&&fe(U+2,"Expected hexadecimal number"),$t(g.charCodeAt(j))&&fe(j,"Identifier directly after number"),Re(ze,F)}function _r(F){var B=j,H=!1,ee=g.charCodeAt(j)===48;!F&&xt(10)===null&&fe(B,"Invalid number"),g.charCodeAt(j)===46&&(++j,xt(10),H=!0);var pe=g.charCodeAt(j);(pe===69||pe===101)&&(pe=g.charCodeAt(++j),(pe===43||pe===45)&&++j,xt(10)===null&&fe(B,"Invalid number"),H=!0),$t(g.charCodeAt(j))&&fe(j,"Identifier directly after number");var oe=g.slice(B,j),he;H?he=parseFloat(oe):!ee||oe.length===1?he=parseInt(oe,10):/[89]/.test(oe)||we?fe(B,"Invalid number"):he=parseInt(oe,8),Re(ze,he)}function an(F){j++;for(var B="";;){j>=y&&fe(U,"Unterminated string constant");var H=g.charCodeAt(j);if(H===F){++j,Re(Ve,B);return}if(H===92){H=g.charCodeAt(++j);var ee=/^[0-7]+/.exec(g.slice(j,j+3));for(ee&&(ee=ee[0]);ee&&parseInt(ee,8)>255;)ee=ee.slice(0,-1);if(ee==="0"&&(ee=null),++j,ee)we&&fe(j-2,"Octal literal in strict mode"),B+=String.fromCharCode(parseInt(ee,8)),j+=ee.length-1;else switch(H){case 110:B+=`
`;break;case 114:B+="\r";break;case 120:B+=String.fromCharCode(Mt(2));break;case 117:B+=String.fromCharCode(Mt(4));break;case 85:B+=String.fromCharCode(Mt(8));break;case 116:B+="	";break;case 98:B+="\b";break;case 118:B+="\v";break;case 102:B+="\f";break;case 48:B+="\0";break;case 13:g.charCodeAt(j)===10&&++j;case 10:O.locations&&(be=j,++ye);break;default:B+=String.fromCharCode(H);break}}else(H===13||H===10||H===8232||H===8233)&&fe(U,"Unterminated string constant"),B+=String.fromCharCode(H),++j}}function Mt(F){var B=xt(16,F);return B===null&&fe(U,"Bad character escape sequence"),B}var st;function Sr(){st=!1;for(var F,B=!0,H=j;;){var ee=g.charCodeAt(j);if(br(ee))st&&(F+=g.charAt(j)),++j;else if(ee===92){st||(F=g.slice(H,j)),st=!0,g.charCodeAt(++j)!==117&&fe(j,"Expecting Unicode escape sequence \\uXXXX"),++j;var pe=Mt(4),oe=String.fromCharCode(pe);oe||fe(j-1,"Invalid Unicode escape"),(B?$t(pe):br(pe))||fe(j-4,"Invalid Unicode escape"),F+=oe}else break;B=!1}return st?F:g.slice(H,j)}function Or(){var F=Sr(),B=Me;!st&&zr(F)&&(B=Cr[F]),Re(B,F)}function Ee(){Qe=U,Pe=K,ke=ae,at()}function Xt(F){if(we=F,j=U,O.locations)for(;j<be;)be=g.lastIndexOf(`
`,be-2)+1,--ye;gt(),at()}function Nr(){this.type=null,this.start=U,this.end=null}function Tr(){this.start=ne,this.end=null,N&&(this.source=N)}function Oe(){var F=new Nr;return O.locations&&(F.loc=new Tr),O.directSourceFile&&(F.sourceFile=O.directSourceFile),O.ranges&&(F.range=[U,0]),F}function Je(F){var B=new Nr;return B.start=F.start,O.locations&&(B.loc=new Tr,B.loc.start=F.loc.start),O.ranges&&(B.range=[F.range[0],0]),B}function ce(F,B){return F.type=B,F.end=Pe,O.locations&&(F.loc.end=ke),O.ranges&&(F.range[1]=Pe),F}function qt(F){return F.type==="ExpressionStatement"&&F.expression.type==="Literal"&&F.expression.value==="use strict"}function xe(F){return ie===F?(Ee(),!0):!1}function Lt(){return!O.strictSemicolons&&(ie===Ye||ie===it||It.test(g.slice(Pe,U)))}function Ze(){!xe(Fe)&&!Lt()&&Ue()}function ve(F){ie===F?Ee():Ue()}function Ue(){fe(U,"Unexpected token")}function Dt(F){F.type!=="Identifier"&&F.type!=="MemberExpression"&&fe(F.start,"Assigning to rvalue"),we&&F.type==="Identifier"&&Ct(F.name)&&fe(F.start,"Assigning to "+F.name+" in strict mode")}function sn(F){Qe=Pe=j,O.locations&&(ke=new Ke),$e=we=!1,me=[],at();var B=F||Oe(),H=!0;for(F||(B.body=[]);ie!==Ye;){var ee=Ae();B.body.push(ee),H&&qt(ee)&&Xt(!0),H=!1}return ce(B,"Program")}var Ht={kind:"loop"},on={kind:"switch"};function Ae(){(ie===hr||ie===We&&se==="/=")&&at(!0);var F=ie,B=Oe();switch(F){case et:case tt:Ee();var H=F===et;xe(Fe)||Lt()?B.label=null:ie!==Me?Ue():(B.label=qe(),Ze());for(var ee=0;ee<me.length;++ee){var pe=me[ee];if((B.label===null||pe.name===B.label.name)&&(pe.kind!==null&&(H||pe.kind==="loop")||B.label&&H))break}return ee===me.length&&fe(B.start,"Unsyntactic "+F.keyword),ce(B,H?"BreakStatement":"ContinueStatement");case ct:return Ee(),Ze(),ce(B,"DebuggerStatement");case Nt:return Ee(),me.push(Ht),B.body=Ae(),me.pop(),ve(Bt),B.test=vt(),Ze(),ce(B,"DoWhileStatement");case ft:if(Ee(),me.push(Ht),ve(Le),ie===Fe)return Wt(B,null);if(ie===Et){var oe=Oe();return Ee(),Pr(oe,!0),ce(oe,"VariableDeclaration"),oe.declarations.length===1&&xe(Pt)?wr(B,oe):Wt(B,oe)}var oe=Ne(!1,!0);return xe(Pt)?(Dt(oe),wr(B,oe)):Wt(B,oe);case de:return Ee(),rr(B,!0);case je:return Ee(),B.test=vt(),B.consequent=Ae(),B.alternate=xe(Tt)?Ae():null,ce(B,"IfStatement");case Ce:return!$e&&!O.allowReturnOutsideFunction&&fe(U,"'return' outside of function"),Ee(),xe(Fe)||Lt()?B.argument=null:(B.argument=Ne(),Ze()),ce(B,"ReturnStatement");case ht:Ee(),B.discriminant=vt(),B.cases=[],ve(yt),me.push(on);for(var he,ge;ie!==it;)if(ie===He||ie===rt){var St=ie===He;he&&ce(he,"SwitchCase"),B.cases.push(he=Oe()),he.consequent=[],Ee(),St?he.test=Ne():(ge&&fe(Qe,"Multiple default clauses"),ge=!0,he.test=null),ve(mt)}else he||Ue(),he.consequent.push(Ae());return he&&ce(he,"SwitchCase"),Ee(),me.pop(),ce(B,"SwitchStatement");case nt:return Ee(),It.test(g.slice(Pe,U))&&fe(Pe,"Illegal newline after throw"),B.argument=Ne(),Ze(),ce(B,"ThrowStatement");case dt:if(Ee(),B.block=bt(),B.handler=null,ie===Ot){var ot=Oe();Ee(),ve(Le),ot.param=qe(),we&&Ct(ot.param.name)&&fe(ot.param.start,"Binding "+ot.param.name+" in strict mode"),ve(Ie),ot.body=bt(),B.handler=ce(ot,"CatchClause")}return B.finalizer=xe(lt)?bt():null,!B.handler&&!B.finalizer&&fe(B.start,"Missing catch or finally clause"),ce(B,"TryStatement");case Et:return Ee(),Pr(B),Ze(),ce(B,"VariableDeclaration");case Bt:return Ee(),B.test=vt(),me.push(Ht),B.body=Ae(),me.pop(),ce(B,"WhileStatement");case ar:return we&&fe(U,"'with' in strict mode"),Ee(),B.object=vt(),B.body=Ae(),ce(B,"WithStatement");case yt:return bt();case Fe:return Ee(),ce(B,"EmptyStatement");default:var ir=se,Ft=Ne();if(F===Me&&Ft.type==="Identifier"&&xe(mt)){for(var ee=0;ee<me.length;++ee)me[ee].name===ir&&fe(Ft.start,"Label '"+ir+"' is already declared");var hn=ie.isLoop?"loop":ie===ht?"switch":null;return me.push({name:ir,kind:hn}),B.body=Ae(),me.pop(),B.label=Ft,ce(B,"LabeledStatement")}else return B.expression=Ft,Ze(),ce(B,"ExpressionStatement")}}function vt(){ve(Le);var F=Ne();return ve(Ie),F}function bt(F){var B=Oe(),H=!0,ee=!1,pe;for(B.body=[],ve(yt);!xe(it);){var oe=Ae();B.body.push(oe),H&&F&&qt(oe)&&(pe=ee,Xt(ee=!0)),H=!1}return ee&&!pe&&Xt(!1),ce(B,"BlockStatement")}function Wt(F,B){return F.init=B,ve(Fe),F.test=ie===Fe?null:Ne(),ve(Fe),F.update=ie===Ie?null:Ne(),ve(Ie),F.body=Ae(),me.pop(),ce(F,"ForStatement")}function wr(F,B){return F.left=B,F.right=Ne(),ve(Ie),F.body=Ae(),me.pop(),ce(F,"ForInStatement")}function Pr(F,B){for(F.declarations=[],F.kind="var";;){var H=Oe();if(H.id=qe(),we&&Ct(H.id.name)&&fe(H.id.start,"Binding "+H.id.name+" in strict mode"),H.init=xe(dr)?Ne(!0,B):null,F.declarations.push(ce(H,"VariableDeclarator")),!xe(Xe))break}}function Ne(F,B){var H=Kt(B);if(!F&&ie===Xe){var ee=Je(H);for(ee.expressions=[H];xe(Xe);)ee.expressions.push(Kt(B));return ce(ee,"SequenceExpression")}return H}function Kt(F){var B=un(F);if(ie.isAssign){var H=Je(B);return H.operator=se,H.left=B,Ee(),H.right=Kt(F),Dt(B),ce(H,"AssignmentExpression")}return B}function un(F){var B=cn(F);if(xe(fr)){var H=Je(B);return H.test=B,H.consequent=Ne(!0),ve(mt),H.alternate=Ne(!0,F),ce(H,"ConditionalExpression")}return B}function cn(F){return Zt(er(),-1,F)}function Zt(F,B,H){var ee=ie.binop;if(ee!==null&&(!H||ie!==Pt)&&ee>B){var pe=Je(F);pe.left=F,pe.operator=se;var oe=ie;Ee(),pe.right=Zt(er(),ee,H);var he=ce(pe,oe===yr||oe===mr?"LogicalExpression":"BinaryExpression");return Zt(he,B,H)}return F}function er(){if(ie.prefix){var F=Oe(),B=ie.isUpdate;return F.operator=se,F.prefix=!0,ue=!0,Ee(),F.argument=er(),B?Dt(F.argument):we&&F.operator==="delete"&&F.argument.type==="Identifier"&&fe(F.start,"Deleting local variable in strict mode"),ce(F,B?"UpdateExpression":"UnaryExpression")}for(var H=ln();ie.postfix&&!Lt();){var F=Je(H);F.operator=se,F.prefix=!1,F.argument=H,Dt(H),Ee(),H=ce(F,"UpdateExpression")}return H}function ln(){return Rt(tr())}function Rt(F,B){var H;return xe(pr)?(H=Je(F),H.object=F,H.property=qe(!0),H.computed=!1,Rt(ce(H,"MemberExpression"),B)):xe(zt)?(H=Je(F),H.object=F,H.property=Ne(),H.computed=!0,ve(Vt),Rt(ce(H,"MemberExpression"),B)):!B&&xe(Le)?(H=Je(F),H.callee=F,H.arguments=nr(Ie,!1),Rt(ce(H,"CallExpression"),B)):F}function tr(){var F;switch(ie){case or:return F=Oe(),Ee(),ce(F,"ThisExpression");case Me:return qe();case ze:case Ve:case ut:return F=Oe(),F.value=se,F.raw=g.slice(U,K),Ee(),ce(F,"Literal");case ur:case cr:case lr:return F=Oe(),F.value=ie.atomValue,F.raw=ie.keyword,Ee(),ce(F,"Literal");case Le:var B=ne,H=U;Ee();var ee=Ne();return ee.start=H,ee.end=K,O.locations&&(ee.loc.start=B,ee.loc.end=ae),O.ranges&&(ee.range=[H,K]),ve(Ie),ee;case zt:return F=Oe(),Ee(),F.elements=nr(Vt,!0,!0),ce(F,"ArrayExpression");case yt:return fn();case de:return F=Oe(),Ee(),rr(F,!1);case sr:return pn()}Ue()}function pn(){var F=Oe();return Ee(),F.callee=Rt(tr(),!0),F.arguments=xe(Le)?nr(Ie,!1):Ut,ce(F,"NewExpression")}function fn(){var F=Oe(),B=!0,H=!1;for(F.properties=[],Ee();!xe(it);){if(B)B=!1;else if(ve(Xe),O.allowTrailingCommas&&xe(it))break;var ee={key:jr()},pe=!1,oe;if(xe(mt)?(ee.value=Ne(!0),oe=ee.kind="init"):ee.key.type==="Identifier"&&(ee.key.name==="get"||ee.key.name==="set")?(pe=H=!0,oe=ee.kind=ee.key.name,ee.key=jr(),ie!==Le&&Ue(),ee.value=rr(Oe(),!1)):Ue(),ee.key.type==="Identifier"&&(we||H))for(var he=0;he<F.properties.length;++he){var ge=F.properties[he];if(ge.key.name===ee.key.name){var St=oe===ge.kind||pe&&ge.kind==="init"||oe==="init"&&(ge.kind==="get"||ge.kind==="set");St&&!we&&oe==="init"&&ge.kind==="init"&&(St=!1),St&&fe(ee.key.start,"Redefinition of property")}}F.properties.push(ee)}return ce(F,"ObjectExpression")}function jr(){return ie===ze||ie===Ve?tr():qe(!0)}function rr(F,B){ie===Me?F.id=qe():B?Ue():F.id=null,F.params=[];var H=!0;for(ve(Le);!xe(Ie);)H?H=!1:ve(Xe),F.params.push(qe());var ee=$e,pe=me;if($e=!0,me=[],F.body=bt(!0),$e=ee,me=pe,we||F.body.body.length&&qt(F.body.body[0]))for(var oe=F.id?-1:0;oe<F.params.length;++oe){var he=oe<0?F.id:F.params[oe];if((gr(he.name)||Ct(he.name))&&fe(he.start,"Defining '"+he.name+"' in strict mode"),oe>=0)for(var ge=0;ge<oe;++ge)he.name===F.params[ge].name&&fe(he.start,"Argument name clash in strict mode")}return ce(F,B?"FunctionDeclaration":"FunctionExpression")}function nr(F,B,H){for(var ee=[],pe=!0;!xe(F);){if(pe)pe=!1;else if(ve(Xe),B&&O.allowTrailingCommas&&xe(F))break;ee.push(H&&ie===Xe?null:Ne(!0))}return ee}function qe(F){var B=Oe();return F&&O.forbidReserved==="everywhere"&&(F=!1),ie===Me?(!F&&(O.forbidReserved&&Br(se)||we&&gr(se))&&g.slice(U,K).indexOf("\\")===-1&&fe(U,"The keyword '"+se+"' is reserved"),B.name=se):F&&ie.keyword?B.name=ie.keyword:Ue(),ue=!1,Ee(),ce(B,"Identifier")}})},vm:Q=>{Q.exports=requireVmBrowserify()}},V={};function Y(Q){var te=V[Q];if(te!==void 0)return te.exports;var re=V[Q]={exports:{}};return M[Q].call(re.exports,re,re.exports,Y),re.exports}Y.d=(Q,te)=>{for(var re in te)Y.o(te,re)&&!Y.o(Q,re)&&Object.defineProperty(Q,re,{enumerable:!0,get:te[re]})},Y.o=(Q,te)=>Object.prototype.hasOwnProperty.call(Q,te),Y.r=Q=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(Q,"__esModule",{value:!0})};var W={};return(()=>{Y.r(W),Y.d(W,{default:()=>re});const Q=Y("./original-repo/acorn.js");globalThis.acorn=Q;const{Interpreter:te}=Y("./original-repo/interpreter.js"),re=te})(),W=W.default,W})())}(jsInterpreter$1)),jsInterpreter$1.exports}var jsInterpreterExports=requireJsInterpreter();const r$1=getDefaultExportFromCjs(jsInterpreterExports),o$1=1e3;let a$1=class extends r$1{stepFinished=!1;highlightedBlock="";running=!0;correct=!1;msg;constructor(T,M){super(T,(V,Y)=>{V.setProperty(Y,"highlightBlock",V.createNativeFunction(W=>{this.highlightedBlock=W,this.stepFinished=!0})),V.setProperty(Y,"pause",V.createNativeFunction(()=>{this.stepFinished=!0})),V.setProperty(Y,"exit",V.createNativeFunction((W,Q)=>{this.running=!1,this.correct=W,this.msg=Q})),V.setProperty(Y,"state",V.nativeToPseudo(M)),V.setProperty(Y,"loopTrap",o$1)})}step=()=>{if(!this.running)return!1;do{this.stepFinished=!1;try{this.running=super.step()&&this.running}catch{this.running=!1}}while(this.running&&!this.stepFinished);return this.running}};function S(R,T){const[M,V]=reactExports.useState(),[Y,W]=reactExports.useState({highlightedBlock:"",running:!0,correct:!1,msg:"",globalScope:{}}),Q=reactExports.useCallback(()=>{let te;try{te=new a$1(R,T)}catch(re){if(re instanceof SyntaxError){const O=URL.createObjectURL(new Blob([R])),g=re.loc.line,y=re.loc.column+1,N=new Error(`The generated code contains syntax errors: ${re.message}`,{cause:re});throw N.stack=`   at ${O}:${g}:${y}`,N}throw re}V(te),W({highlightedBlock:te?.highlightedBlock??"",running:te?.running??!1,correct:te?.correct??!1,msg:te?.msg??"",globalScope:te?.pseudoToNative(te.globalScope.object)??{}})},[R,T]);return reactExports.useEffect(()=>Q(),[Q]),{step:()=>{M?.step(),W({highlightedBlock:M?.highlightedBlock??"",running:M?.running??!1,correct:M?.correct??!1,msg:M?.msg??"",globalScope:M?.pseudoToNative(M.globalScope.object)??{}})},reset:Q,...Y}}function f$1(R,T){return reactExports.useEffect(()=>{return window.addEventListener("message",M),()=>window.removeEventListener("message",M);function M(V){V.source===R&&T(V.data)}},[R,T]),reactExports.useCallback(M=>R?.postMessage(M,"*"),[R])}const t$2="_workspace_14w98_1",s$1="_visualizerButtons_14w98_21",o="_visualizer_14w98_21",e="_editorButtons_14w98_34",i="_editor_14w98_34",r={workspace:t$2,visualizerButtons:s$1,visualizer:o,editorButtons:e,editor:i};function Ge({toolbox:R,initialBlocks:T,testcases:M,debug:V,customBlocks:Y,visualizer:W}){const{student:Q,setStudent:te,terminated:re}=_(),{registerProblem:O}=S$2(),{id:g,points:y}=h$1(),{showBoundary:N}=useErrorBoundary();reactExports.useEffect(()=>{for(let de=0;de<M.length;de++)O(`${g}.${de+1}`,{type:"text",maxPoints:y[0],options:[{value:"â",points:y[0]},{value:null,points:y[1]},{value:"â",points:y[2]}]})},[O,g,M,y]);const L=Q.extraData?.[`blockly-${g}`],k=L?JSON.parse(L):T??e$1,D=async de=>{await te({...Q,extraData:{...Q.extraData,[`blockly-${g}`]:JSON.stringify(de)}})},[j,U]=reactExports.useState(null),[K,ne]=reactExports.useState(!1),[ae,ie]=reactExports.useState(!0),[se,ue]=reactExports.useState(!1),[ye,be]=reactExports.useState({}),[Qe,Pe]=reactExports.useState(""),[ke,$e]=reactExports.useState(""),[me,we]=reactExports.useState(0),[fe,Ut]=reactExports.useState(()=>M.map((de,je)=>({correct:!1,index:je}))),{step:ze,reset:ut,running:Ve,highlightedBlock:Me,globalScope:Ye,correct:et,msg:He}=S(ke,M[me]),Ot=reactExports.useMemo(()=>Object.fromEntries(Object.entries(ye).map(([de,je])=>[je,Ye[de]])),[ye,Ye]),tt=f$1(j?.contentWindow,de=>{switch(de.cmd){case"init":{tt({cmd:"init",toolbox:R??t$3,initialBlocks:k,customBlocks:Y,readonly:re});break}case"ready":{ne(!0);break}case"blocks":{D(de.blocks),V?.logBlocks&&console.info(JSON.stringify(de.blocks,void 0,2));break}case"code":{$e(de.code),ue(!1),ie(!0),V?.logJs&&console.info(de.code);break}case"variables":{be(de.variablesMapping),V?.logVariables&&console.info(de.variablesMapping);break}case"svg":{Pe(de.svg);break}case"error":{N(new Error(de.message));break}}});reactExports.useEffect(()=>{tt({cmd:"highlight",highlightedBlock:Me})},[tt,Me]),reactExports.useEffect(()=>{Ve||ue(!1)},[Ve]);const ct=reactExports.useRef(re);reactExports.useEffect(()=>{ct.current!==re&&(ct.current=re,ne(!1),j?.contentWindow?.location.reload())},[re,j?.contentWindow]);const[rt,Nt]=reactExports.useState(3);reactExports.useEffect(()=>{const de=[5e3,2e3,1e3,500,200,100,10];if(se){const je=setInterval(ze,de[rt]);return()=>clearInterval(je)}},[ze,rt,se]);const Tt=async()=>{const de=await Promise.all(M.map(async(Ce,ht)=>{const nt=new a$1(ke,Ce);for(let dt=0;nt.running;dt++)nt.step(),dt%64===0&&await new Promise(Et=>setTimeout(Et,5));return{...nt,index:ht}}));Ut(de),ie(!1);const je={...Q.answers};for(let Ce=0;Ce<M.length;Ce++)je[`${g}.${Ce+1}`]=de[Ce].correct?"â":"â";await te({...Q,answers:je})},[lt,ft]=reactExports.useState();return reactExports.useEffect(()=>ft(He),[He]),jsxRuntimeExports.jsxs("div",{className:clsx(r.workspace,"not-prose"),children:[jsxRuntimeExports.jsxs("div",{className:r.visualizerButtons,children:[jsxRuntimeExports.jsx("div",{className:"pl-2 text-xl font-bold max-sm:hidden lg:max-xl:hidden",children:"Livello"}),jsxRuntimeExports.jsx("div",{className:"join",children:fe.map(({index:de,correct:je,msg:Ce})=>jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>{we(de),ue(!1)},className:clsx("btn join-item z-10 px-3",!ae&&"tooltip",de===me&&"btn-info"),"data-tip":Ce,children:ae?jsxRuntimeExports.jsx(CircleHelp,{size:24}):je?jsxRuntimeExports.jsx(CircleCheck,{size:24,className:"fill-success stroke-success-content"}):jsxRuntimeExports.jsx(CircleX,{size:24,className:"fill-error stroke-error-content"})},de))})]}),jsxRuntimeExports.jsxs("div",{className:r.visualizer,children:[jsxRuntimeExports.jsx(b$2,{onError:de=>{de.message="Visualizzazione del livello fallita"},onReset:ut,children:W&&Ye?.state&&jsxRuntimeExports.jsx(W,{variables:Ot,state:Ye.state,testcase:me,message:He})}),jsxRuntimeExports.jsx("div",{className:clsx("sticky left-0 bottom-0 z-50 p-4",!lt&&"invisible"),children:jsxRuntimeExports.jsxs("div",{role:"alert",className:clsx("alert",et?"alert-success":"alert-error"),children:[et?jsxRuntimeExports.jsx(CircleCheck,{}):jsxRuntimeExports.jsx(TriangleAlert,{}),jsxRuntimeExports.jsx("span",{children:lt}),jsxRuntimeExports.jsx("button",{type:"button",onClick:()=>ft(void 0),"aria-label":"Nascondi messaggio",children:jsxRuntimeExports.jsx(MessageSquareOff,{})})]})})]}),jsxRuntimeExports.jsxs("div",{className:r.editorButtons,children:[jsxRuntimeExports.jsxs("div",{className:"join join-horizontal",children:[jsxRuntimeExports.jsx("div",{className:"join-item tooltip","data-tip":"Esegui/pausa",children:jsxRuntimeExports.jsx("button",{type:"button",className:"btn btn-info rounded-[inherit]",disabled:!Ve||ae,onClick:()=>ue(!se),"aria-label":"Esugui un blocco",children:se?jsxRuntimeExports.jsx(Pause,{className:"size-6"}):jsxRuntimeExports.jsx(Play,{className:"size-6"})})}),jsxRuntimeExports.jsx("div",{className:"join-item tooltip","data-tip":"Esegui un blocco",children:jsxRuntimeExports.jsx("button",{type:"button",className:"btn btn-info rounded-[inherit]",disabled:!Ve||ae,onClick:ze,"aria-label":"Esugui un blocco",children:jsxRuntimeExports.jsx(SkipForward,{className:"size-6"})})}),jsxRuntimeExports.jsx("div",{className:"join-item tooltip","data-tip":"Esegui da capo",children:jsxRuntimeExports.jsx("button",{type:"button",className:"btn btn-info rounded-[inherit]","aria-label":"Esegui da capo",disabled:ae,onClick:()=>{ut(),ue(!1)},children:jsxRuntimeExports.jsx(RotateCcw,{className:"size-6"})})})]}),jsxRuntimeExports.jsx("div",{className:"tooltip","data-tip":"Correggi la soluzione",children:jsxRuntimeExports.jsx("button",{type:"button",className:"btn btn-success","aria-label":"Correggi la soluzione",disabled:!ae||!K,onClick:Tt,children:jsxRuntimeExports.jsx(Send,{className:"size-6"})})}),jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsx("input",{className:"range",type:"range",min:"0",max:"6",value:rt,onChange:de=>Nt(+de.target.value),"aria-label":"VelocitÃ  di esecuzione"}),jsxRuntimeExports.jsxs("div",{className:"flex w-full justify-between px-2 text-xs",children:[jsxRuntimeExports.jsx("span",{children:"Lento"}),jsxRuntimeExports.jsx("span",{children:"Veloce"})]})]}),!1]}),jsxRuntimeExports.jsx(De,{ref:U,ready:K})]})}const De=reactExports.forwardRef(function({ready:R},T){return jsxRuntimeExports.jsxs("div",{className:r.editor,children:[jsxRuntimeExports.jsx("iframe",{ref:T,src:"/__blockly_iframe/",className:"size-full",title:"Area di lavoro di Blockly",loading:"lazy"}),!R&&jsxRuntimeExports.jsx("div",{className:"absolute inset-0 z-50 bg-white",children:jsxRuntimeExports.jsx("div",{className:"flex h-full text-slate-700",children:jsxRuntimeExports.jsx(n$3,{})})})]})});function u(R){return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(c,{field:"type",value:"text"}),jsxRuntimeExports.jsx(c,{field:"options",children:jsxRuntimeExports.jsxs(a$2,{children:[jsxRuntimeExports.jsxs(s$2,{children:[jsxRuntimeExports.jsx(c,{field:"value",value:"â"}),jsxRuntimeExports.jsx(c,{field:"correct",value:!0})]}),jsxRuntimeExports.jsxs(s$2,{children:[jsxRuntimeExports.jsx(c,{field:"value",value:"â"}),jsxRuntimeExports.jsx(c,{field:"correct",value:!1})]})]})}),jsxRuntimeExports.jsx(Ge,{...R})]})}const t$1=At;function a({display:R,children:T}){const M=reactExports.useRef(null);return reactExports.useEffect(()=>{M.current&&katex.render(T,M.current,{displayMode:R})},[T,R]),jsxRuntimeExports.jsx("span",{ref:M})}function f({children:R}){return jsxRuntimeExports.jsx(a$2,{children:jsxRuntimeExports.jsx(w$1,{children:R})})}function n({src:R,alt:T,title:M}){return R?jsxRuntimeExports.jsx("img",{className:"max-h-[90vh] min-w-0 p-4 first:rounded-l-xl last:rounded-r-xl dark:bg-white print:m-0 print:max-h-[60vh] print:max-w-full",src:R.src,width:R.width,height:R.height,alt:T,title:M,style:{maxWidth:`min(100%, ${90*R.width/R.height}vh)`}}):jsxRuntimeExports.jsx("div",{className:"rounded-box bg-error p-4 text-error-content",children:"Missing image"})}function b({id:R,points:T,children:M}){return jsxRuntimeExports.jsxs(s$2,{children:[jsxRuntimeExports.jsx(c,{field:"id",value:R.toString()}),jsxRuntimeExports.jsx(c,{field:"pointsCorrect",value:T[0]}),jsxRuntimeExports.jsx(c,{field:"pointsBlank",value:T[1]}),jsxRuntimeExports.jsx(c,{field:"pointsWrong",value:T[2]}),jsxRuntimeExports.jsx(c,{field:"subProblems",children:jsxRuntimeExports.jsx(a$2,{children:jsxRuntimeExports.jsx(u$1,{id:R,points:T,children:M})})})]})}function s({subId:R,children:T}){return jsxRuntimeExports.jsxs(s$2,{children:[R&&jsxRuntimeExports.jsx(c,{field:"id",value:R.toString()}),jsxRuntimeExports.jsx(v,{subId:R,children:T})]})}function t({children:R}){return R}function P(){return{Answer:x,AnswerGroup:h,Blockly:u,Code:t$1,Contest:f,Equation:a,Explanation:C,Image:n,MultipleChoiceAnswer:A,OpenAnswer:w,Problem:b,Section:t,SubProblem:s}}export{I,P,isIndex as a,eq as e,h$2 as h,isArrayLike as i};
//# sourceMappingURL=ed4b56fd-components.js.map
