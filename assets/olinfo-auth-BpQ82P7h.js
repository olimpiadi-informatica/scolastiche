/*! For licenses information, see LICENSES.txt */
var Pn=Object.defineProperty;var In=(a,o,y)=>o in a?Pn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:y}):a[o]=y;var xr=(a,o,y)=>(In(a,typeof o!="symbol"?o+"":o,y),y);import{i as isSymbol,b as baseGetTag,r as root,a as isObjectLike,f as freeGlobal,c as isArray,t as toString,S as Symbol$1,j as jsxRuntimeExports}from"./toString-BpEX5tmT.js";import{r as reactExports,a as c}from"./react-dom-DWilhIVE.js";import{_ as __vitePreload}from"./preload-helper-B_KhYgH7.js";import{g as getDefaultExportFromCjs,c as commonjsGlobal}from"./commonjs-helper-3Jsk8tIi.js";import{Z as ZodError,z}from"./zod-CXY4Xi5W.js";import{k as katex}from"./katex-DTctDNEF.js";var reWhitespace=/\s/;function trimmedEndIndex(a){for(var o=a.length;o--&&reWhitespace.test(a.charAt(o)););return o}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject(a){var o=typeof a;return a!=null&&(o=="object"||o=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject(a)){var o=typeof a.valueOf=="function"?a.valueOf():a;a=isObject(o)?o+"":o}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var y=reIsBinary.test(a);return y||reIsOctal.test(a)?freeParseInt(a.slice(2),y?2:8):reIsBadHex.test(a)?NAN:+a}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(a){if(!a)return a===0?a:0;if(a=toNumber(a),a===INFINITY$1||a===-INFINITY$1){var o=a<0?-1:1;return o*MAX_INTEGER}return a===a?a:0}function identity(a){return a}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(a){if(!isObject(a))return!1;var o=baseGetTag(a);return o==funcTag$1||o==genTag||o==asyncTag||o==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(a){if(a!=null){try{return funcToString$1.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject(a)||isMasked(a))return!1;var o=isFunction$1(a)?reIsNative:reIsHostCtor;return o.test(toSource(a))}function getValue(a,o){return a==null?void 0:a[o]}function getNative(a,o){var y=getValue(a,o);return baseIsNative(y)?y:void 0}var WeakMap$1=getNative(root,"WeakMap");function apply(a,o,y){switch(y.length){case 0:return a.call(o);case 1:return a.call(o,y[0]);case 2:return a.call(o,y[0],y[1]);case 3:return a.call(o,y[0],y[1],y[2])}return a.apply(o,y)}function noop$1(){}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var o=0,y=0;return function(){var g=nativeNow(),w=HOT_SPAN-(g-y);if(y=g,w>0){if(++o>=HOT_COUNT)return arguments[0]}else o=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),baseSetToString=defineProperty?function(a,o){return defineProperty(a,"toString",{configurable:!0,enumerable:!1,value:constant(o),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(a,o){var y=typeof a;return o=o??MAX_SAFE_INTEGER$1,!!o&&(y=="number"||y!="symbol"&&reIsUint.test(a))&&a>-1&&a%1==0&&a<o}function eq(a,o){return a===o||a!==a&&o!==o}var nativeMax$1=Math.max;function overRest(a,o,y){return o=nativeMax$1(o===void 0?a.length-1:o,0),function(){for(var g=arguments,w=-1,O=nativeMax$1(g.length-o,0),M=Array(O);++w<O;)M[w]=g[o+w];w=-1;for(var F=Array(o+1);++w<o;)F[w]=g[w];return F[o]=y(M),apply(a,this,F)}}function baseRest(a,o){return setToString(overRest(a,o,identity),a+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isArrayLike(a){return a!=null&&isLength(a.length)&&!isFunction$1(a)}function isIterateeCall(a,o,y){if(!isObject(y))return!1;var g=typeof o;return(g=="number"?isArrayLike(y)&&isIndex(o,y.length):g=="string"&&o in y)?eq(y[o],a):!1}var objectProto$8=Object.prototype;function isPrototype(a){var o=a&&a.constructor,y=typeof o=="function"&&o.prototype||objectProto$8;return a===y}function baseTimes(a,o){for(var y=-1,g=Array(a);++y<a;)g[y]=o(y);return g}var argsTag$2="[object Arguments]";function baseIsArguments(a){return isObjectLike(a)&&baseGetTag(a)==argsTag$2}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike(a)&&hasOwnProperty$6.call(a,"callee")&&!propertyIsEnumerable$1.call(a,"callee")};function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(a){return isObjectLike(a)&&isLength(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(o){return a(o)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var a=freeModule&&freeModule.require&&freeModule.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function arrayLikeKeys(a,o){var y=isArray(a),g=!y&&isArguments(a),w=!y&&!g&&isBuffer(a),O=!y&&!g&&!w&&isTypedArray(a),M=y||g||w||O,F=M?baseTimes(a.length,String):[],$=F.length;for(var d in a)(o||hasOwnProperty$5.call(a,d))&&!(M&&(d=="length"||w&&(d=="offset"||d=="parent")||O&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||isIndex(d,$)))&&F.push(d);return F}function overArg(a,o){return function(y){return a(o(y))}}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeys(a){if(!isPrototype(a))return nativeKeys(a);var o=[];for(var y in Object(a))hasOwnProperty$4.call(a,y)&&y!="constructor"&&o.push(y);return o}function keys(a){return isArrayLike(a)?arrayLikeKeys(a):baseKeys(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,o){if(isArray(a))return!1;var y=typeof a;return y=="number"||y=="symbol"||y=="boolean"||a==null||isSymbol(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||o!=null&&a in Object(o)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(a){var o=this.has(a)&&delete this.__data__[a];return this.size-=o?1:0,o}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(a){var o=this.__data__;if(nativeCreate){var y=o[a];return y===HASH_UNDEFINED$2?void 0:y}return hasOwnProperty$3.call(o,a)?o[a]:void 0}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas(a){var o=this.__data__;return nativeCreate?o[a]!==void 0:hasOwnProperty$2.call(o,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,o){var y=this.__data__;return this.size+=this.has(a)?0:1,y[a]=nativeCreate&&o===void 0?HASH_UNDEFINED$1:o,this}function Hash$1(a){var o=-1,y=a==null?0:a.length;for(this.clear();++o<y;){var g=a[o];this.set(g[0],g[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,o){for(var y=a.length;y--;)if(eq(a[y][0],o))return y;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(a){var o=this.__data__,y=assocIndexOf(o,a);if(y<0)return!1;var g=o.length-1;return y==g?o.pop():splice.call(o,y,1),--this.size,!0}function listCacheGet(a){var o=this.__data__,y=assocIndexOf(o,a);return y<0?void 0:o[y][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,o){var y=this.__data__,g=assocIndexOf(y,a);return g<0?(++this.size,y.push([a,o])):y[g][1]=o,this}function ListCache(a){var o=-1,y=a==null?0:a.length;for(this.clear();++o<y;){var g=a[o];this.set(g[0],g[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash$1,map:new(Map$1||ListCache),string:new Hash$1}}function isKeyable(a){var o=typeof a;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?a!=="__proto__":a===null}function getMapData(a,o){var y=a.__data__;return isKeyable(o)?y[typeof o=="string"?"string":"hash"]:y.map}function mapCacheDelete(a){var o=getMapData(this,a).delete(a);return this.size-=o?1:0,o}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,o){var y=getMapData(this,a),g=y.size;return y.set(a,o),this.size+=y.size==g?0:1,this}function MapCache(a){var o=-1,y=a==null?0:a.length;for(this.clear();++o<y;){var g=a[o];this.set(g[0],g[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(a,o){if(typeof a!="function"||o!=null&&typeof o!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var y=function(){var g=arguments,w=o?o.apply(this,g):g[0],O=y.cache;if(O.has(w))return O.get(w);var M=a.apply(this,g);return y.cache=O.set(w,M)||O,M};return y.cache=new(memoize.Cache||MapCache),y}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var o=memoize(a,function(g){return y.size===MAX_MEMOIZE_SIZE&&y.clear(),g}),y=o.cache;return o}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(a){var o=[];return a.charCodeAt(0)===46&&o.push(""),a.replace(rePropName,function(y,g,w,O){o.push(w?O.replace(reEscapeChar,"$1"):g||y)}),o});function castPath(a,o){return isArray(a)?a:isKey(a,o)?[a]:stringToPath(toString(a))}var INFINITY=1/0;function toKey(a){if(typeof a=="string"||isSymbol(a))return a;var o=a+"";return o=="0"&&1/a==-INFINITY?"-0":o}function baseGet(a,o){o=castPath(o,a);for(var y=0,g=o.length;a!=null&&y<g;)a=a[toKey(o[y++])];return y&&y==g?a:void 0}function get(a,o,y){var g=a==null?void 0:baseGet(a,o);return g===void 0?y:g}function arrayPush(a,o){for(var y=-1,g=o.length,w=a.length;++y<g;)a[w+y]=o[y];return a}function baseClamp(a,o,y){return a===a&&(y!==void 0&&(a=a<=y?a:y),o!==void 0&&(a=a>=o?a:o)),a}function clamp(a,o,y){return y===void 0&&(y=o,o=void 0),y!==void 0&&(y=toNumber(y),y=y===y?y:0),o!==void 0&&(o=toNumber(o),o=o===o?o:0),baseClamp(toNumber(a),o,y)}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var o=this.__data__,y=o.delete(a);return this.size=o.size,y}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,o){var y=this.__data__;if(y instanceof ListCache){var g=y.__data__;if(!Map$1||g.length<LARGE_ARRAY_SIZE-1)return g.push([a,o]),this.size=++y.size,this;y=this.__data__=new MapCache(g)}return y.set(a,o),this.size=y.size,this}function Stack(a){var o=this.__data__=new ListCache(a);this.size=o.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(a,o){for(var y=-1,g=a==null?0:a.length,w=0,O=[];++y<g;){var M=a[y];o(M,y,a)&&(O[w++]=M)}return O}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols(a),function(o){return propertyIsEnumerable.call(a,o)}))}:stubArray;const getSymbols$1=getSymbols;function baseGetAllKeys(a,o,y){var g=o(a);return isArray(a)?g:arrayPush(g,y(a))}function getAllKeys(a){return baseGetAllKeys(a,keys,getSymbols$1)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$1||Map$1&&getTag(new Map$1)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag)&&(getTag=function(a){var o=baseGetTag(a),y=o==objectTag$1?a.constructor:void 0,g=y?toSource(y):"";if(g)switch(g){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return o});const getTag$1=getTag;var Uint8Array$1=root.Uint8Array;const Uint8Array$2=Uint8Array$1;var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var o=-1,y=a==null?0:a.length;for(this.__data__=new MapCache;++o<y;)this.add(a[o])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(a,o){for(var y=-1,g=a==null?0:a.length;++y<g;)if(o(a[y],y,a))return!0;return!1}function cacheHas(a,o){return a.has(o)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,o,y,g,w,O){var M=y&COMPARE_PARTIAL_FLAG$5,F=a.length,$=o.length;if(F!=$&&!(M&&$>F))return!1;var d=O.get(a),s=O.get(o);if(d&&s)return d==o&&s==a;var i=-1,v=!0,_=y&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(O.set(a,o),O.set(o,a);++i<F;){var S=a[i],T=o[i];if(g)var b=M?g(T,S,i,o,a,O):g(S,T,i,a,o,O);if(b!==void 0){if(b)continue;v=!1;break}if(_){if(!arraySome(o,function(C,G){if(!cacheHas(_,G)&&(S===C||w(S,C,y,g,O)))return _.push(G)})){v=!1;break}}else if(!(S===T||w(S,T,y,g,O))){v=!1;break}}return O.delete(a),O.delete(o),v}function mapToArray(a){var o=-1,y=Array(a.size);return a.forEach(function(g,w){y[++o]=[w,g]}),y}function setToArray(a){var o=-1,y=Array(a.size);return a.forEach(function(g){y[++o]=g}),y}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,o,y,g,w,O,M){switch(y){case dataViewTag:if(a.byteLength!=o.byteLength||a.byteOffset!=o.byteOffset)return!1;a=a.buffer,o=o.buffer;case arrayBufferTag:return!(a.byteLength!=o.byteLength||!O(new Uint8Array$2(a),new Uint8Array$2(o)));case boolTag:case dateTag:case numberTag:return eq(+a,+o);case errorTag:return a.name==o.name&&a.message==o.message;case regexpTag:case stringTag:return a==o+"";case mapTag:var F=mapToArray;case setTag:var $=g&COMPARE_PARTIAL_FLAG$4;if(F||(F=setToArray),a.size!=o.size&&!$)return!1;var d=M.get(a);if(d)return d==o;g|=COMPARE_UNORDERED_FLAG$2,M.set(a,o);var s=equalArrays(F(a),F(o),g,w,O,M);return M.delete(a),s;case symbolTag:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(o)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(a,o,y,g,w,O){var M=y&COMPARE_PARTIAL_FLAG$3,F=getAllKeys(a),$=F.length,d=getAllKeys(o),s=d.length;if($!=s&&!M)return!1;for(var i=$;i--;){var v=F[i];if(!(M?v in o:hasOwnProperty$1.call(o,v)))return!1}var _=O.get(a),S=O.get(o);if(_&&S)return _==o&&S==a;var T=!0;O.set(a,o),O.set(o,a);for(var b=M;++i<$;){v=F[i];var C=a[v],G=o[v];if(g)var Y=M?g(G,C,v,o,a,O):g(C,G,v,a,o,O);if(!(Y===void 0?C===G||w(C,G,y,g,O):Y)){T=!1;break}b||(b=v=="constructor")}if(T&&!b){var Q=a.constructor,X=o.constructor;Q!=X&&"constructor"in a&&"constructor"in o&&!(typeof Q=="function"&&Q instanceof Q&&typeof X=="function"&&X instanceof X)&&(T=!1)}return O.delete(a),O.delete(o),T}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(a,o,y,g,w,O){var M=isArray(a),F=isArray(o),$=M?arrayTag:getTag$1(a),d=F?arrayTag:getTag$1(o);$=$==argsTag?objectTag:$,d=d==argsTag?objectTag:d;var s=$==objectTag,i=d==objectTag,v=$==d;if(v&&isBuffer(a)){if(!isBuffer(o))return!1;M=!0,s=!1}if(v&&!s)return O||(O=new Stack),M||isTypedArray(a)?equalArrays(a,o,y,g,w,O):equalByTag(a,o,$,y,g,w,O);if(!(y&COMPARE_PARTIAL_FLAG$2)){var _=s&&hasOwnProperty.call(a,"__wrapped__"),S=i&&hasOwnProperty.call(o,"__wrapped__");if(_||S){var T=_?a.value():a,b=S?o.value():o;return O||(O=new Stack),w(T,b,y,g,O)}}return v?(O||(O=new Stack),equalObjects(a,o,y,g,w,O)):!1}function baseIsEqual(a,o,y,g,w){return a===o?!0:a==null||o==null||!isObjectLike(a)&&!isObjectLike(o)?a!==a&&o!==o:baseIsEqualDeep(a,o,y,g,baseIsEqual,w)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,o,y,g){var w=y.length,O=w,M=!g;if(a==null)return!O;for(a=Object(a);w--;){var F=y[w];if(M&&F[2]?F[1]!==a[F[0]]:!(F[0]in a))return!1}for(;++w<O;){F=y[w];var $=F[0],d=a[$],s=F[1];if(M&&F[2]){if(d===void 0&&!($ in a))return!1}else{var i=new Stack;if(g)var v=g(d,s,$,a,o,i);if(!(v===void 0?baseIsEqual(s,d,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,g,i):v))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject(a)}function getMatchData(a){for(var o=keys(a),y=o.length;y--;){var g=o[y],w=a[g];o[y]=[g,w,isStrictComparable(w)]}return o}function matchesStrictComparable(a,o){return function(y){return y==null?!1:y[a]===o&&(o!==void 0||a in Object(y))}}function baseMatches(a){var o=getMatchData(a);return o.length==1&&o[0][2]?matchesStrictComparable(o[0][0],o[0][1]):function(y){return y===a||baseIsMatch(y,a,o)}}function baseHasIn(a,o){return a!=null&&o in Object(a)}function hasPath(a,o,y){o=castPath(o,a);for(var g=-1,w=o.length,O=!1;++g<w;){var M=toKey(o[g]);if(!(O=a!=null&&y(a,M)))break;a=a[M]}return O||++g!=w?O:(w=a==null?0:a.length,!!w&&isLength(w)&&isIndex(M,w)&&(isArray(a)||isArguments(a)))}function hasIn(a,o){return a!=null&&hasPath(a,o,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,o){return isKey(a)&&isStrictComparable(o)?matchesStrictComparable(toKey(a),o):function(y){var g=get(y,a);return g===void 0&&g===o?hasIn(y,a):baseIsEqual(o,g,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(o){return o==null?void 0:o[a]}}function basePropertyDeep(a){return function(o){return baseGet(o,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity:typeof a=="object"?isArray(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}var FUNC_ERROR_TEXT="Expected a function";function baseDelay(a,o,y){if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){a.apply(void 0,y)},o)}var defer=baseRest(function(a,o){return baseDelay(a,1,o)});function baseSum(a,o){for(var y,g=-1,w=a.length;++g<w;){var O=o(a[g]);O!==void 0&&(y=y===void 0?O:y+O)}return y}var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(a,o,y,g){for(var w=-1,O=nativeMax(nativeCeil((o-a)/(y||1)),0),M=Array(O);O--;)M[g?O:++w]=a,a+=y;return M}function createRange(a){return function(o,y,g){return g&&typeof g!="number"&&isIterateeCall(o,y,g)&&(y=g=void 0),o=toFinite(o),y===void 0?(y=o,o=0):y=toFinite(y),g=g===void 0?o<y?1:-1:toFinite(g),baseRange(o,y,g,a)}}var range=createRange();function sumBy(a,o){return a&&a.length?baseSum(a,baseIteratee(o)):0}var cookie={};cookie.parse=parse;cookie.serialize=serialize$1;var __toString=Object.prototype.toString,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse(a,o){if(typeof a!="string")throw new TypeError("argument str must be a string");for(var y={},g=o||{},w=g.decode||decode,O=0;O<a.length;){var M=a.indexOf("=",O);if(M===-1)break;var F=a.indexOf(";",O);if(F===-1)F=a.length;else if(F<M){O=a.lastIndexOf(";",M-1)+1;continue}var $=a.slice(O,M).trim();if(y[$]===void 0){var d=a.slice(M+1,F).trim();d.charCodeAt(0)===34&&(d=d.slice(1,-1)),y[$]=tryDecode(d,w)}O=F+1}return y}function serialize$1(a,o,y){var g=y||{},w=g.encode||encode;if(typeof w!="function")throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(a))throw new TypeError("argument name is invalid");var O=w(o);if(O&&!fieldContentRegExp.test(O))throw new TypeError("argument val is invalid");var M=a+"="+O;if(g.maxAge!=null){var F=g.maxAge-0;if(isNaN(F)||!isFinite(F))throw new TypeError("option maxAge is invalid");M+="; Max-Age="+Math.floor(F)}if(g.domain){if(!fieldContentRegExp.test(g.domain))throw new TypeError("option domain is invalid");M+="; Domain="+g.domain}if(g.path){if(!fieldContentRegExp.test(g.path))throw new TypeError("option path is invalid");M+="; Path="+g.path}if(g.expires){var $=g.expires;if(!isDate($)||isNaN($.valueOf()))throw new TypeError("option expires is invalid");M+="; Expires="+$.toUTCString()}if(g.httpOnly&&(M+="; HttpOnly"),g.secure&&(M+="; Secure"),g.partitioned&&(M+="; Partitioned"),g.priority){var d=typeof g.priority=="string"?g.priority.toLowerCase():g.priority;switch(d){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(g.sameSite){var s=typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite;switch(s){case!0:M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"strict":M+="; SameSite=Strict";break;case"none":M+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return M}function decode(a){return a.indexOf("%")!==-1?decodeURIComponent(a):a}function encode(a){return encodeURIComponent(a)}function isDate(a){return __toString.call(a)==="[object Date]"||a instanceof Date}function tryDecode(a,o){try{return o(a)}catch{return a}}class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";function b64DecodeUnicode(a){return decodeURIComponent(atob(a).replace(/(.)/g,(o,y)=>{let g=y.charCodeAt(0).toString(16).toUpperCase();return g.length<2&&(g="0"+g),"%"+g}))}function base64UrlDecode(a){let o=a.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(o)}catch{return atob(o)}}function jwtDecode(a,o){if(typeof a!="string")throw new InvalidTokenError("Invalid token specified: must be a string");o||(o={});const y=o.header===!0?0:1,g=a.split(".")[y];if(typeof g!="string")throw new InvalidTokenError(`Invalid token specified: missing part #${y+1}`);let w;try{w=base64UrlDecode(g)}catch(O){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${y+1} (${O.message})`)}try{return JSON.parse(w)}catch(O){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${y+1} (${O.message})`)}}var classnames={exports:{}};(function(a){(function(){var o={}.hasOwnProperty;function y(){for(var O="",M=0;M<arguments.length;M++){var F=arguments[M];F&&(O=w(O,g(F)))}return O}function g(O){if(typeof O=="string"||typeof O=="number")return O;if(typeof O!="object")return"";if(Array.isArray(O))return y.apply(null,O);if(O.toString!==Object.prototype.toString&&!O.toString.toString().includes("[native code]"))return O.toString();var M="";for(var F in O)o.call(O,F)&&O[F]&&(M=w(M,F));return M}function w(O,M){return M?O?O+" "+M:O+M:O}a.exports?(y.default=y,a.exports=y):window.classNames=y})()})(classnames);var classnamesExports=classnames.exports;const D$1=getDefaultExportFromCjs(classnamesExports);function toDate(a){const o=Object.prototype.toString.call(a);return a instanceof Date||typeof a=="object"&&o==="[object Date]"?new a.constructor(+a):typeof a=="number"||o==="[object Number]"||typeof a=="string"||o==="[object String]"?new Date(a):new Date(NaN)}function constructFrom(a,o){return a instanceof Date?new a.constructor(o):new Date(o)}function addMilliseconds(a,o){const y=+toDate(a);return constructFrom(a,y+o)}const millisecondsInMinute=6e4;function addMinutes(a,o){return addMilliseconds(a,o*millisecondsInMinute)}function getRoundingMethod(a){return o=>{const g=(a?Math[a]:Math.trunc)(o);return g===0?0:g}}function differenceInMilliseconds(a,o){return+toDate(a)-+toDate(o)}function differenceInSeconds(a,o,y){const g=differenceInMilliseconds(a,o)/1e3;return getRoundingMethod(y==null?void 0:y.roundingMethod)(g)}var shim={exports:{}},useSyncExternalStoreShim_production_min={};var e=reactExports;function h$1(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var k=typeof Object.is=="function"?Object.is:h$1,l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function q$1(a,o){var y=o(),g=l({inst:{value:y,getSnapshot:o}}),w=g[0].inst,O=g[1];return n(function(){w.value=y,w.getSnapshot=o,r(w)&&O({inst:w})},[a,y,o]),m(function(){return r(w)&&O({inst:w}),a(function(){r(w)&&O({inst:w})})},[a]),p(y),y}function r(a){var o=a.getSnapshot;a=a.value;try{var y=o();return!k(a,y)}catch{return!0}}function t(a,o){return o()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t:q$1;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;const noop=()=>{},UNDEFINED=noop(),OBJECT=Object,isUndefined=a=>a===UNDEFINED,isFunction=a=>typeof a=="function",mergeObjects=(a,o)=>({...a,...o}),isPromiseLike=a=>isFunction(a.then),table=new WeakMap;let counter=0;const stableHash=a=>{const o=typeof a,y=a&&a.constructor,g=y==Date;let w,O;if(OBJECT(a)===a&&!g&&y!=RegExp){if(w=table.get(a),w)return w;if(w=++counter+"~",table.set(a,w),y==Array){for(w="@",O=0;O<a.length;O++)w+=stableHash(a[O])+",";table.set(a,w)}if(y==OBJECT){w="#";const M=OBJECT.keys(a).sort();for(;!isUndefined(O=M.pop());)isUndefined(a[O])||(w+=O+":"+stableHash(a[O])+",");table.set(a,w)}}else w=g?a.toJSON():o=="symbol"?a.toString():o=="string"?JSON.stringify(a):""+a;return w},SWRGlobalState=new WeakMap,EMPTY_CACHE={},INITIAL_CACHE={},STR_UNDEFINED="undefined",isWindowDefined=typeof window!=STR_UNDEFINED,isDocumentDefined=typeof document!=STR_UNDEFINED,hasRequestAnimationFrame=()=>isWindowDefined&&typeof window.requestAnimationFrame!=STR_UNDEFINED,createCacheHelper=(a,o)=>{const y=SWRGlobalState.get(a);return[()=>!isUndefined(o)&&a.get(o)||EMPTY_CACHE,g=>{if(!isUndefined(o)){const w=a.get(o);o in INITIAL_CACHE||(INITIAL_CACHE[o]=w),y[5](o,mergeObjects(w,g),w||EMPTY_CACHE)}},y[6],()=>!isUndefined(o)&&o in INITIAL_CACHE?INITIAL_CACHE[o]:!isUndefined(o)&&a.get(o)||EMPTY_CACHE]};let online=!0;const isOnline=()=>online,[onWindowEvent,offWindowEvent]=isWindowDefined&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[noop,noop],isVisible=()=>{const a=isDocumentDefined&&document.visibilityState;return isUndefined(a)||a!=="hidden"},initFocus=a=>(isDocumentDefined&&document.addEventListener("visibilitychange",a),onWindowEvent("focus",a),()=>{isDocumentDefined&&document.removeEventListener("visibilitychange",a),offWindowEvent("focus",a)}),initReconnect=a=>{const o=()=>{online=!0,a()},y=()=>{online=!1};return onWindowEvent("online",o),onWindowEvent("offline",y),()=>{offWindowEvent("online",o),offWindowEvent("offline",y)}},preset={isOnline,isVisible},defaultConfigOptions={initFocus,initReconnect},IS_REACT_LEGACY=!c.useId,IS_SERVER=!isWindowDefined||"Deno"in window,rAF=a=>hasRequestAnimationFrame()?window.requestAnimationFrame(a):setTimeout(a,1),useIsomorphicLayoutEffect=IS_SERVER?reactExports.useEffect:reactExports.useLayoutEffect,navigatorConnection=typeof navigator<"u"&&navigator.connection,slowConnection=!IS_SERVER&&navigatorConnection&&(["slow-2g","2g"].includes(navigatorConnection.effectiveType)||navigatorConnection.saveData),serialize=a=>{if(isFunction(a))try{a=a()}catch{a=""}const o=a;return a=typeof a=="string"?a:(Array.isArray(a)?a.length:a)?stableHash(a):"",[a,o]};let __timestamp=0;const getTimestamp=()=>++__timestamp,FOCUS_EVENT=0,RECONNECT_EVENT=1,MUTATE_EVENT=2,ERROR_REVALIDATE_EVENT=3;var events={__proto__:null,ERROR_REVALIDATE_EVENT,FOCUS_EVENT,MUTATE_EVENT,RECONNECT_EVENT};async function internalMutate(...a){const[o,y,g,w]=a,O=mergeObjects({populateCache:!0,throwOnError:!0},typeof w=="boolean"?{revalidate:w}:w||{});let M=O.populateCache;const F=O.rollbackOnError;let $=O.optimisticData;const d=O.revalidate!==!1,s=_=>typeof F=="function"?F(_):F!==!1,i=O.throwOnError;if(isFunction(y)){const _=y,S=[],T=o.keys();for(const b of T)!/^\$(inf|sub)\$/.test(b)&&_(o.get(b)._k)&&S.push(b);return Promise.all(S.map(v))}return v(y);async function v(_){const[S]=serialize(_);if(!S)return;const[T,b]=createCacheHelper(o,S),[C,G,Y,Q]=SWRGlobalState.get(o),X=()=>{const ie=C[S];return d&&(delete Y[S],delete Q[S],ie&&ie[0])?ie[0](MUTATE_EVENT).then(()=>T().data):T().data};if(a.length<3)return X();let K=g,re;const te=getTimestamp();G[S]=[te,0];const de=!isUndefined($),Ne=T(),ve=Ne.data,Me=Ne._c,ge=isUndefined(Me)?ve:Me;if(de&&($=isFunction($)?$(ge,ve):$,b({data:$,_c:ge})),isFunction(K))try{K=K(ge)}catch(ie){re=ie}if(K&&isPromiseLike(K))if(K=await K.catch(ie=>{re=ie}),te!==G[S][0]){if(re)throw re;return K}else re&&de&&s(re)&&(M=!0,b({data:ge,_c:UNDEFINED}));if(M&&!re)if(isFunction(M)){const ie=M(K,ge);b({data:ie,error:UNDEFINED,_c:UNDEFINED})}else b({data:K,error:UNDEFINED,_c:UNDEFINED});if(G[S][1]=getTimestamp(),Promise.resolve(X()).then(()=>{b({_c:UNDEFINED})}),re){if(i)throw re;return}return K}}const revalidateAllKeys=(a,o)=>{for(const y in a)a[y][0]&&a[y][0](o)},initCache=(a,o)=>{if(!SWRGlobalState.has(a)){const y=mergeObjects(defaultConfigOptions,o),g={},w=internalMutate.bind(UNDEFINED,a);let O=noop;const M={},F=(s,i)=>{const v=M[s]||[];return M[s]=v,v.push(i),()=>v.splice(v.indexOf(i),1)},$=(s,i,v)=>{a.set(s,i);const _=M[s];if(_)for(const S of _)S(i,v)},d=()=>{if(!SWRGlobalState.has(a)&&(SWRGlobalState.set(a,[g,{},{},{},w,$,F]),!IS_SERVER)){const s=y.initFocus(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,g,FOCUS_EVENT))),i=y.initReconnect(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,g,RECONNECT_EVENT)));O=()=>{s&&s(),i&&i(),SWRGlobalState.delete(a)}}};return d(),[a,w,d,O]}return[a,SWRGlobalState.get(a)[4]]},onErrorRetry=(a,o,y,g,w)=>{const O=y.errorRetryCount,M=w.retryCount,F=~~((Math.random()+.5)*(1<<(M<8?M:8)))*y.errorRetryInterval;!isUndefined(O)&&M>O||setTimeout(g,F,w)},compare=(a,o)=>stableHash(a)==stableHash(o),[cache,mutate]=initCache(new Map),defaultConfig=mergeObjects({onLoadingSlow:noop,onSuccess:noop,onError:noop,onErrorRetry,onDiscarded:noop,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:slowConnection?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:slowConnection?5e3:3e3,compare,isPaused:()=>!1,cache,mutate,fallback:{}},preset),mergeConfigs=(a,o)=>{const y=mergeObjects(a,o);if(o){const{use:g,fallback:w}=a,{use:O,fallback:M}=o;g&&O&&(y.use=g.concat(O)),w&&M&&(y.fallback=mergeObjects(w,M))}return y},SWRConfigContext=reactExports.createContext({}),INFINITE_PREFIX="$inf$",enableDevtools=isWindowDefined&&window.__SWR_DEVTOOLS_USE__,use$1=enableDevtools?window.__SWR_DEVTOOLS_USE__:[],setupDevTools=()=>{enableDevtools&&(window.__SWR_DEVTOOLS_REACT__=c)},normalize=a=>isFunction(a[1])?[a[0],a[1],a[2]||{}]:[a[0],null,(a[1]===null?a[2]:a[1])||{}],useSWRConfig=()=>mergeObjects(defaultConfig,reactExports.useContext(SWRConfigContext)),middleware=a=>(o,y,g)=>a(o,y&&((...O)=>{const[M]=serialize(o),[,,,F]=SWRGlobalState.get(cache);if(M.startsWith(INFINITE_PREFIX))return y(...O);const $=F[M];return isUndefined($)?y(...O):(delete F[M],$)}),g),BUILT_IN_MIDDLEWARE=use$1.concat(middleware),withArgs=a=>function(...y){const g=useSWRConfig(),[w,O,M]=normalize(y),F=mergeConfigs(g,M);let $=a;const{use:d}=F,s=(d||[]).concat(BUILT_IN_MIDDLEWARE);for(let i=s.length;i--;)$=s[i]($);return $(w,O||F.fetcher||null,F)},subscribeCallback=(a,o,y)=>{const g=o[a]||(o[a]=[]);return g.push(y),()=>{const w=g.indexOf(y);w>=0&&(g[w]=g[g.length-1],g.pop())}},withMiddleware=(a,o)=>(...y)=>{const[g,w,O]=normalize(y),M=(O.use||[]).concat(o);return a(g,w,{...O,use:M})};setupDevTools();const use=c.use||(a=>{if(a.status==="pending")throw a;if(a.status==="fulfilled")return a.value;throw a.status==="rejected"?a.reason:(a.status="pending",a.then(o=>{a.status="fulfilled",a.value=o},o=>{a.status="rejected",a.reason=o}),a)}),WITH_DEDUPE={dedupe:!0},useSWRHandler=(a,o,y)=>{const{cache:g,compare:w,suspense:O,fallbackData:M,revalidateOnMount:F,revalidateIfStale:$,refreshInterval:d,refreshWhenHidden:s,refreshWhenOffline:i,keepPreviousData:v}=y,[_,S,T,b]=SWRGlobalState.get(g),[C,G]=serialize(a),Y=reactExports.useRef(!1),Q=reactExports.useRef(!1),X=reactExports.useRef(C),K=reactExports.useRef(o),re=reactExports.useRef(y),te=()=>re.current,de=()=>te().isVisible()&&te().isOnline(),[Ne,ve,Me,ge]=createCacheHelper(g,C),ie=reactExports.useRef({}).current,me=isUndefined(M)?y.fallback[C]:M,ae=(fe,pe)=>{for(const Te in ie){const he=Te;if(he==="data"){if(!w(fe[he],pe[he])&&(!isUndefined(fe[he])||!w(Xe,pe[he])))return!1}else if(pe[he]!==fe[he])return!1}return!0},Ke=reactExports.useMemo(()=>{const fe=!C||!o?!1:isUndefined(F)?te().isPaused()||O?!1:isUndefined($)?!0:$:F,pe=we=>{const ze=mergeObjects(we);return delete ze._k,fe?{isValidating:!0,isLoading:!0,...ze}:ze},Te=Ne(),he=ge(),De=pe(Te),ut=Te===he?De:pe(he);let be=De;return[()=>{const we=pe(Ne());return ae(we,be)?(be.data=we.data,be.isLoading=we.isLoading,be.isValidating=we.isValidating,be.error=we.error,be):(be=we,we)},()=>ut]},[g,C]),Le=shimExports.useSyncExternalStore(reactExports.useCallback(fe=>Me(C,(pe,Te)=>{ae(Te,pe)||fe()}),[g,C]),Ke[0],Ke[1]),bt=!Y.current,Ze=_[C]&&_[C].length>0,Ce=Le.data,Ve=isUndefined(Ce)?me:Ce,Ye=Le.error,pt=reactExports.useRef(Ve),Xe=v?isUndefined(Ce)?pt.current:Ce:Ve,ht=Ze&&!isUndefined(Ye)?!1:bt&&!isUndefined(F)?F:te().isPaused()?!1:O?isUndefined(Ve)?!1:$:isUndefined(Ve)||$,le=!!(C&&o&&bt&&ht),je=isUndefined(Le.isValidating)?le:Le.isValidating,Be=isUndefined(Le.isLoading)?le:Le.isLoading,qe=reactExports.useCallback(async fe=>{const pe=K.current;if(!C||!pe||Q.current||te().isPaused())return!1;let Te,he,De=!0;const ut=fe||{},be=!T[C]||!ut.dedupe,we=()=>IS_REACT_LEGACY?!Q.current&&C===X.current&&Y.current:C===X.current,ze={isValidating:!1,isLoading:!1},Dt=()=>{ve(ze)},Mt=()=>{const ke=T[C];ke&&ke[1]===he&&delete T[C]},Bt={isValidating:!0};isUndefined(Ne().data)&&(Bt.isLoading=!0);try{if(be&&(ve(Bt),y.loadingTimeout&&isUndefined(Ne().data)&&setTimeout(()=>{De&&we()&&te().onLoadingSlow(C,y)},y.loadingTimeout),T[C]=[pe(G),getTimestamp()]),[Te,he]=T[C],Te=await Te,be&&setTimeout(Mt,y.dedupingInterval),!T[C]||T[C][1]!==he)return be&&we()&&te().onDiscarded(C),!1;ze.error=UNDEFINED;const ke=S[C];if(!isUndefined(ke)&&(he<=ke[0]||he<=ke[1]||ke[1]===0))return Dt(),be&&we()&&te().onDiscarded(C),!1;const Ge=Ne().data;ze.data=w(Ge,Te)?Ge:Te,be&&we()&&te().onSuccess(Te,C,y)}catch(ke){Mt();const Ge=te(),{shouldRetryOnError:Nt}=Ge;Ge.isPaused()||(ze.error=ke,be&&we()&&(Ge.onError(ke,C,Ge),(Nt===!0||isFunction(Nt)&&Nt(ke))&&de()&&Ge.onErrorRetry(ke,C,Ge,xt=>{const Xt=_[C];Xt&&Xt[0]&&Xt[0](events.ERROR_REVALIDATE_EVENT,xt)},{retryCount:(ut.retryCount||0)+1,dedupe:!0})))}return De=!1,Dt(),!0},[C,g]),et=reactExports.useCallback((...fe)=>internalMutate(g,X.current,...fe),[]);if(useIsomorphicLayoutEffect(()=>{K.current=o,re.current=y,isUndefined(Ce)||(pt.current=Ce)}),useIsomorphicLayoutEffect(()=>{if(!C)return;const fe=qe.bind(UNDEFINED,WITH_DEDUPE);let pe=0;const he=subscribeCallback(C,_,(De,ut={})=>{if(De==events.FOCUS_EVENT){const be=Date.now();te().revalidateOnFocus&&be>pe&&de()&&(pe=be+te().focusThrottleInterval,fe())}else if(De==events.RECONNECT_EVENT)te().revalidateOnReconnect&&de()&&fe();else{if(De==events.MUTATE_EVENT)return qe();if(De==events.ERROR_REVALIDATE_EVENT)return qe(ut)}});return Q.current=!1,X.current=C,Y.current=!0,ve({_k:G}),ht&&(isUndefined(Ve)||IS_SERVER?fe():rAF(fe)),()=>{Q.current=!0,he()}},[C]),useIsomorphicLayoutEffect(()=>{let fe;function pe(){const he=isFunction(d)?d(Ne().data):d;he&&fe!==-1&&(fe=setTimeout(Te,he))}function Te(){!Ne().error&&(s||te().isVisible())&&(i||te().isOnline())?qe(WITH_DEDUPE).then(pe):pe()}return pe(),()=>{fe&&(clearTimeout(fe),fe=-1)}},[d,s,i,C]),reactExports.useDebugValue(Xe),O&&isUndefined(Ve)&&C){if(!IS_REACT_LEGACY&&IS_SERVER)throw new Error("Fallback data is required when using suspense in SSR.");K.current=o,re.current=y,Q.current=!1;const fe=b[C];if(!isUndefined(fe)){const pe=et(fe);use(pe)}if(isUndefined(Ye)){const pe=qe(WITH_DEDUPE);isUndefined(Xe)||(pe.status="fulfilled",pe.value=!0),use(pe)}else throw Ye}return{mutate:et,get data(){return ie.data=!0,Xe},get error(){return ie.error=!0,Ye},get isValidating(){return ie.isValidating=!0,je},get isLoading(){return ie.isLoading=!0,Be}}},useSWR=withArgs(useSWRHandler),immutable=a=>(o,y,g)=>(g.revalidateOnFocus=!1,g.revalidateIfStale=!1,g.revalidateOnReconnect=!1,a(o,y,g)),useSWRImmutable=withMiddleware(useSWR,immutable);var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const toKebabCase=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(a,o)=>{const y=reactExports.forwardRef(({color:g="currentColor",size:w=24,strokeWidth:O=2,absoluteStrokeWidth:M,className:F="",children:$,...d},s)=>reactExports.createElement("svg",{ref:s,...defaultAttributes,width:w,height:w,stroke:g,strokeWidth:M?Number(O)*24/Number(w):O,className:["lucide",`lucide-${toKebabCase(a)}`,F].join(" "),...d},[...o.map(([i,v])=>reactExports.createElement(i,v)),...Array.isArray($)?$:[$]]));return y.displayName=`${a}`,y};const CheckCircle2=createLucideIcon("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const HelpCircle=createLucideIcon("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const MessageSquareOff=createLucideIcon("MessageSquareOff",[["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M3.6 3.6c-.4.3-.6.8-.6 1.4v16l4-4h10",key:"pwpm4a"}]]);const Pause=createLucideIcon("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const RotateCw=createLucideIcon("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);const Send=createLucideIcon("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const SkipForward=createLucideIcon("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const XCircle=createLucideIcon("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function isBytes$1(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}function bytes(a,...o){if(!isBytes$1(a))throw new Error("Expected Uint8Array");if(o.length>0&&!o.includes(a.length))throw new Error(`Expected Uint8Array of length ${o}, not of length=${a.length}`)}function exists(a,o=!0){if(a.destroyed)throw new Error("Hash instance has been destroyed");if(o&&a.finished)throw new Error("Hash#digest() has already been called")}function output(a,o){bytes(a);const y=o.outputLen;if(a.length<y)throw new Error(`digestInto() expects output buffer of length at least ${y}`)}function isBytes(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}const createView=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),rotr=(a,o)=>a<<32-o|a>>>o,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes(a){if(typeof a!="string")throw new Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function toBytes(a){if(typeof a=="string"&&(a=utf8ToBytes(a)),!isBytes(a))throw new Error(`expected Uint8Array, got ${typeof a}`);return a}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(a){const o=g=>a().update(toBytes(g)).digest(),y=a();return o.outputLen=y.outputLen,o.blockLen=y.blockLen,o.create=()=>a(),o}function setBigUint64(a,o,y,g){if(typeof a.setBigUint64=="function")return a.setBigUint64(o,y,g);const w=BigInt(32),O=BigInt(4294967295),M=Number(y>>w&O),F=Number(y&O),$=g?4:0,d=g?0:4;a.setUint32(o+$,M,g),a.setUint32(o+d,F,g)}class SHA2 extends Hash{constructor(o,y,g,w){super(),this.blockLen=o,this.outputLen=y,this.padOffset=g,this.isLE=w,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(o),this.view=createView(this.buffer)}update(o){exists(this);const{view:y,buffer:g,blockLen:w}=this;o=toBytes(o);const O=o.length;for(let M=0;M<O;){const F=Math.min(w-this.pos,O-M);if(F===w){const $=createView(o);for(;w<=O-M;M+=w)this.process($,M);continue}g.set(o.subarray(M,M+F),this.pos),this.pos+=F,M+=F,this.pos===w&&(this.process(y,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){exists(this),output(o,this),this.finished=!0;const{buffer:y,view:g,blockLen:w,isLE:O}=this;let{pos:M}=this;y[M++]=128,this.buffer.subarray(M).fill(0),this.padOffset>w-M&&(this.process(g,0),M=0);for(let i=M;i<w;i++)y[i]=0;setBigUint64(g,w-8,BigInt(this.length*8),O),this.process(g,0);const F=createView(o),$=this.outputLen;if($%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=$/4,s=this.get();if(d>s.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<d;i++)F.setUint32(4*i,s[i],O)}digest(){const{buffer:o,outputLen:y}=this;this.digestInto(o);const g=o.slice(0,y);return this.destroy(),g}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:y,buffer:g,length:w,finished:O,destroyed:M,pos:F}=this;return o.length=w,o.pos=F,o.finished=O,o.destroyed=M,w%y&&o.buffer.set(g),o}}const Chi=(a,o,y)=>a&o^~a&y,Maj=(a,o,y)=>a&o^a&y^o&y,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:o,B:y,C:g,D:w,E:O,F:M,G:F,H:$}=this;return[o,y,g,w,O,M,F,$]}set(o,y,g,w,O,M,F,$){this.A=o|0,this.B=y|0,this.C=g|0,this.D=w|0,this.E=O|0,this.F=M|0,this.G=F|0,this.H=$|0}process(o,y){for(let i=0;i<16;i++,y+=4)SHA256_W[i]=o.getUint32(y,!1);for(let i=16;i<64;i++){const v=SHA256_W[i-15],_=SHA256_W[i-2],S=rotr(v,7)^rotr(v,18)^v>>>3,T=rotr(_,17)^rotr(_,19)^_>>>10;SHA256_W[i]=T+SHA256_W[i-7]+S+SHA256_W[i-16]|0}let{A:g,B:w,C:O,D:M,E:F,F:$,G:d,H:s}=this;for(let i=0;i<64;i++){const v=rotr(F,6)^rotr(F,11)^rotr(F,25),_=s+v+Chi(F,$,d)+SHA256_K[i]+SHA256_W[i]|0,T=(rotr(g,2)^rotr(g,13)^rotr(g,22))+Maj(g,w,O)|0;s=d,d=$,$=F,F=M+_|0,M=O,O=w,w=g,g=_+T|0}g=g+this.A|0,w=w+this.B|0,O=O+this.C|0,M=M+this.D|0,F=F+this.E|0,$=$+this.F|0,d=d+this.G|0,s=s+this.H|0,this.set(g,w,O,M,F,$,d,s)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256=wrapConstructor(()=>new SHA256);class ValidationError extends Error{constructor(y,g){super(y,g);xr(this,"name");xr(this,"details");this.name="ZodValidationError",this.details=getIssuesFromErrorOptions(g)}toString(){return this.message}}function getIssuesFromErrorOptions(a){if(a){const o=a.cause;if(o instanceof ZodError)return o.issues}return[]}const ISSUE_SEPARATOR="; ",MAX_ISSUES_IN_MESSAGE=99,PREFIX="Validation error",PREFIX_SEPARATOR=": ",UNION_SEPARATOR=", or ";function prefixMessage(a,o,y){return o!==null?a.length>0?[o,a].join(y):o:a.length>0?a:PREFIX}const identifierRegex=/[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*/u;function joinPath(a){return a.length===1?a[0].toString():a.reduce((o,y)=>{if(typeof y=="number")return o+"["+y.toString()+"]";if(y.includes('"'))return o+'["'+escapeQuotes(y)+'"]';if(!identifierRegex.test(y))return o+'["'+y+'"]';const g=o.length===0?"":".";return o+g+y},"")}function escapeQuotes(a){return a.replace(/"/g,'\\"')}function isNonEmptyArray(a){return a.length!==0}function getMessageFromZodIssue(a){const{issue:o,issueSeparator:y,unionSeparator:g,includePath:w}=a;if(o.code==="invalid_union")return o.unionErrors.reduce((O,M)=>{const F=M.issues.map($=>getMessageFromZodIssue({issue:$,issueSeparator:y,unionSeparator:g,includePath:w})).join(y);return O.includes(F)||O.push(F),O},[]).join(g);if(w&&isNonEmptyArray(o.path)){if(o.path.length===1){const O=o.path[0];if(typeof O=="number")return`${o.message} at index ${O}`}return`${o.message} at "${joinPath(o.path)}"`}return o.message}function fromZodError(a,o={}){const{maxIssuesInMessage:y=MAX_ISSUES_IN_MESSAGE,issueSeparator:g=ISSUE_SEPARATOR,unionSeparator:w=UNION_SEPARATOR,prefixSeparator:O=PREFIX_SEPARATOR,prefix:M=PREFIX,includePath:F=!0}=o,$=a.errors,d=$.length===0?a.message:$.slice(0,y).map(i=>getMessageFromZodIssue({issue:i,issueSeparator:g,unionSeparator:w,includePath:F})).join(g),s=prefixMessage(d,M,O);return new ValidationError(s,{cause:a})}var define_import_meta_env_default={QUIZMS_MODE:"training",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};reactExports.createContext({});function L({percentage:a,className:o,children:y}){let g=a===void 0?void 0:Math.round(a);return g!==void 0&&(g=Number.isNaN(g)?void 0:clamp(g,0,100)),c.createElement("div",{className:D$1("relative p-2 pt-0 text-center",o)},c.createElement("div",{className:"relative z-10"},y),c.createElement("progress",{className:"progress progress-info absolute inset-x-0",value:g,max:"100"}))}function Tt(){return c.createElement("div",{className:"not-prose flex h-full items-center justify-center"},c.createElement(L,null,c.createElement("p",{className:"pb-1"},"Caricamento in corso...")))}var jt=reactExports.forwardRef(function({title:a,className:o,children:y},g){return c.createElement("dialog",{ref:g,className:"modal"},c.createElement("form",{method:"dialog",className:D$1("modal-box",o)},c.createElement("button",{className:"btn btn-circle btn-ghost btn-sm absolute right-2 top-2","aria-label":"Chiudi"},""),c.createElement("h3",{className:"mb-3 mt-0 text-lg font-bold"},a),y),c.createElement("form",{method:"dialog",className:"modal-backdrop"},c.createElement("button",null,"Chiudi")))});function D(){let{data:a}=useSWRImmutable("time-server",J,{suspense:!0});return()=>addMilliseconds(new Date,a)}async function J(){if(!define_import_meta_env_default.QUIZMS_TIME_SERVER)return 0;try{let a=await fetch(define_import_meta_env_default.QUIZMS_TIME_SERVER);if(!a.ok)return 0;let o=Date.now(),y=await a.text(),g=Number(y);return Number.isNaN(g)?0:g-o}catch{return 0}}function Ot$1(a){let o=D(),y=reactExports.useCallback(()=>!!a&&o()>=a,[a,o]),[g,w]=reactExports.useState(y),O=reactExports.useCallback(()=>!g&&y()&&w(!0),[g,y]);return reactExports.useEffect(()=>{if(!a)return;let M=differenceInMilliseconds(a,o());if(M<0)return;let F=setTimeout(O,M+5);return()=>clearTimeout(F)},[a,O,o]),reactExports.useEffect(()=>(window.addEventListener("visibilitychange",O),()=>window.removeEventListener("visibilitychange",O)),[O]),g}function Vt$1(a){let o=D(),[y,g]=reactExports.useState(o()),w=a.endTime??addMinutes(a.startTime,a.duration);if(reactExports.useEffect(()=>{if(!w)return;let $=setInterval(()=>{let d=o();g(d),d>=w&&clearInterval($)},100);return()=>clearInterval($)},[w,o]),!w)return c.createElement("span",{className:"font-mono"},"--:--");let O=Math.max(differenceInSeconds(w,y),0);a.duration&&(O=Math.min(O,a.duration*60));let M=Math.floor(O/60),F=O%60;return c.createElement("span",{className:"countdown font-mono"},c.createElement("span",{style:{"--value":M}}),":",c.createElement("span",{style:{"--value":F}}))}function Zt({error:a,resetErrorBoundary:o}){return reactExports.useEffect(()=>{},[o]),c.createElement("div",{className:"flex size-full flex-col items-center justify-center"},c.createElement("p",{className:"mx-8 break-words text-center text-error"},"Errore: ",a.message),o&&c.createElement("div",{className:"mt-5 flex flex-row justify-center"},c.createElement("button",{className:"btn btn-error",onClick:o},c.createElement(RotateCw,null),"Ricarica")))}var N=z.object({name:z.string(),label:z.string(),size:z.enum(["xs","sm","md","lg","xl"]).optional(),pinned:z.boolean().optional()}),rt$1=N.extend({type:z.literal("text")}),it$1=N.extend({type:z.literal("number"),min:z.number().optional(),max:z.number().optional()}),at=N.extend({type:z.literal("date"),min:z.date(),max:z.date()});z.object({id:z.string(),name:z.string(),problemIds:z.coerce.string().array(),contestWindowStart:z.date().optional(),contestWindowEnd:z.date().optional(),duration:z.coerce.number().positive().optional(),statementVersion:z.number(),personalInformation:z.array(z.discriminatedUnion("type",[rt$1,it$1,at])),hasVariants:z.boolean(),hasOnline:z.boolean(),hasPdf:z.boolean(),allowRestart:z.boolean(),instructions:z.string().optional()});z.object({uid:z.string(),personalInformation:z.record(z.union([z.string(),z.number(),z.date()]).optional()),participationId:z.string(),contestId:z.string(),token:z.string(),startedAt:z.date(),variant:z.string(),disabled:z.boolean(),answers:z.record(z.string().optional()),extraData:z.record(z.any()).optional(),createdAt:z.date(),updatedAt:z.date()}).partial().extend({id:z.string()});z.object({id:z.string(),studentId:z.string()});z.object({id:z.string(),studentId:z.string(),participationId:z.string()});z.object({id:z.string(),studentId:z.string(),token:z.string(),name:z.string(),surname:z.string()});z.object({id:z.string(),contestId:z.string(),schema:z.record(z.object({type:z.enum(["text","number"]),options:z.string().array().nonempty().optional(),blankOption:z.string().optional(),pointsCorrect:z.number().optional(),pointsBlank:z.number().optional(),pointsWrong:z.number().optional(),solution:z.string().optional(),originalId:z.coerce.string().optional()}))});z.object({id:z.string(),variant:z.string()});function Se(a,o){var O,M;let y=a.answers,g=(O=o[a.variant])==null?void 0:O.schema;if(!g||!y)return;let w=0;for(let F in g){let $=g[F],d=(M=y[F])==null?void 0:M.trim(),s=dt($,d);if(s===void 0)return;w+=s}return w}function dt(a,o){if(!(a.pointsCorrect===void 0||a.pointsBlank===void 0||a.pointsWrong===void 0||a.solution===void 0))return o===void 0||o===""||o===a.blankOption?a.pointsBlank:o.toUpperCase()===a.solution.toUpperCase()?a.pointsCorrect:a.pointsWrong}z.object({id:z.string(),schoolId:z.string(),contestId:z.string(),name:z.string(),teacher:z.string(),token:z.string().optional(),startingTime:z.date().optional(),finalized:z.boolean().default(!1),pdfVariants:z.array(z.coerce.string()).optional()});z.object({id:z.string(),participationId:z.string(),contestId:z.string(),startingTime:z.date()});z.object({id:z.string(),uid:z.string(),answers:z.record(z.string().optional()),submittedAt:z.date().optional()});function mt(a,o,y){let g=a.safeParse(o);if(!g.success)throw fromZodError(g.error,y);return g.data}var XoroShiro128Plus=function(){function a(o,y,g,w){this.s01=o,this.s00=y,this.s11=g,this.s10=w}return a.prototype.clone=function(){return new a(this.s01,this.s00,this.s11,this.s10)},a.prototype.next=function(){var o=new a(this.s01,this.s00,this.s11,this.s10),y=o.unsafeNext();return[y,o]},a.prototype.unsafeNext=function(){var o=this.s00+this.s10|0,y=this.s10^this.s00,g=this.s11^this.s01,w=this.s00,O=this.s01;return this.s00=w<<24^O>>>8^y^y<<16,this.s01=O<<24^w>>>8^g^(g<<16|y>>>16),this.s10=g<<5^y>>>27,this.s11=y<<5^g>>>27,o},a.prototype.jump=function(){var o=new a(this.s01,this.s00,this.s11,this.s10);return o.unsafeJump(),o},a.prototype.unsafeJump=function(){for(var o=0,y=0,g=0,w=0,O=[3639956645,3750757012,1261568508,386426335],M=0;M!==4;++M)for(var F=1;F;F<<=1)O[M]&F&&(o^=this.s01,y^=this.s00,g^=this.s11,w^=this.s10),this.unsafeNext();this.s01=o,this.s00=y,this.s11=g,this.s10=w},a}(),xoroshiro128plus=function(a){return new XoroShiro128Plus(-1,~a,a|0,0)};function fromNumberToArrayInt64(a,o){if(o<0){var y=-o;a.sign=-1,a.data[0]=~~(y/4294967296),a.data[1]=y>>>0}else a.sign=1,a.data[0]=~~(o/4294967296),a.data[1]=o>>>0;return a}function substractArrayInt64(a,o,y){var g=o.data[1],w=o.data[0],O=o.sign,M=y.data[1],F=y.data[0],$=y.sign;if(a.sign=1,O===1&&$===-1){var d=g+M,s=w+F+(d>4294967295?1:0);return a.data[0]=s>>>0,a.data[1]=d>>>0,a}var i=g,v=w,_=M,S=F;O===-1&&(i=M,v=F,_=g,S=w);var T=0,b=i-_;return b<0&&(T=1,b=b>>>0),a.data[0]=v-S-T,a.data[1]=b,a}function unsafeUniformIntDistributionInternal(a,o){for(var y=a>2?~~(4294967296/a)*a:4294967296,g=o.unsafeNext()+2147483648;g>=y;)g=o.unsafeNext()+2147483648;return g%a}function unsafeUniformArrayIntDistributionInternal(a,o,y){for(var g=o.length;;){for(var w=0;w!==g;++w){var O=w===0?o[0]+1:4294967296,M=unsafeUniformIntDistributionInternal(O,y);a[w]=M}for(var w=0;w!==g;++w){var F=a[w],$=o[w];if(F<$)return a;if(F>$)break}}}var safeNumberMaxSafeInteger=Number.MAX_SAFE_INTEGER,sharedA={sign:1,data:[0,0]},sharedB={sign:1,data:[0,0]},sharedC={sign:1,data:[0,0]},sharedData=[0,0];function uniformLargeIntInternal(a,o,y,g){var w=y<=safeNumberMaxSafeInteger?fromNumberToArrayInt64(sharedC,y):substractArrayInt64(sharedC,fromNumberToArrayInt64(sharedA,o),fromNumberToArrayInt64(sharedB,a));return w.data[1]===4294967295?(w.data[0]+=1,w.data[1]=0):w.data[1]+=1,unsafeUniformArrayIntDistributionInternal(sharedData,w.data,g),sharedData[0]*4294967296+sharedData[1]+a}function unsafeUniformIntDistribution(a,o,y){var g=o-a;if(g<=4294967295){var w=unsafeUniformIntDistributionInternal(g+1,y);return w+a}return uniformLargeIntInternal(a,o,g,y)}const ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(o){super(o),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(o){return{didCatch:!0,error:o}}resetErrorBoundary(){const{error:o}=this.state;if(o!==null){for(var y,g,w=arguments.length,O=new Array(w),M=0;M<w;M++)O[M]=arguments[M];(y=(g=this.props).onReset)===null||y===void 0||y.call(g,{args:O,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(o,y){var g,w;(g=(w=this.props).onError)===null||g===void 0||g.call(w,o,y)}componentDidUpdate(o,y){const{didCatch:g}=this.state,{resetKeys:w}=this.props;if(g&&y.error!==null&&hasArrayChanged(o.resetKeys,w)){var O,M;(O=(M=this.props).onReset)===null||O===void 0||O.call(M,{next:w,prev:o.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:o,fallbackRender:y,FallbackComponent:g,fallback:w}=this.props,{didCatch:O,error:M}=this.state;let F=o;if(O){const $={error:M,resetErrorBoundary:this.resetErrorBoundary};if(typeof y=="function")F=y($);else if(g)F=reactExports.createElement(g,$);else if(w===null||reactExports.isValidElement(w))F=w;else throw M}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:O,error:M,resetErrorBoundary:this.resetErrorBoundary}},F)}}function hasArrayChanged(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return a.length!==o.length||a.some((y,g)=>!Object.is(y,o[g]))}var x=class{constructor(a){this.randInt=(o,y)=>unsafeUniformIntDistribution(o,y,this.rng),this.choice=o=>o[this.randInt(0,o.length-1)],this.sample=(o,y)=>{let g=o.slice(0,y);for(let w=y;w<o.length;w++){let O=this.randInt(0,w);O<y&&(g[O]=o[w])}return g},this.shuffle=o=>{for(let y=o.length-1;y>0;y--){let g=this.randInt(0,y);[o[y],o[g]]=[o[g],o[y]]}},this.rng=xoroshiro128plus(A$1(a))}};function A$1(a){let o=sha256(a),y=new DataView(o.buffer,o.byteOffset,o.byteLength);return Number(y.getBigUint64(0,!0)&BigInt(Number.MAX_SAFE_INTEGER))}function V$1(){return crypto.randomUUID()}var f=reactExports.createContext({});f.displayName="TeacherContext";const emptyComponents={},MDXContext=c.createContext(emptyComponents);function useMDXComponents(a){const o=c.useContext(MDXContext);return c.useMemo(function(){return typeof a=="function"?a(o):{...o,...a}},[o,a])}function MDXProvider(a){let o;return a.disableParentContext?o=typeof a.components=="function"?a.components(emptyComponents):a.components||emptyComponents:o=useMDXComponents(a.components),c.createElement(MDXContext.Provider,{value:o},a.children)}var FileSaver_min={exports:{}};(function(a,o){(function(y,g){g()})(commonjsGlobal,function(){function y(d,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function g(d,s,i){var v=new XMLHttpRequest;v.open("GET",d),v.responseType="blob",v.onload=function(){$(v.response,s,i)},v.onerror=function(){console.error("could not download file")},v.send()}function w(d){var s=new XMLHttpRequest;s.open("HEAD",d,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function O(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(s)}}var M=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,F=M.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),$=M.saveAs||(typeof window!="object"||window!==M?function(){}:"download"in HTMLAnchorElement.prototype&&!F?function(d,s,i){var v=M.URL||M.webkitURL,_=document.createElement("a");s=s||d.name||"download",_.download=s,_.rel="noopener",typeof d=="string"?(_.href=d,_.origin===location.origin?O(_):w(_.href)?g(d,s,i):O(_,_.target="_blank")):(_.href=v.createObjectURL(d),setTimeout(function(){v.revokeObjectURL(_.href)},4e4),setTimeout(function(){O(_)},0))}:"msSaveOrOpenBlob"in navigator?function(d,s,i){if(s=s||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(y(d,i),s);else if(w(d))g(d,s,i);else{var v=document.createElement("a");v.href=d,v.target="_blank",setTimeout(function(){O(v)})}}:function(d,s,i,v){if(v=v||open("","_blank"),v&&(v.document.title=v.document.body.innerText="downloading..."),typeof d=="string")return g(d,s,i);var _=d.type==="application/octet-stream",S=/constructor/i.test(M.HTMLElement)||M.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||_&&S||F)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var Y=b.result;Y=T?Y:Y.replace(/^data:[^;]*;/,"data:attachment/file;"),v?v.location.href=Y:location=Y,v=null},b.readAsDataURL(d)}else{var C=M.URL||M.webkitURL,G=C.createObjectURL(d);v?v.location=G:location.href=G,v=null,setTimeout(function(){C.revokeObjectURL(G)},4e4)}});M.saveAs=$.saveAs=$,a.exports=$})})(FileSaver_min);var jsInterpreter={exports:{}},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(a,o){if(a.indexOf)return a.indexOf(o);for(var y=0;y<a.length;y++)if(a[y]===o)return y;return-1},Object_keys=function(a){if(Object.keys)return Object.keys(a);var o=[];for(var y in a)o.push(y);return o},forEach=function(a,o){if(a.forEach)return a.forEach(o);for(var y=0;y<a.length;y++)o(a[y],y,a)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(a,o,y){Object.defineProperty(a,o,{writable:!0,enumerable:!1,configurable:!0,value:y})}}catch{return function(o,y,g){o[y]=g}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(o){if(!(this instanceof Script))return new Script(o);this.code=o};Script.prototype.runInContext=function(a){if(!(a instanceof Context))throw new TypeError("needs a 'context' argument.");var o=document.createElement("iframe");o.style||(o.style={}),o.style.display="none",document.body.appendChild(o);var y=o.contentWindow,g=y.eval,w=y.execScript;!g&&w&&(w.call(y,"null"),g=y.eval),forEach(Object_keys(a),function(F){y[F]=a[F]}),forEach(globals,function(F){a[F]&&(y[F]=a[F])});var O=Object_keys(y),M=g.call(y,this.code);return forEach(Object_keys(y),function(F){(F in a||indexOf(O,F)===-1)&&(a[F]=y[F])}),forEach(globals,function(F){F in a||defineProp(a,F,y[F])}),document.body.removeChild(o),M},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(a){var o=Script.createContext(a),y=this.runInContext(o);return a&&forEach(Object_keys(o),function(g){a[g]=o[g]}),y},forEach(Object_keys(Script.prototype),function(a){exports[a]=Script[a]=function(o){var y=Script(o);return y[a].apply(y,[].slice.call(arguments,1))}}),exports.isContext=function(a){return a instanceof Context},exports.createScript=function(a){return exports.Script(a)},exports.createContext=Script.createContext=function(a){var o=new Context;return typeof a=="object"&&forEach(Object_keys(a),function(y){o[y]=a[y]}),o}}(vmBrowserify)),vmBrowserify}(function(a,o){(function(g,w){a.exports=w()})(commonjsGlobal,()=>(()=>{var y={"./original-repo/interpreter.js":function(M,F,$){var d=function(s,i){typeof s=="string"&&(s=this.parse_(s,"code"));var v=s.constructor;this.newNode=function(){return new v({options:{}})};var _=this.newNode();for(var S in s)_[S]=S==="body"?s[S].slice():s[S];this.ast=_,this.tasks=[],this.initFunc_=i,this.paused_=!1,this.polyfills_=[],this.functionCounter_=0,this.stepFunctions_=Object.create(null);var T=/^step([A-Z]\w*)$/,b;for(var C in this)typeof this[C]=="function"&&(b=C.match(T))&&(this.stepFunctions_[b[1]]=this[C].bind(this));this.globalScope=this.createScope(this.ast,null),this.globalObject=this.globalScope.object,this.ast=this.parse_(this.polyfills_.join(`
`),"polyfills"),this.polyfills_=void 0,d.stripLocations_(this.ast,void 0,void 0);var G=new d.State(this.ast,this.globalScope);G.done=!1,this.stateStack=[G],this.run(),this.value=void 0,this.ast=_,G=new d.State(this.ast,this.globalScope),G.done=!1,this.stateStack.length=0,this.stateStack[0]=G};d.Completion={NORMAL:0,BREAK:1,CONTINUE:2,RETURN:3,THROW:4},d.Status={DONE:0,STEP:1,TASK:2,ASYNC:3},d.PARSE_OPTIONS={locations:!0,ecmaVersion:5},d.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},d.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},d.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!1,enumerable:!1,writable:!1},d.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0},d.STEP_ERROR={STEP_ERROR:!0},d.SCOPE_REFERENCE={SCOPE_REFERENCE:!0},d.VALUE_IN_DESCRIPTOR={VALUE_IN_DESCRIPTOR:!0},d.REGEXP_TIMEOUT={REGEXP_TIMEOUT:!0},d.toStringCycles_=[],d.vm=null,d.currentInterpreter_=null,d.nativeGlobal=typeof globalThis>"u"?this:globalThis,d.WORKER_CODE=["onmessage = function(e) {","var result;","var data = e.data;","switch (data[0]) {","case 'split':","result = data[1].split(data[2], data[3]);","break;","case 'match':","result = data[1].match(data[2]);","break;","case 'search':","result = data[1].search(data[2]);","break;","case 'replace':","result = data[1].replace(data[2], data[3]);","break;","case 'exec':","var regexp = data[1];","regexp.lastIndex = data[2];","result = [regexp.exec(data[3]), data[1].lastIndex];","break;","default:","throw Error('Unknown RegExp operation: ' + data[0]);","}","postMessage(result);","close();","};"],d.legalArrayLength=function(s){var i=s>>>0;return i===Number(s)?i:NaN},d.legalArrayIndex=function(s){var i=s>>>0;return String(i)===String(s)&&i!==4294967295?i:NaN},d.stripLocations_=function(s,i,v){i?s.start=i:delete s.start,v?s.end=v:delete s.end;for(var _ in s)if(_!=="loc"&&s.hasOwnProperty(_)){var S=s[_];S&&typeof S=="object"&&d.stripLocations_(S,i,v)}},d.prototype.REGEXP_MODE=2,d.prototype.REGEXP_THREAD_TIMEOUT=1e3,d.prototype.POLYFILL_TIMEOUT=1e3,d.prototype.getterStep_=!1,d.prototype.setterStep_=!1,d.prototype.appendCodeNumber_=0,d.prototype.taskCodeNumber_=0,d.prototype.parse_=function(s,i){var v={};for(var _ in d.PARSE_OPTIONS)v[_]=d.PARSE_OPTIONS[_];return v.sourceFile=i,d.nativeGlobal.acorn.parse(s,v)},d.prototype.appendCode=function(s){var i=this.stateStack[0];if(!i||i.node.type!=="Program")throw Error("Expecting original AST to start with a Program node");if(typeof s=="string"&&(s=this.parse_(s,"appendCode"+this.appendCodeNumber_++)),!s||s.type!=="Program")throw Error("Expecting new AST to start with a Program node");this.populateScope_(s,i.scope),Array.prototype.push.apply(i.node.body,s.body),i.node.body.variableCache_=null,i.done=!1},d.prototype.step=function(){var s=this.stateStack,i;do{var v=s[s.length-1];if(this.paused_)return!0;if(!v||v.node.type==="Program"&&v.done){if(!this.tasks.length)return!1;if(v=this.nextTask_(),!v)return!0}var _=v.node,S=d.currentInterpreter_;d.currentInterpreter_=this;try{var T=this.stepFunctions_[_.type](s,v,_)}catch(b){if(b!==d.STEP_ERROR)throw this.value!==b&&(this.value=void 0),b}finally{d.currentInterpreter_=S}if(T&&s.push(T),this.getterStep_)throw this.value=void 0,Error("Getter not supported in this context");if(this.setterStep_)throw this.value=void 0,Error("Setter not supported in this context");!i&&!_.end&&(i=Date.now()+this.POLYFILL_TIMEOUT)}while(!_.end&&i>Date.now());return!0},d.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},d.prototype.getStatus=function(){if(this.paused_)return d.Status.ASYNC;var s=this.stateStack,i=s[s.length-1];if(i&&(i.node.type!=="Program"||!i.done))return d.Status.STEP;var v=this.tasks[0];return v?v.time>Date.now()?d.Status.TASK:d.Status.STEP:d.Status.DONE},d.prototype.initGlobal=function(s){this.setProperty(s,"NaN",NaN,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"Infinity",1/0,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"undefined",void 0,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"window",s,d.READONLY_DESCRIPTOR),this.setProperty(s,"this",s,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"self",s),this.OBJECT_PROTO=new d.Object(null),this.FUNCTION_PROTO=new d.Object(this.OBJECT_PROTO),this.initFunction(s),this.initObject(s),s.proto=this.OBJECT_PROTO,this.setProperty(s,"constructor",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR),this.initArray(s),this.initString(s),this.initBoolean(s),this.initNumber(s),this.initDate(s),this.initRegExp(s),this.initError(s),this.initMath(s),this.initJSON(s);var i=this,v,_=this.createNativeFunction(function(b){throw EvalError("Can't happen")},!1);_.eval=!0,this.setProperty(s,"eval",_,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"parseInt",this.createNativeFunction(parseInt,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"parseFloat",this.createNativeFunction(parseFloat,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"isNaN",this.createNativeFunction(isNaN,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"isFinite",this.createNativeFunction(isFinite,!1),d.NONENUMERABLE_DESCRIPTOR);for(var S=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],T=0;T<S.length;T++)v=function(b){return function(C){try{return b(C)}catch(G){i.throwException(i.URI_ERROR,G.message)}}}(S[T][0]),this.setProperty(s,S[T][1],this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR);v=function(C){return i.createTask_(!1,arguments)},this.setProperty(s,"setTimeout",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),v=function(C){return i.createTask_(!0,arguments)},this.setProperty(s,"setInterval",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),v=function(C){i.deleteTask_(C)},this.setProperty(s,"clearTimeout",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),v=function(C){i.deleteTask_(C)},this.setProperty(s,"clearInterval",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),this.OBJECT=this.OBJECT,this.OBJECT_PROTO=this.OBJECT_PROTO,this.FUNCTION=this.FUNCTION,this.FUNCTION_PROTO=this.FUNCTION_PROTO,this.ARRAY=this.ARRAY,this.ARRAY_PROTO=this.ARRAY_PROTO,this.REGEXP=this.REGEXP,this.REGEXP_PROTO=this.REGEXP_PROTO,this.DATE=this.DATE,this.DATE_PROTO=this.DATE_PROTO,this.initFunc_&&this.initFunc_(this,s)},d.prototype.functionCodeNumber_=0,d.prototype.initFunction=function(s){var i=this,v,_=/^[A-Za-z_$][\w$]*$/;v=function(T){if(arguments.length)var b=String(arguments[arguments.length-1]);else var b="";var C=Array.prototype.slice.call(arguments,0,-1).join(",").trim();if(C){for(var G=C.split(/\s*,\s*/),Y=0;Y<G.length;Y++){var Q=G[Y];_.test(Q)||i.throwException(i.SYNTAX_ERROR,"Invalid function argument: "+Q)}C=G.join(", ")}try{var X=i.parse_("(function("+C+") {"+b+"})","function"+i.functionCodeNumber_++)}catch(re){i.throwException(i.SYNTAX_ERROR,"Invalid code: "+re.message)}X.body.length!==1&&i.throwException(i.SYNTAX_ERROR,"Invalid code in function body");var K=X.body[0].expression;return i.createFunction(K,i.globalScope,"anonymous")},this.FUNCTION=this.createNativeFunction(v,!0),this.setProperty(s,"Function",this.FUNCTION,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,d.NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.nativeFunc=function(){},this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++,this.FUNCTION_PROTO.illegalConstructor=!0,this.setProperty(this.FUNCTION_PROTO,"length",0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.class="Function",v=function(T,b){var C=i.stateStack[i.stateStack.length-1];C.func_=this,C.funcThis_=T,C.arguments_=[],b!=null&&(b instanceof d.Object?C.arguments_=i.arrayPseudoToNative(b):i.throwException(i.TYPE_ERROR,"CreateListFromArrayLike called on non-object")),C.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",v),v=function(T){var b=i.stateStack[i.stateStack.length-1];b.func_=this,b.funcThis_=T,b.arguments_=[];for(var C=1;C<arguments.length;C++)b.arguments_.push(arguments[C]);b.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",v),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',","{configurable: true, writable: true, value:","function bind(oThis) {","if (typeof this !== 'function') {","throw TypeError('What is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),v=function(){return String(this)},this.setNativeFunctionPrototype(this.FUNCTION,"toString",v),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),v=function(){return this.valueOf()},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",v),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initObject=function(s){var i=this,v;v=function(T){if(T==null)return i.calledWithNew()?this:i.createObjectProto(i.OBJECT_PROTO);if(!(T instanceof d.Object)){var b=i.createObjectProto(i.getPrototype(T));return b.data=T,b}return T},this.OBJECT=this.createNativeFunction(v,!0),this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"Object",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR);var _=function(S){S==null&&i.throwException(i.TYPE_ERROR,"Cannot convert '"+S+"' to object")};v=function(T){_(T);var b=T instanceof d.Object?T.properties:T;return i.arrayNativeToPseudo(Object.getOwnPropertyNames(b))},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),v=function(T){return _(T),T instanceof d.Object&&(T=T.properties),i.arrayNativeToPseudo(Object.keys(T))},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),v=function(T){return T===null?i.createObjectProto(null):(T instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object prototype may only be an Object or null, not "+T),i.createObjectProto(T))},this.setProperty(this.OBJECT,"create",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var create_ = Object.create;","Object.create = function create(proto, props) {","var obj = create_(proto);","props && Object.defineProperties(obj, props);","return obj;","};","})();",""),v=function(T,b,C){return b=String(b),T instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object.defineProperty called on non-object: "+T),C instanceof d.Object||i.throwException(i.TYPE_ERROR,"Property description must be an object"),T.preventExtensions&&!(b in T.properties)&&i.throwException(i.TYPE_ERROR,"Can't define property '"+b+"', object is not extensible"),i.setProperty(T,b,d.VALUE_IN_DESCRIPTOR,C.properties),T},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var defineProperty_ = Object.defineProperty;","Object.defineProperty = function defineProperty(obj, prop, d1) {","var d2 = {};","if ('configurable' in d1) d2.configurable = d1.configurable;","if ('enumerable' in d1) d2.enumerable = d1.enumerable;","if ('writable' in d1) d2.writable = d1.writable;","if ('value' in d1) d2.value = d1.value;","if ('get' in d1) d2.get = d1.get;","if ('set' in d1) d2.set = d1.set;","return defineProperty_(obj, prop, d2);","};","})();","Object.defineProperty(Object, 'defineProperties',","{configurable: true, writable: true, value:","function defineProperties(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),v=function(T,b){if(T instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object: "+T),b=String(b),b in T.properties){var C=Object.getOwnPropertyDescriptor(T.properties,b),G=T.getter[b],Y=T.setter[b],Q=i.createObjectProto(i.OBJECT_PROTO);return G||Y?(i.setProperty(Q,"get",G),i.setProperty(Q,"set",Y)):(i.setProperty(Q,"value",C.value),i.setProperty(Q,"writable",C.writable)),i.setProperty(Q,"configurable",C.configurable),i.setProperty(Q,"enumerable",C.enumerable),Q}},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),v=function(T){return _(T),i.getPrototype(T)},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),v=function(T){return!!T&&!T.preventExtensions},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),v=function(T){return T instanceof d.Object&&(T.preventExtensions=!0),T},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),this.setNativeFunctionPrototype(this.OBJECT,"toString",d.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",d.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"valueOf",d.Object.prototype.valueOf),v=function(T){return _(this),this instanceof d.Object?String(T)in this.properties:this.hasOwnProperty(T)},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",v),v=function(T){return _(this),this instanceof d.Object?Object.prototype.propertyIsEnumerable.call(this.properties,T):this.propertyIsEnumerable(T)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",v),v=function(T){for(;;){if(T=i.getPrototype(T),!T)return!1;if(T===this)return!0}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",v)},d.prototype.initArray=function(s){var i=this,v;v=function(S){if(i.calledWithNew())var T=this;else var T=i.createArray();var b=arguments[0];if(arguments.length===1&&typeof b=="number")isNaN(d.legalArrayLength(b))&&i.throwException(i.RANGE_ERROR,"Invalid array length: "+b),T.properties.length=b;else{for(var C=0;C<arguments.length;C++)T.properties[C]=arguments[C];T.properties.length=C}return T},this.ARRAY=this.createNativeFunction(v,!0),this.ARRAY_PROTO=this.ARRAY.properties.prototype,this.setProperty(s,"Array",this.ARRAY,d.NONENUMERABLE_DESCRIPTOR),v=function(S){return S&&S.class==="Array"},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ARRAY_PROTO,"length",0,{configurable:!1,enumerable:!1,writable:!0}),this.ARRAY_PROTO.class="Array",this.polyfills_.push("(function() {","function createArrayMethod_(f) {","Object.defineProperty(Array.prototype, f.name,","{configurable: true, writable: true, value: f});","}","createArrayMethod_(","function pop() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","len--;","var x = o[len];","delete o[len];","o.length = len;","return x;","}",");","createArrayMethod_(","function push(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","for (var i = 0; i < arguments.length; i++) {","o[len] = arguments[i];","len++;","}","o.length = len;","return len;","}",");","createArrayMethod_(","function shift() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","var value = o[0];","for (var i = 0; i < len - 1; i++) {","if ((i + 1) in o) {","o[i] = o[i + 1];","} else {","delete o[i];","}","}","delete o[i];","o.length = len - 1;","return value;","}",");","createArrayMethod_(","function unshift(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","len = 0;","}","for (var i = len - 1; i >= 0; i--) {","if (i in o) {","o[i + arguments.length] = o[i];","} else {","delete o[i + arguments.length];","}","}","for (var i = 0; i < arguments.length; i++) {","o[i] = arguments[i];","}","return (o.length = len + arguments.length);","}",");","createArrayMethod_(","function reverse() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 2) {","return o;","}","for (var i = 0; i < len / 2 - 0.5; i++) {","var x = o[i];","var hasX = i in o;","if ((len - i - 1) in o) {","o[i] = o[len - i - 1];","} else {","delete o[i];","}","if (hasX) {","o[len - i - 1] = x;","} else {","delete o[len - i - 1];","}","}","return o;","}",");","createArrayMethod_(","function indexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var n = fromIndex | 0;","if (!len || n >= len) {","return -1;","}","var i = Math.max(n >= 0 ? n : len - Math.abs(n), 0);","while (i < len) {","if (i in o && o[i] === searchElement) {","return i;","}","i++;","}","return -1;","}",");","createArrayMethod_(","function lastIndexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len) {","return -1;","}","var n = len - 1;","if (arguments.length > 1) {","n = fromIndex | 0;","if (n) {","n = (n > 0 || -1) * Math.floor(Math.abs(n));","}","}","var i = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);","while (i >= 0) {","if (i in o && o[i] === searchElement) {","return i;","}","i--;","}","return -1;","}",");","createArrayMethod_(","function slice(start, end) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","start = (start >= 0) ? start : Math.max(0, len + start);","if (typeof end !== 'undefined') {","if (end !== Infinity) {","end |= 0;","}","if (end < 0) {","end = len + end;","} else {","end = Math.min(end, len);","}","} else {","end = len;","}","var size = end - start;","var cloned = new Array(size);","for (var i = 0; i < size; i++) {","if ((start + i) in o) {","cloned[i] = o[start + i];","}","}","return cloned;","}",");","createArrayMethod_(","function splice(start, deleteCount, var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","if (start < 0) {","start = Math.max(len + start, 0);","} else {","start = Math.min(start, len);","}","if (arguments.length < 1) {","deleteCount = len - start;","} else {","deleteCount |= 0;","deleteCount = Math.max(0, Math.min(deleteCount, len - start));","}","var removed = [];","for (var i = start; i < start + deleteCount; i++) {","if (i in o) {","removed.push(o[i]);","} else {","removed.length++;","}","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = start + deleteCount; i < len - deleteCount; i++) {","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = len - deleteCount; i < len; i++) {","delete o[i];","}","len -= deleteCount;","var arl = arguments.length - 2;","for (var i = len - 1; i >= start; i--) {","if (i in o) {","o[i + arl] = o[i];","} else {","delete o[i + arl];","}","}","len += arl;","for (var i = 2; i < arguments.length; i++) {","o[start + i - 2] = arguments[i];","}","o.length = len;","return removed;","}",");","createArrayMethod_(","function concat(var_args) {","if (!this) throw TypeError();","var o = Object(this);","var cloned = [];","for (var i = -1; i < arguments.length; i++) {","var value = (i === -1) ? o : arguments[i];","if (Array.isArray(value)) {","for (var j = 0, l = value.length; j < l; j++) {","if (j in value) {","cloned.push(value[j]);","} else {","cloned.length++;","}","}","} else {","cloned.push(value);","}","}","return cloned;","}",");","createArrayMethod_(","function join(opt_separator) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var sep = typeof opt_separator === 'undefined' ?","',' : ('' + opt_separator);","var str = '';","for (var i = 0; i < len; i++) {","if (i && sep) str += sep;","str += (o[i] === null || o[i] === undefined) ? '' : o[i];","}","return str;","}",");","createArrayMethod_(","function every(callbackfn, thisArg) {","if (!this || typeof callbackfn !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o && !callbackfn.call(t, o[k], k, o)) return false;","k++;","}","return true;","}",");","createArrayMethod_(","function filter(fun, var_args) {","if (this === void 0 || this === null || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o) {","var val = o[i];","if (fun.call(thisArg, val, i, o)) res.push(val);","}","}","return res;","}",");","createArrayMethod_(","function forEach(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o) callback.call(t, o[k], k, o);","k++;","}","}",");","createArrayMethod_(","function map(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","var a = new Array(len);","while (k < len) {","if (k in o) a[k] = callback.call(t, o[k], k, o);","k++;","}","return a;","}",");","createArrayMethod_(","function reduce(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = 0, value;","if (arguments.length === 2) {","value = arguments[1];","} else {","while (k < len && !(k in o)) k++;","if (k >= len) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k++];","}","for (; k < len; k++) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function reduceRight(callback /*, initialValue*/) {","if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in o)) k--;","if (k < 0) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k--];","}","for (; k >= 0; k--) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function some(fun/*, thisArg*/) {","if (!this || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o && fun.call(thisArg, o[i], i, o)) return true;","}","return false;","}",");","createArrayMethod_(","function sort(opt_comp) {","if (!this) throw TypeError();","if (typeof opt_comp !== 'function') {","opt_comp = undefined;","}","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp ? (opt_comp(this[j], this[j + 1]) > 0) :","(String(this[j]) > String(this[j + 1]))) {","var swap = this[j];","var hasSwap = j in this;","if ((j + 1) in this) {","this[j] = this[j + 1];","} else {","delete this[j];","}","if (hasSwap) {","this[j + 1] = swap;","} else {","delete this[j + 1];","}","changes++;","}","}","if (!changes) break;","}","return this;","}",");","createArrayMethod_(","function toLocaleString() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var out = [];","for (var i = 0; i < len; i++) {","out[i] = (o[i] === null || o[i] === undefined) ? '' : o[i].toLocaleString();","}","return out.join(',');","}",");","})();","")},d.prototype.initString=function(s){var i=this,v;v=function(b){return b=arguments.length?d.nativeGlobal.String(b):"",i.calledWithNew()?(this.data=b,this):b},this.STRING=this.createNativeFunction(v,!0),this.setProperty(s,"String",this.STRING,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),d.NONENUMERABLE_DESCRIPTOR);for(var _=["charAt","charCodeAt","concat","indexOf","lastIndexOf","slice","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],S=0;S<_.length;S++)this.setNativeFunctionPrototype(this.STRING,_[S],String.prototype[_[S]]);v=function(b,C,G){C=i.pseudoToNative(C),G=i.pseudoToNative(G);try{return String(this).localeCompare(b,C,G)}catch(Y){i.throwException(i.ERROR,"localeCompare: "+Y.message)}},this.setNativeFunctionPrototype(this.STRING,"localeCompare",v),v=function(b,C,G){var Y=String(this);if(C=C?Number(C):void 0,i.isa(b,i.REGEXP)&&(b=b.data,i.maybeThrowRegExp(b,G),i.REGEXP_MODE===2)){if(d.vm){var Q={string:Y,separator:b,limit:C},X="string.split(separator, limit)",te=i.vmCall(X,Q,b,G);te!==d.REGEXP_TIMEOUT&&G(i.arrayNativeToPseudo(te))}else{var K=i.createWorker(),re=i.regExpTimeout(b,K,G);K.onmessage=function(de){clearTimeout(re),G(i.arrayNativeToPseudo(de.data))},K.postMessage(["split",Y,b,C])}return}var te=Y.split(b,C);G(i.arrayNativeToPseudo(te))},this.setAsyncFunctionPrototype(this.STRING,"split",v),v=function(b,C){var G=String(this);if(b=i.isa(b,i.REGEXP)?b.data:new RegExp(b),i.maybeThrowRegExp(b,C),i.REGEXP_MODE===2){if(d.vm){var Y={string:G,regexp:b},Q="string.match(regexp)",re=i.vmCall(Q,Y,b,C);re!==d.REGEXP_TIMEOUT&&C(re&&i.arrayNativeToPseudo(re))}else{var X=i.createWorker(),K=i.regExpTimeout(b,X,C);X.onmessage=function(te){clearTimeout(K),C(te.data&&i.arrayNativeToPseudo(te.data))},X.postMessage(["match",G,b])}return}var re=G.match(b);C(re&&i.arrayNativeToPseudo(re))},this.setAsyncFunctionPrototype(this.STRING,"match",v),v=function(b,C){var G=String(this);if(i.isa(b,i.REGEXP)?b=b.data:b=new RegExp(b),i.maybeThrowRegExp(b,C),i.REGEXP_MODE===2){if(d.vm){var Y={string:G,regexp:b},Q="string.search(regexp)",X=i.vmCall(Q,Y,b,C);X!==d.REGEXP_TIMEOUT&&C(X)}else{var K=i.createWorker(),re=i.regExpTimeout(b,K,C);K.onmessage=function(te){clearTimeout(re),C(te.data)},K.postMessage(["search",G,b])}return}C(G.search(b))},this.setAsyncFunctionPrototype(this.STRING,"search",v),v=function(b,C,G){var Y=String(this);if(C=String(C),i.isa(b,i.REGEXP)&&(b=b.data,i.maybeThrowRegExp(b,G),i.REGEXP_MODE===2)){if(d.vm){var Q={string:Y,substr:b,newSubstr:C},X="string.replace(substr, newSubstr)",K=i.vmCall(X,Q,b,G);K!==d.REGEXP_TIMEOUT&&G(K)}else{var re=i.createWorker(),te=i.regExpTimeout(b,re,G);re.onmessage=function(de){clearTimeout(te),G(de.data)},re.postMessage(["replace",Y,b,C])}return}G(Y.replace(b,C))},this.setAsyncFunctionPrototype(this.STRING,"replace",v),this.polyfills_.push("(function() {","var replace_ = String.prototype.replace;","String.prototype.replace = function replace(substr, newSubstr) {","if (typeof newSubstr !== 'function') {","return replace_.call(this, substr, newSubstr);","}","var str = this;","if (substr instanceof RegExp) {","var subs = [];","var m = substr.exec(str);","while (m) {","m.push(m.index, str);","var inject = newSubstr.apply(null, m);","subs.push([m.index, m[0].length, inject]);","m = substr.global ? substr.exec(str) : null;","}","for (var i = subs.length - 1; i >= 0; i--) {","str = str.substring(0, subs[i][0]) + subs[i][2] + str.substring(subs[i][0] + subs[i][1]);","}","} else {","var i = str.indexOf(substr);","if (i !== -1) {","var inject = newSubstr(str.substr(i, substr.length), i, str);","str = str.substring(0, i) + inject + str.substring(i + substr.length);","}","}","return str;","};","})();","")},d.prototype.initBoolean=function(s){var i=this,v;v=function(S){return S=d.nativeGlobal.Boolean(S),i.calledWithNew()?(this.data=S,this):S},this.BOOLEAN=this.createNativeFunction(v,!0),this.setProperty(s,"Boolean",this.BOOLEAN,d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initNumber=function(s){var i=this,v;v=function(b){return b=arguments.length?d.nativeGlobal.Number(b):0,i.calledWithNew()?(this.data=b,this):b},this.NUMBER=this.createNativeFunction(v,!0),this.setProperty(s,"Number",this.NUMBER,d.NONENUMERABLE_DESCRIPTOR);for(var _=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],S=0;S<_.length;S++)this.setProperty(this.NUMBER,_[S],Number[_[S]],d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);v=function(b){try{return Number(this).toExponential(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",v),v=function(b){try{return Number(this).toFixed(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",v),v=function(b){try{return Number(this).toPrecision(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",v),v=function(b){try{return Number(this).toString(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toString",v),v=function(b,C){b=b?i.pseudoToNative(b):void 0,C=C?i.pseudoToNative(C):void 0;try{return Number(this).toLocaleString(b,C)}catch(G){i.throwException(i.ERROR,"toLocaleString: "+G.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",v)},d.prototype.initDate=function(s){var i=this,v;v=function(b,C){if(!i.calledWithNew())return d.nativeGlobal.Date();var G=[null].concat(Array.from(arguments));return this.data=new(Function.prototype.bind.apply(d.nativeGlobal.Date,G)),this},this.DATE=this.createNativeFunction(v,!0),this.DATE_PROTO=this.DATE.properties.prototype,this.setProperty(s,"Date",this.DATE,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),d.NONENUMERABLE_DESCRIPTOR);for(var _=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toISOString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],S=0;S<_.length;S++)v=function(T){return function(b){var C=this.data;C instanceof Date||i.throwException(i.TYPE_ERROR,T+" not called on a Date");for(var G=[],Y=0;Y<arguments.length;Y++)G[Y]=i.pseudoToNative(arguments[Y]);return C[T].apply(C,G)}}(_[S]),this.setNativeFunctionPrototype(this.DATE,_[S],v)},d.prototype.initRegExp=function(s){var i=this,v;v=function(S,T){if(i.calledWithNew())var b=this;else{if(T===void 0&&i.isa(S,i.REGEXP))return S;var b=i.createObjectProto(i.REGEXP_PROTO)}S=S===void 0?"":String(S),T=T?String(T):"",/^[gmi]*$/.test(T)||i.throwException(i.SYNTAX_ERROR,"Invalid regexp flag: "+T);try{var C=new d.nativeGlobal.RegExp(S,T)}catch(G){i.throwException(i.SYNTAX_ERROR,G.message)}return i.populateRegExp(b,C),b},this.REGEXP=this.createNativeFunction(v,!0),this.REGEXP_PROTO=this.REGEXP.properties.prototype,this.setProperty(s,"RegExp",this.REGEXP,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"global",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source","(?:)",d.READONLY_NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("Object.defineProperty(RegExp.prototype, 'test',","{configurable: true, writable: true, value:","function test(str) {","return !!this.exec(str);","}","});"),v=function(S,T){var b=this.data;if(S=String(S),b.lastIndex=Number(i.getProperty(this,"lastIndex")),i.maybeThrowRegExp(b,T),i.REGEXP_MODE===2){if(d.vm){var C={string:S,regexp:b},G="regexp.exec(string)",K=i.vmCall(G,C,b,T);K!==d.REGEXP_TIMEOUT&&(i.setProperty(this,"lastIndex",b.lastIndex),T(re(K)))}else{var Y=i.createWorker(),Q=i.regExpTimeout(b,Y,T),X=this;Y.onmessage=function(te){clearTimeout(Q),i.setProperty(X,"lastIndex",te.data[1]),T(re(te.data[0]))},Y.postMessage(["exec",b,b.lastIndex,S])}return}var K=b.exec(S);i.setProperty(this,"lastIndex",b.lastIndex),T(re(K));function re(te){if(te){var de=i.arrayNativeToPseudo(te);return i.setProperty(de,"index",te.index),i.setProperty(de,"input",te.input),de}return null}},this.setAsyncFunctionPrototype(this.REGEXP,"exec",v)},d.prototype.initError=function(s){var i=this;this.ERROR=this.createNativeFunction(function(S){if(i.calledWithNew())var T=this;else var T=i.createObject(i.ERROR);return i.populateError(T,S),T},!0),this.setProperty(s,"Error",this.ERROR,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"message","",d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name","Error",d.NONENUMERABLE_DESCRIPTOR);var v=function(_){var S=i.createNativeFunction(function(T){if(i.calledWithNew())var b=this;else var b=i.createObject(S);return i.populateError(b,T),b},!0);return i.setProperty(S,"prototype",i.createObject(i.ERROR),d.NONENUMERABLE_DESCRIPTOR),i.setProperty(S.properties.prototype,"name",_,d.NONENUMERABLE_DESCRIPTOR),i.setProperty(s,_,S,d.NONENUMERABLE_DESCRIPTOR),S};this.EVAL_ERROR=v("EvalError"),this.RANGE_ERROR=v("RangeError"),this.REFERENCE_ERROR=v("ReferenceError"),this.SYNTAX_ERROR=v("SyntaxError"),this.TYPE_ERROR=v("TypeError"),this.URI_ERROR=v("URIError")},d.prototype.initMath=function(s){var i=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(s,"Math",i,d.NONENUMERABLE_DESCRIPTOR);for(var v=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],_=0;_<v.length;_++)this.setProperty(i,v[_],Math[v[_]],d.READONLY_NONENUMERABLE_DESCRIPTOR);for(var S=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"],_=0;_<S.length;_++)this.setProperty(i,S[_],this.createNativeFunction(Math[S[_]],!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initJSON=function(s){var i,v=this,_=v.createObjectProto(this.OBJECT_PROTO);this.setProperty(s,"JSON",_,d.NONENUMERABLE_DESCRIPTOR),i=function(T){try{var b=JSON.parse(String(T))}catch(C){v.throwException(v.SYNTAX_ERROR,C.message)}return v.nativeToPseudo(b)},this.setProperty(_,"parse",this.createNativeFunction(i,!1)),i=function(T,b,C){b&&b.class==="Function"?v.throwException(v.TYPE_ERROR,"Function replacer on JSON.stringify not supported"):b&&b.class==="Array"?(b=v.arrayPseudoToNative(b),b=b.filter(function(Q){return typeof Q=="string"||typeof Q=="number"})):b=null,typeof C!="string"&&typeof C!="number"&&(C=void 0);var G=v.pseudoToNative(T);try{var Y=JSON.stringify(G,b,C)}catch(Q){v.throwException(v.TYPE_ERROR,Q.message)}return Y},this.setProperty(_,"stringify",this.createNativeFunction(i,!1))},d.prototype.isa=function(s,i){if(s==null||!i)return!1;var v=i.properties.prototype;if(s===v)return!0;for(s=this.getPrototype(s);s;){if(s===v)return!0;s=s.proto}return!1},d.prototype.populateRegExp=function(s,i){s.data=new RegExp(i.source,i.flags),this.setProperty(s,"lastIndex",i.lastIndex,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"source",i.source,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"global",i.global,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"ignoreCase",i.ignoreCase,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"multiline",i.multiline,d.READONLY_NONENUMERABLE_DESCRIPTOR)},d.prototype.populateError=function(s,i){i&&this.setProperty(s,"message",String(i),d.NONENUMERABLE_DESCRIPTOR);for(var v=[],_=this.stateStack.length-1;_>=0;_--){var S=this.stateStack[_],T=S.node;if(T.type==="CallExpression"){var b=S.func_;b&&v.length&&(v[v.length-1].datumName=this.getProperty(b,"name"))}T.loc&&(!v.length||T.type==="CallExpression")&&v.push({datumLoc:T.loc})}for(var C=String(this.getProperty(s,"name")),G=String(this.getProperty(s,"message")),Y=C+": "+G+`
`,_=0;_<v.length;_++){var Q=v[_].datumLoc,X=v[_].datumName,K=Q.source+":"+Q.start.line+":"+Q.start.column;X?Y+="  at "+X+" ("+K+`)
`:Y+="  at "+K+`
`}this.setProperty(s,"stack",Y.trim(),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.createWorker=function(){var s=this.createWorker.blob_;return s||(s=new Blob([d.WORKER_CODE.join(`
`)],{type:"application/javascript"}),this.createWorker.blob_=s),new Worker(URL.createObjectURL(s))},d.prototype.vmCall=function(s,i,v,_){var S={timeout:this.REGEXP_THREAD_TIMEOUT};try{return d.vm.runInNewContext(s,i,S)}catch{_(null),this.throwException(this.ERROR,"RegExp Timeout: "+v)}return d.REGEXP_TIMEOUT},d.prototype.maybeThrowRegExp=function(s,i){var v;if(this.REGEXP_MODE===0)v=!1;else if(this.REGEXP_MODE===1)v=!0;else if(d.vm)v=!0;else if(typeof Worker=="function"&&typeof URL=="function")v=!0;else{try{d.vm=$("vm")}catch{}v=!!d.vm}v||(i(null),this.throwException(this.ERROR,"Regular expressions not supported: "+s))},d.prototype.regExpTimeout=function(s,i,v){var _=this;return setTimeout(function(){i.terminate(),v(null);try{_.throwException(_.ERROR,"RegExp Timeout: "+s)}catch{}},this.REGEXP_THREAD_TIMEOUT)},d.prototype.createObject=function(s){return this.createObjectProto(s&&s.properties.prototype)},d.prototype.createObjectProto=function(s){if(typeof s!="object")throw Error("Non object prototype");var i=new d.Object(s);return this.isa(i,this.ERROR)&&(i.class="Error"),i},d.prototype.createArray=function(){var s=this.createObjectProto(this.ARRAY_PROTO);return this.setProperty(s,"length",0,{configurable:!1,enumerable:!1,writable:!0}),s.class="Array",s},d.prototype.createFunctionBase_=function(s,i){var v=this.createObjectProto(this.FUNCTION_PROTO);if(i){var _=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(v,"prototype",_,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(_,"constructor",v,d.NONENUMERABLE_DESCRIPTOR)}else v.illegalConstructor=!0;return this.setProperty(v,"length",s,d.READONLY_NONENUMERABLE_DESCRIPTOR),v.class="Function",v},d.prototype.createFunction=function(s,i,v){var _=this.createFunctionBase_(s.params.length,!0);_.parentScope=i,_.node=s;var S=s.id?String(s.id.name):v||"";return this.setProperty(_,"name",S,d.READONLY_NONENUMERABLE_DESCRIPTOR),_},d.prototype.createNativeFunction=function(s,i){var v=this.createFunctionBase_(s.length,i);return v.nativeFunc=s,s.id=this.functionCounter_++,this.setProperty(v,"name",s.name,d.READONLY_NONENUMERABLE_DESCRIPTOR),v},d.prototype.createAsyncFunction=function(s){var i=this.createFunctionBase_(s.length,!0);return i.asyncFunc=s,s.id=this.functionCounter_++,this.setProperty(i,"name",s.name,d.READONLY_NONENUMERABLE_DESCRIPTOR),i},d.prototype.nativeToPseudo=function(s){if(s instanceof d.Object)throw Error("Object is already pseudo");if(s==null||s===!0||s===!1||typeof s=="string"||typeof s=="number")return s;if(s instanceof RegExp){var i=this.createObjectProto(this.REGEXP_PROTO);return this.populateRegExp(i,s),i}if(s instanceof Date){var v=this.createObjectProto(this.DATE_PROTO);return v.data=new Date(s.valueOf()),v}if(typeof s=="function"){var _=this,S=function(){var Q=Array.prototype.slice.call(arguments).map(function(K){return _.pseudoToNative(K)}),X=s.apply(_,Q);return _.nativeToPseudo(X)},T=Object.getOwnPropertyDescriptor(s,"prototype");return this.createNativeFunction(S,!!T)}if(Array.isArray(s)){for(var b=this.createArray(),C=0;C<s.length;C++)C in s&&this.setProperty(b,C,this.nativeToPseudo(s[C]));return b}var G=this.createObjectProto(this.OBJECT_PROTO);for(var Y in s)this.setProperty(G,Y,this.nativeToPseudo(s[Y]));return G},d.prototype.pseudoToNative=function(s,i){if(typeof s!="object"&&typeof s!="function"||s===null)return s;if(!(s instanceof d.Object))throw Error("Object is not pseudo");if(this.isa(s,this.REGEXP)){var v=new RegExp(s.data.source,s.data.flags);return v.lastIndex=s.data.lastIndex,v}if(this.isa(s,this.DATE))return new Date(s.data.valueOf());var _=i||{pseudo:[],native:[]},S=_.pseudo.indexOf(s);if(S!==-1)return _.native[S];_.pseudo.push(s);var T;if(this.isa(s,this.ARRAY)){T=[],_.native.push(T);for(var b=this.getProperty(s,"length"),C=0;C<b;C++)this.hasProperty(s,C)&&(T[C]=this.pseudoToNative(this.getProperty(s,C),_))}else{T={},_.native.push(T);var G;for(var Y in s.properties)G=this.pseudoToNative(s.properties[Y],_),Object.defineProperty(T,Y,{value:G,writable:!0,enumerable:!0,configurable:!0})}return _.pseudo.pop(),_.native.pop(),T},d.prototype.arrayNativeToPseudo=function(s){for(var i=this.createArray(),v=Object.getOwnPropertyNames(s),_=0;_<v.length;_++)this.setProperty(i,v[_],s[v[_]]);return i},d.prototype.arrayPseudoToNative=function(s){var i=[];for(var v in s.properties)i[v]=this.getProperty(s,v);return i.length=d.legalArrayLength(this.getProperty(s,"length"))||0,i},d.prototype.getPrototype=function(s){switch(typeof s){case"number":return this.NUMBER.properties.prototype;case"boolean":return this.BOOLEAN.properties.prototype;case"string":return this.STRING.properties.prototype}return s?s.proto:null},d.prototype.getProperty=function(s,i){if(this.getterStep_)throw Error("Getter not supported in that context");if(i=String(i),s==null&&this.throwException(this.TYPE_ERROR,"Cannot read property '"+i+"' of "+s),typeof s=="object"&&!(s instanceof d.Object))throw TypeError("Expecting native value or pseudo object");if(i==="length"){if(this.isa(s,this.STRING))return String(s).length}else if(i.charCodeAt(0)<64&&this.isa(s,this.STRING)){var v=d.legalArrayIndex(i);if(!isNaN(v)&&v<String(s).length)return String(s)[v]}do if(s.properties&&i in s.properties){var _=s.getter[i];return _?(this.getterStep_=!0,_):s.properties[i]}while(s=this.getPrototype(s))},d.prototype.hasProperty=function(s,i){if(!(s instanceof d.Object))throw TypeError("Primitive data type has no properties");if(i=String(i),i==="length"&&this.isa(s,this.STRING))return!0;if(this.isa(s,this.STRING)){var v=d.legalArrayIndex(i);if(!isNaN(v)&&v<String(s).length)return!0}do if(s.properties&&i in s.properties)return!0;while(s=this.getPrototype(s));return!1},d.prototype.setProperty=function(s,i,v,_){if(this.setterStep_)throw Error("Setter not supported in that context");if(i=String(i),s==null&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+i+"' of "+s),typeof s=="object"&&!(s instanceof d.Object))throw TypeError("Expecting native value or pseudo object");_&&("get"in _||"set"in _)&&("value"in _||"writable"in _)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var S=!this.stateStack||this.getScope().strict;if(!(s instanceof d.Object)){S&&this.throwException(this.TYPE_ERROR,"Can't create property '"+i+"' on '"+s+"'");return}if(this.isa(s,this.STRING)){var T=d.legalArrayIndex(i);if(i==="length"||!isNaN(T)&&T<String(s).length){S&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+i+"' of String '"+s.data+"'");return}}if(s.class==="Array"){var b=s.properties.length,C;if(i==="length"){if(_){if(!("value"in _))return;v=_.value}if(v=d.legalArrayLength(v),isNaN(v)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),v<b)for(C in s.properties)C=d.legalArrayIndex(C),!isNaN(C)&&v<=C&&delete s.properties[C]}else isNaN(C=d.legalArrayIndex(i))||(s.properties.length=Math.max(b,C+1))}if(s.preventExtensions&&!(i in s.properties)){S&&this.throwException(this.TYPE_ERROR,"Can't add property '"+i+"', object is not extensible");return}if(_){var G={};"get"in _&&_.get&&(s.getter[i]=_.get,G.get=this.setProperty.placeholderGet_),"set"in _&&_.set&&(s.setter[i]=_.set,G.set=this.setProperty.placeholderSet_),"configurable"in _&&(G.configurable=_.configurable),"enumerable"in _&&(G.enumerable=_.enumerable),"writable"in _&&(G.writable=_.writable,delete s.getter[i],delete s.setter[i]),"value"in _?(G.value=_.value,delete s.getter[i],delete s.setter[i]):v!==d.VALUE_IN_DESCRIPTOR&&(G.value=v,delete s.getter[i],delete s.setter[i]);try{Object.defineProperty(s.properties,i,G)}catch{this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+i)}"get"in _&&!_.get&&delete s.getter[i],"set"in _&&!_.set&&delete s.setter[i]}else{if(v===d.VALUE_IN_DESCRIPTOR)throw ReferenceError("Value not specified");for(var Y=s;!(i in Y.properties);)if(Y=this.getPrototype(Y),!Y){Y=s;break}if(Y.setter&&Y.setter[i])return this.setterStep_=!0,Y.setter[i];if(Y.getter&&Y.getter[i])S&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+i+"' of object '"+s+"' which only has a getter");else try{s.properties[i]=v}catch{S&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+i+"' of object '"+s+"'")}}},d.prototype.setProperty.placeholderGet_=function(){throw Error("Placeholder getter")},d.prototype.setProperty.placeholderSet_=function(){throw Error("Placeholder setter")},d.prototype.setNativeFunctionPrototype=function(s,i,v){this.setProperty(s.properties.prototype,i,this.createNativeFunction(v,!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.setAsyncFunctionPrototype=function(s,i,v){this.setProperty(s.properties.prototype,i,this.createAsyncFunction(v),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.getScope=function(){var s=this.stateStack[this.stateStack.length-1].scope;if(!s)throw Error("No scope found");return s},d.prototype.createScope=function(s,i){var v=!1;if(i&&i.strict)v=!0;else{var _=s.body&&s.body[0];_&&_.expression&&_.expression.type==="Literal"&&_.expression.value==="use strict"&&(v=!0)}var S=this.createObjectProto(null),T=new d.Scope(i,v,S);return i||this.initGlobal(T.object),this.populateScope_(s,T),T},d.prototype.createSpecialScope=function(s,i){if(!s)throw Error("parentScope required");var v=i||this.createObjectProto(null);return new d.Scope(s,s.strict,v)},d.prototype.getValueFromScope=function(s){for(var i=this.getScope();i&&i!==this.globalScope;){if(s in i.object.properties)return i.object.properties[s];i=i.parentScope}if(i===this.globalScope&&this.hasProperty(i.object,s))return this.getProperty(i.object,s);var v=this.stateStack[this.stateStack.length-1].node;v.type==="UnaryExpression"&&v.operator==="typeof"||this.throwException(this.REFERENCE_ERROR,s+" is not defined")},d.prototype.setValueToScope=function(s,i){for(var v=this.getScope(),_=v.strict;v&&v!==this.globalScope;){if(s in v.object.properties){try{v.object.properties[s]=i}catch{_&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only variable '"+s+"'")}return}v=v.parentScope}if(v===this.globalScope&&(!_||this.hasProperty(v.object,s)))return this.setProperty(v.object,s,i);this.throwException(this.REFERENCE_ERROR,s+" is not defined")},d.prototype.populateScope_=function(s,i){var v;if(s.variableCache_)v=s.variableCache_;else{switch(v=Object.create(null),s.type){case"VariableDeclaration":for(var _=0;_<s.declarations.length;_++)v[s.declarations[_].id.name]=!0;break;case"FunctionDeclaration":v[s.id.name]=s;break;case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"Program":case"SwitchCase":case"SwitchStatement":case"TryStatement":case"WithStatement":case"WhileStatement":var S=s.constructor;for(var T in s)if(T!=="loc"){var b=s[T];if(b&&typeof b=="object"){var C;if(Array.isArray(b)){for(var _=0;_<b.length;_++)if(b[_]&&b[_].constructor===S){C=this.populateScope_(b[_],i);for(var T in C)v[T]=C[T]}}else if(b.constructor===S){C=this.populateScope_(b,i);for(var T in C)v[T]=C[T]}}}}s.variableCache_=v}for(var T in v)v[T]===!0?this.setProperty(i.object,T,void 0,d.VARIABLE_DESCRIPTOR):this.setProperty(i.object,T,this.createFunction(v[T],i),d.VARIABLE_DESCRIPTOR);return v},d.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor},d.prototype.getValue=function(s){return s[0]===d.SCOPE_REFERENCE?this.getValueFromScope(s[1]):this.getProperty(s[0],s[1])},d.prototype.setValue=function(s,i){return s[0]===d.SCOPE_REFERENCE?this.setValueToScope(s[1],i):this.setProperty(s[0],s[1],i)},d.prototype.throwException=function(s,i){if(!this.globalScope)throw i===void 0?s:i;if(i===void 0||!(s instanceof d.Object))var v=s;else{var v=this.createObject(s);this.populateError(v,i)}throw this.unwind(d.Completion.THROW,v,void 0),d.STEP_ERROR},d.prototype.unwind=function(s,i,v){if(s===d.Completion.NORMAL)throw TypeError("Should not unwind for NORMAL completions");e:for(var _=this.stateStack;_.length>0;_.pop()){var S=_[_.length-1];switch(S.node.type){case"TryStatement":S.cv={type:s,value:i,label:v};return;case"CallExpression":case"NewExpression":if(s===d.Completion.RETURN){S.value=i;return}else if(s!==d.Completion.THROW)throw Error("Unsyntactic break/continue not rejected by Acorn");break;case"Program":S.done=!0;break e}if(s===d.Completion.BREAK){if(v?S.labels&&S.labels.indexOf(v)!==-1:S.isLoop||S.isSwitch){_.pop();return}}else if(s===d.Completion.CONTINUE&&(v?S.labels&&S.labels.indexOf(v)!==-1:S.isLoop))return}var T;if(this.isa(i,this.ERROR)){var b={EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError},C=String(this.getProperty(i,"name")),G=this.getProperty(i,"message").valueOf(),Y=b[C]||Error;T=Y(G),T.stack=String(this.getProperty(i,"stack"))}else T=String(i);throw this.value=T,T},d.prototype.nodeSummary=function(s){switch(s.type){case"ArrayExpression":return"[...]";case"BinaryExpression":case"LogicalExpression":return this.nodeSummary(s.left)+" "+s.operator+" "+this.nodeSummary(s.right);case"CallExpression":return this.nodeSummary(s.callee)+"(...)";case"ConditionalExpression":return this.nodeSummary(s.test)+" ? "+this.nodeSummary(s.consequent)+" : "+this.nodeSummary(s.alternate);case"Identifier":return s.name;case"Literal":return s.raw;case"MemberExpression":var i=this.nodeSummary(s.object),v=this.nodeSummary(s.property);return s.computed?i+"["+v+"]":i+"."+v;case"NewExpression":return"new "+this.nodeSummary(s.callee)+"(...)";case"ObjectExpression":return"{...}";case"ThisExpression":return"this";case"UnaryExpression":return s.operator+" "+this.nodeSummary(s.argument);case"UpdateExpression":var _=this.nodeSummary(s.argument);return s.prefix?s.operator+_:_+s.operator}return"???"},d.prototype.createTask_=function(s,i){var v=this.stateStack[this.stateStack.length-1],_=Array.from(i),S=_.shift(),T=Math.max(Number(_.shift()||0),0),b=this.newNode(),C,G,Y;if(S instanceof d.Object&&S.class==="Function")G=S,b.type="CallExpression",C=v.scope;else{try{Y=this.parse_(String(S),"taskCode"+this.taskCodeNumber_++)}catch(te){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+te.message)}b.type="EvalProgram_",b.body=Y.body;var Q=v.node.arguments[0],X=Q?Q.start:void 0,K=Q?Q.end:void 0;d.stripLocations_(b,X,K),C=this.globalScope,_.length=0}var re=new d.Task(G,_,C,b,s?T:-1);return this.scheduleTask_(re,T),re.pid},d.prototype.scheduleTask_=function(s,i){s.time=Date.now()+i,this.tasks.push(s),this.tasks.sort(function(v,_){return v.time-_.time})},d.prototype.deleteTask_=function(s){for(var i=0;i<this.tasks.length;i++)if(this.tasks[i].pid==s){this.tasks.splice(i,1);break}},d.prototype.nextTask_=function(){var s=this.tasks[0];if(!s||s.time>Date.now())return null;this.tasks.shift(),s.interval>=0&&this.scheduleTask_(s,s.interval);var i=new d.State(s.node,s.scope);return s.functionRef&&(i.doneCallee_=2,i.funcThis_=this.globalObject,i.func_=s.functionRef,i.doneArgs_=!0,i.arguments_=s.argsArray),i},d.prototype.createGetter_=function(s,i){if(!this.getterStep_)throw Error("Unexpected call to createGetter");this.getterStep_=!1;var v=Array.isArray(i)?i[0]:i,_=this.newNode();_.type="CallExpression";var S=new d.State(_,this.stateStack[this.stateStack.length-1].scope);return S.doneCallee_=2,S.funcThis_=v,S.func_=s,S.doneArgs_=!0,S.arguments_=[],S},d.prototype.createSetter_=function(s,i,v){if(!this.setterStep_)throw Error("Unexpected call to createSetter");this.setterStep_=!1;var _=Array.isArray(i)?i[0]:this.globalObject,S=this.newNode();S.type="CallExpression";var T=new d.State(S,this.stateStack[this.stateStack.length-1].scope);return T.doneCallee_=2,T.funcThis_=_,T.func_=s,T.doneArgs_=!0,T.arguments_=[v],T},d.prototype.boxThis_=function(s){if(s==null)return this.globalObject;if(!(s instanceof d.Object)){var i=this.createObjectProto(this.getPrototype(s));return i.data=s,i}return s},d.prototype.getGlobalScope=function(){return this.globalScope},d.prototype.getStateStack=function(){return this.stateStack},d.prototype.setStateStack=function(s){this.stateStack=s},d.Value,d.State=function(s,i){this.node=s,this.scope=i},d.Scope=function(s,i,v){this.parentScope=s,this.strict=i,this.object=v},d.Object=function(s){this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.proto=s},d.Object.prototype.proto=null,d.Object.prototype.class="Object",d.Object.prototype.data=null,d.Object.prototype.toString=function(){if(!d.currentInterpreter_)return"[object Interpreter.Object]";if(!(this instanceof d.Object))return String(this);if(this.class==="Array"){var s=d.toStringCycles_;s.push(this);try{var i=[],v=this.properties.length,_=!1;v>1024&&(v=1e3,_=!0);for(var S=0;S<v;S++){var T=this.properties[S];i[S]=T instanceof d.Object&&s.indexOf(T)!==-1?"...":T}_&&i.push("...")}finally{s.pop()}return i.join(",")}if(this.class==="Error"){var s=d.toStringCycles_;if(s.indexOf(this)!==-1)return"[object Error]";var b,C,G=this;do if("name"in G.properties){b=G.properties.name;break}while(G=G.proto);G=this;do if("message"in G.properties){C=G.properties.message;break}while(G=G.proto);s.push(this);try{b=b&&String(b),C=C&&String(C)}finally{s.pop()}return C?b+": "+C:String(b)}return this.data!==null?String(this.data):"[object "+this.class+"]"},d.Object.prototype.valueOf=function(){return d.currentInterpreter_?this.data===void 0||this.data===null||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data:this},d.Task=function(s,i,v,_,S){this.functionRef=s,this.argsArray=i,this.scope=v,this.node=_,this.interval=S,this.pid=++d.Task.pid,this.time=0},d.Task.pid=0,d.prototype.stepArrayExpression=function(s,i,v){var _=v.elements,S=i.n_||0;for(i.array_?(this.setProperty(i.array_,S,i.value),S++):(i.array_=this.createArray(),i.array_.properties.length=_.length);S<_.length;){if(_[S])return i.n_=S,new d.State(_[S],i.scope);S++}s.pop(),s[s.length-1].value=i.array_},d.prototype.stepAssignmentExpression=function(s,i,v){if(!i.doneLeft_){i.doneLeft_=!0;var _=new d.State(v.left,i.scope);return _.components=!0,_}if(!i.doneRight_){if(i.leftReference_||(i.leftReference_=i.value),i.doneGetter_&&(i.leftValue_=i.value),!i.doneGetter_&&v.operator!=="="){var S=this.getValue(i.leftReference_);if(i.leftValue_=S,this.getterStep_){i.doneGetter_=!0;var T=S;return this.createGetter_(T,i.leftReference_)}}return i.doneRight_=!0,v.operator==="="&&v.left.type==="Identifier"&&(i.destinationName=v.left.name),new d.State(v.right,i.scope)}if(i.doneSetter_){s.pop(),s[s.length-1].value=i.setterValue_;return}var b=i.leftValue_,C=i.value;switch(v.operator){case"=":b=C;break;case"+=":b+=C;break;case"-=":b-=C;break;case"*=":b*=C;break;case"/=":b/=C;break;case"%=":b%=C;break;case"<<=":b<<=C;break;case">>=":b>>=C;break;case">>>=":b>>>=C;break;case"&=":b&=C;break;case"^=":b^=C;break;case"|=":b|=C;break;default:throw SyntaxError("Unknown assignment expression: "+v.operator)}var G=this.setValue(i.leftReference_,b);if(G)return i.doneSetter_=!0,i.setterValue_=b,this.createSetter_(G,i.leftReference_,b);s.pop(),s[s.length-1].value=b},d.prototype.stepBinaryExpression=function(s,i,v){if(!i.doneLeft_)return i.doneLeft_=!0,new d.State(v.left,i.scope);if(!i.doneRight_)return i.doneRight_=!0,i.leftValue_=i.value,new d.State(v.right,i.scope);s.pop();var _=i.leftValue_,S=i.value,T;switch(v.operator){case"==":T=_==S;break;case"!=":T=_!=S;break;case"===":T=_===S;break;case"!==":T=_!==S;break;case">":T=_>S;break;case">=":T=_>=S;break;case"<":T=_<S;break;case"<=":T=_<=S;break;case"+":T=_+S;break;case"-":T=_-S;break;case"*":T=_*S;break;case"/":T=_/S;break;case"%":T=_%S;break;case"&":T=_&S;break;case"|":T=_|S;break;case"^":T=_^S;break;case"<<":T=_<<S;break;case">>":T=_>>S;break;case">>>":T=_>>>S;break;case"in":S instanceof d.Object||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+S+"'"),T=this.hasProperty(S,_);break;case"instanceof":this.isa(S,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"'instanceof' expects an object, not '"+S+"'"),T=_ instanceof d.Object?this.isa(_,S):!1;break;default:throw SyntaxError("Unknown binary operator: "+v.operator)}s[s.length-1].value=T},d.prototype.stepBlockStatement=function(s,i,v){var _=i.n_||0,S=v.body[_];if(S)return i.n_=_+1,new d.State(S,i.scope);s.pop()},d.prototype.stepBreakStatement=function(s,i,v){var _=v.label&&v.label.name;this.unwind(d.Completion.BREAK,void 0,_)},d.prototype.evalCodeNumber_=0,d.prototype.stepCallExpression=function(s,i,v){if(!i.doneCallee_){i.doneCallee_=1;var _=new d.State(v.callee,i.scope);return _.components=!0,_}if(i.doneCallee_===1){i.doneCallee_=2;var S=i.value;if(Array.isArray(S)){if(i.func_=this.getValue(S),S[0]===d.SCOPE_REFERENCE?i.directEval_=S[1]==="eval":i.funcThis_=S[0],S=i.func_,this.getterStep_)return i.doneCallee_=1,this.createGetter_(S,i.value)}else i.func_=S;i.arguments_=[],i.n_=0}var S=i.func_;if(!i.doneArgs_){if(i.n_!==0&&i.arguments_.push(i.value),v.arguments[i.n_])return new d.State(v.arguments[i.n_++],i.scope);if(v.type==="NewExpression"){if((!(S instanceof d.Object)||S.illegalConstructor)&&this.throwException(this.TYPE_ERROR,this.nodeSummary(v.callee)+" is not a constructor"),S===this.ARRAY)i.funcThis_=this.createArray();else{var T=S.properties.prototype;(typeof T!="object"||T===null)&&(T=this.OBJECT_PROTO),i.funcThis_=this.createObjectProto(T)}i.isConstructor=!0}i.doneArgs_=!0}if(i.doneExec_)s.pop(),i.isConstructor&&typeof i.value!="object"?s[s.length-1].value=i.funcThis_:s[s.length-1].value=i.value;else{i.doneExec_=!0,S instanceof d.Object||this.throwException(this.TYPE_ERROR,this.nodeSummary(v.callee)+" is not a function");var b=S.node;if(b){for(var C=this.createScope(b.body,S.parentScope),G=this.createArray(),Y=0;Y<i.arguments_.length;Y++)this.setProperty(G,Y,i.arguments_[Y]);this.setProperty(C.object,"arguments",G);for(var Y=0;Y<b.params.length;Y++){var Q=b.params[Y].name,X=i.arguments_.length>Y?i.arguments_[Y]:void 0;this.setProperty(C.object,Q,X)}return C.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),this.setProperty(C.object,"this",i.funcThis_,d.READONLY_DESCRIPTOR),i.value=void 0,new d.State(b.body,C)}else if(S.eval){var K=i.arguments_[0];if(typeof K!="string")i.value=K;else{try{var re=this.parse_(String(K),"eval"+this.evalCodeNumber_++)}catch(ie){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+ie.message)}var te=this.newNode();te.type="EvalProgram_",te.body=re.body,d.stripLocations_(te,v.start,v.end);var C=i.directEval_?i.scope:this.globalScope;return C.strict?C=this.createScope(re,C):this.populateScope_(re,C),this.value=void 0,new d.State(te,C)}}else if(S.nativeFunc)i.scope.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),i.value=S.nativeFunc.apply(i.funcThis_,i.arguments_);else if(S.asyncFunc){var de=this,Ne=function(ge){i.value=ge,de.paused_=!1},ve=S.asyncFunc.length-1,Me=i.arguments_.concat(new Array(ve)).slice(0,ve);Me.push(Ne),this.paused_=!0,i.scope.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),S.asyncFunc.apply(i.funcThis_,Me);return}else this.throwException(this.TYPE_ERROR,this.nodeSummary(v.callee)+" is not callable")}},d.prototype.stepConditionalExpression=function(s,i,v){var _=i.mode_||0;if(_===0)return i.mode_=1,new d.State(v.test,i.scope);if(_===1){i.mode_=2;var S=!!i.value;if(S&&v.consequent)return new d.State(v.consequent,i.scope);if(!S&&v.alternate)return new d.State(v.alternate,i.scope);this.value=void 0}s.pop(),v.type==="ConditionalExpression"&&(s[s.length-1].value=i.value)},d.prototype.stepContinueStatement=function(s,i,v){var _=v.label&&v.label.name;this.unwind(d.Completion.CONTINUE,void 0,_)},d.prototype.stepDebuggerStatement=function(s,i,v){s.pop()},d.prototype.stepDoWhileStatement=function(s,i,v){if(v.type==="DoWhileStatement"&&i.test_===void 0&&(i.value=!0,i.test_=!0),!i.test_)return i.test_=!0,new d.State(v.test,i.scope);if(!i.value)s.pop();else if(v.body)return i.test_=!1,i.isLoop=!0,new d.State(v.body,i.scope)},d.prototype.stepEmptyStatement=function(s,i,v){s.pop()},d.prototype.stepEvalProgram_=function(s,i,v){var _=i.n_||0,S=v.body[_];if(S)return i.n_=_+1,new d.State(S,i.scope);s.pop(),s[s.length-1].value=this.value},d.prototype.stepExpressionStatement=function(s,i,v){if(!i.done_)return this.value=void 0,i.done_=!0,new d.State(v.expression,i.scope);s.pop(),this.value=i.value},d.prototype.stepForInStatement=function(s,i,v){if(!i.doneInit_&&(i.doneInit_=!0,v.left.declarations&&v.left.declarations[0].init))return i.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer"),new d.State(v.left,i.scope);if(!i.doneObject_)return i.doneObject_=!0,i.variable_||(i.variable_=i.value),new d.State(v.right,i.scope);if(i.isLoop||(i.isLoop=!0,i.object_=i.value,i.visited_=Object.create(null)),i.name_===void 0)e:for(;;){if(i.object_ instanceof d.Object)for(i.props_||(i.props_=Object.getOwnPropertyNames(i.object_.properties));;){var _=i.props_.shift();if(_===void 0)break;if(Object.prototype.hasOwnProperty.call(i.object_.properties,_)&&!i.visited_[_]&&(i.visited_[_]=!0,!!Object.prototype.propertyIsEnumerable.call(i.object_.properties,_))){i.name_=_;break e}}else if(i.object_!==null&&i.object_!==void 0)for(i.props_||(i.props_=Object.getOwnPropertyNames(i.object_));;){var _=i.props_.shift();if(_===void 0)break;if(i.visited_[_]=!0,!!Object.prototype.propertyIsEnumerable.call(i.object_,_)){i.name_=_;break e}}if(i.object_=this.getPrototype(i.object_),i.props_=null,i.object_===null){s.pop();return}}if(!i.doneVariable_){i.doneVariable_=!0;var S=v.left;if(S.type==="VariableDeclaration")i.variable_=[d.SCOPE_REFERENCE,S.declarations[0].id.name];else{i.variable_=null;var T=new d.State(S,i.scope);return T.components=!0,T}}if(i.variable_||(i.variable_=i.value),!i.doneSetter_){i.doneSetter_=!0;var b=i.name_,C=this.setValue(i.variable_,b);if(C)return this.createSetter_(C,i.variable_,b)}if(i.name_=void 0,i.doneVariable_=!1,i.doneSetter_=!1,v.body)return new d.State(v.body,i.scope)},d.prototype.stepForStatement=function(s,i,v){switch(i.mode_){default:if(i.mode_=1,v.init)return new d.State(v.init,i.scope);break;case 1:if(i.mode_=2,v.test)return new d.State(v.test,i.scope);break;case 2:if(i.mode_=3,v.test&&!i.value)s.pop();else return i.isLoop=!0,new d.State(v.body,i.scope);break;case 3:if(i.mode_=1,v.update)return new d.State(v.update,i.scope);break}},d.prototype.stepFunctionDeclaration=function(s,i,v){s.pop()},d.prototype.stepFunctionExpression=function(s,i,v){s.pop(),i=s[s.length-1];var _=i.scope;v.id&&(_=this.createSpecialScope(_)),i.value=this.createFunction(v,_,i.destinationName),v.id&&this.setProperty(_.object,v.id.name,i.value,d.READONLY_DESCRIPTOR)},d.prototype.stepIdentifier=function(s,i,v){if(s.pop(),i.components){s[s.length-1].value=[d.SCOPE_REFERENCE,v.name];return}var _=this.getValueFromScope(v.name);if(this.getterStep_){var S=_;return this.createGetter_(S,this.globalObject)}s[s.length-1].value=_},d.prototype.stepIfStatement=d.prototype.stepConditionalExpression,d.prototype.stepLabeledStatement=function(s,i,v){s.pop();var _=i.labels||[];_.push(v.label.name);var S=new d.State(v.body,i.scope);return S.labels=_,S},d.prototype.stepLiteral=function(s,i,v){s.pop();var _=v.value;if(_ instanceof RegExp){var S=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(S,_),_=S}s[s.length-1].value=_},d.prototype.stepLogicalExpression=function(s,i,v){if(v.operator!=="&&"&&v.operator!=="||")throw SyntaxError("Unknown logical operator: "+v.operator);if(!i.doneLeft_)return i.doneLeft_=!0,new d.State(v.left,i.scope);if(i.doneRight_)s.pop(),s[s.length-1].value=i.value;else if(v.operator==="&&"&&!i.value||v.operator==="||"&&i.value)s.pop(),s[s.length-1].value=i.value;else return i.doneRight_=!0,new d.State(v.right,i.scope)},d.prototype.stepMemberExpression=function(s,i,v){if(!i.doneObject_)return i.doneObject_=!0,new d.State(v.object,i.scope);var _;if(!v.computed)i.object_=i.value,_=v.property.name;else if(i.doneProperty_)_=i.value;else return i.object_=i.value,i.doneProperty_=!0,new d.State(v.property,i.scope);if(s.pop(),i.components)s[s.length-1].value=[i.object_,_];else{var S=this.getProperty(i.object_,_);if(this.getterStep_){var T=S;return this.createGetter_(T,i.object_)}s[s.length-1].value=S}},d.prototype.stepNewExpression=d.prototype.stepCallExpression,d.prototype.stepObjectExpression=function(s,i,v){var _=i.n_||0,S=v.properties[_];if(!i.object_)i.object_=this.createObjectProto(this.OBJECT_PROTO),i.properties_=Object.create(null);else{var T=i.destinationName;i.properties_[T]||(i.properties_[T]={}),i.properties_[T][S.kind]=i.value,i.n_=++_,S=v.properties[_]}if(S){var b=S.key;if(b.type==="Identifier")var T=b.name;else if(b.type==="Literal")var T=b.value;else throw SyntaxError("Unknown object structure: "+b.type);return i.destinationName=T,new d.State(S.value,i.scope)}for(var b in i.properties_){var C=i.properties_[b];if("get"in C||"set"in C){var G={configurable:!0,enumerable:!0,get:C.get,set:C.set};this.setProperty(i.object_,b,d.VALUE_IN_DESCRIPTOR,G)}else this.setProperty(i.object_,b,C.init)}s.pop(),s[s.length-1].value=i.object_},d.prototype.stepProgram=function(s,i,v){var _=v.body.shift();if(_)return i.done=!1,new d.State(_,i.scope);i.done=!0},d.prototype.stepReturnStatement=function(s,i,v){if(v.argument&&!i.done_)return i.done_=!0,new d.State(v.argument,i.scope);this.unwind(d.Completion.RETURN,i.value,void 0)},d.prototype.stepSequenceExpression=function(s,i,v){var _=i.n_||0,S=v.expressions[_];if(S)return i.n_=_+1,new d.State(S,i.scope);s.pop(),s[s.length-1].value=i.value},d.prototype.stepSwitchStatement=function(s,i,v){if(!i.test_)return i.test_=1,new d.State(v.discriminant,i.scope);for(i.test_===1&&(i.test_=2,i.switchValue_=i.value,i.defaultCase_=-1);;){var _=i.index_||0,S=v.cases[_];if(!i.matched_&&S&&!S.test){i.defaultCase_=_,i.index_=_+1;continue}if(!S&&!i.matched_&&i.defaultCase_!==-1){i.matched_=!0,i.index_=i.defaultCase_;continue}if(S){if(!i.matched_&&!i.tested_&&S.test)return i.tested_=!0,new d.State(S.test,i.scope);if(i.matched_||i.value===i.switchValue_){i.matched_=!0;var T=i.n_||0;if(S.consequent[T])return i.isSwitch=!0,i.n_=T+1,new d.State(S.consequent[T],i.scope)}i.tested_=!1,i.n_=0,i.index_=_+1}else{s.pop();return}}},d.prototype.stepThisExpression=function(s,i,v){s.pop(),s[s.length-1].value=this.getValueFromScope("this")},d.prototype.stepThrowStatement=function(s,i,v){if(i.done_)this.throwException(i.value);else return i.done_=!0,new d.State(v.argument,i.scope)},d.prototype.stepTryStatement=function(s,i,v){if(!i.doneBlock_)return i.doneBlock_=!0,new d.State(v.block,i.scope);if(i.cv&&i.cv.type===d.Completion.THROW&&!i.doneHandler_&&v.handler){i.doneHandler_=!0;var _=this.createSpecialScope(i.scope);return this.setProperty(_.object,v.handler.param.name,i.cv.value),i.cv=void 0,new d.State(v.handler.body,_)}if(!i.doneFinalizer_&&v.finalizer)return i.doneFinalizer_=!0,new d.State(v.finalizer,i.scope);s.pop(),i.cv&&this.unwind(i.cv.type,i.cv.value,i.cv.label)},d.prototype.stepUnaryExpression=function(s,i,v){if(!i.done_){i.done_=!0;var _=new d.State(v.argument,i.scope);return _.components=v.operator==="delete",_}s.pop();var S=i.value;switch(v.operator){case"-":S=-S;break;case"+":S=+S;break;case"!":S=!S;break;case"~":S=~S;break;case"delete":var T=!0;if(Array.isArray(S)){var b=S[0];b===d.SCOPE_REFERENCE&&(b=i.scope);var C=String(S[1]);try{delete b.properties[C]}catch{i.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+C+"' of '"+b+"'"):T=!1}}S=T;break;case"typeof":S=S&&S.class==="Function"?"function":typeof S;break;case"void":S=void 0;break;default:throw SyntaxError("Unknown unary operator: "+v.operator)}s[s.length-1].value=S},d.prototype.stepUpdateExpression=function(s,i,v){if(!i.doneLeft_){i.doneLeft_=!0;var _=new d.State(v.argument,i.scope);return _.components=!0,_}if(i.leftSide_||(i.leftSide_=i.value),i.doneGetter_&&(i.leftValue_=i.value),!i.doneGetter_){var T=this.getValue(i.leftSide_);if(i.leftValue_=T,this.getterStep_){i.doneGetter_=!0;var S=T;return this.createGetter_(S,i.leftSide_)}}if(i.doneSetter_){s.pop(),s[s.length-1].value=i.setterValue_;return}var T=Number(i.leftValue_),b;if(v.operator==="++")b=T+1;else if(v.operator==="--")b=T-1;else throw SyntaxError("Unknown update expression: "+v.operator);var C=v.prefix?b:T,G=this.setValue(i.leftSide_,b);if(G)return i.doneSetter_=!0,i.setterValue_=C,this.createSetter_(G,i.leftSide_,b);s.pop(),s[s.length-1].value=C},d.prototype.stepVariableDeclaration=function(s,i,v){var _=v.declarations,S=i.n_||0,T=_[S];for(i.init_&&T&&(this.setValueToScope(T.id.name,i.value),i.init_=!1,T=_[++S]);T;){if(T.init)return i.n_=S,i.init_=!0,i.destinationName=T.id.name,new d.State(T.init,i.scope);T=_[++S]}s.pop()},d.prototype.stepWithStatement=function(s,i,v){if(!i.doneObject_)return i.doneObject_=!0,new d.State(v.object,i.scope);s.pop();var _=this.createSpecialScope(i.scope,i.value);return new d.State(v.body,_)},d.prototype.stepWhileStatement=d.prototype.stepDoWhileStatement,d.nativeGlobal.Interpreter=d,d.prototype.step=d.prototype.step,d.prototype.run=d.prototype.run,d.prototype.appendCode=d.prototype.appendCode,d.prototype.createObject=d.prototype.createObject,d.prototype.createObjectProto=d.prototype.createObjectProto,d.prototype.createAsyncFunction=d.prototype.createAsyncFunction,d.prototype.createNativeFunction=d.prototype.createNativeFunction,d.prototype.getProperty=d.prototype.getProperty,d.prototype.setProperty=d.prototype.setProperty,d.prototype.getStatus=d.prototype.getStatus,d.prototype.nativeToPseudo=d.prototype.nativeToPseudo,d.prototype.pseudoToNative=d.prototype.pseudoToNative,d.prototype.getGlobalScope=d.prototype.getGlobalScope,d.prototype.getStateStack=d.prototype.getStateStack,d.prototype.setStateStack=d.prototype.setStateStack,d.VALUE_IN_DESCRIPTOR=d.VALUE_IN_DESCRIPTOR,d.Status=d.Status,M.exports={Interpreter:d}},"./original-repo/acorn.js":function(M,F){(function($,d){return d(F)})(this,function($){$.version="0.5.0";var d,s="",i,v;$.parse=function(P,B){return s=String(P),i=s.length,S(B),ln(),Sn(d.program)};var _={strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function S(P){d=P||{};for(var B in _)Object.prototype.hasOwnProperty.call(d,B)||(d[B]=_[B]);v=d.sourceFile}var T=function(P,B){for(var H=1,W=0;;){ur.lastIndex=W;var se=ur.exec(P);if(se&&se.index<B)++H,W=se.index+se[0].length;else break}return{line:H,column:B-W}},b=0,C=0,G=0,Y,Q,X,K,re,te,de,Ne=0,ve=0,Me,ge,ie,me;function ae(P,B){var H=T(s,P);B+=" ("+H.line+":"+H.column+")";var W=new SyntaxError(B);throw W.pos=P,W.loc=H,W.raisedAt=b,W}var Ke=[],Le={type:"num"},bt={type:"regexp"},Ze={type:"string"},Ce={type:"name"},Ve={type:"eof"},Ye={keyword:"break"},pt={keyword:"case",beforeExpr:!0},Xe={keyword:"catch"},ht={keyword:"continue"},le={keyword:"debugger"},je={keyword:"default"},Be={keyword:"do",isLoop:!0},qe={keyword:"else",beforeExpr:!0},et={keyword:"finally"},fe={keyword:"for",isLoop:!0},pe={keyword:"function"},Te={keyword:"if"},he={keyword:"return",beforeExpr:!0},De={keyword:"switch"},ut={keyword:"throw",beforeExpr:!0},be={keyword:"try"},we={keyword:"var"},ze={keyword:"while",isLoop:!0},Dt={keyword:"with"},Mt={keyword:"new",beforeExpr:!0},Bt={keyword:"this"},ke={keyword:"null",atomValue:null},Ge={keyword:"true",atomValue:!0},Nt={keyword:"false",atomValue:!1},xt={keyword:"in",binop:7,beforeExpr:!0},Xt={break:Ye,case:pt,catch:Xe,continue:ht,debugger:le,default:je,do:Be,else:qe,finally:et,for:fe,function:pe,if:Te,return:he,switch:De,throw:ut,try:be,var:we,while:ze,with:Dt,null:ke,true:Ge,false:Nt,new:Mt,in:xt,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Bt,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},hr={type:"[",beforeExpr:!0},Er={type:"]"},qt={type:"{",beforeExpr:!0},Ct={type:"}"},ct={type:"(",beforeExpr:!0},Je={type:")"},yt={type:",",beforeExpr:!0},lt={type:";",beforeExpr:!0},Jt={type:":",beforeExpr:!0},Cr={type:"."},Ar={type:"?",beforeExpr:!0},Pr={binop:10,beforeExpr:!0},Ir={isAssign:!0,beforeExpr:!0},_t={isAssign:!0,beforeExpr:!0},qr={postfix:!0,prefix:!0,isUpdate:!0},kr={prefix:!0,beforeExpr:!0},Dr={binop:1,beforeExpr:!0},Mr={binop:2,beforeExpr:!0},Jr={binop:3,beforeExpr:!0},Kr={binop:4,beforeExpr:!0},Zr={binop:5,beforeExpr:!0},Qr={binop:6,beforeExpr:!0},en={binop:7,beforeExpr:!0},tn={binop:8,beforeExpr:!0},rn={binop:9,prefix:!0,beforeExpr:!0},nn={binop:10,beforeExpr:!0};function ir(P){for(var B=P.split(" "),H=Object.create(null),W=0;W<B.length;W++)H[B[W]]=!0;return function(se){return H[se]||!1}}var an=ir("class enum extends super const export import"),Ur=ir("implements interface let package private protected public static yield"),or=ir("eval arguments"),on=ir("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),sn=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Lr="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",un="------------------------------------------------------------------------------------------------------------------------------------------",Fr=new RegExp("["+Lr+"]"),cn=new RegExp("["+Lr+un+"]"),sr=/[\n\r\u2028\u2029]/,ur=/\r\n|[\n\r\u2028\u2029]/g,cr=function(P){return P<65?P===36:P<91?!0:P<97?P===95:P<123?!0:P>=170&&Fr.test(String.fromCharCode(P))},jr=function(P){return P<48?P===36:P<58?!0:P<65?!1:P<91?!0:P<97?P===95:P<123?!0:P>=170&&cn.test(String.fromCharCode(P))};function St(){this.line=te,this.column=b-de}function ln(){te=1,b=de=0,re=!0,Kt()}function Oe(P,B){G=b,d.locations&&(Q=new St),X=P,Kt(),K=B,re=P.beforeExpr}function fn(){var P=d.onComment&&d.locations&&new St,B=b,H=s.indexOf("*/",b+=2);if(H===-1&&ae(b-2,"Unterminated comment"),b=H+2,d.locations){ur.lastIndex=B;for(var W;(W=ur.exec(s))&&W.index<b;)++te,de=W.index+W[0].length}d.onComment&&d.onComment(!0,s.slice(B+2,H),B,b,P,d.locations&&new St)}function yr(){for(var P=b,B=d.onComment&&d.locations&&new St,H=s.charCodeAt(b+=2);b<i&&H!==10&&H!==13&&H!==8232&&H!==8233;)++b,H=s.charCodeAt(b);d.onComment&&d.onComment(!1,s.slice(P+2,b),P,b,B,d.locations&&new St)}function Kt(){for(;b<i;){var P=s.charCodeAt(b);if(P===32)++b;else if(P===13){++b;var B=s.charCodeAt(b);B===10&&++b,d.locations&&(++te,de=b)}else if(P===10||P===8232||P===8233)++b,d.locations&&(++te,de=b);else if(P>8&&P<14)++b;else if(P===47){var B=s.charCodeAt(b+1);if(B===42)fn();else if(B===47)yr();else break}else if(P===160)++b;else if(P>=5760&&sn.test(String.fromCharCode(P)))++b;else break}}function pn(){var P=s.charCodeAt(b+1);P>=48&&P<=57?$r(!0):(++b,Oe(Cr))}function dn(){var P=s.charCodeAt(b+1);re?(++b,Br()):P===61?xe(_t,2):xe(Pr,1)}function hn(){var P=s.charCodeAt(b+1);P===61?xe(_t,2):xe(nn,1)}function En(P){var B=s.charCodeAt(b+1);B===P?xe(P===124?Dr:Mr,2):B===61?xe(_t,2):xe(P===124?Jr:Zr,1)}function yn(){var P=s.charCodeAt(b+1);P===61?xe(_t,2):xe(Kr,1)}function vn(P){var B=s.charCodeAt(b+1);if(B===P){if(B===45&&s.charCodeAt(b+2)===62&&sr.test(s.slice(ve,b))){b+=3,yr(),Kt(),Pt();return}xe(qr,2)}else B===61?xe(_t,2):xe(rn,1)}function mn(P){var B=s.charCodeAt(b+1),H=1;if(B===P){H=P===62&&s.charCodeAt(b+2)===62?3:2,s.charCodeAt(b+H)===61?xe(_t,H+1):xe(tn,H);return}if(B===33&&P===60&&s.charCodeAt(b+2)===45&&s.charCodeAt(b+3)===45){b+=4,yr(),Kt(),Pt();return}B===61&&(H=s.charCodeAt(b+2)===61?3:2),xe(en,H)}function gn(P){var B=s.charCodeAt(b+1);B===61?xe(Qr,s.charCodeAt(b+2)===61?3:2):xe(P===61?Ir:kr,1)}function bn(P){switch(P){case 46:return pn();case 40:return++b,Oe(ct);case 41:return++b,Oe(Je);case 59:return++b,Oe(lt);case 44:return++b,Oe(yt);case 91:return++b,Oe(hr);case 93:return++b,Oe(Er);case 123:return++b,Oe(qt);case 125:return++b,Oe(Ct);case 58:return++b,Oe(Jt);case 63:return++b,Oe(Ar);case 48:var B=s.charCodeAt(b+1);if(B===120||B===88)return _n();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return $r(!1);case 34:case 39:return Rn(P);case 47:return dn();case 37:case 42:return hn();case 124:case 38:return En(P);case 94:return yn();case 43:case 45:return vn(P);case 60:case 62:return mn(P);case 61:case 33:return gn(P);case 126:return xe(kr,1)}return!1}function Pt(P){if(P?b=C+1:C=b,d.locations&&(Y=new St),P)return Br();if(b>=i)return Oe(Ve);var B=s.charCodeAt(b);if(cr(B)||B===92)return Vr();var H=bn(B);if(H===!1){var W=String.fromCharCode(B);if(W==="\\"||Fr.test(W))return Vr();ae(b,"Unexpected character '"+W+"'")}}function xe(P,B){var H=s.slice(b,b+B);b+=B,Oe(P,H)}function Br(){for(var P,B,H=b;;){b>=i&&ae(H,"Unterminated regexp");var W=s.charAt(b);if(sr.test(W)&&ae(H,"Unterminated regexp"),P)P=!1;else{if(W==="[")B=!0;else if(W==="]"&&B)B=!1;else if(W==="/"&&!B)break;P=W==="\\"}++b}var se=s.slice(H,b);++b;var ne=zr();ne&&!/^[gmi]*$/.test(ne)&&ae(H,"Invalid regexp flag");try{var ue=new RegExp(se,ne)}catch(Ee){throw Ee instanceof SyntaxError&&ae(H,Ee.message),Ee}Oe(bt,ue)}function er(P,B){for(var H=b,W=0,se=B===void 0?1/0:B,ne=0;ne<se;++ne){var ue=s.charCodeAt(b),Ee;if(ue>=97?Ee=ue-97+10:ue>=65?Ee=ue-65+10:ue>=48&&ue<=57?Ee=ue-48:Ee=1/0,Ee>=P)break;++b,W=W*P+Ee}return b===H||B!==void 0&&b-H!==B?null:W}function _n(){b+=2;var P=er(16);P===null&&ae(C+2,"Expected hexadecimal number"),cr(s.charCodeAt(b))&&ae(b,"Identifier directly after number"),Oe(Le,P)}function $r(P){var B=b,H=!1,W=s.charCodeAt(b)===48;!P&&er(10)===null&&ae(B,"Invalid number"),s.charCodeAt(b)===46&&(++b,er(10),H=!0);var se=s.charCodeAt(b);(se===69||se===101)&&(se=s.charCodeAt(++b),(se===43||se===45)&&++b,er(10)===null&&ae(B,"Invalid number"),H=!0),cr(s.charCodeAt(b))&&ae(b,"Identifier directly after number");var ne=s.slice(B,b),ue;H?ue=parseFloat(ne):!W||ne.length===1?ue=parseInt(ne,10):/[89]/.test(ne)||me?ae(B,"Invalid number"):ue=parseInt(ne,8),Oe(Le,ue)}function Rn(P){b++;for(var B="";;){b>=i&&ae(C,"Unterminated string constant");var H=s.charCodeAt(b);if(H===P){++b,Oe(Ze,B);return}if(H===92){H=s.charCodeAt(++b);var W=/^[0-7]+/.exec(s.slice(b,b+3));for(W&&(W=W[0]);W&&parseInt(W,8)>255;)W=W.slice(0,-1);if(W==="0"&&(W=null),++b,W)me&&ae(b-2,"Octal literal in strict mode"),B+=String.fromCharCode(parseInt(W,8)),b+=W.length-1;else switch(H){case 110:B+=`
`;break;case 114:B+="\r";break;case 120:B+=String.fromCharCode(lr(2));break;case 117:B+=String.fromCharCode(lr(4));break;case 85:B+=String.fromCharCode(lr(8));break;case 116:B+="	";break;case 98:B+="\b";break;case 118:B+="\v";break;case 102:B+="\f";break;case 48:B+="\0";break;case 13:s.charCodeAt(b)===10&&++b;case 10:d.locations&&(de=b,++te);break;default:B+=String.fromCharCode(H);break}}else(H===13||H===10||H===8232||H===8233)&&ae(C,"Unterminated string constant"),B+=String.fromCharCode(H),++b}}function lr(P){var B=er(16,P);return B===null&&ae(C,"Bad character escape sequence"),B}var It;function zr(){It=!1;for(var P,B=!0,H=b;;){var W=s.charCodeAt(b);if(jr(W))It&&(P+=s.charAt(b)),++b;else if(W===92){It||(P=s.slice(H,b)),It=!0,s.charCodeAt(++b)!==117&&ae(b,"Expecting Unicode escape sequence \\uXXXX"),++b;var se=lr(4),ne=String.fromCharCode(se);ne||ae(b-1,"Invalid Unicode escape"),(B?cr(se):jr(se))||ae(b-4,"Invalid Unicode escape"),P+=ne}else break;B=!1}return It?P:s.slice(H,b)}function Vr(){var P=zr(),B=Ce;!It&&on(P)&&(B=Xt[P]),Oe(B,P)}function ce(){Ne=C,ve=G,Me=Q,Pt()}function vr(P){if(me=P,b=C,d.locations)for(;b<de;)de=s.lastIndexOf(`
`,de-2)+1,--te;Kt(),Pt()}function Gr(){this.type=null,this.start=C,this.end=null}function Hr(){this.start=Y,this.end=null,v&&(this.source=v)}function Ae(){var P=new Gr;return d.locations&&(P.loc=new Hr),d.directSourceFile&&(P.sourceFile=d.directSourceFile),d.ranges&&(P.range=[C,0]),P}function vt(P){var B=new Gr;return B.start=P.start,d.locations&&(B.loc=new Hr,B.loc.start=P.loc.start),d.ranges&&(B.range=[P.range[0],0]),B}function oe(P,B){return P.type=B,P.end=ve,d.locations&&(P.loc.end=Me),d.ranges&&(P.range[1]=ve),P}function mr(P){return P.type==="ExpressionStatement"&&P.expression.type==="Literal"&&P.expression.value==="use strict"}function ye(P){return X===P?(ce(),!0):!1}function fr(){return!d.strictSemicolons&&(X===Ve||X===Ct||sr.test(s.slice(ve,C)))}function wt(){!ye(lt)&&!fr()&&ft()}function _e(P){X===P?ce():ft()}function ft(){ae(C,"Unexpected token")}function pr(P){P.type!=="Identifier"&&P.type!=="MemberExpression"&&ae(P.start,"Assigning to rvalue"),me&&P.type==="Identifier"&&or(P.name)&&ae(P.start,"Assigning to "+P.name+" in strict mode")}function Sn(P){Ne=ve=b,d.locations&&(Me=new St),ge=me=!1,ie=[],Pt();var B=P||Ae(),H=!0;for(P||(B.body=[]);X!==Ve;){var W=He();B.body.push(W),H&&mr(W)&&vr(!0),H=!1}return oe(B,"Program")}var gr={kind:"loop"},Tn={kind:"switch"};function He(){(X===Pr||X===_t&&K==="/=")&&Pt(!0);var P=X,B=Ae();switch(P){case Ye:case ht:ce();var H=P===Ye;ye(lt)||fr()?B.label=null:X!==Ce?ft():(B.label=gt(),wt());for(var W=0;W<ie.length;++W){var se=ie[W];if((B.label===null||se.name===B.label.name)&&(se.kind!==null&&(H||se.kind==="loop")||B.label&&H))break}return W===ie.length&&ae(B.start,"Unsyntactic "+P.keyword),oe(B,H?"BreakStatement":"ContinueStatement");case le:return ce(),wt(),oe(B,"DebuggerStatement");case Be:return ce(),ie.push(gr),B.body=He(),ie.pop(),_e(ze),B.test=tr(),wt(),oe(B,"DoWhileStatement");case fe:if(ce(),ie.push(gr),_e(ct),X===lt)return br(B,null);if(X===we){var ne=Ae();return ce(),Yr(ne,!0),oe(ne,"VariableDeclaration"),ne.declarations.length===1&&ye(xt)?Wr(B,ne):br(B,ne)}var ne=Pe(!1,!0);return ye(xt)?(pr(ne),Wr(B,ne)):br(B,ne);case pe:return ce(),wr(B,!0);case Te:return ce(),B.test=tr(),B.consequent=He(),B.alternate=ye(qe)?He():null,oe(B,"IfStatement");case he:return!ge&&!d.allowReturnOutsideFunction&&ae(C,"'return' outside of function"),ce(),ye(lt)||fr()?B.argument=null:(B.argument=Pe(),wt()),oe(B,"ReturnStatement");case De:ce(),B.discriminant=tr(),B.cases=[],_e(qt),ie.push(Tn);for(var ue,Ee;X!==Ct;)if(X===pt||X===je){var ar=X===pt;ue&&oe(ue,"SwitchCase"),B.cases.push(ue=Ae()),ue.consequent=[],ce(),ar?ue.test=Pe():(Ee&&ae(Ne,"Multiple default clauses"),Ee=!0,ue.test=null),_e(Jt)}else ue||ft(),ue.consequent.push(He());return ue&&oe(ue,"SwitchCase"),ce(),ie.pop(),oe(B,"SwitchStatement");case ut:return ce(),sr.test(s.slice(ve,C))&&ae(ve,"Illegal newline after throw"),B.argument=Pe(),wt(),oe(B,"ThrowStatement");case be:if(ce(),B.block=rr(),B.handler=null,X===Xe){var kt=Ae();ce(),_e(ct),kt.param=gt(),me&&or(kt.param.name)&&ae(kt.param.start,"Binding "+kt.param.name+" in strict mode"),_e(Je),kt.body=rr(),B.handler=oe(kt,"CatchClause")}return B.finalizer=ye(et)?rr():null,!B.handler&&!B.finalizer&&ae(B.start,"Missing catch or finally clause"),oe(B,"TryStatement");case we:return ce(),Yr(B),wt(),oe(B,"VariableDeclaration");case ze:return ce(),B.test=tr(),ie.push(gr),B.body=He(),ie.pop(),oe(B,"WhileStatement");case Dt:return me&&ae(C,"'with' in strict mode"),ce(),B.object=tr(),B.body=He(),oe(B,"WithStatement");case qt:return rr();case lt:return ce(),oe(B,"EmptyStatement");default:var Or=K,dr=Pe();if(P===Ce&&dr.type==="Identifier"&&ye(Jt)){for(var W=0;W<ie.length;++W)ie[W].name===Or&&ae(dr.start,"Label '"+Or+"' is already declared");var An=X.isLoop?"loop":X===De?"switch":null;return ie.push({name:Or,kind:An}),B.body=He(),ie.pop(),B.label=dr,oe(B,"LabeledStatement")}else return B.expression=dr,wt(),oe(B,"ExpressionStatement")}}function tr(){_e(ct);var P=Pe();return _e(Je),P}function rr(P){var B=Ae(),H=!0,W=!1,se;for(B.body=[],_e(qt);!ye(Ct);){var ne=He();B.body.push(ne),H&&P&&mr(ne)&&(se=W,vr(W=!0)),H=!1}return W&&!se&&vr(!1),oe(B,"BlockStatement")}function br(P,B){return P.init=B,_e(lt),P.test=X===lt?null:Pe(),_e(lt),P.update=X===Je?null:Pe(),_e(Je),P.body=He(),ie.pop(),oe(P,"ForStatement")}function Wr(P,B){return P.left=B,P.right=Pe(),_e(Je),P.body=He(),ie.pop(),oe(P,"ForInStatement")}function Yr(P,B){for(P.declarations=[],P.kind="var";;){var H=Ae();if(H.id=gt(),me&&or(H.id.name)&&ae(H.id.start,"Binding "+H.id.name+" in strict mode"),H.init=ye(Ir)?Pe(!0,B):null,P.declarations.push(oe(H,"VariableDeclarator")),!ye(yt))break}}function Pe(P,B){var H=_r(B);if(!P&&X===yt){var W=vt(H);for(W.expressions=[H];ye(yt);)W.expressions.push(_r(B));return oe(W,"SequenceExpression")}return H}function _r(P){var B=wn(P);if(X.isAssign){var H=vt(B);return H.operator=K,H.left=B,ce(),H.right=_r(P),pr(B),oe(H,"AssignmentExpression")}return B}function wn(P){var B=Nn(P);if(ye(Ar)){var H=vt(B);return H.test=B,H.consequent=Pe(!0),_e(Jt),H.alternate=Pe(!0,P),oe(H,"ConditionalExpression")}return B}function Nn(P){return Rr(Sr(),-1,P)}function Rr(P,B,H){var W=X.binop;if(W!==null&&(!H||X!==xt)&&W>B){var se=vt(P);se.left=P,se.operator=K;var ne=X;ce(),se.right=Rr(Sr(),W,H);var ue=oe(se,ne===Dr||ne===Mr?"LogicalExpression":"BinaryExpression");return Rr(ue,B,H)}return P}function Sr(){if(X.prefix){var P=Ae(),B=X.isUpdate;return P.operator=K,P.prefix=!0,re=!0,ce(),P.argument=Sr(),B?pr(P.argument):me&&P.operator==="delete"&&P.argument.type==="Identifier"&&ae(P.start,"Deleting local variable in strict mode"),oe(P,B?"UpdateExpression":"UnaryExpression")}for(var H=On();X.postfix&&!fr();){var P=vt(H);P.operator=K,P.prefix=!1,P.argument=H,pr(H),ce(),H=oe(P,"UpdateExpression")}return H}function On(){return nr(Tr())}function nr(P,B){var H;return ye(Cr)?(H=vt(P),H.object=P,H.property=gt(!0),H.computed=!1,nr(oe(H,"MemberExpression"),B)):ye(hr)?(H=vt(P),H.object=P,H.property=Pe(),H.computed=!0,_e(Er),nr(oe(H,"MemberExpression"),B)):!B&&ye(ct)?(H=vt(P),H.callee=P,H.arguments=Nr(Je,!1),nr(oe(H,"CallExpression"),B)):P}function Tr(){var P;switch(X){case Bt:return P=Ae(),ce(),oe(P,"ThisExpression");case Ce:return gt();case Le:case Ze:case bt:return P=Ae(),P.value=K,P.raw=s.slice(C,G),ce(),oe(P,"Literal");case ke:case Ge:case Nt:return P=Ae(),P.value=X.atomValue,P.raw=X.keyword,ce(),oe(P,"Literal");case ct:var B=Y,H=C;ce();var W=Pe();return W.start=H,W.end=G,d.locations&&(W.loc.start=B,W.loc.end=Q),d.ranges&&(W.range=[H,G]),_e(Je),W;case hr:return P=Ae(),ce(),P.elements=Nr(Er,!0,!0),oe(P,"ArrayExpression");case qt:return Cn();case pe:return P=Ae(),ce(),wr(P,!1);case Mt:return xn()}ft()}function xn(){var P=Ae();return ce(),P.callee=nr(Tr(),!0),P.arguments=ye(ct)?Nr(Je,!1):Ke,oe(P,"NewExpression")}function Cn(){var P=Ae(),B=!0,H=!1;for(P.properties=[],ce();!ye(Ct);){if(B)B=!1;else if(_e(yt),d.allowTrailingCommas&&ye(Ct))break;var W={key:Xr()},se=!1,ne;if(ye(Jt)?(W.value=Pe(!0),ne=W.kind="init"):W.key.type==="Identifier"&&(W.key.name==="get"||W.key.name==="set")?(se=H=!0,ne=W.kind=W.key.name,W.key=Xr(),X!==ct&&ft(),W.value=wr(Ae(),!1)):ft(),W.key.type==="Identifier"&&(me||H))for(var ue=0;ue<P.properties.length;++ue){var Ee=P.properties[ue];if(Ee.key.name===W.key.name){var ar=ne===Ee.kind||se&&Ee.kind==="init"||ne==="init"&&(Ee.kind==="get"||Ee.kind==="set");ar&&!me&&ne==="init"&&Ee.kind==="init"&&(ar=!1),ar&&ae(W.key.start,"Redefinition of property")}}P.properties.push(W)}return oe(P,"ObjectExpression")}function Xr(){return X===Le||X===Ze?Tr():gt(!0)}function wr(P,B){X===Ce?P.id=gt():B?ft():P.id=null,P.params=[];var H=!0;for(_e(ct);!ye(Je);)H?H=!1:_e(yt),P.params.push(gt());var W=ge,se=ie;if(ge=!0,ie=[],P.body=rr(!0),ge=W,ie=se,me||P.body.body.length&&mr(P.body.body[0]))for(var ne=P.id?-1:0;ne<P.params.length;++ne){var ue=ne<0?P.id:P.params[ne];if((Ur(ue.name)||or(ue.name))&&ae(ue.start,"Defining '"+ue.name+"' in strict mode"),ne>=0)for(var Ee=0;Ee<ne;++Ee)ue.name===P.params[Ee].name&&ae(ue.start,"Argument name clash in strict mode")}return oe(P,B?"FunctionDeclaration":"FunctionExpression")}function Nr(P,B,H){for(var W=[],se=!0;!ye(P);){if(se)se=!1;else if(_e(yt),B&&d.allowTrailingCommas&&ye(P))break;W.push(H&&X===yt?null:Pe(!0))}return W}function gt(P){var B=Ae();return P&&d.forbidReserved==="everywhere"&&(P=!1),X===Ce?(!P&&(d.forbidReserved&&an(K)||me&&Ur(K))&&s.slice(C,G).indexOf("\\")===-1&&ae(C,"The keyword '"+K+"' is reserved"),B.name=K):P&&X.keyword?B.name=X.keyword:ft(),re=!1,ce(),oe(B,"Identifier")}})},vm:M=>{M.exports=requireVmBrowserify()}},g={};function w(M){var F=g[M];if(F!==void 0)return F.exports;var $=g[M]={exports:{}};return y[M].call($.exports,$,$.exports,w),$.exports}w.d=(M,F)=>{for(var $ in F)w.o(F,$)&&!w.o(M,$)&&Object.defineProperty(M,$,{enumerable:!0,get:F[$]})},w.o=(M,F)=>Object.prototype.hasOwnProperty.call(M,F),w.r=M=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})};var O={};return(()=>{w.r(O),w.d(O,{default:()=>$});const M=w("./original-repo/acorn.js");globalThis.acorn=M;const{Interpreter:F}=w("./original-repo/interpreter.js"),$=F})(),O=O.default,O})())})(jsInterpreter);var jsInterpreterExports=jsInterpreter.exports;const Re=getDefaultExportFromCjs(jsInterpreterExports);var q=reactExports.createContext({registerProblem:noop$1});q.displayName="ContestContext";function Et({children:a}){let{student:o,setStudent:y,terminated:g}=h(),[w,O]=reactExports.useState({}),M=reactExports.useCallback((s,i)=>{O(v=>({...v,[s]:i}))},[]),[F,$]=reactExports.useState(!1),d=reactExports.useRef(null);return reactExports.useEffect(()=>{var s;g!==F&&($(g),F||((s=d.current)==null||s.showModal()))},[g,F]),o.startedAt?c.createElement(q.Provider,{value:{registerProblem:M}},c.createElement("div",{className:"break-before-page"},c.createElement("main",{className:"gap-x-10 [column-rule:solid_1px_var(--tw-prose-hr)] print:columns-2"},a)),c.createElement(Ie,{ref:d,schema:w})):c.createElement("div",{className:"flex h-[50vh] justify-center"},c.createElement("div",{className:"flex flex-col justify-center"},c.createElement("button",{className:"btn btn-success btn-lg",onClick:()=>{y({...o,startedAt:new Date,variant:V$1()})}},"Inizia")))}var Ie=reactExports.forwardRef(function({schema:a},o){let{student:y}=h(),g=Object.keys(a);g.sort((M,F)=>M.localeCompare(F,void 0,{numeric:!0}));let w=reactExports.useMemo(()=>{let M={id:y.variant,contestId:y.contestId,schema:a};return Se(y,{[M.id]:M})},[a,y]),O=sumBy(Object.values(a),"pointsCorrect");return c.createElement(jt,{ref:o,title:"Prova terminata"},c.createElement("p",null,"La prova  terminata."),w!==void 0&&c.createElement(c.Fragment,null,c.createElement("p",null,"Hai ottenuto un punteggio di ",c.createElement("b",null,w)," su ",c.createElement("b",null,O),"."),c.createElement("div",{className:"w-full"},c.createElement("table",{className:"table-fixed prose-td:truncate"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{scope:"col"},"Domanda"),c.createElement("th",{scope:"col"},"Risposta"),c.createElement("th",{scope:"col"},"Soluzione"),c.createElement("th",{scope:"col"},"Punteggio"))),c.createElement("tbody",null,g.map(M=>{var d,s;let F=(s=(d=y.answers)==null?void 0:d[M])==null?void 0:s.trim(),$=a[M];return c.createElement("tr",{key:M},c.createElement("td",null,M),c.createElement("td",null,F??"-"),c.createElement("td",null,$.solution),c.createElement("td",null,dt($,F)))}))))))});function At(){return reactExports.useContext(q)}var j=reactExports.createContext({id:void 0,points:[0,0,0],setCorrect:noop$1});j.displayName="ProblemContext";function Ot({id:a,points:o,statement:y}){let{student:g}=h(),[w,O]=reactExports.useState(1),[M,F]=reactExports.useState(()=>g.variant?A$1(`r#problem#${g.variant}#${a}`):0),$=reactExports.useCallback(()=>M,[M]),d=reactExports.useCallback(i=>{i&&i!==w&&defer(()=>O(i))},[w]),s=reactExports.useMemo(()=>reactExports.memo(y),[y]);return c.createElement(j.Provider,{value:{id:a,points:o,setCorrect:noop$1}},c.createElement("div",{className:"relative"},!1,c.createElement(s,{variant:$,setVariantCount:d})),c.createElement("hr",{className:"last:hidden"}))}function Vt({subId:a,children:o}){let{id:y,points:g}=reactExports.useContext(j),w=a?`${y}.${a}`:`${y}`,{registerProblem:O}=At(),[M,F]=reactExports.useState();return reactExports.useEffect(()=>{O(w,{type:"text",pointsCorrect:g[0],pointsBlank:g[1],pointsWrong:g[2],solution:M})},[O,w,M,g]),c.createElement(j.Provider,{value:{id:w,points:g,setCorrect:F}},c.createElement("div",{className:"break-inside-avoid"},c.createElement("h3",null,"Domanda ",w),o))}function E(){return reactExports.useContext(j)}var Z=reactExports.createContext({id:""});Z.displayName="AnswerContext";function zt({children:a}){let{student:o}=h(),{id:y}=E(),g=reactExports.useMemo(()=>{let w=reactExports.Children.toArray(a);return o.variant&&new x(`r#answers#${o.variant}#${y}`).shuffle(w),w},[o.variant,y,a]);return c.createElement("form",{className:D$1("answer-group my-5 flex-wrap rounded-xl bg-base-200 p-3","prose-p:my-1 print:flex print:border print:border-[var(--tw-prose-hr)] print:p-1")},g.map((w,O)=>c.createElement(Z.Provider,{key:O,value:{id:String.fromCodePoint(65+O)}},w)))}function Lt({correct:a,children:o}){var i;let{id:y}=reactExports.useContext(Z),{id:g,setCorrect:w}=E(),{student:O,setStudent:M,terminated:F}=h(),$=(i=O.answers)==null?void 0:i[g],d=async v=>{await M({...O,answers:{...O.answers,[g]:v}})},s=reactExports.useId();return reactExports.useEffect(()=>{a===!0&&w(y)},[a,w,y]),c.createElement("div",{className:D$1("answer relative my-1 flex rounded-lg pl-2 pr-1 hover:bg-base-300 print:mr-4",F&&{"border-2 border-success":a===!0,"border-2 border-error":$===y&&a===!1})},c.createElement("input",{id:s,checked:$===y,className:D$1("radio radio-sm my-auto mr-4 bg-base-100 [print-color-adjust:exact] disabled:opacity-90 print:mr-2",F&&$===y&&{"radio-success":a===!0,"radio-error":a===!1}),onChange:v=>d(v.target.checked?y:void 0),type:"radio",disabled:F}),c.createElement("div",{className:"my-auto w-6 screen:hidden"},y,")"),c.createElement("label",{htmlFor:s,className:"grow"},o),c.createElement("div",{className:"absolute right-0 top-0 mr-1 flex h-full justify-center print:hidden"},c.createElement("button",{className:D$1("btn btn-square btn-ghost btn-sm my-auto",($!==y||F)&&"hidden"),type:"button",onClick:()=>d(void 0)},c.createElement(Trash2,{size:20}))))}function Ft({correct:a,type:o}){var d;let{id:y,setCorrect:g}=E(),{student:w,setStudent:O,terminated:M}=h(),F=(d=w.answers)==null?void 0:d[y],$=async s=>{await O({...w,answers:{...w.answers,[y]:s}})};return reactExports.useEffect(()=>{a!==void 0&&g(a)},[a,g]),c.createElement("div",{className:"px-2"},c.createElement("input",{className:D$1("input input-bordered w-72 max-w-full border-2 print:placeholder:text-transparent",M&&a!==void 0&&{"disabled:input-success":a===F,"disabled:input-error":a!==F}),onChange:s=>$(s.target.value||void 0),onWheel:s=>s.currentTarget.blur(),placeholder:"Inserisci la risposta",type:o,value:F??"",disabled:M,"aria-label":"Risposta"}))}function Ut({children:a}){let{terminated:o}=h();if(o)return c.createElement("div",{className:"my-5 rounded-xl bg-base-200 print:hidden"},c.createElement("div",{className:"collapse"},c.createElement("input",{type:"checkbox"}),c.createElement("div",{className:"collapse-title text-xl font-medium"},"Mostra soluzione"),c.createElement("div",{className:"collapse-content"},a)))}var $t=z.enum(["Number","String","Array","Boolean"]),Fe=z.object({type:z.literal("input_value"),name:z.string(),check:$t}),Ht=z.object({type:z.string(),message0:z.string(),args0:z.array(Fe).optional(),colour:z.union([z.number(),z.string()]),tooltip:z.string(),helpUrl:z.string(),maxInstances:z.number().optional()}),Ue=Ht.extend({nextStatement:z.literal(null).optional(),previousStatement:z.literal(null).optional(),js:z.string()}),$e=Ht.extend({output:$t,js:z.tuple([z.string(),z.string().startsWith("ORDER_")])}),Gt=z.union([Ue,$e]),We=reactExports.lazy(()=>__vitePreload(()=>import("./code-highlight-4YYAT6IQ-Cjfn6vv8.js"),__vite__mapDeps([0,1,2])));function V(a){return c.createElement(reactExports.Suspense,{fallback:c.createElement(Qe,{...a})},c.createElement(We,{...a}))}function Qe({inline:a,code:o,noLineNumbers:y}){return a?c.createElement("code",null,o):c.createElement("pre",null,c.createElement("code",null,o.split(`
`).map((g,w)=>c.createElement("span",{key:w},c.createElement("span",{className:D$1("mr-6 inline-block w-7 select-none text-right",y&&"hidden")},w+1),c.createElement("span",null,g)))))}var Wt={kind:"categoryToolbox",contents:[{kind:"category",name:"Variabili",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"Matematica",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"math_arithmetic",fields:{OP:"ADD"}},{kind:"block",type:"math_on_list",extraState:'<mutation op="SUM"></mutation>',fields:{OP:"SUM"}},{kind:"block",type:"math_modulo"},{kind:"block",type:"math_number_property",extraState:'<mutation divisor_input="false"></mutation>',fields:{PROPERTY:"EVEN"}}]},{kind:"category",name:"Logica",categorystyle:"logic_category",contents:[{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"controls_if"},{kind:"block",type:"controls_if",extraState:{hasElse:"true"}}]},{kind:"category",name:"Cicli",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{block:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for",fields:{VAR:"i"},inputs:{FROM:{block:{type:"math_number",fields:{NUM:1}}},TO:{block:{type:"math_number",fields:{NUM:10}}},BY:{block:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"controls_forEach"}]},{kind:"category",name:"Liste",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_repeat",inputs:{NUM:{block:{type:"math_number",fields:{NUM:5}}}}},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_isEmpty"},{kind:"block",type:"lists_getIndex",fields:{MODE:"GET",WHERE:"FROM_START"}},{kind:"block",type:"lists_setIndex",fields:{MODE:"SET",WHERE:"FROM_START"}}]}]},Qt={blocks:{languageVersion:0,blocks:[{type:"start",id:"y=zq)Uya2A/{vyOtN[i6",x:30,y:30}]},variables:[]},to=1e3,A=class extends Re{constructor(a,o){super(a,(y,g)=>{y.setProperty(g,"highlightBlock",y.createNativeFunction(w=>{this.highlightedBlock=w,this.stepFinished=!0})),y.setProperty(g,"exit",y.createNativeFunction((w,O)=>{this.running=!1,this.correct=w,this.msg=O})),y.setProperty(g,"hiddenState",y.nativeToPseudo(o)),y.setProperty(g,"loopTrap",to)}),this.stepFinished=!1,this.highlightedBlock="",this.running=!0,this.correct=!1,this.step=()=>{if(!this.running)return!1;do{this.stepFinished=!1;try{this.running=super.step()&&this.running}catch{this.running=!1}}while(this.running&&!this.stepFinished);return this.running}}};function R(a,o){let[y,g]=reactExports.useState(),[w,O]=reactExports.useState({highlightedBlock:"",running:!0,correct:!1,msg:"",globalScope:{}}),M=reactExports.useCallback(()=>{let F=new A(a,o);g(F),O({highlightedBlock:(F==null?void 0:F.highlightedBlock)??"",running:(F==null?void 0:F.running)??!1,correct:(F==null?void 0:F.correct)??!1,msg:(F==null?void 0:F.msg)??"",globalScope:(F==null?void 0:F.pseudoToNative(F.globalScope.object))??{}})},[a,o]);return reactExports.useEffect(()=>{M()},[M,a,o]),{step:()=>{y==null||y.step(),O({highlightedBlock:(y==null?void 0:y.highlightedBlock)??"",running:(y==null?void 0:y.running)??!1,correct:(y==null?void 0:y.correct)??!1,msg:(y==null?void 0:y.msg)??"",globalScope:(y==null?void 0:y.pseudoToNative(y.globalScope.object))??{}})},reset:M,...w}}function tt(a,o){return reactExports.useEffect(()=>{return window.addEventListener("message",y),()=>window.removeEventListener("message",y);function y(g){g.source===a&&o(g.data)}},[a,o]),reactExports.useCallback(y=>a==null?void 0:a.postMessage(y,"*"),[a])}function ot({toolbox:a,initialBlocks:o,testcases:y,debug:g,customBlocks:w,Visualizer:O}){var ht;let{student:M,setStudent:F}=h(),{id:$}=E(),d=((ht=M.extraData)==null?void 0:ht[`blockly-${$}`])??o??Qt,s=async le=>{await F({...M,extraData:{...M.extraData,[`blockly-${$}`]:le}})},[i,v]=reactExports.useState(null),[_,S]=reactExports.useState(!1),[T,b]=reactExports.useState(!0),[C,G]=reactExports.useState(!1),[Y,Q]=reactExports.useState({}),[X,K]=reactExports.useState(""),[re,te]=reactExports.useState(0),[de,Ne]=reactExports.useState(()=>range(y.length).map(le=>({correct:!1,index:le}))),{step:ve,reset:Me,running:ge,highlightedBlock:ie,globalScope:me,correct:ae,msg:Ke}=R(X,y[re]),Le=reactExports.useMemo(()=>Object.fromEntries(Object.entries(Y).map(([le,je])=>[je,me[le]])),[Y,me]),bt=reactExports.useMemo(()=>mt(Gt.array(),w,{prefix:"Invalid custom block definition"}),[w]),Ze=tt(i==null?void 0:i.contentWindow,le=>{switch(le.cmd){case"init":{Ze({cmd:"init",toolbox:a??Wt,initialBlocks:d,debug:g,customBlocks:bt});break}case"ready":{S(!0);break}case"blocks":{s(le.blocks),g!=null&&g.logBlocks&&console.info(JSON.stringify(le.blocks,void 0,2));break}case"code":{K(le.code),G(!1),b(!0),g!=null&&g.logJs&&console.info(le.code);break}case"variables":{Q(le.variablesMapping),g!=null&&g.logVariables&&console.info(le.variablesMapping);break}}});reactExports.useEffect(()=>{Ze({cmd:"highlight",highlightedBlock:ie})},[Ze,ie]),reactExports.useEffect(()=>{ge||G(!1)},[ge]);let[Ce,Ve]=reactExports.useState(3);reactExports.useEffect(()=>{let le=[5e3,2e3,1e3,500,200,100,10];if(C){let je=setInterval(ve,le[Ce]);return()=>clearInterval(je)}},[ve,Ce,C]);let Ye=async()=>{let le=await Promise.all(y.map(async(Be,qe)=>{let et=new A(X,Be);for(let fe=0;et.running;fe++)et.step(),fe%64===0&&await new Promise(pe=>setTimeout(pe,5));return{...et,index:qe}}));Ne(le),b(!1);let je={...M.answers};for(let Be=0;Be<y.length;Be++)je[`${$}.${Be+1}`]=le[Be].correct?"":"";await F({...M,answers:je})},[pt,Xe]=reactExports.useState(!1);return reactExports.useEffect(()=>Xe(!1),[Ke]),c.createElement("div",{className:D$1("not-prose relative inset-y-0 left-1/2 w-screen -translate-x-1/2 p-4 pt-8","flex flex-col-reverse items-start justify-between gap-6 overflow-x-hidden *:mx-3 lg:flex-row lg:gap-0")},c.createElement("div",{className:"flex h-full max-h-[min(720px,90vh)] basis-[min(auto,50%)] flex-col gap-6 self-stretch overflow-x-hidden"},c.createElement("div",{className:"join join-horizontal"},de.map(({index:le,correct:je,msg:Be})=>c.createElement("button",{key:le,onClick:()=>{te(le),G(!1)},className:D$1("btn join-item z-10 rounded-lg",!T&&"tooltip",le===re&&"btn-info"),"data-tip":Be},c.createElement("div",{className:"flex items-center gap-3"},c.createElement("p",null,"Livello ",le+1),T?c.createElement(HelpCircle,{size:32}):je?c.createElement(CheckCircle2,{size:32,className:"fill-success stroke-success-content"}):c.createElement(XCircle,{size:32,className:"fill-error stroke-error-content"}))))),c.createElement("div",{className:"relative flex flex-col overflow-hidden shadow-xl"},c.createElement("div",{className:"overflow-auto rounded-xl border-2 border-[#c6c6c6] bg-white"},O&&c.createElement(O,{variables:{blocklyVariables:Le,hiddenState:me==null?void 0:me.hiddenState,msg:Ke}}),Ke&&!pt&&c.createElement("div",{className:"absolute inset-x-0 bottom-0 z-50 p-4"},c.createElement("div",{role:"alert",className:D$1("alert",ae?"alert-success":"alert-error")},ae?c.createElement(CheckCircle,null):c.createElement(XCircle,null),c.createElement("span",null,Ke),c.createElement("button",{onClick:()=>Xe(!0),"aria-label":"Nascondi messaggio"},c.createElement(MessageSquareOff,null))))))),c.createElement("div",{className:"flex min-h-[min(720px,90vh)] flex-[1_0_50%] flex-col-reverse gap-6 self-stretch lg:flex-col"},c.createElement("div",{className:"flex gap-6"},c.createElement("div",{className:"join join-horizontal"},c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui/pausa"},c.createElement("button",{className:"btn btn-info rounded-[inherit]",disabled:!ge||T,onClick:()=>G(!C),"aria-label":"Esugui un blocco"},C?c.createElement(Pause,{className:"size-6"}):c.createElement(Play,{className:"size-6"}))),c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui un blocco"},c.createElement("button",{className:"btn btn-info rounded-[inherit]",disabled:!ge||T,onClick:ve,"aria-label":"Esugui un blocco"},c.createElement(SkipForward,{className:"size-6"}))),c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui da capo"},c.createElement("button",{className:"btn btn-info rounded-[inherit]","aria-label":"Esegui da capo",disabled:T,onClick:()=>{Me(),G(!1)}},c.createElement(RotateCcw,{className:"size-6"})))),c.createElement("div",{className:"tooltip","data-tip":"Correggi la soluzione"},c.createElement("button",{className:"btn btn-success","aria-label":"Correggi la soluzione",disabled:!T||!_,onClick:Ye},c.createElement(Send,{className:"size-6"}))),c.createElement("div",null,c.createElement("input",{className:"range",type:"range",min:"0",max:"6",value:Ce,onChange:le=>Ve(+le.target.value)}),c.createElement("div",{className:"flex w-full justify-between px-2 text-xs"},c.createElement("span",null,"Lento"),c.createElement("span",null,"Veloce"))),!1),c.createElement(ho,{ref:v,ready:_})))}var ho=reactExports.forwardRef(function({ready:a},o){return c.createElement("div",{className:"relative flex grow flex-col overflow-hidden rounded-xl border-2 border-[#c6c6c6]"},c.createElement("iframe",{ref:o,src:new URL("iframe-DI1hHhpN.html",import.meta.url).href,className:"grow",title:"Area di lavoro di Blockly"}),!a&&c.createElement("div",{className:"absolute inset-0 z-50 bg-white text-slate-700"},c.createElement(Tt,null)))});function nt({src:a,alt:o,title:y}){return c.createElement("img",{className:"max-h-[90vh] min-w-0 p-4 first:rounded-l-xl last:rounded-r-xl dark:bg-white print:m-0 print:max-h-[60vh] print:max-w-full",src:a.src,width:a.width,height:a.height,alt:o,title:y,style:{maxWidth:`min(100%, calc(90vh * ${a.width} / ${a.height}))`}})}function rt({display:a,children:o}){let y=reactExports.useRef(null);return reactExports.useEffect(()=>{y.current&&katex.render(o,y.current,{displayMode:a})},[y,o,a]),c.createElement("span",{ref:y})}function Yt({children:a}){return a}var U={Answer:Lt,AnswerGroup:zt,Blockly:ot,Code:V,Contest:Et,Explanation:Ut,Image:nt,MathExpr:reactExports.memo(rt),OpenAnswer:Ft,Problem:Ot,Section:Yt,SubProblem:Vt};function st({children:a}){return c.createElement(MDXProvider,{components:U},c.createElement("div",{className:D$1("prose prose-lg mx-auto my-5 px-4 print:prose-sm screen:pb-10 lg:max-w-4xl print:max-w-full print:text-xs","prose-table:text-center print:prose-headings:mt-2 print:prose-hr:my-4","prose-headings:break-after-avoid prose-p:break-inside-avoid prose-ul:break-before-avoid prose-ul:break-inside-avoid")},a))}function Rt({children:a}){var i,v;let o=reactExports.useRef(null),{contest:y,student:g,reset:w,participation:O,terminated:M,logout:F}=h(),$=(i=g.personalInformation)==null?void 0:i.name,d=(v=g.personalInformation)==null?void 0:v.surname,s=Math.round(sumBy(Object.values(g.answers??{}),_=>+!!_)/y.problemIds.length*100);return reactExports.useEffect(()=>{},[]),c.createElement("div",{className:"h-dvh screen:overflow-y-scroll"},c.createElement("div",{className:"navbar sticky top-0 z-20 h-16 justify-between bg-base-300/85 px-3 text-base-content backdrop-blur print:hidden"},c.createElement("div",{className:"dropdown max-w-full flex-none"},c.createElement("div",{tabIndex:0,role:"button",className:"btn btn-ghost no-animation w-full flex-nowrap"},c.createElement(User,{className:"flex-none"}),c.createElement("div",{className:"truncate uppercase"},$," ",d)),F&&c.createElement("ul",{className:"menu dropdown-content menu-sm z-30 mt-3 w-52 rounded-box bg-base-300 p-2 text-base-content shadow-lg"},c.createElement("li",null,c.createElement("button",{onClick:F},"Cambia utente")))),c.createElement("div",{className:"h-full gap-3"},c.createElement(L,{className:"hidden min-w-[5rem] sm:block",percentage:s},s,"%"),c.createElement("div",{className:"flex-none px-3"},M||!O.startingTime||!y.duration?c.createElement("span",{className:"font-mono"},"00:00"):c.createElement(Vt$1,{startTime:O.startingTime,duration:y.duration})),c.createElement("div",{className:"h-full flex-none py-0.5"},M&&w?c.createElement("button",{className:"btn btn-warning btn-sm h-full",onClick:w},"Ricomincia"):c.createElement("button",{className:"btn btn-success btn-sm h-full",disabled:M||!O.startingTime,onClick:()=>{var _;return(_=o.current)==null?void 0:_.showModal()}},"Termina")))),c.createElement(_o,{ref:o}),c.createElement(ErrorBoundary,{FallbackComponent:Zt},c.createElement(st,null,c.createElement("h1",{className:"text-pretty"},y.name),a)))}var _o=reactExports.forwardRef(function(a,o){let{submit:y}=h();return c.createElement(jt,{ref:o,title:"Confermi di voler terminare?"},c.createElement("p",null,"Confermando non potrai pi modificare le tue risposte."),c.createElement("div",{className:"mt-3 flex flex-row justify-center gap-5"},c.createElement("button",{className:"btn btn-info"},"Annulla"),c.createElement("button",{className:"btn btn-error",onClick:()=>y()},"Conferma")))}),it=reactExports.createContext({});it.displayName="StudentContext";function I({children:a,...o}){return c.createElement(it.Provider,{value:{...o}},c.createElement(Rt,null,a))}function h(){return reactExports.useContext(it)}function Uo({contestName:a,duration:o,questionCount:y,children:g}){let[w,O]=ee("submit",!1),[M,F]=ee("student",{id:"",personalInformation:{name:"Utente",surname:"anonimo"},answers:{},variant:"0"}),$=reactExports.useMemo(()=>M.startedAt&&addMinutes(M.startedAt,o),[M.startedAt,o]),d=Ot$1($),s={id:"",name:a,problemIds:range(y??0).map(_=>_.toString()),duration:o,personalInformation:[],hasVariants:!0,hasOnline:!0,hasPdf:!0,allowRestart:!0,statementVersion:1},i={id:"",schoolId:"",contestId:"",name:"",teacher:"",startingTime:M.startedAt,finalized:!1},v=reactExports.useCallback(()=>{O(!1),F(_=>({..._,answers:{},startedAt:void 0}))},[F,O]);return c.createElement(I,{contest:s,participation:i,student:M,setStudent:async _=>F(_),submit:()=>O(!0),reset:v,terminated:d||w},g)}function ee(a,o,y){let g=`${window.location.pathname}#${a}`,w=localStorage.getItem(g),[O,M]=reactExports.useState(w?(y??JSON.parse)(w):o),F=reactExports.useCallback($=>{M(d=>{let s=isFunction$1($)?$(d):$;return s===void 0?localStorage.removeItem(g):localStorage.setItem(g,JSON.stringify(s)),s})},[g]);return[O,F]}const OlinfoAuth=({children:a,...o})=>jsxRuntimeExports.jsx(Uo,{...o,children:jsxRuntimeExports.jsx(OlinfoWrapper,{children:a})});function OlinfoWrapper({children:a}){const{student:o,setStudent:y}=h(),[g,w]=reactExports.useState();return reactExports.useEffect(()=>{getUser().then(w).catch(O=>console.log(`Error: failed to get user: ${O.message}`))},[]),reactExports.useEffect(()=>{const O=o.personalInformation;g&&(g.name!==O.name||g.surname!==O.surname)&&y({...o,personalInformation:{...O,...g}})},[o,g]),a}async function getUser(){const o=cookie.parse(window.document.cookie).training_token;if(!o)throw new Error("Not logged in");const g=jwtDecode(o).username,O=await(await fetch("https://training.olinfo.it/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get",username:g})})).json();return{name:O.first_name,surname:O.last_name}}export{D$1 as D,OlinfoAuth as O,range as r,useMDXComponents as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/code-highlight-4YYAT6IQ-Cjfn6vv8.js","assets/react-dom-DWilhIVE.js","assets/commonjs-helper-3Jsk8tIi.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=olinfo-auth-BpQ82P7h.js.map
