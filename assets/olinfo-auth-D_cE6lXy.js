/*! For licenses information, see LICENSES.txt */
var In=Object.defineProperty;var kn=(a,o,y)=>o in a?In(a,o,{enumerable:!0,configurable:!0,writable:!0,value:y}):a[o]=y;var Cr=(a,o,y)=>(kn(a,typeof o!="symbol"?o+"":o,y),y);import{i as isSymbol,b as baseGetTag,r as root,a as isObjectLike,f as freeGlobal,c as isArray,t as toString,S as Symbol$1,j as jsxRuntimeExports}from"./toString-BpEX5tmT.js";import{r as reactExports,a as c}from"./react-dom-DWilhIVE.js";import{_ as __vitePreload}from"./preload-helper-B_KhYgH7.js";import{g as getDefaultExportFromCjs,c as commonjsGlobal}from"./commonjs-helper-3Jsk8tIi.js";import{Z as ZodError,z}from"./zod-CXY4Xi5W.js";import{k as katex}from"./katex-DTctDNEF.js";var reWhitespace=/\s/;function trimmedEndIndex(a){for(var o=a.length;o--&&reWhitespace.test(a.charAt(o)););return o}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject(a){var o=typeof a;return a!=null&&(o=="object"||o=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject(a)){var o=typeof a.valueOf=="function"?a.valueOf():a;a=isObject(o)?o+"":o}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var y=reIsBinary.test(a);return y||reIsOctal.test(a)?freeParseInt(a.slice(2),y?2:8):reIsBadHex.test(a)?NAN:+a}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(a){if(!a)return a===0?a:0;if(a=toNumber(a),a===INFINITY$1||a===-INFINITY$1){var o=a<0?-1:1;return o*MAX_INTEGER}return a===a?a:0}function identity(a){return a}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(a){if(!isObject(a))return!1;var o=baseGetTag(a);return o==funcTag$1||o==genTag||o==asyncTag||o==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(a){if(a!=null){try{return funcToString$1.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject(a)||isMasked(a))return!1;var o=isFunction$1(a)?reIsNative:reIsHostCtor;return o.test(toSource(a))}function getValue(a,o){return a==null?void 0:a[o]}function getNative(a,o){var y=getValue(a,o);return baseIsNative(y)?y:void 0}var WeakMap$1=getNative(root,"WeakMap");function apply(a,o,y){switch(y.length){case 0:return a.call(o);case 1:return a.call(o,y[0]);case 2:return a.call(o,y[0],y[1]);case 3:return a.call(o,y[0],y[1],y[2])}return a.apply(o,y)}function noop$1(){}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var o=0,y=0;return function(){var b=nativeNow(),T=HOT_SPAN-(b-y);if(y=b,T>0){if(++o>=HOT_COUNT)return arguments[0]}else o=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),baseSetToString=defineProperty?function(a,o){return defineProperty(a,"toString",{configurable:!0,enumerable:!1,value:constant(o),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(a,o){var y=typeof a;return o=o??MAX_SAFE_INTEGER$1,!!o&&(y=="number"||y!="symbol"&&reIsUint.test(a))&&a>-1&&a%1==0&&a<o}function eq(a,o){return a===o||a!==a&&o!==o}var nativeMax$1=Math.max;function overRest(a,o,y){return o=nativeMax$1(o===void 0?a.length-1:o,0),function(){for(var b=arguments,T=-1,O=nativeMax$1(b.length-o,0),M=Array(O);++T<O;)M[T]=b[o+T];T=-1;for(var B=Array(o+1);++T<o;)B[T]=b[T];return B[o]=y(M),apply(a,this,B)}}function baseRest(a,o){return setToString(overRest(a,o,identity),a+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isArrayLike(a){return a!=null&&isLength(a.length)&&!isFunction$1(a)}function isIterateeCall(a,o,y){if(!isObject(y))return!1;var b=typeof o;return(b=="number"?isArrayLike(y)&&isIndex(o,y.length):b=="string"&&o in y)?eq(y[o],a):!1}var objectProto$8=Object.prototype;function isPrototype(a){var o=a&&a.constructor,y=typeof o=="function"&&o.prototype||objectProto$8;return a===y}function baseTimes(a,o){for(var y=-1,b=Array(a);++y<a;)b[y]=o(y);return b}var argsTag$2="[object Arguments]";function baseIsArguments(a){return isObjectLike(a)&&baseGetTag(a)==argsTag$2}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike(a)&&hasOwnProperty$6.call(a,"callee")&&!propertyIsEnumerable$1.call(a,"callee")};function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(a){return isObjectLike(a)&&isLength(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(o){return a(o)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var a=freeModule&&freeModule.require&&freeModule.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function arrayLikeKeys(a,o){var y=isArray(a),b=!y&&isArguments(a),T=!y&&!b&&isBuffer(a),O=!y&&!b&&!T&&isTypedArray(a),M=y||b||T||O,B=M?baseTimes(a.length,String):[],G=B.length;for(var d in a)(o||hasOwnProperty$5.call(a,d))&&!(M&&(d=="length"||T&&(d=="offset"||d=="parent")||O&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||isIndex(d,G)))&&B.push(d);return B}function overArg(a,o){return function(y){return a(o(y))}}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeys(a){if(!isPrototype(a))return nativeKeys(a);var o=[];for(var y in Object(a))hasOwnProperty$4.call(a,y)&&y!="constructor"&&o.push(y);return o}function keys(a){return isArrayLike(a)?arrayLikeKeys(a):baseKeys(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,o){if(isArray(a))return!1;var y=typeof a;return y=="number"||y=="symbol"||y=="boolean"||a==null||isSymbol(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||o!=null&&a in Object(o)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(a){var o=this.has(a)&&delete this.__data__[a];return this.size-=o?1:0,o}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(a){var o=this.__data__;if(nativeCreate){var y=o[a];return y===HASH_UNDEFINED$2?void 0:y}return hasOwnProperty$3.call(o,a)?o[a]:void 0}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas(a){var o=this.__data__;return nativeCreate?o[a]!==void 0:hasOwnProperty$2.call(o,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,o){var y=this.__data__;return this.size+=this.has(a)?0:1,y[a]=nativeCreate&&o===void 0?HASH_UNDEFINED$1:o,this}function Hash$1(a){var o=-1,y=a==null?0:a.length;for(this.clear();++o<y;){var b=a[o];this.set(b[0],b[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,o){for(var y=a.length;y--;)if(eq(a[y][0],o))return y;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(a){var o=this.__data__,y=assocIndexOf(o,a);if(y<0)return!1;var b=o.length-1;return y==b?o.pop():splice.call(o,y,1),--this.size,!0}function listCacheGet(a){var o=this.__data__,y=assocIndexOf(o,a);return y<0?void 0:o[y][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,o){var y=this.__data__,b=assocIndexOf(y,a);return b<0?(++this.size,y.push([a,o])):y[b][1]=o,this}function ListCache(a){var o=-1,y=a==null?0:a.length;for(this.clear();++o<y;){var b=a[o];this.set(b[0],b[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash$1,map:new(Map$1||ListCache),string:new Hash$1}}function isKeyable(a){var o=typeof a;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?a!=="__proto__":a===null}function getMapData(a,o){var y=a.__data__;return isKeyable(o)?y[typeof o=="string"?"string":"hash"]:y.map}function mapCacheDelete(a){var o=getMapData(this,a).delete(a);return this.size-=o?1:0,o}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,o){var y=getMapData(this,a),b=y.size;return y.set(a,o),this.size+=y.size==b?0:1,this}function MapCache(a){var o=-1,y=a==null?0:a.length;for(this.clear();++o<y;){var b=a[o];this.set(b[0],b[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(a,o){if(typeof a!="function"||o!=null&&typeof o!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var y=function(){var b=arguments,T=o?o.apply(this,b):b[0],O=y.cache;if(O.has(T))return O.get(T);var M=a.apply(this,b);return y.cache=O.set(T,M)||O,M};return y.cache=new(memoize.Cache||MapCache),y}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var o=memoize(a,function(b){return y.size===MAX_MEMOIZE_SIZE&&y.clear(),b}),y=o.cache;return o}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(a){var o=[];return a.charCodeAt(0)===46&&o.push(""),a.replace(rePropName,function(y,b,T,O){o.push(T?O.replace(reEscapeChar,"$1"):b||y)}),o});function castPath(a,o){return isArray(a)?a:isKey(a,o)?[a]:stringToPath(toString(a))}var INFINITY=1/0;function toKey(a){if(typeof a=="string"||isSymbol(a))return a;var o=a+"";return o=="0"&&1/a==-INFINITY?"-0":o}function baseGet(a,o){o=castPath(o,a);for(var y=0,b=o.length;a!=null&&y<b;)a=a[toKey(o[y++])];return y&&y==b?a:void 0}function get(a,o,y){var b=a==null?void 0:baseGet(a,o);return b===void 0?y:b}function arrayPush(a,o){for(var y=-1,b=o.length,T=a.length;++y<b;)a[T+y]=o[y];return a}function baseClamp(a,o,y){return a===a&&(y!==void 0&&(a=a<=y?a:y),o!==void 0&&(a=a>=o?a:o)),a}function clamp(a,o,y){return y===void 0&&(y=o,o=void 0),y!==void 0&&(y=toNumber(y),y=y===y?y:0),o!==void 0&&(o=toNumber(o),o=o===o?o:0),baseClamp(toNumber(a),o,y)}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var o=this.__data__,y=o.delete(a);return this.size=o.size,y}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,o){var y=this.__data__;if(y instanceof ListCache){var b=y.__data__;if(!Map$1||b.length<LARGE_ARRAY_SIZE-1)return b.push([a,o]),this.size=++y.size,this;y=this.__data__=new MapCache(b)}return y.set(a,o),this.size=y.size,this}function Stack(a){var o=this.__data__=new ListCache(a);this.size=o.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(a,o){for(var y=-1,b=a==null?0:a.length,T=0,O=[];++y<b;){var M=a[y];o(M,y,a)&&(O[T++]=M)}return O}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols(a),function(o){return propertyIsEnumerable.call(a,o)}))}:stubArray;const getSymbols$1=getSymbols;function baseGetAllKeys(a,o,y){var b=o(a);return isArray(a)?b:arrayPush(b,y(a))}function getAllKeys(a){return baseGetAllKeys(a,keys,getSymbols$1)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$1||Map$1&&getTag(new Map$1)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag)&&(getTag=function(a){var o=baseGetTag(a),y=o==objectTag$1?a.constructor:void 0,b=y?toSource(y):"";if(b)switch(b){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return o});const getTag$1=getTag;var Uint8Array$1=root.Uint8Array;const Uint8Array$2=Uint8Array$1;var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var o=-1,y=a==null?0:a.length;for(this.__data__=new MapCache;++o<y;)this.add(a[o])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(a,o){for(var y=-1,b=a==null?0:a.length;++y<b;)if(o(a[y],y,a))return!0;return!1}function cacheHas(a,o){return a.has(o)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,o,y,b,T,O){var M=y&COMPARE_PARTIAL_FLAG$5,B=a.length,G=o.length;if(B!=G&&!(M&&G>B))return!1;var d=O.get(a),s=O.get(o);if(d&&s)return d==o&&s==a;var i=-1,g=!0,R=y&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(O.set(a,o),O.set(o,a);++i<B;){var S=a[i],w=o[i];if(b)var _=M?b(w,S,i,o,a,O):b(S,w,i,a,o,O);if(_!==void 0){if(_)continue;g=!1;break}if(R){if(!arraySome(o,function(C,H){if(!cacheHas(R,H)&&(S===C||T(S,C,y,b,O)))return R.push(H)})){g=!1;break}}else if(!(S===w||T(S,w,y,b,O))){g=!1;break}}return O.delete(a),O.delete(o),g}function mapToArray(a){var o=-1,y=Array(a.size);return a.forEach(function(b,T){y[++o]=[T,b]}),y}function setToArray(a){var o=-1,y=Array(a.size);return a.forEach(function(b){y[++o]=b}),y}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,o,y,b,T,O,M){switch(y){case dataViewTag:if(a.byteLength!=o.byteLength||a.byteOffset!=o.byteOffset)return!1;a=a.buffer,o=o.buffer;case arrayBufferTag:return!(a.byteLength!=o.byteLength||!O(new Uint8Array$2(a),new Uint8Array$2(o)));case boolTag:case dateTag:case numberTag:return eq(+a,+o);case errorTag:return a.name==o.name&&a.message==o.message;case regexpTag:case stringTag:return a==o+"";case mapTag:var B=mapToArray;case setTag:var G=b&COMPARE_PARTIAL_FLAG$4;if(B||(B=setToArray),a.size!=o.size&&!G)return!1;var d=M.get(a);if(d)return d==o;b|=COMPARE_UNORDERED_FLAG$2,M.set(a,o);var s=equalArrays(B(a),B(o),b,T,O,M);return M.delete(a),s;case symbolTag:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(o)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(a,o,y,b,T,O){var M=y&COMPARE_PARTIAL_FLAG$3,B=getAllKeys(a),G=B.length,d=getAllKeys(o),s=d.length;if(G!=s&&!M)return!1;for(var i=G;i--;){var g=B[i];if(!(M?g in o:hasOwnProperty$1.call(o,g)))return!1}var R=O.get(a),S=O.get(o);if(R&&S)return R==o&&S==a;var w=!0;O.set(a,o),O.set(o,a);for(var _=M;++i<G;){g=B[i];var C=a[g],H=o[g];if(b)var Z=M?b(H,C,g,o,a,O):b(C,H,g,a,o,O);if(!(Z===void 0?C===H||T(C,H,y,b,O):Z)){w=!1;break}_||(_=g=="constructor")}if(w&&!_){var ee=a.constructor,Q=o.constructor;ee!=Q&&"constructor"in a&&"constructor"in o&&!(typeof ee=="function"&&ee instanceof ee&&typeof Q=="function"&&Q instanceof Q)&&(w=!1)}return O.delete(a),O.delete(o),w}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(a,o,y,b,T,O){var M=isArray(a),B=isArray(o),G=M?arrayTag:getTag$1(a),d=B?arrayTag:getTag$1(o);G=G==argsTag?objectTag:G,d=d==argsTag?objectTag:d;var s=G==objectTag,i=d==objectTag,g=G==d;if(g&&isBuffer(a)){if(!isBuffer(o))return!1;M=!0,s=!1}if(g&&!s)return O||(O=new Stack),M||isTypedArray(a)?equalArrays(a,o,y,b,T,O):equalByTag(a,o,G,y,b,T,O);if(!(y&COMPARE_PARTIAL_FLAG$2)){var R=s&&hasOwnProperty.call(a,"__wrapped__"),S=i&&hasOwnProperty.call(o,"__wrapped__");if(R||S){var w=R?a.value():a,_=S?o.value():o;return O||(O=new Stack),T(w,_,y,b,O)}}return g?(O||(O=new Stack),equalObjects(a,o,y,b,T,O)):!1}function baseIsEqual(a,o,y,b,T){return a===o?!0:a==null||o==null||!isObjectLike(a)&&!isObjectLike(o)?a!==a&&o!==o:baseIsEqualDeep(a,o,y,b,baseIsEqual,T)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,o,y,b){var T=y.length,O=T,M=!b;if(a==null)return!O;for(a=Object(a);T--;){var B=y[T];if(M&&B[2]?B[1]!==a[B[0]]:!(B[0]in a))return!1}for(;++T<O;){B=y[T];var G=B[0],d=a[G],s=B[1];if(M&&B[2]){if(d===void 0&&!(G in a))return!1}else{var i=new Stack;if(b)var g=b(d,s,G,a,o,i);if(!(g===void 0?baseIsEqual(s,d,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,b,i):g))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject(a)}function getMatchData(a){for(var o=keys(a),y=o.length;y--;){var b=o[y],T=a[b];o[y]=[b,T,isStrictComparable(T)]}return o}function matchesStrictComparable(a,o){return function(y){return y==null?!1:y[a]===o&&(o!==void 0||a in Object(y))}}function baseMatches(a){var o=getMatchData(a);return o.length==1&&o[0][2]?matchesStrictComparable(o[0][0],o[0][1]):function(y){return y===a||baseIsMatch(y,a,o)}}function baseHasIn(a,o){return a!=null&&o in Object(a)}function hasPath(a,o,y){o=castPath(o,a);for(var b=-1,T=o.length,O=!1;++b<T;){var M=toKey(o[b]);if(!(O=a!=null&&y(a,M)))break;a=a[M]}return O||++b!=T?O:(T=a==null?0:a.length,!!T&&isLength(T)&&isIndex(M,T)&&(isArray(a)||isArguments(a)))}function hasIn(a,o){return a!=null&&hasPath(a,o,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,o){return isKey(a)&&isStrictComparable(o)?matchesStrictComparable(toKey(a),o):function(y){var b=get(y,a);return b===void 0&&b===o?hasIn(y,a):baseIsEqual(o,b,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(o){return o==null?void 0:o[a]}}function basePropertyDeep(a){return function(o){return baseGet(o,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity:typeof a=="object"?isArray(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}var FUNC_ERROR_TEXT="Expected a function";function baseDelay(a,o,y){if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){a.apply(void 0,y)},o)}var defer=baseRest(function(a,o){return baseDelay(a,1,o)});function baseSum(a,o){for(var y,b=-1,T=a.length;++b<T;){var O=o(a[b]);O!==void 0&&(y=y===void 0?O:y+O)}return y}var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(a,o,y,b){for(var T=-1,O=nativeMax(nativeCeil((o-a)/(y||1)),0),M=Array(O);O--;)M[b?O:++T]=a,a+=y;return M}function createRange(a){return function(o,y,b){return b&&typeof b!="number"&&isIterateeCall(o,y,b)&&(y=b=void 0),o=toFinite(o),y===void 0?(y=o,o=0):y=toFinite(y),b=b===void 0?o<y?1:-1:toFinite(b),baseRange(o,y,b,a)}}var range=createRange();function sumBy(a,o){return a&&a.length?baseSum(a,baseIteratee(o)):0}var cookie={};cookie.parse=parse;cookie.serialize=serialize$1;var __toString=Object.prototype.toString,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse(a,o){if(typeof a!="string")throw new TypeError("argument str must be a string");for(var y={},b=o||{},T=b.decode||decode,O=0;O<a.length;){var M=a.indexOf("=",O);if(M===-1)break;var B=a.indexOf(";",O);if(B===-1)B=a.length;else if(B<M){O=a.lastIndexOf(";",M-1)+1;continue}var G=a.slice(O,M).trim();if(y[G]===void 0){var d=a.slice(M+1,B).trim();d.charCodeAt(0)===34&&(d=d.slice(1,-1)),y[G]=tryDecode(d,T)}O=B+1}return y}function serialize$1(a,o,y){var b=y||{},T=b.encode||encode;if(typeof T!="function")throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(a))throw new TypeError("argument name is invalid");var O=T(o);if(O&&!fieldContentRegExp.test(O))throw new TypeError("argument val is invalid");var M=a+"="+O;if(b.maxAge!=null){var B=b.maxAge-0;if(isNaN(B)||!isFinite(B))throw new TypeError("option maxAge is invalid");M+="; Max-Age="+Math.floor(B)}if(b.domain){if(!fieldContentRegExp.test(b.domain))throw new TypeError("option domain is invalid");M+="; Domain="+b.domain}if(b.path){if(!fieldContentRegExp.test(b.path))throw new TypeError("option path is invalid");M+="; Path="+b.path}if(b.expires){var G=b.expires;if(!isDate(G)||isNaN(G.valueOf()))throw new TypeError("option expires is invalid");M+="; Expires="+G.toUTCString()}if(b.httpOnly&&(M+="; HttpOnly"),b.secure&&(M+="; Secure"),b.partitioned&&(M+="; Partitioned"),b.priority){var d=typeof b.priority=="string"?b.priority.toLowerCase():b.priority;switch(d){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(b.sameSite){var s=typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite;switch(s){case!0:M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"strict":M+="; SameSite=Strict";break;case"none":M+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return M}function decode(a){return a.indexOf("%")!==-1?decodeURIComponent(a):a}function encode(a){return encodeURIComponent(a)}function isDate(a){return __toString.call(a)==="[object Date]"||a instanceof Date}function tryDecode(a,o){try{return o(a)}catch{return a}}class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";function b64DecodeUnicode(a){return decodeURIComponent(atob(a).replace(/(.)/g,(o,y)=>{let b=y.charCodeAt(0).toString(16).toUpperCase();return b.length<2&&(b="0"+b),"%"+b}))}function base64UrlDecode(a){let o=a.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(o)}catch{return atob(o)}}function jwtDecode(a,o){if(typeof a!="string")throw new InvalidTokenError("Invalid token specified: must be a string");o||(o={});const y=o.header===!0?0:1,b=a.split(".")[y];if(typeof b!="string")throw new InvalidTokenError(`Invalid token specified: missing part #${y+1}`);let T;try{T=base64UrlDecode(b)}catch(O){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${y+1} (${O.message})`)}try{return JSON.parse(T)}catch(O){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${y+1} (${O.message})`)}}var classnames={exports:{}};(function(a){(function(){var o={}.hasOwnProperty;function y(){for(var O="",M=0;M<arguments.length;M++){var B=arguments[M];B&&(O=T(O,b(B)))}return O}function b(O){if(typeof O=="string"||typeof O=="number")return O;if(typeof O!="object")return"";if(Array.isArray(O))return y.apply(null,O);if(O.toString!==Object.prototype.toString&&!O.toString.toString().includes("[native code]"))return O.toString();var M="";for(var B in O)o.call(O,B)&&O[B]&&(M=T(M,B));return M}function T(O,M){return M?O?O+" "+M:O+M:O}a.exports?(y.default=y,a.exports=y):window.classNames=y})()})(classnames);var classnamesExports=classnames.exports;const D$1=getDefaultExportFromCjs(classnamesExports);function toDate(a){const o=Object.prototype.toString.call(a);return a instanceof Date||typeof a=="object"&&o==="[object Date]"?new a.constructor(+a):typeof a=="number"||o==="[object Number]"||typeof a=="string"||o==="[object String]"?new Date(a):new Date(NaN)}function constructFrom(a,o){return a instanceof Date?new a.constructor(o):new Date(o)}function addMilliseconds(a,o){const y=+toDate(a);return constructFrom(a,y+o)}const millisecondsInMinute=6e4;function addMinutes(a,o){return addMilliseconds(a,o*millisecondsInMinute)}function getRoundingMethod(a){return o=>{const b=(a?Math[a]:Math.trunc)(o);return b===0?0:b}}function differenceInMilliseconds(a,o){return+toDate(a)-+toDate(o)}function differenceInSeconds(a,o,y){const b=differenceInMilliseconds(a,o)/1e3;return getRoundingMethod(y==null?void 0:y.roundingMethod)(b)}var shim={exports:{}},useSyncExternalStoreShim_production_min={};var e=reactExports;function h(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var k=typeof Object.is=="function"?Object.is:h,l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function q(a,o){var y=o(),b=l({inst:{value:y,getSnapshot:o}}),T=b[0].inst,O=b[1];return n(function(){T.value=y,T.getSnapshot=o,r(T)&&O({inst:T})},[a,y,o]),m(function(){return r(T)&&O({inst:T}),a(function(){r(T)&&O({inst:T})})},[a]),p(y),y}function r(a){var o=a.getSnapshot;a=a.value;try{var y=o();return!k(a,y)}catch{return!0}}function t(a,o){return o()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t:q;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;const noop=()=>{},UNDEFINED=noop(),OBJECT=Object,isUndefined=a=>a===UNDEFINED,isFunction=a=>typeof a=="function",mergeObjects=(a,o)=>({...a,...o}),isPromiseLike=a=>isFunction(a.then),table=new WeakMap;let counter=0;const stableHash=a=>{const o=typeof a,y=a&&a.constructor,b=y==Date;let T,O;if(OBJECT(a)===a&&!b&&y!=RegExp){if(T=table.get(a),T)return T;if(T=++counter+"~",table.set(a,T),y==Array){for(T="@",O=0;O<a.length;O++)T+=stableHash(a[O])+",";table.set(a,T)}if(y==OBJECT){T="#";const M=OBJECT.keys(a).sort();for(;!isUndefined(O=M.pop());)isUndefined(a[O])||(T+=O+":"+stableHash(a[O])+",");table.set(a,T)}}else T=b?a.toJSON():o=="symbol"?a.toString():o=="string"?JSON.stringify(a):""+a;return T},SWRGlobalState=new WeakMap,EMPTY_CACHE={},INITIAL_CACHE={},STR_UNDEFINED="undefined",isWindowDefined=typeof window!=STR_UNDEFINED,isDocumentDefined=typeof document!=STR_UNDEFINED,hasRequestAnimationFrame=()=>isWindowDefined&&typeof window.requestAnimationFrame!=STR_UNDEFINED,createCacheHelper=(a,o)=>{const y=SWRGlobalState.get(a);return[()=>!isUndefined(o)&&a.get(o)||EMPTY_CACHE,b=>{if(!isUndefined(o)){const T=a.get(o);o in INITIAL_CACHE||(INITIAL_CACHE[o]=T),y[5](o,mergeObjects(T,b),T||EMPTY_CACHE)}},y[6],()=>!isUndefined(o)&&o in INITIAL_CACHE?INITIAL_CACHE[o]:!isUndefined(o)&&a.get(o)||EMPTY_CACHE]};let online=!0;const isOnline=()=>online,[onWindowEvent,offWindowEvent]=isWindowDefined&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[noop,noop],isVisible=()=>{const a=isDocumentDefined&&document.visibilityState;return isUndefined(a)||a!=="hidden"},initFocus=a=>(isDocumentDefined&&document.addEventListener("visibilitychange",a),onWindowEvent("focus",a),()=>{isDocumentDefined&&document.removeEventListener("visibilitychange",a),offWindowEvent("focus",a)}),initReconnect=a=>{const o=()=>{online=!0,a()},y=()=>{online=!1};return onWindowEvent("online",o),onWindowEvent("offline",y),()=>{offWindowEvent("online",o),offWindowEvent("offline",y)}},preset={isOnline,isVisible},defaultConfigOptions={initFocus,initReconnect},IS_REACT_LEGACY=!c.useId,IS_SERVER=!isWindowDefined||"Deno"in window,rAF=a=>hasRequestAnimationFrame()?window.requestAnimationFrame(a):setTimeout(a,1),useIsomorphicLayoutEffect=IS_SERVER?reactExports.useEffect:reactExports.useLayoutEffect,navigatorConnection=typeof navigator<"u"&&navigator.connection,slowConnection=!IS_SERVER&&navigatorConnection&&(["slow-2g","2g"].includes(navigatorConnection.effectiveType)||navigatorConnection.saveData),serialize=a=>{if(isFunction(a))try{a=a()}catch{a=""}const o=a;return a=typeof a=="string"?a:(Array.isArray(a)?a.length:a)?stableHash(a):"",[a,o]};let __timestamp=0;const getTimestamp=()=>++__timestamp,FOCUS_EVENT=0,RECONNECT_EVENT=1,MUTATE_EVENT=2,ERROR_REVALIDATE_EVENT=3;var events={__proto__:null,ERROR_REVALIDATE_EVENT,FOCUS_EVENT,MUTATE_EVENT,RECONNECT_EVENT};async function internalMutate(...a){const[o,y,b,T]=a,O=mergeObjects({populateCache:!0,throwOnError:!0},typeof T=="boolean"?{revalidate:T}:T||{});let M=O.populateCache;const B=O.rollbackOnError;let G=O.optimisticData;const d=O.revalidate!==!1,s=R=>typeof B=="function"?B(R):B!==!1,i=O.throwOnError;if(isFunction(y)){const R=y,S=[],w=o.keys();for(const _ of w)!/^\$(inf|sub)\$/.test(_)&&R(o.get(_)._k)&&S.push(_);return Promise.all(S.map(g))}return g(y);async function g(R){const[S]=serialize(R);if(!S)return;const[w,_]=createCacheHelper(o,S),[C,H,Z,ee]=SWRGlobalState.get(o),Q=()=>{const ue=C[S];return d&&(delete Z[S],delete ee[S],ue&&ue[0])?ue[0](MUTATE_EVENT).then(()=>w().data):w().data};if(a.length<3)return Q();let re=b,ae;const ne=getTimestamp();H[S]=[ne,0];const ye=!isUndefined(G),Ce=w(),_e=Ce.data,ze=Ce._c,Oe=isUndefined(ze)?_e:ze;if(ye&&(G=isFunction(G)?G(Oe,_e):G,_({data:G,_c:Oe})),isFunction(re))try{re=re(Oe)}catch(ue){ae=ue}if(re&&isPromiseLike(re))if(re=await re.catch(ue=>{ae=ue}),ne!==H[S][0]){if(ae)throw ae;return re}else ae&&ye&&s(ae)&&(M=!0,_({data:Oe,_c:UNDEFINED}));if(M&&!ae)if(isFunction(M)){const ue=M(re,Oe);_({data:ue,error:UNDEFINED,_c:UNDEFINED})}else _({data:re,error:UNDEFINED,_c:UNDEFINED});if(H[S][1]=getTimestamp(),Promise.resolve(Q()).then(()=>{_({_c:UNDEFINED})}),ae){if(i)throw ae;return}return re}}const revalidateAllKeys=(a,o)=>{for(const y in a)a[y][0]&&a[y][0](o)},initCache=(a,o)=>{if(!SWRGlobalState.has(a)){const y=mergeObjects(defaultConfigOptions,o),b={},T=internalMutate.bind(UNDEFINED,a);let O=noop;const M={},B=(s,i)=>{const g=M[s]||[];return M[s]=g,g.push(i),()=>g.splice(g.indexOf(i),1)},G=(s,i,g)=>{a.set(s,i);const R=M[s];if(R)for(const S of R)S(i,g)},d=()=>{if(!SWRGlobalState.has(a)&&(SWRGlobalState.set(a,[b,{},{},{},T,G,B]),!IS_SERVER)){const s=y.initFocus(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,b,FOCUS_EVENT))),i=y.initReconnect(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,b,RECONNECT_EVENT)));O=()=>{s&&s(),i&&i(),SWRGlobalState.delete(a)}}};return d(),[a,T,d,O]}return[a,SWRGlobalState.get(a)[4]]},onErrorRetry=(a,o,y,b,T)=>{const O=y.errorRetryCount,M=T.retryCount,B=~~((Math.random()+.5)*(1<<(M<8?M:8)))*y.errorRetryInterval;!isUndefined(O)&&M>O||setTimeout(b,B,T)},compare=(a,o)=>stableHash(a)==stableHash(o),[cache,mutate]=initCache(new Map),defaultConfig=mergeObjects({onLoadingSlow:noop,onSuccess:noop,onError:noop,onErrorRetry,onDiscarded:noop,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:slowConnection?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:slowConnection?5e3:3e3,compare,isPaused:()=>!1,cache,mutate,fallback:{}},preset),mergeConfigs=(a,o)=>{const y=mergeObjects(a,o);if(o){const{use:b,fallback:T}=a,{use:O,fallback:M}=o;b&&O&&(y.use=b.concat(O)),T&&M&&(y.fallback=mergeObjects(T,M))}return y},SWRConfigContext=reactExports.createContext({}),INFINITE_PREFIX="$inf$",enableDevtools=isWindowDefined&&window.__SWR_DEVTOOLS_USE__,use$1=enableDevtools?window.__SWR_DEVTOOLS_USE__:[],setupDevTools=()=>{enableDevtools&&(window.__SWR_DEVTOOLS_REACT__=c)},normalize=a=>isFunction(a[1])?[a[0],a[1],a[2]||{}]:[a[0],null,(a[1]===null?a[2]:a[1])||{}],useSWRConfig=()=>mergeObjects(defaultConfig,reactExports.useContext(SWRConfigContext)),middleware=a=>(o,y,b)=>a(o,y&&((...O)=>{const[M]=serialize(o),[,,,B]=SWRGlobalState.get(cache);if(M.startsWith(INFINITE_PREFIX))return y(...O);const G=B[M];return isUndefined(G)?y(...O):(delete B[M],G)}),b),BUILT_IN_MIDDLEWARE=use$1.concat(middleware),withArgs=a=>function(...y){const b=useSWRConfig(),[T,O,M]=normalize(y),B=mergeConfigs(b,M);let G=a;const{use:d}=B,s=(d||[]).concat(BUILT_IN_MIDDLEWARE);for(let i=s.length;i--;)G=s[i](G);return G(T,O||B.fetcher||null,B)},subscribeCallback=(a,o,y)=>{const b=o[a]||(o[a]=[]);return b.push(y),()=>{const T=b.indexOf(y);T>=0&&(b[T]=b[b.length-1],b.pop())}},withMiddleware=(a,o)=>(...y)=>{const[b,T,O]=normalize(y),M=(O.use||[]).concat(o);return a(b,T,{...O,use:M})};setupDevTools();const use=c.use||(a=>{if(a.status==="pending")throw a;if(a.status==="fulfilled")return a.value;throw a.status==="rejected"?a.reason:(a.status="pending",a.then(o=>{a.status="fulfilled",a.value=o},o=>{a.status="rejected",a.reason=o}),a)}),WITH_DEDUPE={dedupe:!0},useSWRHandler=(a,o,y)=>{const{cache:b,compare:T,suspense:O,fallbackData:M,revalidateOnMount:B,revalidateIfStale:G,refreshInterval:d,refreshWhenHidden:s,refreshWhenOffline:i,keepPreviousData:g}=y,[R,S,w,_]=SWRGlobalState.get(b),[C,H]=serialize(a),Z=reactExports.useRef(!1),ee=reactExports.useRef(!1),Q=reactExports.useRef(C),re=reactExports.useRef(o),ae=reactExports.useRef(y),ne=()=>ae.current,ye=()=>ne().isVisible()&&ne().isOnline(),[Ce,_e,ze,Oe]=createCacheHelper(b,C),ue=reactExports.useRef({}).current,Re=isUndefined(M)?y.fallback[C]:M,se=(Ee,de)=>{for(const be in ue){const ve=be;if(ve==="data"){if(!T(Ee[ve],de[ve])&&(!isUndefined(Ee[ve])||!T(ot,de[ve])))return!1}else if(de[ve]!==Ee[ve])return!1}return!0},Ke=reactExports.useMemo(()=>{const Ee=!C||!o?!1:isUndefined(B)?ne().isPaused()||O?!1:isUndefined(G)?!0:G:B,de=xe=>{const Ve=mergeObjects(xe);return delete Ve._k,Ee?{isValidating:!0,isLoading:!0,...Ve}:Ve},be=Ce(),ve=Oe(),$e=de(be),ut=be===ve?$e:de(ve);let we=$e;return[()=>{const xe=de(Ce());return se(xe,we)?(we.data=xe.data,we.isLoading=xe.isLoading,we.isValidating=xe.isValidating,we.error=xe.error,we):(we=xe,xe)},()=>ut]},[b,C]),Fe=shimExports.useSyncExternalStore(reactExports.useCallback(Ee=>ze(C,(de,be)=>{se(be,de)||Ee()}),[b,C]),Ke[0],Ke[1]),Ze=!Z.current,gt=R[C]&&R[C].length>0,Me=Fe.data,je=isUndefined(Me)?Re:Me,Ge=Fe.error,pt=reactExports.useRef(je),ot=g?isUndefined(Me)?pt.current:Me:je,bt=gt&&!isUndefined(Ge)?!1:Ze&&!isUndefined(B)?B:ne().isPaused()?!1:O?isUndefined(je)?!1:G:isUndefined(je)||G,ht=!!(C&&o&&Ze&&bt),Rt=isUndefined(Fe.isValidating)?ht:Fe.isValidating,pe=isUndefined(Fe.isLoading)?ht:Fe.isLoading,Ie=reactExports.useCallback(async Ee=>{const de=re.current;if(!C||!de||ee.current||ne().isPaused())return!1;let be,ve,$e=!0;const ut=Ee||{},we=!w[C]||!ut.dedupe,xe=()=>IS_REACT_LEGACY?!ee.current&&C===Q.current&&Z.current:C===Q.current,Ve={isValidating:!1,isLoading:!1},Mt=()=>{_e(Ve)},Bt=()=>{const Le=w[C];Le&&Le[1]===ve&&delete w[C]},zt={isValidating:!0};isUndefined(Ce().data)&&(zt.isLoading=!0);try{if(we&&(_e(zt),y.loadingTimeout&&isUndefined(Ce().data)&&setTimeout(()=>{$e&&xe()&&ne().onLoadingSlow(C,y)},y.loadingTimeout),w[C]=[de(H),getTimestamp()]),[be,ve]=w[C],be=await be,we&&setTimeout(Bt,y.dedupingInterval),!w[C]||w[C][1]!==ve)return we&&xe()&&ne().onDiscarded(C),!1;Ve.error=UNDEFINED;const Le=S[C];if(!isUndefined(Le)&&(ve<=Le[0]||ve<=Le[1]||Le[1]===0))return Mt(),we&&xe()&&ne().onDiscarded(C),!1;const Ye=Ce().data;Ve.data=T(Ye,be)?Ye:be,we&&xe()&&ne().onSuccess(be,C,y)}catch(Le){Bt();const Ye=ne(),{shouldRetryOnError:xt}=Ye;Ye.isPaused()||(Ve.error=Le,we&&xe()&&(Ye.onError(Le,C,Ye),(xt===!0||isFunction(xt)&&xt(Le))&&ye()&&Ye.onErrorRetry(Le,C,Ye,Ct=>{const Yt=R[C];Yt&&Yt[0]&&Yt[0](events.ERROR_REVALIDATE_EVENT,Ct)},{retryCount:(ut.retryCount||0)+1,dedupe:!0})))}return $e=!1,Mt(),!0},[C,b]),Be=reactExports.useCallback((...Ee)=>internalMutate(b,Q.current,...Ee),[]);if(useIsomorphicLayoutEffect(()=>{re.current=o,ae.current=y,isUndefined(Me)||(pt.current=Me)}),useIsomorphicLayoutEffect(()=>{if(!C)return;const Ee=Ie.bind(UNDEFINED,WITH_DEDUPE);let de=0;const ve=subscribeCallback(C,R,($e,ut={})=>{if($e==events.FOCUS_EVENT){const we=Date.now();ne().revalidateOnFocus&&we>de&&ye()&&(de=we+ne().focusThrottleInterval,Ee())}else if($e==events.RECONNECT_EVENT)ne().revalidateOnReconnect&&ye()&&Ee();else{if($e==events.MUTATE_EVENT)return Ie();if($e==events.ERROR_REVALIDATE_EVENT)return Ie(ut)}});return ee.current=!1,Q.current=C,Z.current=!0,_e({_k:H}),bt&&(isUndefined(je)||IS_SERVER?Ee():rAF(Ee)),()=>{ee.current=!0,ve()}},[C]),useIsomorphicLayoutEffect(()=>{let Ee;function de(){const ve=isFunction(d)?d(Ce().data):d;ve&&Ee!==-1&&(Ee=setTimeout(be,ve))}function be(){!Ce().error&&(s||ne().isVisible())&&(i||ne().isOnline())?Ie(WITH_DEDUPE).then(de):de()}return de(),()=>{Ee&&(clearTimeout(Ee),Ee=-1)}},[d,s,i,C]),reactExports.useDebugValue(ot),O&&isUndefined(je)&&C){if(!IS_REACT_LEGACY&&IS_SERVER)throw new Error("Fallback data is required when using suspense in SSR.");re.current=o,ae.current=y,ee.current=!1;const Ee=_[C];if(!isUndefined(Ee)){const de=Be(Ee);use(de)}if(isUndefined(Ge)){const de=Ie(WITH_DEDUPE);isUndefined(ot)||(de.status="fulfilled",de.value=!0),use(de)}else throw Ge}return{mutate:Be,get data(){return ue.data=!0,ot},get error(){return ue.error=!0,Ge},get isValidating(){return ue.isValidating=!0,Rt},get isLoading(){return ue.isLoading=!0,pe}}},useSWR=withArgs(useSWRHandler),immutable=a=>(o,y,b)=>(b.revalidateOnFocus=!1,b.revalidateIfStale=!1,b.revalidateOnReconnect=!1,a(o,y,b)),useSWRImmutable=withMiddleware(useSWR,immutable);var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const toKebabCase=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(a,o)=>{const y=reactExports.forwardRef(({color:b="currentColor",size:T=24,strokeWidth:O=2,absoluteStrokeWidth:M,className:B="",children:G,...d},s)=>reactExports.createElement("svg",{ref:s,...defaultAttributes,width:T,height:T,stroke:b,strokeWidth:M?Number(O)*24/Number(T):O,className:["lucide",`lucide-${toKebabCase(a)}`,B].join(" "),...d},[...o.map(([i,g])=>reactExports.createElement(i,g)),...Array.isArray(G)?G:[G]]));return y.displayName=`${a}`,y};const CheckCircle2=createLucideIcon("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const HelpCircle=createLucideIcon("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const MessageSquareOff=createLucideIcon("MessageSquareOff",[["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M3.6 3.6c-.4.3-.6.8-.6 1.4v16l4-4h10",key:"pwpm4a"}]]);const Pause=createLucideIcon("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const RotateCw=createLucideIcon("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);const Send=createLucideIcon("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const SkipForward=createLucideIcon("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const XCircle=createLucideIcon("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function isBytes$1(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}function bytes(a,...o){if(!isBytes$1(a))throw new Error("Expected Uint8Array");if(o.length>0&&!o.includes(a.length))throw new Error(`Expected Uint8Array of length ${o}, not of length=${a.length}`)}function exists(a,o=!0){if(a.destroyed)throw new Error("Hash instance has been destroyed");if(o&&a.finished)throw new Error("Hash#digest() has already been called")}function output(a,o){bytes(a);const y=o.outputLen;if(a.length<y)throw new Error(`digestInto() expects output buffer of length at least ${y}`)}function isBytes(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}const createView=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),rotr=(a,o)=>a<<32-o|a>>>o,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes(a){if(typeof a!="string")throw new Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function toBytes(a){if(typeof a=="string"&&(a=utf8ToBytes(a)),!isBytes(a))throw new Error(`expected Uint8Array, got ${typeof a}`);return a}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(a){const o=b=>a().update(toBytes(b)).digest(),y=a();return o.outputLen=y.outputLen,o.blockLen=y.blockLen,o.create=()=>a(),o}function setBigUint64(a,o,y,b){if(typeof a.setBigUint64=="function")return a.setBigUint64(o,y,b);const T=BigInt(32),O=BigInt(4294967295),M=Number(y>>T&O),B=Number(y&O),G=b?4:0,d=b?0:4;a.setUint32(o+G,M,b),a.setUint32(o+d,B,b)}class SHA2 extends Hash{constructor(o,y,b,T){super(),this.blockLen=o,this.outputLen=y,this.padOffset=b,this.isLE=T,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(o),this.view=createView(this.buffer)}update(o){exists(this);const{view:y,buffer:b,blockLen:T}=this;o=toBytes(o);const O=o.length;for(let M=0;M<O;){const B=Math.min(T-this.pos,O-M);if(B===T){const G=createView(o);for(;T<=O-M;M+=T)this.process(G,M);continue}b.set(o.subarray(M,M+B),this.pos),this.pos+=B,M+=B,this.pos===T&&(this.process(y,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){exists(this),output(o,this),this.finished=!0;const{buffer:y,view:b,blockLen:T,isLE:O}=this;let{pos:M}=this;y[M++]=128,this.buffer.subarray(M).fill(0),this.padOffset>T-M&&(this.process(b,0),M=0);for(let i=M;i<T;i++)y[i]=0;setBigUint64(b,T-8,BigInt(this.length*8),O),this.process(b,0);const B=createView(o),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=G/4,s=this.get();if(d>s.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<d;i++)B.setUint32(4*i,s[i],O)}digest(){const{buffer:o,outputLen:y}=this;this.digestInto(o);const b=o.slice(0,y);return this.destroy(),b}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:y,buffer:b,length:T,finished:O,destroyed:M,pos:B}=this;return o.length=T,o.pos=B,o.finished=O,o.destroyed=M,T%y&&o.buffer.set(b),o}}const Chi=(a,o,y)=>a&o^~a&y,Maj=(a,o,y)=>a&o^a&y^o&y,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:o,B:y,C:b,D:T,E:O,F:M,G:B,H:G}=this;return[o,y,b,T,O,M,B,G]}set(o,y,b,T,O,M,B,G){this.A=o|0,this.B=y|0,this.C=b|0,this.D=T|0,this.E=O|0,this.F=M|0,this.G=B|0,this.H=G|0}process(o,y){for(let i=0;i<16;i++,y+=4)SHA256_W[i]=o.getUint32(y,!1);for(let i=16;i<64;i++){const g=SHA256_W[i-15],R=SHA256_W[i-2],S=rotr(g,7)^rotr(g,18)^g>>>3,w=rotr(R,17)^rotr(R,19)^R>>>10;SHA256_W[i]=w+SHA256_W[i-7]+S+SHA256_W[i-16]|0}let{A:b,B:T,C:O,D:M,E:B,F:G,G:d,H:s}=this;for(let i=0;i<64;i++){const g=rotr(B,6)^rotr(B,11)^rotr(B,25),R=s+g+Chi(B,G,d)+SHA256_K[i]+SHA256_W[i]|0,w=(rotr(b,2)^rotr(b,13)^rotr(b,22))+Maj(b,T,O)|0;s=d,d=G,G=B,B=M+R|0,M=O,O=T,T=b,b=R+w|0}b=b+this.A|0,T=T+this.B|0,O=O+this.C|0,M=M+this.D|0,B=B+this.E|0,G=G+this.F|0,d=d+this.G|0,s=s+this.H|0,this.set(b,T,O,M,B,G,d,s)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256=wrapConstructor(()=>new SHA256);class ValidationError extends Error{constructor(y,b){super(y,b);Cr(this,"name");Cr(this,"details");this.name="ZodValidationError",this.details=getIssuesFromErrorOptions(b)}toString(){return this.message}}function getIssuesFromErrorOptions(a){if(a){const o=a.cause;if(o instanceof ZodError)return o.issues}return[]}const ISSUE_SEPARATOR="; ",MAX_ISSUES_IN_MESSAGE=99,PREFIX="Validation error",PREFIX_SEPARATOR=": ",UNION_SEPARATOR=", or ";function prefixMessage(a,o,y){return o!==null?a.length>0?[o,a].join(y):o:a.length>0?a:PREFIX}const identifierRegex=/[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*/u;function joinPath(a){return a.length===1?a[0].toString():a.reduce((o,y)=>{if(typeof y=="number")return o+"["+y.toString()+"]";if(y.includes('"'))return o+'["'+escapeQuotes(y)+'"]';if(!identifierRegex.test(y))return o+'["'+y+'"]';const b=o.length===0?"":".";return o+b+y},"")}function escapeQuotes(a){return a.replace(/"/g,'\\"')}function isNonEmptyArray(a){return a.length!==0}function getMessageFromZodIssue(a){const{issue:o,issueSeparator:y,unionSeparator:b,includePath:T}=a;if(o.code==="invalid_union")return o.unionErrors.reduce((O,M)=>{const B=M.issues.map(G=>getMessageFromZodIssue({issue:G,issueSeparator:y,unionSeparator:b,includePath:T})).join(y);return O.includes(B)||O.push(B),O},[]).join(b);if(T&&isNonEmptyArray(o.path)){if(o.path.length===1){const O=o.path[0];if(typeof O=="number")return`${o.message} at index ${O}`}return`${o.message} at "${joinPath(o.path)}"`}return o.message}function fromZodError(a,o={}){const{maxIssuesInMessage:y=MAX_ISSUES_IN_MESSAGE,issueSeparator:b=ISSUE_SEPARATOR,unionSeparator:T=UNION_SEPARATOR,prefixSeparator:O=PREFIX_SEPARATOR,prefix:M=PREFIX,includePath:B=!0}=o,G=a.errors,d=G.length===0?a.message:G.slice(0,y).map(i=>getMessageFromZodIssue({issue:i,issueSeparator:b,unionSeparator:T,includePath:B})).join(b),s=prefixMessage(d,M,O);return new ValidationError(s,{cause:a})}var define_import_meta_env_default={QUIZMS_MODE:"training",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};reactExports.createContext({});function L({percentage:a,className:o,children:y}){let b=a===void 0?void 0:Math.round(a);return b!==void 0&&(b=Number.isNaN(b)?void 0:clamp(b,0,100)),c.createElement("div",{className:D$1("relative p-2 pt-0 text-center",o)},c.createElement("div",{className:"relative z-10"},y),c.createElement("progress",{className:"progress progress-info absolute inset-x-0",value:b,max:"100"}))}function Tt(){return c.createElement("div",{className:"not-prose flex h-full items-center justify-center"},c.createElement(L,null,c.createElement("p",{className:"pb-1"},"Caricamento in corso...")))}var jt=reactExports.forwardRef(function({title:a,className:o,children:y},b){return c.createElement("dialog",{ref:b,className:"modal"},c.createElement("form",{method:"dialog",className:D$1("modal-box",o)},c.createElement("button",{className:"btn btn-circle btn-ghost btn-sm absolute right-2 top-2","aria-label":"Chiudi"},""),c.createElement("h3",{className:"mb-3 mt-0 text-lg font-bold"},a),y),c.createElement("form",{method:"dialog",className:"modal-backdrop"},c.createElement("button",null,"Chiudi")))});function D(){let{data:a}=useSWRImmutable("time-server",J,{suspense:!0});return()=>addMilliseconds(new Date,a)}async function J(){if(!define_import_meta_env_default.QUIZMS_TIME_SERVER)return 0;try{let a=await fetch(define_import_meta_env_default.QUIZMS_TIME_SERVER);if(!a.ok)return 0;let o=Date.now(),y=await a.text(),b=Number(y);return Number.isNaN(b)?0:b-o}catch{return 0}}function Ot(a){let o=D(),y=reactExports.useCallback(()=>!!a&&o()>=a,[a,o]),[b,T]=reactExports.useState(y),O=reactExports.useCallback(()=>!b&&y()&&T(!0),[b,y]);return reactExports.useEffect(()=>{if(!a)return;let M=differenceInMilliseconds(a,o());if(M<0)return;let B=setTimeout(O,M+5);return()=>clearTimeout(B)},[a,O,o]),reactExports.useEffect(()=>(window.addEventListener("visibilitychange",O),()=>window.removeEventListener("visibilitychange",O)),[O]),b}function Vt$1(a){let o=D(),[y,b]=reactExports.useState(o()),T=a.endTime??addMinutes(a.startTime,a.duration);if(reactExports.useEffect(()=>{if(!T)return;let G=setInterval(()=>{let d=o();b(d),d>=T&&clearInterval(G)},100);return()=>clearInterval(G)},[T,o]),!T)return c.createElement("span",{className:"font-mono"},"--:--");let O=Math.max(differenceInSeconds(T,y),0);a.duration&&(O=Math.min(O,a.duration*60));let M=Math.floor(O/60),B=O%60;return c.createElement("span",{className:"countdown font-mono"},c.createElement("span",{style:{"--value":M}}),":",c.createElement("span",{style:{"--value":B}}))}function Zt({error:a,resetErrorBoundary:o}){return reactExports.useEffect(()=>{},[o]),c.createElement("div",{className:"flex size-full flex-col items-center justify-center"},c.createElement("p",{className:"mx-8 break-words text-center text-error"},"Errore: ",a.message),o&&c.createElement("div",{className:"mt-5 flex flex-row justify-center"},c.createElement("button",{className:"btn btn-error",onClick:o},c.createElement(RotateCw,null),"Ricarica")))}var N=z.object({name:z.string(),label:z.string(),size:z.enum(["xs","sm","md","lg","xl"]).optional(),pinned:z.boolean().optional()}),rt$1=N.extend({type:z.literal("text")}),it$1=N.extend({type:z.literal("number"),min:z.number().optional(),max:z.number().optional()}),at$1=N.extend({type:z.literal("date"),min:z.date(),max:z.date()});z.object({id:z.string(),name:z.string(),problemIds:z.coerce.string().array(),contestWindowStart:z.date().optional(),contestWindowEnd:z.date().optional(),duration:z.coerce.number().positive().optional(),statementVersion:z.number(),personalInformation:z.array(z.discriminatedUnion("type",[rt$1,it$1,at$1])),hasVariants:z.boolean(),hasOnline:z.boolean(),hasPdf:z.boolean(),allowRestart:z.boolean(),instructions:z.string().optional()});z.object({uid:z.string(),personalInformation:z.record(z.union([z.string(),z.number(),z.date()]).optional()),participationId:z.string(),contestId:z.string(),token:z.string(),startedAt:z.date(),variant:z.string(),disabled:z.boolean(),answers:z.record(z.string().optional()),extraData:z.record(z.any()).optional(),createdAt:z.date(),updatedAt:z.date()}).partial().extend({id:z.string()});z.object({id:z.string(),studentId:z.string()});z.object({id:z.string(),studentId:z.string(),participationId:z.string()});z.object({id:z.string(),studentId:z.string(),token:z.string(),name:z.string(),surname:z.string()});z.object({id:z.string(),contestId:z.string(),schema:z.record(z.object({type:z.enum(["text","number"]),options:z.string().array().nonempty().optional(),blankOption:z.string().optional(),pointsCorrect:z.number().optional(),pointsBlank:z.number().optional(),pointsWrong:z.number().optional(),solution:z.string().optional(),originalId:z.coerce.string().optional()}))});z.object({id:z.string(),variant:z.string()});function Se(a,o){var O,M;let y=a.answers,b=(O=o[a.variant])==null?void 0:O.schema;if(!b||!y)return;let T=0;for(let B in b){let G=b[B],d=(M=y[B])==null?void 0:M.trim(),s=dt(G,d);if(s===void 0)return;T+=s}return T}function dt(a,o){if(!(a.pointsCorrect===void 0||a.pointsBlank===void 0||a.pointsWrong===void 0||a.solution===void 0))return o===void 0||o===""||o===a.blankOption?a.pointsBlank:o.toUpperCase()===a.solution.toUpperCase()?a.pointsCorrect:a.pointsWrong}z.object({id:z.string(),schoolId:z.string(),contestId:z.string(),name:z.string(),teacher:z.string(),token:z.string().optional(),startingTime:z.date().optional(),finalized:z.boolean().default(!1),pdfVariants:z.array(z.coerce.string()).optional()});z.object({id:z.string(),participationId:z.string(),contestId:z.string(),startingTime:z.date()});z.object({id:z.string(),uid:z.string(),answers:z.record(z.string().optional()),submittedAt:z.date().optional()});function mt(a,o,y){let b=a.safeParse(o);if(!b.success)throw fromZodError(b.error,y);return b.data}var XoroShiro128Plus=function(){function a(o,y,b,T){this.s01=o,this.s00=y,this.s11=b,this.s10=T}return a.prototype.clone=function(){return new a(this.s01,this.s00,this.s11,this.s10)},a.prototype.next=function(){var o=new a(this.s01,this.s00,this.s11,this.s10),y=o.unsafeNext();return[y,o]},a.prototype.unsafeNext=function(){var o=this.s00+this.s10|0,y=this.s10^this.s00,b=this.s11^this.s01,T=this.s00,O=this.s01;return this.s00=T<<24^O>>>8^y^y<<16,this.s01=O<<24^T>>>8^b^(b<<16|y>>>16),this.s10=b<<5^y>>>27,this.s11=y<<5^b>>>27,o},a.prototype.jump=function(){var o=new a(this.s01,this.s00,this.s11,this.s10);return o.unsafeJump(),o},a.prototype.unsafeJump=function(){for(var o=0,y=0,b=0,T=0,O=[3639956645,3750757012,1261568508,386426335],M=0;M!==4;++M)for(var B=1;B;B<<=1)O[M]&B&&(o^=this.s01,y^=this.s00,b^=this.s11,T^=this.s10),this.unsafeNext();this.s01=o,this.s00=y,this.s11=b,this.s10=T},a}(),xoroshiro128plus=function(a){return new XoroShiro128Plus(-1,~a,a|0,0)};function fromNumberToArrayInt64(a,o){if(o<0){var y=-o;a.sign=-1,a.data[0]=~~(y/4294967296),a.data[1]=y>>>0}else a.sign=1,a.data[0]=~~(o/4294967296),a.data[1]=o>>>0;return a}function substractArrayInt64(a,o,y){var b=o.data[1],T=o.data[0],O=o.sign,M=y.data[1],B=y.data[0],G=y.sign;if(a.sign=1,O===1&&G===-1){var d=b+M,s=T+B+(d>4294967295?1:0);return a.data[0]=s>>>0,a.data[1]=d>>>0,a}var i=b,g=T,R=M,S=B;O===-1&&(i=M,g=B,R=b,S=T);var w=0,_=i-R;return _<0&&(w=1,_=_>>>0),a.data[0]=g-S-w,a.data[1]=_,a}function unsafeUniformIntDistributionInternal(a,o){for(var y=a>2?~~(4294967296/a)*a:4294967296,b=o.unsafeNext()+2147483648;b>=y;)b=o.unsafeNext()+2147483648;return b%a}function unsafeUniformArrayIntDistributionInternal(a,o,y){for(var b=o.length;;){for(var T=0;T!==b;++T){var O=T===0?o[0]+1:4294967296,M=unsafeUniformIntDistributionInternal(O,y);a[T]=M}for(var T=0;T!==b;++T){var B=a[T],G=o[T];if(B<G)return a;if(B>G)break}}}var safeNumberMaxSafeInteger=Number.MAX_SAFE_INTEGER,sharedA={sign:1,data:[0,0]},sharedB={sign:1,data:[0,0]},sharedC={sign:1,data:[0,0]},sharedData=[0,0];function uniformLargeIntInternal(a,o,y,b){var T=y<=safeNumberMaxSafeInteger?fromNumberToArrayInt64(sharedC,y):substractArrayInt64(sharedC,fromNumberToArrayInt64(sharedA,o),fromNumberToArrayInt64(sharedB,a));return T.data[1]===4294967295?(T.data[0]+=1,T.data[1]=0):T.data[1]+=1,unsafeUniformArrayIntDistributionInternal(sharedData,T.data,b),sharedData[0]*4294967296+sharedData[1]+a}function unsafeUniformIntDistribution(a,o,y){var b=o-a;if(b<=4294967295){var T=unsafeUniformIntDistributionInternal(b+1,y);return T+a}return uniformLargeIntInternal(a,o,b,y)}const ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(o){super(o),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(o){return{didCatch:!0,error:o}}resetErrorBoundary(){const{error:o}=this.state;if(o!==null){for(var y,b,T=arguments.length,O=new Array(T),M=0;M<T;M++)O[M]=arguments[M];(y=(b=this.props).onReset)===null||y===void 0||y.call(b,{args:O,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(o,y){var b,T;(b=(T=this.props).onError)===null||b===void 0||b.call(T,o,y)}componentDidUpdate(o,y){const{didCatch:b}=this.state,{resetKeys:T}=this.props;if(b&&y.error!==null&&hasArrayChanged(o.resetKeys,T)){var O,M;(O=(M=this.props).onReset)===null||O===void 0||O.call(M,{next:T,prev:o.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:o,fallbackRender:y,FallbackComponent:b,fallback:T}=this.props,{didCatch:O,error:M}=this.state;let B=o;if(O){const G={error:M,resetErrorBoundary:this.resetErrorBoundary};if(typeof y=="function")B=y(G);else if(b)B=reactExports.createElement(b,G);else if(T===null||reactExports.isValidElement(T))B=T;else throw M}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:O,error:M,resetErrorBoundary:this.resetErrorBoundary}},B)}}function hasArrayChanged(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return a.length!==o.length||a.some((y,b)=>!Object.is(y,o[b]))}var x=class{constructor(a){this.randInt=(o,y)=>unsafeUniformIntDistribution(o,y,this.rng),this.choice=o=>o[this.randInt(0,o.length-1)],this.sample=(o,y)=>{let b=o.slice(0,y);for(let T=y;T<o.length;T++){let O=this.randInt(0,T);O<y&&(b[O]=o[T])}return b},this.shuffle=o=>{for(let y=o.length-1;y>0;y--){let b=this.randInt(0,y);[o[y],o[b]]=[o[b],o[y]]}},this.rng=xoroshiro128plus(A$1(a))}};function A$1(a){let o=sha256(a),y=new DataView(o.buffer,o.byteOffset,o.byteLength);return Number(y.getBigUint64(0,!0)&BigInt(Number.MAX_SAFE_INTEGER))}function V$1(){return crypto.randomUUID()}var f=reactExports.createContext({});f.displayName="TeacherContext";const emptyComponents={},MDXContext=c.createContext(emptyComponents);function useMDXComponents(a){const o=c.useContext(MDXContext);return c.useMemo(function(){return typeof a=="function"?a(o):{...o,...a}},[o,a])}function MDXProvider(a){let o;return a.disableParentContext?o=typeof a.components=="function"?a.components(emptyComponents):a.components||emptyComponents:o=useMDXComponents(a.components),c.createElement(MDXContext.Provider,{value:o},a.children)}var FileSaver_min={exports:{}};(function(a,o){(function(y,b){b()})(commonjsGlobal,function(){function y(d,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function b(d,s,i){var g=new XMLHttpRequest;g.open("GET",d),g.responseType="blob",g.onload=function(){G(g.response,s,i)},g.onerror=function(){console.error("could not download file")},g.send()}function T(d){var s=new XMLHttpRequest;s.open("HEAD",d,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function O(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(s)}}var M=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,B=M.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),G=M.saveAs||(typeof window!="object"||window!==M?function(){}:"download"in HTMLAnchorElement.prototype&&!B?function(d,s,i){var g=M.URL||M.webkitURL,R=document.createElement("a");s=s||d.name||"download",R.download=s,R.rel="noopener",typeof d=="string"?(R.href=d,R.origin===location.origin?O(R):T(R.href)?b(d,s,i):O(R,R.target="_blank")):(R.href=g.createObjectURL(d),setTimeout(function(){g.revokeObjectURL(R.href)},4e4),setTimeout(function(){O(R)},0))}:"msSaveOrOpenBlob"in navigator?function(d,s,i){if(s=s||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(y(d,i),s);else if(T(d))b(d,s,i);else{var g=document.createElement("a");g.href=d,g.target="_blank",setTimeout(function(){O(g)})}}:function(d,s,i,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof d=="string")return b(d,s,i);var R=d.type==="application/octet-stream",S=/constructor/i.test(M.HTMLElement)||M.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||R&&S||B)&&typeof FileReader<"u"){var _=new FileReader;_.onloadend=function(){var Z=_.result;Z=w?Z:Z.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=Z:location=Z,g=null},_.readAsDataURL(d)}else{var C=M.URL||M.webkitURL,H=C.createObjectURL(d);g?g.location=H:location.href=H,g=null,setTimeout(function(){C.revokeObjectURL(H)},4e4)}});M.saveAs=G.saveAs=G,a.exports=G})})(FileSaver_min);var jsInterpreter={exports:{}},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(a,o){if(a.indexOf)return a.indexOf(o);for(var y=0;y<a.length;y++)if(a[y]===o)return y;return-1},Object_keys=function(a){if(Object.keys)return Object.keys(a);var o=[];for(var y in a)o.push(y);return o},forEach=function(a,o){if(a.forEach)return a.forEach(o);for(var y=0;y<a.length;y++)o(a[y],y,a)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(a,o,y){Object.defineProperty(a,o,{writable:!0,enumerable:!1,configurable:!0,value:y})}}catch{return function(o,y,b){o[y]=b}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(o){if(!(this instanceof Script))return new Script(o);this.code=o};Script.prototype.runInContext=function(a){if(!(a instanceof Context))throw new TypeError("needs a 'context' argument.");var o=document.createElement("iframe");o.style||(o.style={}),o.style.display="none",document.body.appendChild(o);var y=o.contentWindow,b=y.eval,T=y.execScript;!b&&T&&(T.call(y,"null"),b=y.eval),forEach(Object_keys(a),function(B){y[B]=a[B]}),forEach(globals,function(B){a[B]&&(y[B]=a[B])});var O=Object_keys(y),M=b.call(y,this.code);return forEach(Object_keys(y),function(B){(B in a||indexOf(O,B)===-1)&&(a[B]=y[B])}),forEach(globals,function(B){B in a||defineProp(a,B,y[B])}),document.body.removeChild(o),M},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(a){var o=Script.createContext(a),y=this.runInContext(o);return a&&forEach(Object_keys(o),function(b){a[b]=o[b]}),y},forEach(Object_keys(Script.prototype),function(a){exports[a]=Script[a]=function(o){var y=Script(o);return y[a].apply(y,[].slice.call(arguments,1))}}),exports.isContext=function(a){return a instanceof Context},exports.createScript=function(a){return exports.Script(a)},exports.createContext=Script.createContext=function(a){var o=new Context;return typeof a=="object"&&forEach(Object_keys(a),function(y){o[y]=a[y]}),o}}(vmBrowserify)),vmBrowserify}(function(a,o){(function(b,T){a.exports=T()})(commonjsGlobal,()=>(()=>{var y={"./original-repo/interpreter.js":function(M,B,G){var d=function(s,i){typeof s=="string"&&(s=this.parse_(s,"code"));var g=s.constructor;this.newNode=function(){return new g({options:{}})};var R=this.newNode();for(var S in s)R[S]=S==="body"?s[S].slice():s[S];this.ast=R,this.tasks=[],this.initFunc_=i,this.paused_=!1,this.polyfills_=[],this.functionCounter_=0,this.stepFunctions_=Object.create(null);var w=/^step([A-Z]\w*)$/,_;for(var C in this)typeof this[C]=="function"&&(_=C.match(w))&&(this.stepFunctions_[_[1]]=this[C].bind(this));this.globalScope=this.createScope(this.ast,null),this.globalObject=this.globalScope.object,this.ast=this.parse_(this.polyfills_.join(`
`),"polyfills"),this.polyfills_=void 0,d.stripLocations_(this.ast,void 0,void 0);var H=new d.State(this.ast,this.globalScope);H.done=!1,this.stateStack=[H],this.run(),this.value=void 0,this.ast=R,H=new d.State(this.ast,this.globalScope),H.done=!1,this.stateStack.length=0,this.stateStack[0]=H};d.Completion={NORMAL:0,BREAK:1,CONTINUE:2,RETURN:3,THROW:4},d.Status={DONE:0,STEP:1,TASK:2,ASYNC:3},d.PARSE_OPTIONS={locations:!0,ecmaVersion:5},d.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},d.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},d.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!1,enumerable:!1,writable:!1},d.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0},d.STEP_ERROR={STEP_ERROR:!0},d.SCOPE_REFERENCE={SCOPE_REFERENCE:!0},d.VALUE_IN_DESCRIPTOR={VALUE_IN_DESCRIPTOR:!0},d.REGEXP_TIMEOUT={REGEXP_TIMEOUT:!0},d.toStringCycles_=[],d.vm=null,d.currentInterpreter_=null,d.nativeGlobal=typeof globalThis>"u"?this:globalThis,d.WORKER_CODE=["onmessage = function(e) {","var result;","var data = e.data;","switch (data[0]) {","case 'split':","result = data[1].split(data[2], data[3]);","break;","case 'match':","result = data[1].match(data[2]);","break;","case 'search':","result = data[1].search(data[2]);","break;","case 'replace':","result = data[1].replace(data[2], data[3]);","break;","case 'exec':","var regexp = data[1];","regexp.lastIndex = data[2];","result = [regexp.exec(data[3]), data[1].lastIndex];","break;","default:","throw Error('Unknown RegExp operation: ' + data[0]);","}","postMessage(result);","close();","};"],d.legalArrayLength=function(s){var i=s>>>0;return i===Number(s)?i:NaN},d.legalArrayIndex=function(s){var i=s>>>0;return String(i)===String(s)&&i!==4294967295?i:NaN},d.stripLocations_=function(s,i,g){i?s.start=i:delete s.start,g?s.end=g:delete s.end;for(var R in s)if(R!=="loc"&&s.hasOwnProperty(R)){var S=s[R];S&&typeof S=="object"&&d.stripLocations_(S,i,g)}},d.prototype.REGEXP_MODE=2,d.prototype.REGEXP_THREAD_TIMEOUT=1e3,d.prototype.POLYFILL_TIMEOUT=1e3,d.prototype.getterStep_=!1,d.prototype.setterStep_=!1,d.prototype.appendCodeNumber_=0,d.prototype.taskCodeNumber_=0,d.prototype.parse_=function(s,i){var g={};for(var R in d.PARSE_OPTIONS)g[R]=d.PARSE_OPTIONS[R];return g.sourceFile=i,d.nativeGlobal.acorn.parse(s,g)},d.prototype.appendCode=function(s){var i=this.stateStack[0];if(!i||i.node.type!=="Program")throw Error("Expecting original AST to start with a Program node");if(typeof s=="string"&&(s=this.parse_(s,"appendCode"+this.appendCodeNumber_++)),!s||s.type!=="Program")throw Error("Expecting new AST to start with a Program node");this.populateScope_(s,i.scope),Array.prototype.push.apply(i.node.body,s.body),i.node.body.variableCache_=null,i.done=!1},d.prototype.step=function(){var s=this.stateStack,i;do{var g=s[s.length-1];if(this.paused_)return!0;if(!g||g.node.type==="Program"&&g.done){if(!this.tasks.length)return!1;if(g=this.nextTask_(),!g)return!0}var R=g.node,S=d.currentInterpreter_;d.currentInterpreter_=this;try{var w=this.stepFunctions_[R.type](s,g,R)}catch(_){if(_!==d.STEP_ERROR)throw this.value!==_&&(this.value=void 0),_}finally{d.currentInterpreter_=S}if(w&&s.push(w),this.getterStep_)throw this.value=void 0,Error("Getter not supported in this context");if(this.setterStep_)throw this.value=void 0,Error("Setter not supported in this context");!i&&!R.end&&(i=Date.now()+this.POLYFILL_TIMEOUT)}while(!R.end&&i>Date.now());return!0},d.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},d.prototype.getStatus=function(){if(this.paused_)return d.Status.ASYNC;var s=this.stateStack,i=s[s.length-1];if(i&&(i.node.type!=="Program"||!i.done))return d.Status.STEP;var g=this.tasks[0];return g?g.time>Date.now()?d.Status.TASK:d.Status.STEP:d.Status.DONE},d.prototype.initGlobal=function(s){this.setProperty(s,"NaN",NaN,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"Infinity",1/0,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"undefined",void 0,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"window",s,d.READONLY_DESCRIPTOR),this.setProperty(s,"this",s,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"self",s),this.OBJECT_PROTO=new d.Object(null),this.FUNCTION_PROTO=new d.Object(this.OBJECT_PROTO),this.initFunction(s),this.initObject(s),s.proto=this.OBJECT_PROTO,this.setProperty(s,"constructor",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR),this.initArray(s),this.initString(s),this.initBoolean(s),this.initNumber(s),this.initDate(s),this.initRegExp(s),this.initError(s),this.initMath(s),this.initJSON(s);var i=this,g,R=this.createNativeFunction(function(_){throw EvalError("Can't happen")},!1);R.eval=!0,this.setProperty(s,"eval",R,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"parseInt",this.createNativeFunction(parseInt,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"parseFloat",this.createNativeFunction(parseFloat,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"isNaN",this.createNativeFunction(isNaN,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"isFinite",this.createNativeFunction(isFinite,!1),d.NONENUMERABLE_DESCRIPTOR);for(var S=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],w=0;w<S.length;w++)g=function(_){return function(C){try{return _(C)}catch(H){i.throwException(i.URI_ERROR,H.message)}}}(S[w][0]),this.setProperty(s,S[w][1],this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR);g=function(C){return i.createTask_(!1,arguments)},this.setProperty(s,"setTimeout",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),g=function(C){return i.createTask_(!0,arguments)},this.setProperty(s,"setInterval",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),g=function(C){i.deleteTask_(C)},this.setProperty(s,"clearTimeout",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),g=function(C){i.deleteTask_(C)},this.setProperty(s,"clearInterval",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),this.OBJECT=this.OBJECT,this.OBJECT_PROTO=this.OBJECT_PROTO,this.FUNCTION=this.FUNCTION,this.FUNCTION_PROTO=this.FUNCTION_PROTO,this.ARRAY=this.ARRAY,this.ARRAY_PROTO=this.ARRAY_PROTO,this.REGEXP=this.REGEXP,this.REGEXP_PROTO=this.REGEXP_PROTO,this.DATE=this.DATE,this.DATE_PROTO=this.DATE_PROTO,this.initFunc_&&this.initFunc_(this,s)},d.prototype.functionCodeNumber_=0,d.prototype.initFunction=function(s){var i=this,g,R=/^[A-Za-z_$][\w$]*$/;g=function(w){if(arguments.length)var _=String(arguments[arguments.length-1]);else var _="";var C=Array.prototype.slice.call(arguments,0,-1).join(",").trim();if(C){for(var H=C.split(/\s*,\s*/),Z=0;Z<H.length;Z++){var ee=H[Z];R.test(ee)||i.throwException(i.SYNTAX_ERROR,"Invalid function argument: "+ee)}C=H.join(", ")}try{var Q=i.parse_("(function("+C+") {"+_+"})","function"+i.functionCodeNumber_++)}catch(ae){i.throwException(i.SYNTAX_ERROR,"Invalid code: "+ae.message)}Q.body.length!==1&&i.throwException(i.SYNTAX_ERROR,"Invalid code in function body");var re=Q.body[0].expression;return i.createFunction(re,i.globalScope,"anonymous")},this.FUNCTION=this.createNativeFunction(g,!0),this.setProperty(s,"Function",this.FUNCTION,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,d.NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.nativeFunc=function(){},this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++,this.FUNCTION_PROTO.illegalConstructor=!0,this.setProperty(this.FUNCTION_PROTO,"length",0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.class="Function",g=function(w,_){var C=i.stateStack[i.stateStack.length-1];C.func_=this,C.funcThis_=w,C.arguments_=[],_!=null&&(_ instanceof d.Object?C.arguments_=i.arrayPseudoToNative(_):i.throwException(i.TYPE_ERROR,"CreateListFromArrayLike called on non-object")),C.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",g),g=function(w){var _=i.stateStack[i.stateStack.length-1];_.func_=this,_.funcThis_=w,_.arguments_=[];for(var C=1;C<arguments.length;C++)_.arguments_.push(arguments[C]);_.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",g),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',","{configurable: true, writable: true, value:","function bind(oThis) {","if (typeof this !== 'function') {","throw TypeError('What is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),g=function(){return String(this)},this.setNativeFunctionPrototype(this.FUNCTION,"toString",g),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),g=function(){return this.valueOf()},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",g),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initObject=function(s){var i=this,g;g=function(w){if(w==null)return i.calledWithNew()?this:i.createObjectProto(i.OBJECT_PROTO);if(!(w instanceof d.Object)){var _=i.createObjectProto(i.getPrototype(w));return _.data=w,_}return w},this.OBJECT=this.createNativeFunction(g,!0),this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"Object",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR);var R=function(S){S==null&&i.throwException(i.TYPE_ERROR,"Cannot convert '"+S+"' to object")};g=function(w){R(w);var _=w instanceof d.Object?w.properties:w;return i.arrayNativeToPseudo(Object.getOwnPropertyNames(_))},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),g=function(w){return R(w),w instanceof d.Object&&(w=w.properties),i.arrayNativeToPseudo(Object.keys(w))},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),g=function(w){return w===null?i.createObjectProto(null):(w instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object prototype may only be an Object or null, not "+w),i.createObjectProto(w))},this.setProperty(this.OBJECT,"create",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var create_ = Object.create;","Object.create = function create(proto, props) {","var obj = create_(proto);","props && Object.defineProperties(obj, props);","return obj;","};","})();",""),g=function(w,_,C){return _=String(_),w instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object.defineProperty called on non-object: "+w),C instanceof d.Object||i.throwException(i.TYPE_ERROR,"Property description must be an object"),w.preventExtensions&&!(_ in w.properties)&&i.throwException(i.TYPE_ERROR,"Can't define property '"+_+"', object is not extensible"),i.setProperty(w,_,d.VALUE_IN_DESCRIPTOR,C.properties),w},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var defineProperty_ = Object.defineProperty;","Object.defineProperty = function defineProperty(obj, prop, d1) {","var d2 = {};","if ('configurable' in d1) d2.configurable = d1.configurable;","if ('enumerable' in d1) d2.enumerable = d1.enumerable;","if ('writable' in d1) d2.writable = d1.writable;","if ('value' in d1) d2.value = d1.value;","if ('get' in d1) d2.get = d1.get;","if ('set' in d1) d2.set = d1.set;","return defineProperty_(obj, prop, d2);","};","})();","Object.defineProperty(Object, 'defineProperties',","{configurable: true, writable: true, value:","function defineProperties(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),g=function(w,_){if(w instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object: "+w),_=String(_),_ in w.properties){var C=Object.getOwnPropertyDescriptor(w.properties,_),H=w.getter[_],Z=w.setter[_],ee=i.createObjectProto(i.OBJECT_PROTO);return H||Z?(i.setProperty(ee,"get",H),i.setProperty(ee,"set",Z)):(i.setProperty(ee,"value",C.value),i.setProperty(ee,"writable",C.writable)),i.setProperty(ee,"configurable",C.configurable),i.setProperty(ee,"enumerable",C.enumerable),ee}},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),g=function(w){return R(w),i.getPrototype(w)},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),g=function(w){return!!w&&!w.preventExtensions},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),g=function(w){return w instanceof d.Object&&(w.preventExtensions=!0),w},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),this.setNativeFunctionPrototype(this.OBJECT,"toString",d.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",d.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"valueOf",d.Object.prototype.valueOf),g=function(w){return R(this),this instanceof d.Object?String(w)in this.properties:this.hasOwnProperty(w)},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",g),g=function(w){return R(this),this instanceof d.Object?Object.prototype.propertyIsEnumerable.call(this.properties,w):this.propertyIsEnumerable(w)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",g),g=function(w){for(;;){if(w=i.getPrototype(w),!w)return!1;if(w===this)return!0}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",g)},d.prototype.initArray=function(s){var i=this,g;g=function(S){if(i.calledWithNew())var w=this;else var w=i.createArray();var _=arguments[0];if(arguments.length===1&&typeof _=="number")isNaN(d.legalArrayLength(_))&&i.throwException(i.RANGE_ERROR,"Invalid array length: "+_),w.properties.length=_;else{for(var C=0;C<arguments.length;C++)w.properties[C]=arguments[C];w.properties.length=C}return w},this.ARRAY=this.createNativeFunction(g,!0),this.ARRAY_PROTO=this.ARRAY.properties.prototype,this.setProperty(s,"Array",this.ARRAY,d.NONENUMERABLE_DESCRIPTOR),g=function(S){return S&&S.class==="Array"},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ARRAY_PROTO,"length",0,{configurable:!1,enumerable:!1,writable:!0}),this.ARRAY_PROTO.class="Array",this.polyfills_.push("(function() {","function createArrayMethod_(f) {","Object.defineProperty(Array.prototype, f.name,","{configurable: true, writable: true, value: f});","}","createArrayMethod_(","function pop() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","len--;","var x = o[len];","delete o[len];","o.length = len;","return x;","}",");","createArrayMethod_(","function push(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","for (var i = 0; i < arguments.length; i++) {","o[len] = arguments[i];","len++;","}","o.length = len;","return len;","}",");","createArrayMethod_(","function shift() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","var value = o[0];","for (var i = 0; i < len - 1; i++) {","if ((i + 1) in o) {","o[i] = o[i + 1];","} else {","delete o[i];","}","}","delete o[i];","o.length = len - 1;","return value;","}",");","createArrayMethod_(","function unshift(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","len = 0;","}","for (var i = len - 1; i >= 0; i--) {","if (i in o) {","o[i + arguments.length] = o[i];","} else {","delete o[i + arguments.length];","}","}","for (var i = 0; i < arguments.length; i++) {","o[i] = arguments[i];","}","return (o.length = len + arguments.length);","}",");","createArrayMethod_(","function reverse() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 2) {","return o;","}","for (var i = 0; i < len / 2 - 0.5; i++) {","var x = o[i];","var hasX = i in o;","if ((len - i - 1) in o) {","o[i] = o[len - i - 1];","} else {","delete o[i];","}","if (hasX) {","o[len - i - 1] = x;","} else {","delete o[len - i - 1];","}","}","return o;","}",");","createArrayMethod_(","function indexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var n = fromIndex | 0;","if (!len || n >= len) {","return -1;","}","var i = Math.max(n >= 0 ? n : len - Math.abs(n), 0);","while (i < len) {","if (i in o && o[i] === searchElement) {","return i;","}","i++;","}","return -1;","}",");","createArrayMethod_(","function lastIndexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len) {","return -1;","}","var n = len - 1;","if (arguments.length > 1) {","n = fromIndex | 0;","if (n) {","n = (n > 0 || -1) * Math.floor(Math.abs(n));","}","}","var i = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);","while (i >= 0) {","if (i in o && o[i] === searchElement) {","return i;","}","i--;","}","return -1;","}",");","createArrayMethod_(","function slice(start, end) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","start = (start >= 0) ? start : Math.max(0, len + start);","if (typeof end !== 'undefined') {","if (end !== Infinity) {","end |= 0;","}","if (end < 0) {","end = len + end;","} else {","end = Math.min(end, len);","}","} else {","end = len;","}","var size = end - start;","var cloned = new Array(size);","for (var i = 0; i < size; i++) {","if ((start + i) in o) {","cloned[i] = o[start + i];","}","}","return cloned;","}",");","createArrayMethod_(","function splice(start, deleteCount, var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","if (start < 0) {","start = Math.max(len + start, 0);","} else {","start = Math.min(start, len);","}","if (arguments.length < 1) {","deleteCount = len - start;","} else {","deleteCount |= 0;","deleteCount = Math.max(0, Math.min(deleteCount, len - start));","}","var removed = [];","for (var i = start; i < start + deleteCount; i++) {","if (i in o) {","removed.push(o[i]);","} else {","removed.length++;","}","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = start + deleteCount; i < len - deleteCount; i++) {","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = len - deleteCount; i < len; i++) {","delete o[i];","}","len -= deleteCount;","var arl = arguments.length - 2;","for (var i = len - 1; i >= start; i--) {","if (i in o) {","o[i + arl] = o[i];","} else {","delete o[i + arl];","}","}","len += arl;","for (var i = 2; i < arguments.length; i++) {","o[start + i - 2] = arguments[i];","}","o.length = len;","return removed;","}",");","createArrayMethod_(","function concat(var_args) {","if (!this) throw TypeError();","var o = Object(this);","var cloned = [];","for (var i = -1; i < arguments.length; i++) {","var value = (i === -1) ? o : arguments[i];","if (Array.isArray(value)) {","for (var j = 0, l = value.length; j < l; j++) {","if (j in value) {","cloned.push(value[j]);","} else {","cloned.length++;","}","}","} else {","cloned.push(value);","}","}","return cloned;","}",");","createArrayMethod_(","function join(opt_separator) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var sep = typeof opt_separator === 'undefined' ?","',' : ('' + opt_separator);","var str = '';","for (var i = 0; i < len; i++) {","if (i && sep) str += sep;","str += (o[i] === null || o[i] === undefined) ? '' : o[i];","}","return str;","}",");","createArrayMethod_(","function every(callbackfn, thisArg) {","if (!this || typeof callbackfn !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o && !callbackfn.call(t, o[k], k, o)) return false;","k++;","}","return true;","}",");","createArrayMethod_(","function filter(fun, var_args) {","if (this === void 0 || this === null || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o) {","var val = o[i];","if (fun.call(thisArg, val, i, o)) res.push(val);","}","}","return res;","}",");","createArrayMethod_(","function forEach(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o) callback.call(t, o[k], k, o);","k++;","}","}",");","createArrayMethod_(","function map(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","var a = new Array(len);","while (k < len) {","if (k in o) a[k] = callback.call(t, o[k], k, o);","k++;","}","return a;","}",");","createArrayMethod_(","function reduce(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = 0, value;","if (arguments.length === 2) {","value = arguments[1];","} else {","while (k < len && !(k in o)) k++;","if (k >= len) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k++];","}","for (; k < len; k++) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function reduceRight(callback /*, initialValue*/) {","if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in o)) k--;","if (k < 0) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k--];","}","for (; k >= 0; k--) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function some(fun/*, thisArg*/) {","if (!this || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o && fun.call(thisArg, o[i], i, o)) return true;","}","return false;","}",");","createArrayMethod_(","function sort(opt_comp) {","if (!this) throw TypeError();","if (typeof opt_comp !== 'function') {","opt_comp = undefined;","}","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp ? (opt_comp(this[j], this[j + 1]) > 0) :","(String(this[j]) > String(this[j + 1]))) {","var swap = this[j];","var hasSwap = j in this;","if ((j + 1) in this) {","this[j] = this[j + 1];","} else {","delete this[j];","}","if (hasSwap) {","this[j + 1] = swap;","} else {","delete this[j + 1];","}","changes++;","}","}","if (!changes) break;","}","return this;","}",");","createArrayMethod_(","function toLocaleString() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var out = [];","for (var i = 0; i < len; i++) {","out[i] = (o[i] === null || o[i] === undefined) ? '' : o[i].toLocaleString();","}","return out.join(',');","}",");","})();","")},d.prototype.initString=function(s){var i=this,g;g=function(_){return _=arguments.length?d.nativeGlobal.String(_):"",i.calledWithNew()?(this.data=_,this):_},this.STRING=this.createNativeFunction(g,!0),this.setProperty(s,"String",this.STRING,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),d.NONENUMERABLE_DESCRIPTOR);for(var R=["charAt","charCodeAt","concat","indexOf","lastIndexOf","slice","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],S=0;S<R.length;S++)this.setNativeFunctionPrototype(this.STRING,R[S],String.prototype[R[S]]);g=function(_,C,H){C=i.pseudoToNative(C),H=i.pseudoToNative(H);try{return String(this).localeCompare(_,C,H)}catch(Z){i.throwException(i.ERROR,"localeCompare: "+Z.message)}},this.setNativeFunctionPrototype(this.STRING,"localeCompare",g),g=function(_,C,H){var Z=String(this);if(C=C?Number(C):void 0,i.isa(_,i.REGEXP)&&(_=_.data,i.maybeThrowRegExp(_,H),i.REGEXP_MODE===2)){if(d.vm){var ee={string:Z,separator:_,limit:C},Q="string.split(separator, limit)",ne=i.vmCall(Q,ee,_,H);ne!==d.REGEXP_TIMEOUT&&H(i.arrayNativeToPseudo(ne))}else{var re=i.createWorker(),ae=i.regExpTimeout(_,re,H);re.onmessage=function(ye){clearTimeout(ae),H(i.arrayNativeToPseudo(ye.data))},re.postMessage(["split",Z,_,C])}return}var ne=Z.split(_,C);H(i.arrayNativeToPseudo(ne))},this.setAsyncFunctionPrototype(this.STRING,"split",g),g=function(_,C){var H=String(this);if(_=i.isa(_,i.REGEXP)?_.data:new RegExp(_),i.maybeThrowRegExp(_,C),i.REGEXP_MODE===2){if(d.vm){var Z={string:H,regexp:_},ee="string.match(regexp)",ae=i.vmCall(ee,Z,_,C);ae!==d.REGEXP_TIMEOUT&&C(ae&&i.arrayNativeToPseudo(ae))}else{var Q=i.createWorker(),re=i.regExpTimeout(_,Q,C);Q.onmessage=function(ne){clearTimeout(re),C(ne.data&&i.arrayNativeToPseudo(ne.data))},Q.postMessage(["match",H,_])}return}var ae=H.match(_);C(ae&&i.arrayNativeToPseudo(ae))},this.setAsyncFunctionPrototype(this.STRING,"match",g),g=function(_,C){var H=String(this);if(i.isa(_,i.REGEXP)?_=_.data:_=new RegExp(_),i.maybeThrowRegExp(_,C),i.REGEXP_MODE===2){if(d.vm){var Z={string:H,regexp:_},ee="string.search(regexp)",Q=i.vmCall(ee,Z,_,C);Q!==d.REGEXP_TIMEOUT&&C(Q)}else{var re=i.createWorker(),ae=i.regExpTimeout(_,re,C);re.onmessage=function(ne){clearTimeout(ae),C(ne.data)},re.postMessage(["search",H,_])}return}C(H.search(_))},this.setAsyncFunctionPrototype(this.STRING,"search",g),g=function(_,C,H){var Z=String(this);if(C=String(C),i.isa(_,i.REGEXP)&&(_=_.data,i.maybeThrowRegExp(_,H),i.REGEXP_MODE===2)){if(d.vm){var ee={string:Z,substr:_,newSubstr:C},Q="string.replace(substr, newSubstr)",re=i.vmCall(Q,ee,_,H);re!==d.REGEXP_TIMEOUT&&H(re)}else{var ae=i.createWorker(),ne=i.regExpTimeout(_,ae,H);ae.onmessage=function(ye){clearTimeout(ne),H(ye.data)},ae.postMessage(["replace",Z,_,C])}return}H(Z.replace(_,C))},this.setAsyncFunctionPrototype(this.STRING,"replace",g),this.polyfills_.push("(function() {","var replace_ = String.prototype.replace;","String.prototype.replace = function replace(substr, newSubstr) {","if (typeof newSubstr !== 'function') {","return replace_.call(this, substr, newSubstr);","}","var str = this;","if (substr instanceof RegExp) {","var subs = [];","var m = substr.exec(str);","while (m) {","m.push(m.index, str);","var inject = newSubstr.apply(null, m);","subs.push([m.index, m[0].length, inject]);","m = substr.global ? substr.exec(str) : null;","}","for (var i = subs.length - 1; i >= 0; i--) {","str = str.substring(0, subs[i][0]) + subs[i][2] + str.substring(subs[i][0] + subs[i][1]);","}","} else {","var i = str.indexOf(substr);","if (i !== -1) {","var inject = newSubstr(str.substr(i, substr.length), i, str);","str = str.substring(0, i) + inject + str.substring(i + substr.length);","}","}","return str;","};","})();","")},d.prototype.initBoolean=function(s){var i=this,g;g=function(S){return S=d.nativeGlobal.Boolean(S),i.calledWithNew()?(this.data=S,this):S},this.BOOLEAN=this.createNativeFunction(g,!0),this.setProperty(s,"Boolean",this.BOOLEAN,d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initNumber=function(s){var i=this,g;g=function(_){return _=arguments.length?d.nativeGlobal.Number(_):0,i.calledWithNew()?(this.data=_,this):_},this.NUMBER=this.createNativeFunction(g,!0),this.setProperty(s,"Number",this.NUMBER,d.NONENUMERABLE_DESCRIPTOR);for(var R=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],S=0;S<R.length;S++)this.setProperty(this.NUMBER,R[S],Number[R[S]],d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);g=function(_){try{return Number(this).toExponential(_)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",g),g=function(_){try{return Number(this).toFixed(_)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",g),g=function(_){try{return Number(this).toPrecision(_)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",g),g=function(_){try{return Number(this).toString(_)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toString",g),g=function(_,C){_=_?i.pseudoToNative(_):void 0,C=C?i.pseudoToNative(C):void 0;try{return Number(this).toLocaleString(_,C)}catch(H){i.throwException(i.ERROR,"toLocaleString: "+H.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",g)},d.prototype.initDate=function(s){var i=this,g;g=function(_,C){if(!i.calledWithNew())return d.nativeGlobal.Date();var H=[null].concat(Array.from(arguments));return this.data=new(Function.prototype.bind.apply(d.nativeGlobal.Date,H)),this},this.DATE=this.createNativeFunction(g,!0),this.DATE_PROTO=this.DATE.properties.prototype,this.setProperty(s,"Date",this.DATE,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),d.NONENUMERABLE_DESCRIPTOR);for(var R=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toISOString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],S=0;S<R.length;S++)g=function(w){return function(_){var C=this.data;C instanceof Date||i.throwException(i.TYPE_ERROR,w+" not called on a Date");for(var H=[],Z=0;Z<arguments.length;Z++)H[Z]=i.pseudoToNative(arguments[Z]);return C[w].apply(C,H)}}(R[S]),this.setNativeFunctionPrototype(this.DATE,R[S],g)},d.prototype.initRegExp=function(s){var i=this,g;g=function(S,w){if(i.calledWithNew())var _=this;else{if(w===void 0&&i.isa(S,i.REGEXP))return S;var _=i.createObjectProto(i.REGEXP_PROTO)}S=S===void 0?"":String(S),w=w?String(w):"",/^[gmi]*$/.test(w)||i.throwException(i.SYNTAX_ERROR,"Invalid regexp flag: "+w);try{var C=new d.nativeGlobal.RegExp(S,w)}catch(H){i.throwException(i.SYNTAX_ERROR,H.message)}return i.populateRegExp(_,C),_},this.REGEXP=this.createNativeFunction(g,!0),this.REGEXP_PROTO=this.REGEXP.properties.prototype,this.setProperty(s,"RegExp",this.REGEXP,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"global",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source","(?:)",d.READONLY_NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("Object.defineProperty(RegExp.prototype, 'test',","{configurable: true, writable: true, value:","function test(str) {","return !!this.exec(str);","}","});"),g=function(S,w){var _=this.data;if(S=String(S),_.lastIndex=Number(i.getProperty(this,"lastIndex")),i.maybeThrowRegExp(_,w),i.REGEXP_MODE===2){if(d.vm){var C={string:S,regexp:_},H="regexp.exec(string)",re=i.vmCall(H,C,_,w);re!==d.REGEXP_TIMEOUT&&(i.setProperty(this,"lastIndex",_.lastIndex),w(ae(re)))}else{var Z=i.createWorker(),ee=i.regExpTimeout(_,Z,w),Q=this;Z.onmessage=function(ne){clearTimeout(ee),i.setProperty(Q,"lastIndex",ne.data[1]),w(ae(ne.data[0]))},Z.postMessage(["exec",_,_.lastIndex,S])}return}var re=_.exec(S);i.setProperty(this,"lastIndex",_.lastIndex),w(ae(re));function ae(ne){if(ne){var ye=i.arrayNativeToPseudo(ne);return i.setProperty(ye,"index",ne.index),i.setProperty(ye,"input",ne.input),ye}return null}},this.setAsyncFunctionPrototype(this.REGEXP,"exec",g)},d.prototype.initError=function(s){var i=this;this.ERROR=this.createNativeFunction(function(S){if(i.calledWithNew())var w=this;else var w=i.createObject(i.ERROR);return i.populateError(w,S),w},!0),this.setProperty(s,"Error",this.ERROR,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"message","",d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name","Error",d.NONENUMERABLE_DESCRIPTOR);var g=function(R){var S=i.createNativeFunction(function(w){if(i.calledWithNew())var _=this;else var _=i.createObject(S);return i.populateError(_,w),_},!0);return i.setProperty(S,"prototype",i.createObject(i.ERROR),d.NONENUMERABLE_DESCRIPTOR),i.setProperty(S.properties.prototype,"name",R,d.NONENUMERABLE_DESCRIPTOR),i.setProperty(s,R,S,d.NONENUMERABLE_DESCRIPTOR),S};this.EVAL_ERROR=g("EvalError"),this.RANGE_ERROR=g("RangeError"),this.REFERENCE_ERROR=g("ReferenceError"),this.SYNTAX_ERROR=g("SyntaxError"),this.TYPE_ERROR=g("TypeError"),this.URI_ERROR=g("URIError")},d.prototype.initMath=function(s){var i=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(s,"Math",i,d.NONENUMERABLE_DESCRIPTOR);for(var g=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],R=0;R<g.length;R++)this.setProperty(i,g[R],Math[g[R]],d.READONLY_NONENUMERABLE_DESCRIPTOR);for(var S=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"],R=0;R<S.length;R++)this.setProperty(i,S[R],this.createNativeFunction(Math[S[R]],!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initJSON=function(s){var i,g=this,R=g.createObjectProto(this.OBJECT_PROTO);this.setProperty(s,"JSON",R,d.NONENUMERABLE_DESCRIPTOR),i=function(w){try{var _=JSON.parse(String(w))}catch(C){g.throwException(g.SYNTAX_ERROR,C.message)}return g.nativeToPseudo(_)},this.setProperty(R,"parse",this.createNativeFunction(i,!1)),i=function(w,_,C){_&&_.class==="Function"?g.throwException(g.TYPE_ERROR,"Function replacer on JSON.stringify not supported"):_&&_.class==="Array"?(_=g.arrayPseudoToNative(_),_=_.filter(function(ee){return typeof ee=="string"||typeof ee=="number"})):_=null,typeof C!="string"&&typeof C!="number"&&(C=void 0);var H=g.pseudoToNative(w);try{var Z=JSON.stringify(H,_,C)}catch(ee){g.throwException(g.TYPE_ERROR,ee.message)}return Z},this.setProperty(R,"stringify",this.createNativeFunction(i,!1))},d.prototype.isa=function(s,i){if(s==null||!i)return!1;var g=i.properties.prototype;if(s===g)return!0;for(s=this.getPrototype(s);s;){if(s===g)return!0;s=s.proto}return!1},d.prototype.populateRegExp=function(s,i){s.data=new RegExp(i.source,i.flags),this.setProperty(s,"lastIndex",i.lastIndex,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"source",i.source,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"global",i.global,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"ignoreCase",i.ignoreCase,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"multiline",i.multiline,d.READONLY_NONENUMERABLE_DESCRIPTOR)},d.prototype.populateError=function(s,i){i&&this.setProperty(s,"message",String(i),d.NONENUMERABLE_DESCRIPTOR);for(var g=[],R=this.stateStack.length-1;R>=0;R--){var S=this.stateStack[R],w=S.node;if(w.type==="CallExpression"){var _=S.func_;_&&g.length&&(g[g.length-1].datumName=this.getProperty(_,"name"))}w.loc&&(!g.length||w.type==="CallExpression")&&g.push({datumLoc:w.loc})}for(var C=String(this.getProperty(s,"name")),H=String(this.getProperty(s,"message")),Z=C+": "+H+`
`,R=0;R<g.length;R++){var ee=g[R].datumLoc,Q=g[R].datumName,re=ee.source+":"+ee.start.line+":"+ee.start.column;Q?Z+="  at "+Q+" ("+re+`)
`:Z+="  at "+re+`
`}this.setProperty(s,"stack",Z.trim(),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.createWorker=function(){var s=this.createWorker.blob_;return s||(s=new Blob([d.WORKER_CODE.join(`
`)],{type:"application/javascript"}),this.createWorker.blob_=s),new Worker(URL.createObjectURL(s))},d.prototype.vmCall=function(s,i,g,R){var S={timeout:this.REGEXP_THREAD_TIMEOUT};try{return d.vm.runInNewContext(s,i,S)}catch{R(null),this.throwException(this.ERROR,"RegExp Timeout: "+g)}return d.REGEXP_TIMEOUT},d.prototype.maybeThrowRegExp=function(s,i){var g;if(this.REGEXP_MODE===0)g=!1;else if(this.REGEXP_MODE===1)g=!0;else if(d.vm)g=!0;else if(typeof Worker=="function"&&typeof URL=="function")g=!0;else{try{d.vm=G("vm")}catch{}g=!!d.vm}g||(i(null),this.throwException(this.ERROR,"Regular expressions not supported: "+s))},d.prototype.regExpTimeout=function(s,i,g){var R=this;return setTimeout(function(){i.terminate(),g(null);try{R.throwException(R.ERROR,"RegExp Timeout: "+s)}catch{}},this.REGEXP_THREAD_TIMEOUT)},d.prototype.createObject=function(s){return this.createObjectProto(s&&s.properties.prototype)},d.prototype.createObjectProto=function(s){if(typeof s!="object")throw Error("Non object prototype");var i=new d.Object(s);return this.isa(i,this.ERROR)&&(i.class="Error"),i},d.prototype.createArray=function(){var s=this.createObjectProto(this.ARRAY_PROTO);return this.setProperty(s,"length",0,{configurable:!1,enumerable:!1,writable:!0}),s.class="Array",s},d.prototype.createFunctionBase_=function(s,i){var g=this.createObjectProto(this.FUNCTION_PROTO);if(i){var R=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(g,"prototype",R,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(R,"constructor",g,d.NONENUMERABLE_DESCRIPTOR)}else g.illegalConstructor=!0;return this.setProperty(g,"length",s,d.READONLY_NONENUMERABLE_DESCRIPTOR),g.class="Function",g},d.prototype.createFunction=function(s,i,g){var R=this.createFunctionBase_(s.params.length,!0);R.parentScope=i,R.node=s;var S=s.id?String(s.id.name):g||"";return this.setProperty(R,"name",S,d.READONLY_NONENUMERABLE_DESCRIPTOR),R},d.prototype.createNativeFunction=function(s,i){var g=this.createFunctionBase_(s.length,i);return g.nativeFunc=s,s.id=this.functionCounter_++,this.setProperty(g,"name",s.name,d.READONLY_NONENUMERABLE_DESCRIPTOR),g},d.prototype.createAsyncFunction=function(s){var i=this.createFunctionBase_(s.length,!0);return i.asyncFunc=s,s.id=this.functionCounter_++,this.setProperty(i,"name",s.name,d.READONLY_NONENUMERABLE_DESCRIPTOR),i},d.prototype.nativeToPseudo=function(s){if(s instanceof d.Object)throw Error("Object is already pseudo");if(s==null||s===!0||s===!1||typeof s=="string"||typeof s=="number")return s;if(s instanceof RegExp){var i=this.createObjectProto(this.REGEXP_PROTO);return this.populateRegExp(i,s),i}if(s instanceof Date){var g=this.createObjectProto(this.DATE_PROTO);return g.data=new Date(s.valueOf()),g}if(typeof s=="function"){var R=this,S=function(){var ee=Array.prototype.slice.call(arguments).map(function(re){return R.pseudoToNative(re)}),Q=s.apply(R,ee);return R.nativeToPseudo(Q)},w=Object.getOwnPropertyDescriptor(s,"prototype");return this.createNativeFunction(S,!!w)}if(Array.isArray(s)){for(var _=this.createArray(),C=0;C<s.length;C++)C in s&&this.setProperty(_,C,this.nativeToPseudo(s[C]));return _}var H=this.createObjectProto(this.OBJECT_PROTO);for(var Z in s)this.setProperty(H,Z,this.nativeToPseudo(s[Z]));return H},d.prototype.pseudoToNative=function(s,i){if(typeof s!="object"&&typeof s!="function"||s===null)return s;if(!(s instanceof d.Object))throw Error("Object is not pseudo");if(this.isa(s,this.REGEXP)){var g=new RegExp(s.data.source,s.data.flags);return g.lastIndex=s.data.lastIndex,g}if(this.isa(s,this.DATE))return new Date(s.data.valueOf());var R=i||{pseudo:[],native:[]},S=R.pseudo.indexOf(s);if(S!==-1)return R.native[S];R.pseudo.push(s);var w;if(this.isa(s,this.ARRAY)){w=[],R.native.push(w);for(var _=this.getProperty(s,"length"),C=0;C<_;C++)this.hasProperty(s,C)&&(w[C]=this.pseudoToNative(this.getProperty(s,C),R))}else{w={},R.native.push(w);var H;for(var Z in s.properties)H=this.pseudoToNative(s.properties[Z],R),Object.defineProperty(w,Z,{value:H,writable:!0,enumerable:!0,configurable:!0})}return R.pseudo.pop(),R.native.pop(),w},d.prototype.arrayNativeToPseudo=function(s){for(var i=this.createArray(),g=Object.getOwnPropertyNames(s),R=0;R<g.length;R++)this.setProperty(i,g[R],s[g[R]]);return i},d.prototype.arrayPseudoToNative=function(s){var i=[];for(var g in s.properties)i[g]=this.getProperty(s,g);return i.length=d.legalArrayLength(this.getProperty(s,"length"))||0,i},d.prototype.getPrototype=function(s){switch(typeof s){case"number":return this.NUMBER.properties.prototype;case"boolean":return this.BOOLEAN.properties.prototype;case"string":return this.STRING.properties.prototype}return s?s.proto:null},d.prototype.getProperty=function(s,i){if(this.getterStep_)throw Error("Getter not supported in that context");if(i=String(i),s==null&&this.throwException(this.TYPE_ERROR,"Cannot read property '"+i+"' of "+s),typeof s=="object"&&!(s instanceof d.Object))throw TypeError("Expecting native value or pseudo object");if(i==="length"){if(this.isa(s,this.STRING))return String(s).length}else if(i.charCodeAt(0)<64&&this.isa(s,this.STRING)){var g=d.legalArrayIndex(i);if(!isNaN(g)&&g<String(s).length)return String(s)[g]}do if(s.properties&&i in s.properties){var R=s.getter[i];return R?(this.getterStep_=!0,R):s.properties[i]}while(s=this.getPrototype(s))},d.prototype.hasProperty=function(s,i){if(!(s instanceof d.Object))throw TypeError("Primitive data type has no properties");if(i=String(i),i==="length"&&this.isa(s,this.STRING))return!0;if(this.isa(s,this.STRING)){var g=d.legalArrayIndex(i);if(!isNaN(g)&&g<String(s).length)return!0}do if(s.properties&&i in s.properties)return!0;while(s=this.getPrototype(s));return!1},d.prototype.setProperty=function(s,i,g,R){if(this.setterStep_)throw Error("Setter not supported in that context");if(i=String(i),s==null&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+i+"' of "+s),typeof s=="object"&&!(s instanceof d.Object))throw TypeError("Expecting native value or pseudo object");R&&("get"in R||"set"in R)&&("value"in R||"writable"in R)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var S=!this.stateStack||this.getScope().strict;if(!(s instanceof d.Object)){S&&this.throwException(this.TYPE_ERROR,"Can't create property '"+i+"' on '"+s+"'");return}if(this.isa(s,this.STRING)){var w=d.legalArrayIndex(i);if(i==="length"||!isNaN(w)&&w<String(s).length){S&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+i+"' of String '"+s.data+"'");return}}if(s.class==="Array"){var _=s.properties.length,C;if(i==="length"){if(R){if(!("value"in R))return;g=R.value}if(g=d.legalArrayLength(g),isNaN(g)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),g<_)for(C in s.properties)C=d.legalArrayIndex(C),!isNaN(C)&&g<=C&&delete s.properties[C]}else isNaN(C=d.legalArrayIndex(i))||(s.properties.length=Math.max(_,C+1))}if(s.preventExtensions&&!(i in s.properties)){S&&this.throwException(this.TYPE_ERROR,"Can't add property '"+i+"', object is not extensible");return}if(R){var H={};"get"in R&&R.get&&(s.getter[i]=R.get,H.get=this.setProperty.placeholderGet_),"set"in R&&R.set&&(s.setter[i]=R.set,H.set=this.setProperty.placeholderSet_),"configurable"in R&&(H.configurable=R.configurable),"enumerable"in R&&(H.enumerable=R.enumerable),"writable"in R&&(H.writable=R.writable,delete s.getter[i],delete s.setter[i]),"value"in R?(H.value=R.value,delete s.getter[i],delete s.setter[i]):g!==d.VALUE_IN_DESCRIPTOR&&(H.value=g,delete s.getter[i],delete s.setter[i]);try{Object.defineProperty(s.properties,i,H)}catch{this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+i)}"get"in R&&!R.get&&delete s.getter[i],"set"in R&&!R.set&&delete s.setter[i]}else{if(g===d.VALUE_IN_DESCRIPTOR)throw ReferenceError("Value not specified");for(var Z=s;!(i in Z.properties);)if(Z=this.getPrototype(Z),!Z){Z=s;break}if(Z.setter&&Z.setter[i])return this.setterStep_=!0,Z.setter[i];if(Z.getter&&Z.getter[i])S&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+i+"' of object '"+s+"' which only has a getter");else try{s.properties[i]=g}catch{S&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+i+"' of object '"+s+"'")}}},d.prototype.setProperty.placeholderGet_=function(){throw Error("Placeholder getter")},d.prototype.setProperty.placeholderSet_=function(){throw Error("Placeholder setter")},d.prototype.setNativeFunctionPrototype=function(s,i,g){this.setProperty(s.properties.prototype,i,this.createNativeFunction(g,!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.setAsyncFunctionPrototype=function(s,i,g){this.setProperty(s.properties.prototype,i,this.createAsyncFunction(g),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.getScope=function(){var s=this.stateStack[this.stateStack.length-1].scope;if(!s)throw Error("No scope found");return s},d.prototype.createScope=function(s,i){var g=!1;if(i&&i.strict)g=!0;else{var R=s.body&&s.body[0];R&&R.expression&&R.expression.type==="Literal"&&R.expression.value==="use strict"&&(g=!0)}var S=this.createObjectProto(null),w=new d.Scope(i,g,S);return i||this.initGlobal(w.object),this.populateScope_(s,w),w},d.prototype.createSpecialScope=function(s,i){if(!s)throw Error("parentScope required");var g=i||this.createObjectProto(null);return new d.Scope(s,s.strict,g)},d.prototype.getValueFromScope=function(s){for(var i=this.getScope();i&&i!==this.globalScope;){if(s in i.object.properties)return i.object.properties[s];i=i.parentScope}if(i===this.globalScope&&this.hasProperty(i.object,s))return this.getProperty(i.object,s);var g=this.stateStack[this.stateStack.length-1].node;g.type==="UnaryExpression"&&g.operator==="typeof"||this.throwException(this.REFERENCE_ERROR,s+" is not defined")},d.prototype.setValueToScope=function(s,i){for(var g=this.getScope(),R=g.strict;g&&g!==this.globalScope;){if(s in g.object.properties){try{g.object.properties[s]=i}catch{R&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only variable '"+s+"'")}return}g=g.parentScope}if(g===this.globalScope&&(!R||this.hasProperty(g.object,s)))return this.setProperty(g.object,s,i);this.throwException(this.REFERENCE_ERROR,s+" is not defined")},d.prototype.populateScope_=function(s,i){var g;if(s.variableCache_)g=s.variableCache_;else{switch(g=Object.create(null),s.type){case"VariableDeclaration":for(var R=0;R<s.declarations.length;R++)g[s.declarations[R].id.name]=!0;break;case"FunctionDeclaration":g[s.id.name]=s;break;case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"Program":case"SwitchCase":case"SwitchStatement":case"TryStatement":case"WithStatement":case"WhileStatement":var S=s.constructor;for(var w in s)if(w!=="loc"){var _=s[w];if(_&&typeof _=="object"){var C;if(Array.isArray(_)){for(var R=0;R<_.length;R++)if(_[R]&&_[R].constructor===S){C=this.populateScope_(_[R],i);for(var w in C)g[w]=C[w]}}else if(_.constructor===S){C=this.populateScope_(_,i);for(var w in C)g[w]=C[w]}}}}s.variableCache_=g}for(var w in g)g[w]===!0?this.setProperty(i.object,w,void 0,d.VARIABLE_DESCRIPTOR):this.setProperty(i.object,w,this.createFunction(g[w],i),d.VARIABLE_DESCRIPTOR);return g},d.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor},d.prototype.getValue=function(s){return s[0]===d.SCOPE_REFERENCE?this.getValueFromScope(s[1]):this.getProperty(s[0],s[1])},d.prototype.setValue=function(s,i){return s[0]===d.SCOPE_REFERENCE?this.setValueToScope(s[1],i):this.setProperty(s[0],s[1],i)},d.prototype.throwException=function(s,i){if(!this.globalScope)throw i===void 0?s:i;if(i===void 0||!(s instanceof d.Object))var g=s;else{var g=this.createObject(s);this.populateError(g,i)}throw this.unwind(d.Completion.THROW,g,void 0),d.STEP_ERROR},d.prototype.unwind=function(s,i,g){if(s===d.Completion.NORMAL)throw TypeError("Should not unwind for NORMAL completions");e:for(var R=this.stateStack;R.length>0;R.pop()){var S=R[R.length-1];switch(S.node.type){case"TryStatement":S.cv={type:s,value:i,label:g};return;case"CallExpression":case"NewExpression":if(s===d.Completion.RETURN){S.value=i;return}else if(s!==d.Completion.THROW)throw Error("Unsyntactic break/continue not rejected by Acorn");break;case"Program":S.done=!0;break e}if(s===d.Completion.BREAK){if(g?S.labels&&S.labels.indexOf(g)!==-1:S.isLoop||S.isSwitch){R.pop();return}}else if(s===d.Completion.CONTINUE&&(g?S.labels&&S.labels.indexOf(g)!==-1:S.isLoop))return}var w;if(this.isa(i,this.ERROR)){var _={EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError},C=String(this.getProperty(i,"name")),H=this.getProperty(i,"message").valueOf(),Z=_[C]||Error;w=Z(H),w.stack=String(this.getProperty(i,"stack"))}else w=String(i);throw this.value=w,w},d.prototype.nodeSummary=function(s){switch(s.type){case"ArrayExpression":return"[...]";case"BinaryExpression":case"LogicalExpression":return this.nodeSummary(s.left)+" "+s.operator+" "+this.nodeSummary(s.right);case"CallExpression":return this.nodeSummary(s.callee)+"(...)";case"ConditionalExpression":return this.nodeSummary(s.test)+" ? "+this.nodeSummary(s.consequent)+" : "+this.nodeSummary(s.alternate);case"Identifier":return s.name;case"Literal":return s.raw;case"MemberExpression":var i=this.nodeSummary(s.object),g=this.nodeSummary(s.property);return s.computed?i+"["+g+"]":i+"."+g;case"NewExpression":return"new "+this.nodeSummary(s.callee)+"(...)";case"ObjectExpression":return"{...}";case"ThisExpression":return"this";case"UnaryExpression":return s.operator+" "+this.nodeSummary(s.argument);case"UpdateExpression":var R=this.nodeSummary(s.argument);return s.prefix?s.operator+R:R+s.operator}return"???"},d.prototype.createTask_=function(s,i){var g=this.stateStack[this.stateStack.length-1],R=Array.from(i),S=R.shift(),w=Math.max(Number(R.shift()||0),0),_=this.newNode(),C,H,Z;if(S instanceof d.Object&&S.class==="Function")H=S,_.type="CallExpression",C=g.scope;else{try{Z=this.parse_(String(S),"taskCode"+this.taskCodeNumber_++)}catch(ne){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+ne.message)}_.type="EvalProgram_",_.body=Z.body;var ee=g.node.arguments[0],Q=ee?ee.start:void 0,re=ee?ee.end:void 0;d.stripLocations_(_,Q,re),C=this.globalScope,R.length=0}var ae=new d.Task(H,R,C,_,s?w:-1);return this.scheduleTask_(ae,w),ae.pid},d.prototype.scheduleTask_=function(s,i){s.time=Date.now()+i,this.tasks.push(s),this.tasks.sort(function(g,R){return g.time-R.time})},d.prototype.deleteTask_=function(s){for(var i=0;i<this.tasks.length;i++)if(this.tasks[i].pid==s){this.tasks.splice(i,1);break}},d.prototype.nextTask_=function(){var s=this.tasks[0];if(!s||s.time>Date.now())return null;this.tasks.shift(),s.interval>=0&&this.scheduleTask_(s,s.interval);var i=new d.State(s.node,s.scope);return s.functionRef&&(i.doneCallee_=2,i.funcThis_=this.globalObject,i.func_=s.functionRef,i.doneArgs_=!0,i.arguments_=s.argsArray),i},d.prototype.createGetter_=function(s,i){if(!this.getterStep_)throw Error("Unexpected call to createGetter");this.getterStep_=!1;var g=Array.isArray(i)?i[0]:i,R=this.newNode();R.type="CallExpression";var S=new d.State(R,this.stateStack[this.stateStack.length-1].scope);return S.doneCallee_=2,S.funcThis_=g,S.func_=s,S.doneArgs_=!0,S.arguments_=[],S},d.prototype.createSetter_=function(s,i,g){if(!this.setterStep_)throw Error("Unexpected call to createSetter");this.setterStep_=!1;var R=Array.isArray(i)?i[0]:this.globalObject,S=this.newNode();S.type="CallExpression";var w=new d.State(S,this.stateStack[this.stateStack.length-1].scope);return w.doneCallee_=2,w.funcThis_=R,w.func_=s,w.doneArgs_=!0,w.arguments_=[g],w},d.prototype.boxThis_=function(s){if(s==null)return this.globalObject;if(!(s instanceof d.Object)){var i=this.createObjectProto(this.getPrototype(s));return i.data=s,i}return s},d.prototype.getGlobalScope=function(){return this.globalScope},d.prototype.getStateStack=function(){return this.stateStack},d.prototype.setStateStack=function(s){this.stateStack=s},d.Value,d.State=function(s,i){this.node=s,this.scope=i},d.Scope=function(s,i,g){this.parentScope=s,this.strict=i,this.object=g},d.Object=function(s){this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.proto=s},d.Object.prototype.proto=null,d.Object.prototype.class="Object",d.Object.prototype.data=null,d.Object.prototype.toString=function(){if(!d.currentInterpreter_)return"[object Interpreter.Object]";if(!(this instanceof d.Object))return String(this);if(this.class==="Array"){var s=d.toStringCycles_;s.push(this);try{var i=[],g=this.properties.length,R=!1;g>1024&&(g=1e3,R=!0);for(var S=0;S<g;S++){var w=this.properties[S];i[S]=w instanceof d.Object&&s.indexOf(w)!==-1?"...":w}R&&i.push("...")}finally{s.pop()}return i.join(",")}if(this.class==="Error"){var s=d.toStringCycles_;if(s.indexOf(this)!==-1)return"[object Error]";var _,C,H=this;do if("name"in H.properties){_=H.properties.name;break}while(H=H.proto);H=this;do if("message"in H.properties){C=H.properties.message;break}while(H=H.proto);s.push(this);try{_=_&&String(_),C=C&&String(C)}finally{s.pop()}return C?_+": "+C:String(_)}return this.data!==null?String(this.data):"[object "+this.class+"]"},d.Object.prototype.valueOf=function(){return d.currentInterpreter_?this.data===void 0||this.data===null||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data:this},d.Task=function(s,i,g,R,S){this.functionRef=s,this.argsArray=i,this.scope=g,this.node=R,this.interval=S,this.pid=++d.Task.pid,this.time=0},d.Task.pid=0,d.prototype.stepArrayExpression=function(s,i,g){var R=g.elements,S=i.n_||0;for(i.array_?(this.setProperty(i.array_,S,i.value),S++):(i.array_=this.createArray(),i.array_.properties.length=R.length);S<R.length;){if(R[S])return i.n_=S,new d.State(R[S],i.scope);S++}s.pop(),s[s.length-1].value=i.array_},d.prototype.stepAssignmentExpression=function(s,i,g){if(!i.doneLeft_){i.doneLeft_=!0;var R=new d.State(g.left,i.scope);return R.components=!0,R}if(!i.doneRight_){if(i.leftReference_||(i.leftReference_=i.value),i.doneGetter_&&(i.leftValue_=i.value),!i.doneGetter_&&g.operator!=="="){var S=this.getValue(i.leftReference_);if(i.leftValue_=S,this.getterStep_){i.doneGetter_=!0;var w=S;return this.createGetter_(w,i.leftReference_)}}return i.doneRight_=!0,g.operator==="="&&g.left.type==="Identifier"&&(i.destinationName=g.left.name),new d.State(g.right,i.scope)}if(i.doneSetter_){s.pop(),s[s.length-1].value=i.setterValue_;return}var _=i.leftValue_,C=i.value;switch(g.operator){case"=":_=C;break;case"+=":_+=C;break;case"-=":_-=C;break;case"*=":_*=C;break;case"/=":_/=C;break;case"%=":_%=C;break;case"<<=":_<<=C;break;case">>=":_>>=C;break;case">>>=":_>>>=C;break;case"&=":_&=C;break;case"^=":_^=C;break;case"|=":_|=C;break;default:throw SyntaxError("Unknown assignment expression: "+g.operator)}var H=this.setValue(i.leftReference_,_);if(H)return i.doneSetter_=!0,i.setterValue_=_,this.createSetter_(H,i.leftReference_,_);s.pop(),s[s.length-1].value=_},d.prototype.stepBinaryExpression=function(s,i,g){if(!i.doneLeft_)return i.doneLeft_=!0,new d.State(g.left,i.scope);if(!i.doneRight_)return i.doneRight_=!0,i.leftValue_=i.value,new d.State(g.right,i.scope);s.pop();var R=i.leftValue_,S=i.value,w;switch(g.operator){case"==":w=R==S;break;case"!=":w=R!=S;break;case"===":w=R===S;break;case"!==":w=R!==S;break;case">":w=R>S;break;case">=":w=R>=S;break;case"<":w=R<S;break;case"<=":w=R<=S;break;case"+":w=R+S;break;case"-":w=R-S;break;case"*":w=R*S;break;case"/":w=R/S;break;case"%":w=R%S;break;case"&":w=R&S;break;case"|":w=R|S;break;case"^":w=R^S;break;case"<<":w=R<<S;break;case">>":w=R>>S;break;case">>>":w=R>>>S;break;case"in":S instanceof d.Object||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+S+"'"),w=this.hasProperty(S,R);break;case"instanceof":this.isa(S,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"'instanceof' expects an object, not '"+S+"'"),w=R instanceof d.Object?this.isa(R,S):!1;break;default:throw SyntaxError("Unknown binary operator: "+g.operator)}s[s.length-1].value=w},d.prototype.stepBlockStatement=function(s,i,g){var R=i.n_||0,S=g.body[R];if(S)return i.n_=R+1,new d.State(S,i.scope);s.pop()},d.prototype.stepBreakStatement=function(s,i,g){var R=g.label&&g.label.name;this.unwind(d.Completion.BREAK,void 0,R)},d.prototype.evalCodeNumber_=0,d.prototype.stepCallExpression=function(s,i,g){if(!i.doneCallee_){i.doneCallee_=1;var R=new d.State(g.callee,i.scope);return R.components=!0,R}if(i.doneCallee_===1){i.doneCallee_=2;var S=i.value;if(Array.isArray(S)){if(i.func_=this.getValue(S),S[0]===d.SCOPE_REFERENCE?i.directEval_=S[1]==="eval":i.funcThis_=S[0],S=i.func_,this.getterStep_)return i.doneCallee_=1,this.createGetter_(S,i.value)}else i.func_=S;i.arguments_=[],i.n_=0}var S=i.func_;if(!i.doneArgs_){if(i.n_!==0&&i.arguments_.push(i.value),g.arguments[i.n_])return new d.State(g.arguments[i.n_++],i.scope);if(g.type==="NewExpression"){if((!(S instanceof d.Object)||S.illegalConstructor)&&this.throwException(this.TYPE_ERROR,this.nodeSummary(g.callee)+" is not a constructor"),S===this.ARRAY)i.funcThis_=this.createArray();else{var w=S.properties.prototype;(typeof w!="object"||w===null)&&(w=this.OBJECT_PROTO),i.funcThis_=this.createObjectProto(w)}i.isConstructor=!0}i.doneArgs_=!0}if(i.doneExec_)s.pop(),i.isConstructor&&typeof i.value!="object"?s[s.length-1].value=i.funcThis_:s[s.length-1].value=i.value;else{i.doneExec_=!0,S instanceof d.Object||this.throwException(this.TYPE_ERROR,this.nodeSummary(g.callee)+" is not a function");var _=S.node;if(_){for(var C=this.createScope(_.body,S.parentScope),H=this.createArray(),Z=0;Z<i.arguments_.length;Z++)this.setProperty(H,Z,i.arguments_[Z]);this.setProperty(C.object,"arguments",H);for(var Z=0;Z<_.params.length;Z++){var ee=_.params[Z].name,Q=i.arguments_.length>Z?i.arguments_[Z]:void 0;this.setProperty(C.object,ee,Q)}return C.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),this.setProperty(C.object,"this",i.funcThis_,d.READONLY_DESCRIPTOR),i.value=void 0,new d.State(_.body,C)}else if(S.eval){var re=i.arguments_[0];if(typeof re!="string")i.value=re;else{try{var ae=this.parse_(String(re),"eval"+this.evalCodeNumber_++)}catch(ue){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+ue.message)}var ne=this.newNode();ne.type="EvalProgram_",ne.body=ae.body,d.stripLocations_(ne,g.start,g.end);var C=i.directEval_?i.scope:this.globalScope;return C.strict?C=this.createScope(ae,C):this.populateScope_(ae,C),this.value=void 0,new d.State(ne,C)}}else if(S.nativeFunc)i.scope.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),i.value=S.nativeFunc.apply(i.funcThis_,i.arguments_);else if(S.asyncFunc){var ye=this,Ce=function(Oe){i.value=Oe,ye.paused_=!1},_e=S.asyncFunc.length-1,ze=i.arguments_.concat(new Array(_e)).slice(0,_e);ze.push(Ce),this.paused_=!0,i.scope.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),S.asyncFunc.apply(i.funcThis_,ze);return}else this.throwException(this.TYPE_ERROR,this.nodeSummary(g.callee)+" is not callable")}},d.prototype.stepConditionalExpression=function(s,i,g){var R=i.mode_||0;if(R===0)return i.mode_=1,new d.State(g.test,i.scope);if(R===1){i.mode_=2;var S=!!i.value;if(S&&g.consequent)return new d.State(g.consequent,i.scope);if(!S&&g.alternate)return new d.State(g.alternate,i.scope);this.value=void 0}s.pop(),g.type==="ConditionalExpression"&&(s[s.length-1].value=i.value)},d.prototype.stepContinueStatement=function(s,i,g){var R=g.label&&g.label.name;this.unwind(d.Completion.CONTINUE,void 0,R)},d.prototype.stepDebuggerStatement=function(s,i,g){s.pop()},d.prototype.stepDoWhileStatement=function(s,i,g){if(g.type==="DoWhileStatement"&&i.test_===void 0&&(i.value=!0,i.test_=!0),!i.test_)return i.test_=!0,new d.State(g.test,i.scope);if(!i.value)s.pop();else if(g.body)return i.test_=!1,i.isLoop=!0,new d.State(g.body,i.scope)},d.prototype.stepEmptyStatement=function(s,i,g){s.pop()},d.prototype.stepEvalProgram_=function(s,i,g){var R=i.n_||0,S=g.body[R];if(S)return i.n_=R+1,new d.State(S,i.scope);s.pop(),s[s.length-1].value=this.value},d.prototype.stepExpressionStatement=function(s,i,g){if(!i.done_)return this.value=void 0,i.done_=!0,new d.State(g.expression,i.scope);s.pop(),this.value=i.value},d.prototype.stepForInStatement=function(s,i,g){if(!i.doneInit_&&(i.doneInit_=!0,g.left.declarations&&g.left.declarations[0].init))return i.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer"),new d.State(g.left,i.scope);if(!i.doneObject_)return i.doneObject_=!0,i.variable_||(i.variable_=i.value),new d.State(g.right,i.scope);if(i.isLoop||(i.isLoop=!0,i.object_=i.value,i.visited_=Object.create(null)),i.name_===void 0)e:for(;;){if(i.object_ instanceof d.Object)for(i.props_||(i.props_=Object.getOwnPropertyNames(i.object_.properties));;){var R=i.props_.shift();if(R===void 0)break;if(Object.prototype.hasOwnProperty.call(i.object_.properties,R)&&!i.visited_[R]&&(i.visited_[R]=!0,!!Object.prototype.propertyIsEnumerable.call(i.object_.properties,R))){i.name_=R;break e}}else if(i.object_!==null&&i.object_!==void 0)for(i.props_||(i.props_=Object.getOwnPropertyNames(i.object_));;){var R=i.props_.shift();if(R===void 0)break;if(i.visited_[R]=!0,!!Object.prototype.propertyIsEnumerable.call(i.object_,R)){i.name_=R;break e}}if(i.object_=this.getPrototype(i.object_),i.props_=null,i.object_===null){s.pop();return}}if(!i.doneVariable_){i.doneVariable_=!0;var S=g.left;if(S.type==="VariableDeclaration")i.variable_=[d.SCOPE_REFERENCE,S.declarations[0].id.name];else{i.variable_=null;var w=new d.State(S,i.scope);return w.components=!0,w}}if(i.variable_||(i.variable_=i.value),!i.doneSetter_){i.doneSetter_=!0;var _=i.name_,C=this.setValue(i.variable_,_);if(C)return this.createSetter_(C,i.variable_,_)}if(i.name_=void 0,i.doneVariable_=!1,i.doneSetter_=!1,g.body)return new d.State(g.body,i.scope)},d.prototype.stepForStatement=function(s,i,g){switch(i.mode_){default:if(i.mode_=1,g.init)return new d.State(g.init,i.scope);break;case 1:if(i.mode_=2,g.test)return new d.State(g.test,i.scope);break;case 2:if(i.mode_=3,g.test&&!i.value)s.pop();else return i.isLoop=!0,new d.State(g.body,i.scope);break;case 3:if(i.mode_=1,g.update)return new d.State(g.update,i.scope);break}},d.prototype.stepFunctionDeclaration=function(s,i,g){s.pop()},d.prototype.stepFunctionExpression=function(s,i,g){s.pop(),i=s[s.length-1];var R=i.scope;g.id&&(R=this.createSpecialScope(R)),i.value=this.createFunction(g,R,i.destinationName),g.id&&this.setProperty(R.object,g.id.name,i.value,d.READONLY_DESCRIPTOR)},d.prototype.stepIdentifier=function(s,i,g){if(s.pop(),i.components){s[s.length-1].value=[d.SCOPE_REFERENCE,g.name];return}var R=this.getValueFromScope(g.name);if(this.getterStep_){var S=R;return this.createGetter_(S,this.globalObject)}s[s.length-1].value=R},d.prototype.stepIfStatement=d.prototype.stepConditionalExpression,d.prototype.stepLabeledStatement=function(s,i,g){s.pop();var R=i.labels||[];R.push(g.label.name);var S=new d.State(g.body,i.scope);return S.labels=R,S},d.prototype.stepLiteral=function(s,i,g){s.pop();var R=g.value;if(R instanceof RegExp){var S=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(S,R),R=S}s[s.length-1].value=R},d.prototype.stepLogicalExpression=function(s,i,g){if(g.operator!=="&&"&&g.operator!=="||")throw SyntaxError("Unknown logical operator: "+g.operator);if(!i.doneLeft_)return i.doneLeft_=!0,new d.State(g.left,i.scope);if(i.doneRight_)s.pop(),s[s.length-1].value=i.value;else if(g.operator==="&&"&&!i.value||g.operator==="||"&&i.value)s.pop(),s[s.length-1].value=i.value;else return i.doneRight_=!0,new d.State(g.right,i.scope)},d.prototype.stepMemberExpression=function(s,i,g){if(!i.doneObject_)return i.doneObject_=!0,new d.State(g.object,i.scope);var R;if(!g.computed)i.object_=i.value,R=g.property.name;else if(i.doneProperty_)R=i.value;else return i.object_=i.value,i.doneProperty_=!0,new d.State(g.property,i.scope);if(s.pop(),i.components)s[s.length-1].value=[i.object_,R];else{var S=this.getProperty(i.object_,R);if(this.getterStep_){var w=S;return this.createGetter_(w,i.object_)}s[s.length-1].value=S}},d.prototype.stepNewExpression=d.prototype.stepCallExpression,d.prototype.stepObjectExpression=function(s,i,g){var R=i.n_||0,S=g.properties[R];if(!i.object_)i.object_=this.createObjectProto(this.OBJECT_PROTO),i.properties_=Object.create(null);else{var w=i.destinationName;i.properties_[w]||(i.properties_[w]={}),i.properties_[w][S.kind]=i.value,i.n_=++R,S=g.properties[R]}if(S){var _=S.key;if(_.type==="Identifier")var w=_.name;else if(_.type==="Literal")var w=_.value;else throw SyntaxError("Unknown object structure: "+_.type);return i.destinationName=w,new d.State(S.value,i.scope)}for(var _ in i.properties_){var C=i.properties_[_];if("get"in C||"set"in C){var H={configurable:!0,enumerable:!0,get:C.get,set:C.set};this.setProperty(i.object_,_,d.VALUE_IN_DESCRIPTOR,H)}else this.setProperty(i.object_,_,C.init)}s.pop(),s[s.length-1].value=i.object_},d.prototype.stepProgram=function(s,i,g){var R=g.body.shift();if(R)return i.done=!1,new d.State(R,i.scope);i.done=!0},d.prototype.stepReturnStatement=function(s,i,g){if(g.argument&&!i.done_)return i.done_=!0,new d.State(g.argument,i.scope);this.unwind(d.Completion.RETURN,i.value,void 0)},d.prototype.stepSequenceExpression=function(s,i,g){var R=i.n_||0,S=g.expressions[R];if(S)return i.n_=R+1,new d.State(S,i.scope);s.pop(),s[s.length-1].value=i.value},d.prototype.stepSwitchStatement=function(s,i,g){if(!i.test_)return i.test_=1,new d.State(g.discriminant,i.scope);for(i.test_===1&&(i.test_=2,i.switchValue_=i.value,i.defaultCase_=-1);;){var R=i.index_||0,S=g.cases[R];if(!i.matched_&&S&&!S.test){i.defaultCase_=R,i.index_=R+1;continue}if(!S&&!i.matched_&&i.defaultCase_!==-1){i.matched_=!0,i.index_=i.defaultCase_;continue}if(S){if(!i.matched_&&!i.tested_&&S.test)return i.tested_=!0,new d.State(S.test,i.scope);if(i.matched_||i.value===i.switchValue_){i.matched_=!0;var w=i.n_||0;if(S.consequent[w])return i.isSwitch=!0,i.n_=w+1,new d.State(S.consequent[w],i.scope)}i.tested_=!1,i.n_=0,i.index_=R+1}else{s.pop();return}}},d.prototype.stepThisExpression=function(s,i,g){s.pop(),s[s.length-1].value=this.getValueFromScope("this")},d.prototype.stepThrowStatement=function(s,i,g){if(i.done_)this.throwException(i.value);else return i.done_=!0,new d.State(g.argument,i.scope)},d.prototype.stepTryStatement=function(s,i,g){if(!i.doneBlock_)return i.doneBlock_=!0,new d.State(g.block,i.scope);if(i.cv&&i.cv.type===d.Completion.THROW&&!i.doneHandler_&&g.handler){i.doneHandler_=!0;var R=this.createSpecialScope(i.scope);return this.setProperty(R.object,g.handler.param.name,i.cv.value),i.cv=void 0,new d.State(g.handler.body,R)}if(!i.doneFinalizer_&&g.finalizer)return i.doneFinalizer_=!0,new d.State(g.finalizer,i.scope);s.pop(),i.cv&&this.unwind(i.cv.type,i.cv.value,i.cv.label)},d.prototype.stepUnaryExpression=function(s,i,g){if(!i.done_){i.done_=!0;var R=new d.State(g.argument,i.scope);return R.components=g.operator==="delete",R}s.pop();var S=i.value;switch(g.operator){case"-":S=-S;break;case"+":S=+S;break;case"!":S=!S;break;case"~":S=~S;break;case"delete":var w=!0;if(Array.isArray(S)){var _=S[0];_===d.SCOPE_REFERENCE&&(_=i.scope);var C=String(S[1]);try{delete _.properties[C]}catch{i.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+C+"' of '"+_+"'"):w=!1}}S=w;break;case"typeof":S=S&&S.class==="Function"?"function":typeof S;break;case"void":S=void 0;break;default:throw SyntaxError("Unknown unary operator: "+g.operator)}s[s.length-1].value=S},d.prototype.stepUpdateExpression=function(s,i,g){if(!i.doneLeft_){i.doneLeft_=!0;var R=new d.State(g.argument,i.scope);return R.components=!0,R}if(i.leftSide_||(i.leftSide_=i.value),i.doneGetter_&&(i.leftValue_=i.value),!i.doneGetter_){var w=this.getValue(i.leftSide_);if(i.leftValue_=w,this.getterStep_){i.doneGetter_=!0;var S=w;return this.createGetter_(S,i.leftSide_)}}if(i.doneSetter_){s.pop(),s[s.length-1].value=i.setterValue_;return}var w=Number(i.leftValue_),_;if(g.operator==="++")_=w+1;else if(g.operator==="--")_=w-1;else throw SyntaxError("Unknown update expression: "+g.operator);var C=g.prefix?_:w,H=this.setValue(i.leftSide_,_);if(H)return i.doneSetter_=!0,i.setterValue_=C,this.createSetter_(H,i.leftSide_,_);s.pop(),s[s.length-1].value=C},d.prototype.stepVariableDeclaration=function(s,i,g){var R=g.declarations,S=i.n_||0,w=R[S];for(i.init_&&w&&(this.setValueToScope(w.id.name,i.value),i.init_=!1,w=R[++S]);w;){if(w.init)return i.n_=S,i.init_=!0,i.destinationName=w.id.name,new d.State(w.init,i.scope);w=R[++S]}s.pop()},d.prototype.stepWithStatement=function(s,i,g){if(!i.doneObject_)return i.doneObject_=!0,new d.State(g.object,i.scope);s.pop();var R=this.createSpecialScope(i.scope,i.value);return new d.State(g.body,R)},d.prototype.stepWhileStatement=d.prototype.stepDoWhileStatement,d.nativeGlobal.Interpreter=d,d.prototype.step=d.prototype.step,d.prototype.run=d.prototype.run,d.prototype.appendCode=d.prototype.appendCode,d.prototype.createObject=d.prototype.createObject,d.prototype.createObjectProto=d.prototype.createObjectProto,d.prototype.createAsyncFunction=d.prototype.createAsyncFunction,d.prototype.createNativeFunction=d.prototype.createNativeFunction,d.prototype.getProperty=d.prototype.getProperty,d.prototype.setProperty=d.prototype.setProperty,d.prototype.getStatus=d.prototype.getStatus,d.prototype.nativeToPseudo=d.prototype.nativeToPseudo,d.prototype.pseudoToNative=d.prototype.pseudoToNative,d.prototype.getGlobalScope=d.prototype.getGlobalScope,d.prototype.getStateStack=d.prototype.getStateStack,d.prototype.setStateStack=d.prototype.setStateStack,d.VALUE_IN_DESCRIPTOR=d.VALUE_IN_DESCRIPTOR,d.Status=d.Status,M.exports={Interpreter:d}},"./original-repo/acorn.js":function(M,B){(function(G,d){return d(B)})(this,function(G){G.version="0.5.0";var d,s="",i,g;G.parse=function(P,$){return s=String(P),i=s.length,S($),fn(),Tn(d.program)};var R={strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function S(P){d=P||{};for(var $ in R)Object.prototype.hasOwnProperty.call(d,$)||(d[$]=R[$]);g=d.sourceFile}var w=function(P,$){for(var W=1,K=0;;){cr.lastIndex=K;var le=cr.exec(P);if(le&&le.index<$)++W,K=le.index+le[0].length;else break}return{line:W,column:$-K}},_=0,C=0,H=0,Z,ee,Q,re,ae,ne,ye,Ce=0,_e=0,ze,Oe,ue,Re;function se(P,$){var W=w(s,P);$+=" ("+W.line+":"+W.column+")";var K=new SyntaxError($);throw K.pos=P,K.loc=W,K.raisedAt=_,K}var Ke=[],Fe={type:"num"},Ze={type:"regexp"},gt={type:"string"},Me={type:"name"},je={type:"eof"},Ge={keyword:"break"},pt={keyword:"case",beforeExpr:!0},ot={keyword:"catch"},bt={keyword:"continue"},ht={keyword:"debugger"},Rt={keyword:"default"},pe={keyword:"do",isLoop:!0},Ie={keyword:"else",beforeExpr:!0},Be={keyword:"finally"},Ee={keyword:"for",isLoop:!0},de={keyword:"function"},be={keyword:"if"},ve={keyword:"return",beforeExpr:!0},$e={keyword:"switch"},ut={keyword:"throw",beforeExpr:!0},we={keyword:"try"},xe={keyword:"var"},Ve={keyword:"while",isLoop:!0},Mt={keyword:"with"},Bt={keyword:"new",beforeExpr:!0},zt={keyword:"this"},Le={keyword:"null",atomValue:null},Ye={keyword:"true",atomValue:!0},xt={keyword:"false",atomValue:!1},Ct={keyword:"in",binop:7,beforeExpr:!0},Yt={break:Ge,case:pt,catch:ot,continue:bt,debugger:ht,default:Rt,do:pe,else:Ie,finally:Be,for:Ee,function:de,if:be,return:ve,switch:$e,throw:ut,try:we,var:xe,while:Ve,with:Mt,null:Le,true:Ye,false:xt,new:Bt,in:Ct,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:zt,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},Er={type:"[",beforeExpr:!0},yr={type:"]"},Xt={type:"{",beforeExpr:!0},At={type:"}"},ct={type:"(",beforeExpr:!0},Qe={type:")"},Et={type:",",beforeExpr:!0},lt={type:";",beforeExpr:!0},Jt={type:":",beforeExpr:!0},Ar={type:"."},Pr={type:"?",beforeExpr:!0},Ir={binop:10,beforeExpr:!0},kr={isAssign:!0,beforeExpr:!0},St={isAssign:!0,beforeExpr:!0},Jr={postfix:!0,prefix:!0,isUpdate:!0},Dr={prefix:!0,beforeExpr:!0},Mr={binop:1,beforeExpr:!0},Ur={binop:2,beforeExpr:!0},Kr={binop:3,beforeExpr:!0},Zr={binop:4,beforeExpr:!0},Qr={binop:5,beforeExpr:!0},en={binop:6,beforeExpr:!0},tn={binop:7,beforeExpr:!0},rn={binop:8,beforeExpr:!0},nn={binop:9,prefix:!0,beforeExpr:!0},an={binop:10,beforeExpr:!0};function or(P){for(var $=P.split(" "),W=Object.create(null),K=0;K<$.length;K++)W[$[K]]=!0;return function(le){return W[le]||!1}}var on=or("class enum extends super const export import"),Lr=or("implements interface let package private protected public static yield"),sr=or("eval arguments"),sn=or("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),un=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Fr="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",cn="------------------------------------------------------------------------------------------------------------------------------------------",jr=new RegExp("["+Fr+"]"),ln=new RegExp("["+Fr+cn+"]"),ur=/[\n\r\u2028\u2029]/,cr=/\r\n|[\n\r\u2028\u2029]/g,lr=function(P){return P<65?P===36:P<91?!0:P<97?P===95:P<123?!0:P>=170&&jr.test(String.fromCharCode(P))},Br=function(P){return P<48?P===36:P<58?!0:P<65?!1:P<91?!0:P<97?P===95:P<123?!0:P>=170&&ln.test(String.fromCharCode(P))};function wt(){this.line=ne,this.column=_-ye}function fn(){ne=1,_=ye=0,ae=!0,er()}function Ae(P,$){H=_,d.locations&&(ee=new wt),Q=P,er(),re=$,ae=P.beforeExpr}function pn(){var P=d.onComment&&d.locations&&new wt,$=_,W=s.indexOf("*/",_+=2);if(W===-1&&se(_-2,"Unterminated comment"),_=W+2,d.locations){cr.lastIndex=$;for(var K;(K=cr.exec(s))&&K.index<_;)++ne,ye=K.index+K[0].length}d.onComment&&d.onComment(!0,s.slice($+2,W),$,_,P,d.locations&&new wt)}function vr(){for(var P=_,$=d.onComment&&d.locations&&new wt,W=s.charCodeAt(_+=2);_<i&&W!==10&&W!==13&&W!==8232&&W!==8233;)++_,W=s.charCodeAt(_);d.onComment&&d.onComment(!1,s.slice(P+2,_),P,_,$,d.locations&&new wt)}function er(){for(;_<i;){var P=s.charCodeAt(_);if(P===32)++_;else if(P===13){++_;var $=s.charCodeAt(_);$===10&&++_,d.locations&&(++ne,ye=_)}else if(P===10||P===8232||P===8233)++_,d.locations&&(++ne,ye=_);else if(P>8&&P<14)++_;else if(P===47){var $=s.charCodeAt(_+1);if($===42)pn();else if($===47)vr();else break}else if(P===160)++_;else if(P>=5760&&un.test(String.fromCharCode(P)))++_;else break}}function dn(){var P=s.charCodeAt(_+1);P>=48&&P<=57?zr(!0):(++_,Ae(Ar))}function hn(){var P=s.charCodeAt(_+1);ae?(++_,$r()):P===61?Pe(St,2):Pe(Ir,1)}function En(){var P=s.charCodeAt(_+1);P===61?Pe(St,2):Pe(an,1)}function yn(P){var $=s.charCodeAt(_+1);$===P?Pe(P===124?Mr:Ur,2):$===61?Pe(St,2):Pe(P===124?Kr:Qr,1)}function vn(){var P=s.charCodeAt(_+1);P===61?Pe(St,2):Pe(Zr,1)}function gn(P){var $=s.charCodeAt(_+1);if($===P){if($===45&&s.charCodeAt(_+2)===62&&ur.test(s.slice(_e,_))){_+=3,vr(),er(),Pt();return}Pe(Jr,2)}else $===61?Pe(St,2):Pe(nn,1)}function mn(P){var $=s.charCodeAt(_+1),W=1;if($===P){W=P===62&&s.charCodeAt(_+2)===62?3:2,s.charCodeAt(_+W)===61?Pe(St,W+1):Pe(rn,W);return}if($===33&&P===60&&s.charCodeAt(_+2)===45&&s.charCodeAt(_+3)===45){_+=4,vr(),er(),Pt();return}$===61&&(W=s.charCodeAt(_+2)===61?3:2),Pe(tn,W)}function bn(P){var $=s.charCodeAt(_+1);$===61?Pe(en,s.charCodeAt(_+2)===61?3:2):Pe(P===61?kr:Dr,1)}function _n(P){switch(P){case 46:return dn();case 40:return++_,Ae(ct);case 41:return++_,Ae(Qe);case 59:return++_,Ae(lt);case 44:return++_,Ae(Et);case 91:return++_,Ae(Er);case 93:return++_,Ae(yr);case 123:return++_,Ae(Xt);case 125:return++_,Ae(At);case 58:return++_,Ae(Jt);case 63:return++_,Ae(Pr);case 48:var $=s.charCodeAt(_+1);if($===120||$===88)return Rn();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return zr(!1);case 34:case 39:return Sn(P);case 47:return hn();case 37:case 42:return En();case 124:case 38:return yn(P);case 94:return vn();case 43:case 45:return gn(P);case 60:case 62:return mn(P);case 61:case 33:return bn(P);case 126:return Pe(Dr,1)}return!1}function Pt(P){if(P?_=C+1:C=_,d.locations&&(Z=new wt),P)return $r();if(_>=i)return Ae(je);var $=s.charCodeAt(_);if(lr($)||$===92)return Gr();var W=_n($);if(W===!1){var K=String.fromCharCode($);if(K==="\\"||jr.test(K))return Gr();se(_,"Unexpected character '"+K+"'")}}function Pe(P,$){var W=s.slice(_,_+$);_+=$,Ae(P,W)}function $r(){for(var P,$,W=_;;){_>=i&&se(W,"Unterminated regexp");var K=s.charAt(_);if(ur.test(K)&&se(W,"Unterminated regexp"),P)P=!1;else{if(K==="[")$=!0;else if(K==="]"&&$)$=!1;else if(K==="/"&&!$)break;P=K==="\\"}++_}var le=s.slice(W,_);++_;var ie=Vr();ie&&!/^[gmi]*$/.test(ie)&&se(W,"Invalid regexp flag");try{var fe=new RegExp(le,ie)}catch(ge){throw ge instanceof SyntaxError&&se(W,ge.message),ge}Ae(Ze,fe)}function tr(P,$){for(var W=_,K=0,le=$===void 0?1/0:$,ie=0;ie<le;++ie){var fe=s.charCodeAt(_),ge;if(fe>=97?ge=fe-97+10:fe>=65?ge=fe-65+10:fe>=48&&fe<=57?ge=fe-48:ge=1/0,ge>=P)break;++_,K=K*P+ge}return _===W||$!==void 0&&_-W!==$?null:K}function Rn(){_+=2;var P=tr(16);P===null&&se(C+2,"Expected hexadecimal number"),lr(s.charCodeAt(_))&&se(_,"Identifier directly after number"),Ae(Fe,P)}function zr(P){var $=_,W=!1,K=s.charCodeAt(_)===48;!P&&tr(10)===null&&se($,"Invalid number"),s.charCodeAt(_)===46&&(++_,tr(10),W=!0);var le=s.charCodeAt(_);(le===69||le===101)&&(le=s.charCodeAt(++_),(le===43||le===45)&&++_,tr(10)===null&&se($,"Invalid number"),W=!0),lr(s.charCodeAt(_))&&se(_,"Identifier directly after number");var ie=s.slice($,_),fe;W?fe=parseFloat(ie):!K||ie.length===1?fe=parseInt(ie,10):/[89]/.test(ie)||Re?se($,"Invalid number"):fe=parseInt(ie,8),Ae(Fe,fe)}function Sn(P){_++;for(var $="";;){_>=i&&se(C,"Unterminated string constant");var W=s.charCodeAt(_);if(W===P){++_,Ae(gt,$);return}if(W===92){W=s.charCodeAt(++_);var K=/^[0-7]+/.exec(s.slice(_,_+3));for(K&&(K=K[0]);K&&parseInt(K,8)>255;)K=K.slice(0,-1);if(K==="0"&&(K=null),++_,K)Re&&se(_-2,"Octal literal in strict mode"),$+=String.fromCharCode(parseInt(K,8)),_+=K.length-1;else switch(W){case 110:$+=`
`;break;case 114:$+="\r";break;case 120:$+=String.fromCharCode(fr(2));break;case 117:$+=String.fromCharCode(fr(4));break;case 85:$+=String.fromCharCode(fr(8));break;case 116:$+="	";break;case 98:$+="\b";break;case 118:$+="\v";break;case 102:$+="\f";break;case 48:$+="\0";break;case 13:s.charCodeAt(_)===10&&++_;case 10:d.locations&&(ye=_,++ne);break;default:$+=String.fromCharCode(W);break}}else(W===13||W===10||W===8232||W===8233)&&se(C,"Unterminated string constant"),$+=String.fromCharCode(W),++_}}function fr(P){var $=tr(16,P);return $===null&&se(C,"Bad character escape sequence"),$}var It;function Vr(){It=!1;for(var P,$=!0,W=_;;){var K=s.charCodeAt(_);if(Br(K))It&&(P+=s.charAt(_)),++_;else if(K===92){It||(P=s.slice(W,_)),It=!0,s.charCodeAt(++_)!==117&&se(_,"Expecting Unicode escape sequence \\uXXXX"),++_;var le=fr(4),ie=String.fromCharCode(le);ie||se(_-1,"Invalid Unicode escape"),($?lr(le):Br(le))||se(_-4,"Invalid Unicode escape"),P+=ie}else break;$=!1}return It?P:s.slice(W,_)}function Gr(){var P=Vr(),$=Me;!It&&sn(P)&&($=Yt[P]),Ae($,P)}function he(){Ce=C,_e=H,ze=ee,Pt()}function gr(P){if(Re=P,_=C,d.locations)for(;_<ye;)ye=s.lastIndexOf(`
`,ye-2)+1,--ne;er(),Pt()}function Hr(){this.type=null,this.start=C,this.end=null}function Wr(){this.start=Z,this.end=null,g&&(this.source=g)}function ke(){var P=new Hr;return d.locations&&(P.loc=new Wr),d.directSourceFile&&(P.sourceFile=d.directSourceFile),d.ranges&&(P.range=[C,0]),P}function yt(P){var $=new Hr;return $.start=P.start,d.locations&&($.loc=new Wr,$.loc.start=P.loc.start),d.ranges&&($.range=[P.range[0],0]),$}function ce(P,$){return P.type=$,P.end=_e,d.locations&&(P.loc.end=ze),d.ranges&&(P.range[1]=_e),P}function mr(P){return P.type==="ExpressionStatement"&&P.expression.type==="Literal"&&P.expression.value==="use strict"}function me(P){return Q===P?(he(),!0):!1}function pr(){return!d.strictSemicolons&&(Q===je||Q===At||ur.test(s.slice(_e,C)))}function Nt(){!me(lt)&&!pr()&&ft()}function Ne(P){Q===P?he():ft()}function ft(){se(C,"Unexpected token")}function dr(P){P.type!=="Identifier"&&P.type!=="MemberExpression"&&se(P.start,"Assigning to rvalue"),Re&&P.type==="Identifier"&&sr(P.name)&&se(P.start,"Assigning to "+P.name+" in strict mode")}function Tn(P){Ce=_e=_,d.locations&&(ze=new wt),Oe=Re=!1,ue=[],Pt();var $=P||ke(),W=!0;for(P||($.body=[]);Q!==je;){var K=Je();$.body.push(K),W&&mr(K)&&gr(!0),W=!1}return ce($,"Program")}var br={kind:"loop"},wn={kind:"switch"};function Je(){(Q===Ir||Q===St&&re==="/=")&&Pt(!0);var P=Q,$=ke();switch(P){case Ge:case bt:he();var W=P===Ge;me(lt)||pr()?$.label=null:Q!==Me?ft():($.label=vt(),Nt());for(var K=0;K<ue.length;++K){var le=ue[K];if(($.label===null||le.name===$.label.name)&&(le.kind!==null&&(W||le.kind==="loop")||$.label&&W))break}return K===ue.length&&se($.start,"Unsyntactic "+P.keyword),ce($,W?"BreakStatement":"ContinueStatement");case ht:return he(),Nt(),ce($,"DebuggerStatement");case pe:return he(),ue.push(br),$.body=Je(),ue.pop(),Ne(Ve),$.test=rr(),Nt(),ce($,"DoWhileStatement");case Ee:if(he(),ue.push(br),Ne(ct),Q===lt)return _r($,null);if(Q===xe){var ie=ke();return he(),Xr(ie,!0),ce(ie,"VariableDeclaration"),ie.declarations.length===1&&me(Ct)?Yr($,ie):_r($,ie)}var ie=De(!1,!0);return me(Ct)?(dr(ie),Yr($,ie)):_r($,ie);case de:return he(),Nr($,!0);case be:return he(),$.test=rr(),$.consequent=Je(),$.alternate=me(Ie)?Je():null,ce($,"IfStatement");case ve:return!Oe&&!d.allowReturnOutsideFunction&&se(C,"'return' outside of function"),he(),me(lt)||pr()?$.argument=null:($.argument=De(),Nt()),ce($,"ReturnStatement");case $e:he(),$.discriminant=rr(),$.cases=[],Ne(Xt),ue.push(wn);for(var fe,ge;Q!==At;)if(Q===pt||Q===Rt){var ir=Q===pt;fe&&ce(fe,"SwitchCase"),$.cases.push(fe=ke()),fe.consequent=[],he(),ir?fe.test=De():(ge&&se(Ce,"Multiple default clauses"),ge=!0,fe.test=null),Ne(Jt)}else fe||ft(),fe.consequent.push(Je());return fe&&ce(fe,"SwitchCase"),he(),ue.pop(),ce($,"SwitchStatement");case ut:return he(),ur.test(s.slice(_e,C))&&se(_e,"Illegal newline after throw"),$.argument=De(),Nt(),ce($,"ThrowStatement");case we:if(he(),$.block=nr(),$.handler=null,Q===ot){var kt=ke();he(),Ne(ct),kt.param=vt(),Re&&sr(kt.param.name)&&se(kt.param.start,"Binding "+kt.param.name+" in strict mode"),Ne(Qe),kt.body=nr(),$.handler=ce(kt,"CatchClause")}return $.finalizer=me(Be)?nr():null,!$.handler&&!$.finalizer&&se($.start,"Missing catch or finally clause"),ce($,"TryStatement");case xe:return he(),Xr($),Nt(),ce($,"VariableDeclaration");case Ve:return he(),$.test=rr(),ue.push(br),$.body=Je(),ue.pop(),ce($,"WhileStatement");case Mt:return Re&&se(C,"'with' in strict mode"),he(),$.object=rr(),$.body=Je(),ce($,"WithStatement");case Xt:return nr();case lt:return he(),ce($,"EmptyStatement");default:var xr=re,hr=De();if(P===Me&&hr.type==="Identifier"&&me(Jt)){for(var K=0;K<ue.length;++K)ue[K].name===xr&&se(hr.start,"Label '"+xr+"' is already declared");var Pn=Q.isLoop?"loop":Q===$e?"switch":null;return ue.push({name:xr,kind:Pn}),$.body=Je(),ue.pop(),$.label=hr,ce($,"LabeledStatement")}else return $.expression=hr,Nt(),ce($,"ExpressionStatement")}}function rr(){Ne(ct);var P=De();return Ne(Qe),P}function nr(P){var $=ke(),W=!0,K=!1,le;for($.body=[],Ne(Xt);!me(At);){var ie=Je();$.body.push(ie),W&&P&&mr(ie)&&(le=K,gr(K=!0)),W=!1}return K&&!le&&gr(!1),ce($,"BlockStatement")}function _r(P,$){return P.init=$,Ne(lt),P.test=Q===lt?null:De(),Ne(lt),P.update=Q===Qe?null:De(),Ne(Qe),P.body=Je(),ue.pop(),ce(P,"ForStatement")}function Yr(P,$){return P.left=$,P.right=De(),Ne(Qe),P.body=Je(),ue.pop(),ce(P,"ForInStatement")}function Xr(P,$){for(P.declarations=[],P.kind="var";;){var W=ke();if(W.id=vt(),Re&&sr(W.id.name)&&se(W.id.start,"Binding "+W.id.name+" in strict mode"),W.init=me(kr)?De(!0,$):null,P.declarations.push(ce(W,"VariableDeclarator")),!me(Et))break}}function De(P,$){var W=Rr($);if(!P&&Q===Et){var K=yt(W);for(K.expressions=[W];me(Et);)K.expressions.push(Rr($));return ce(K,"SequenceExpression")}return W}function Rr(P){var $=Nn(P);if(Q.isAssign){var W=yt($);return W.operator=re,W.left=$,he(),W.right=Rr(P),dr($),ce(W,"AssignmentExpression")}return $}function Nn(P){var $=On(P);if(me(Pr)){var W=yt($);return W.test=$,W.consequent=De(!0),Ne(Jt),W.alternate=De(!0,P),ce(W,"ConditionalExpression")}return $}function On(P){return Sr(Tr(),-1,P)}function Sr(P,$,W){var K=Q.binop;if(K!==null&&(!W||Q!==Ct)&&K>$){var le=yt(P);le.left=P,le.operator=re;var ie=Q;he(),le.right=Sr(Tr(),K,W);var fe=ce(le,ie===Mr||ie===Ur?"LogicalExpression":"BinaryExpression");return Sr(fe,$,W)}return P}function Tr(){if(Q.prefix){var P=ke(),$=Q.isUpdate;return P.operator=re,P.prefix=!0,ae=!0,he(),P.argument=Tr(),$?dr(P.argument):Re&&P.operator==="delete"&&P.argument.type==="Identifier"&&se(P.start,"Deleting local variable in strict mode"),ce(P,$?"UpdateExpression":"UnaryExpression")}for(var W=xn();Q.postfix&&!pr();){var P=yt(W);P.operator=re,P.prefix=!1,P.argument=W,dr(W),he(),W=ce(P,"UpdateExpression")}return W}function xn(){return ar(wr())}function ar(P,$){var W;return me(Ar)?(W=yt(P),W.object=P,W.property=vt(!0),W.computed=!1,ar(ce(W,"MemberExpression"),$)):me(Er)?(W=yt(P),W.object=P,W.property=De(),W.computed=!0,Ne(yr),ar(ce(W,"MemberExpression"),$)):!$&&me(ct)?(W=yt(P),W.callee=P,W.arguments=Or(Qe,!1),ar(ce(W,"CallExpression"),$)):P}function wr(){var P;switch(Q){case zt:return P=ke(),he(),ce(P,"ThisExpression");case Me:return vt();case Fe:case gt:case Ze:return P=ke(),P.value=re,P.raw=s.slice(C,H),he(),ce(P,"Literal");case Le:case Ye:case xt:return P=ke(),P.value=Q.atomValue,P.raw=Q.keyword,he(),ce(P,"Literal");case ct:var $=Z,W=C;he();var K=De();return K.start=W,K.end=H,d.locations&&(K.loc.start=$,K.loc.end=ee),d.ranges&&(K.range=[W,H]),Ne(Qe),K;case Er:return P=ke(),he(),P.elements=Or(yr,!0,!0),ce(P,"ArrayExpression");case Xt:return An();case de:return P=ke(),he(),Nr(P,!1);case Bt:return Cn()}ft()}function Cn(){var P=ke();return he(),P.callee=ar(wr(),!0),P.arguments=me(ct)?Or(Qe,!1):Ke,ce(P,"NewExpression")}function An(){var P=ke(),$=!0,W=!1;for(P.properties=[],he();!me(At);){if($)$=!1;else if(Ne(Et),d.allowTrailingCommas&&me(At))break;var K={key:qr()},le=!1,ie;if(me(Jt)?(K.value=De(!0),ie=K.kind="init"):K.key.type==="Identifier"&&(K.key.name==="get"||K.key.name==="set")?(le=W=!0,ie=K.kind=K.key.name,K.key=qr(),Q!==ct&&ft(),K.value=Nr(ke(),!1)):ft(),K.key.type==="Identifier"&&(Re||W))for(var fe=0;fe<P.properties.length;++fe){var ge=P.properties[fe];if(ge.key.name===K.key.name){var ir=ie===ge.kind||le&&ge.kind==="init"||ie==="init"&&(ge.kind==="get"||ge.kind==="set");ir&&!Re&&ie==="init"&&ge.kind==="init"&&(ir=!1),ir&&se(K.key.start,"Redefinition of property")}}P.properties.push(K)}return ce(P,"ObjectExpression")}function qr(){return Q===Fe||Q===gt?wr():vt(!0)}function Nr(P,$){Q===Me?P.id=vt():$?ft():P.id=null,P.params=[];var W=!0;for(Ne(ct);!me(Qe);)W?W=!1:Ne(Et),P.params.push(vt());var K=Oe,le=ue;if(Oe=!0,ue=[],P.body=nr(!0),Oe=K,ue=le,Re||P.body.body.length&&mr(P.body.body[0]))for(var ie=P.id?-1:0;ie<P.params.length;++ie){var fe=ie<0?P.id:P.params[ie];if((Lr(fe.name)||sr(fe.name))&&se(fe.start,"Defining '"+fe.name+"' in strict mode"),ie>=0)for(var ge=0;ge<ie;++ge)fe.name===P.params[ge].name&&se(fe.start,"Argument name clash in strict mode")}return ce(P,$?"FunctionDeclaration":"FunctionExpression")}function Or(P,$,W){for(var K=[],le=!0;!me(P);){if(le)le=!1;else if(Ne(Et),$&&d.allowTrailingCommas&&me(P))break;K.push(W&&Q===Et?null:De(!0))}return K}function vt(P){var $=ke();return P&&d.forbidReserved==="everywhere"&&(P=!1),Q===Me?(!P&&(d.forbidReserved&&on(re)||Re&&Lr(re))&&s.slice(C,H).indexOf("\\")===-1&&se(C,"The keyword '"+re+"' is reserved"),$.name=re):P&&Q.keyword?$.name=Q.keyword:ft(),ae=!1,he(),ce($,"Identifier")}})},vm:M=>{M.exports=requireVmBrowserify()}},b={};function T(M){var B=b[M];if(B!==void 0)return B.exports;var G=b[M]={exports:{}};return y[M].call(G.exports,G,G.exports,T),G.exports}T.d=(M,B)=>{for(var G in B)T.o(B,G)&&!T.o(M,G)&&Object.defineProperty(M,G,{enumerable:!0,get:B[G]})},T.o=(M,B)=>Object.prototype.hasOwnProperty.call(M,B),T.r=M=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(M,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(M,"__esModule",{value:!0})};var O={};return(()=>{T.r(O),T.d(O,{default:()=>G});const M=T("./original-repo/acorn.js");globalThis.acorn=M;const{Interpreter:B}=T("./original-repo/interpreter.js"),G=B})(),O=O.default,O})())})(jsInterpreter);var jsInterpreterExports=jsInterpreter.exports;const eo=getDefaultExportFromCjs(jsInterpreterExports);var X=reactExports.createContext({registerProblem:noop$1});X.displayName="ContestContext";function _t({children:a}){let{student:o,setStudent:y,terminated:b}=v(),[T,O]=reactExports.useState({}),M=reactExports.useCallback((s,i)=>{O(g=>({...g,[s]:i}))},[]),[B,G]=reactExports.useState(!1),d=reactExports.useRef(null);return reactExports.useEffect(()=>{var s;b!==B&&(G(b),B||((s=d.current)==null||s.showModal()))},[b,B]),o.startedAt?c.createElement(X.Provider,{value:{registerProblem:M}},c.createElement("div",{className:"break-before-page"},c.createElement("main",{className:"gap-x-10 [column-rule:solid_1px_var(--tw-prose-hr)] print:columns-2"},a)),c.createElement(Te,{ref:d,schema:T})):c.createElement("div",{className:"flex h-[50vh] justify-center"},c.createElement("div",{className:"flex flex-col justify-center"},c.createElement("button",{className:"btn btn-success btn-lg",onClick:()=>{y({...o,startedAt:new Date,variant:V$1()})}},"Inizia")))}var Te=reactExports.forwardRef(function({schema:a},o){let{student:y}=v(),b=Object.keys(a);b.sort((M,B)=>M.localeCompare(B,void 0,{numeric:!0}));let T=reactExports.useMemo(()=>{let M={id:y.variant,contestId:y.contestId,schema:a};return Se(y,{[M.id]:M})},[a,y]),O=sumBy(Object.values(a),"pointsCorrect");return c.createElement(jt,{ref:o,title:"Prova terminata"},c.createElement("p",null,"La prova  terminata."),T!==void 0&&c.createElement(c.Fragment,null,c.createElement("p",null,"Hai ottenuto un punteggio di ",c.createElement("b",null,T)," su ",c.createElement("b",null,O),"."),c.createElement("div",{className:"w-full"},c.createElement("table",{className:"table-fixed prose-td:truncate"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{scope:"col"},"Domanda"),c.createElement("th",{scope:"col"},"Risposta"),c.createElement("th",{scope:"col"},"Soluzione"),c.createElement("th",{scope:"col"},"Punteggio"))),c.createElement("tbody",null,b.map(M=>{var d,s;let B=(s=(d=y.answers)==null?void 0:d[M])==null?void 0:s.trim(),G=a[M];return c.createElement("tr",{key:M},c.createElement("td",null,M),c.createElement("td",null,B??"-"),c.createElement("td",null,G.solution),c.createElement("td",null,dt(G,B)))}))))))});function F(){return reactExports.useContext(X)}var j=reactExports.createContext({id:void 0,points:[0,0,0],setCorrect:noop$1});j.displayName="ProblemContext";function Vt({id:a,points:o,statement:y}){let{student:b}=v(),[T,O]=reactExports.useState(1),[M,B]=reactExports.useState(()=>b.variant?A$1(`r#problem#${b.variant}#${a}`):0),G=reactExports.useCallback(()=>M,[M]),d=reactExports.useCallback(i=>{i&&i!==T&&defer(()=>O(i))},[T]),s=reactExports.useMemo(()=>reactExports.memo(y),[y]);return c.createElement(j.Provider,{value:{id:a,points:o,setCorrect:noop$1}},c.createElement("div",{className:"relative"},!1,c.createElement(s,{variant:G,setVariantCount:d})),c.createElement("hr",{className:"last:hidden"}))}function Dt({subId:a,children:o}){let{id:y,points:b}=reactExports.useContext(j),T=a?`${y}.${a}`:`${y}`,{registerProblem:O}=F(),[M,B]=reactExports.useState();return reactExports.useEffect(()=>{O(T,{type:"text",pointsCorrect:b[0],pointsBlank:b[1],pointsWrong:b[2],solution:M})},[O,T,M,b]),c.createElement(j.Provider,{value:{id:T,points:b,setCorrect:B}},c.createElement("div",{className:"break-inside-avoid"},c.createElement("h3",null,"Domanda ",T),o))}function E(){return reactExports.useContext(j)}var Y=reactExports.createContext({id:""});Y.displayName="AnswerContext";function Lt({children:a}){let{student:o}=v(),{id:y}=E(),b=reactExports.useMemo(()=>{let T=reactExports.Children.toArray(a);return o.variant&&new x(`r#answers#${o.variant}#${y}`).shuffle(T),T},[o.variant,y,a]);return c.createElement("form",{className:D$1("answer-group my-5 flex-wrap rounded-xl bg-base-200 p-3","prose-p:my-1 print:flex print:border print:border-[var(--tw-prose-hr)] print:p-1")},b.map((T,O)=>c.createElement(Y.Provider,{key:O,value:{id:String.fromCodePoint(65+O)}},T)))}function $t({correct:a,children:o}){var i;let{id:y}=reactExports.useContext(Y),{id:b,setCorrect:T}=E(),{student:O,setStudent:M,terminated:B}=v(),G=(i=O.answers)==null?void 0:i[b],d=async g=>{await M({...O,answers:{...O.answers,[b]:g}})},s=reactExports.useId();return reactExports.useEffect(()=>{a===!0&&T(y)},[a,T,y]),c.createElement("div",{className:D$1("answer relative my-1 flex rounded-lg pl-2 pr-1 hover:bg-base-300 print:mr-4",B&&{"border-2 border-success":a===!0,"border-2 border-error":G===y&&a===!1})},c.createElement("input",{id:s,checked:G===y,className:D$1("radio radio-sm my-auto mr-4 bg-base-100 [print-color-adjust:exact] disabled:opacity-90 print:mr-2",B&&G===y&&{"radio-success":a===!0,"radio-error":a===!1}),onChange:g=>d(g.target.checked?y:void 0),type:"radio",disabled:B}),c.createElement("div",{className:"my-auto w-6 screen:hidden"},y,")"),c.createElement("label",{htmlFor:s,className:"grow"},o),c.createElement("div",{className:"absolute right-0 top-0 mr-1 flex h-full justify-center print:hidden"},c.createElement("button",{className:D$1("btn btn-square btn-ghost btn-sm my-auto",(G!==y||B)&&"hidden"),type:"button",onClick:()=>d(void 0)},c.createElement(Trash2,{size:20}))))}function Ft({correct:a,type:o}){var d;let{id:y,setCorrect:b}=E(),{student:T,setStudent:O,terminated:M}=v(),B=(d=T.answers)==null?void 0:d[y],G=async s=>{await O({...T,answers:{...T.answers,[y]:s}})};return reactExports.useEffect(()=>{a!==void 0&&b(a)},[a,b]),c.createElement("div",{className:"px-2"},c.createElement("input",{className:D$1("input input-bordered w-72 max-w-full border-2 print:placeholder:text-transparent",M&&a!==void 0&&{"disabled:input-success":a===B,"disabled:input-error":a!==B}),onChange:s=>G(s.target.value||void 0),onWheel:s=>s.currentTarget.blur(),placeholder:"Inserisci la risposta",type:o,value:B??"",disabled:M,"aria-label":"Risposta"}))}function Ut({children:a}){let{terminated:o}=v();if(o)return c.createElement("div",{className:"my-5 rounded-xl bg-base-200 print:hidden"},c.createElement("div",{className:"collapse"},c.createElement("input",{type:"checkbox"}),c.createElement("div",{className:"collapse-title text-xl font-medium"},"Mostra soluzione"),c.createElement("div",{className:"collapse-content"},a)))}var Ht=z.enum(["Number","String","Array","Boolean"]),Ue=z.object({type:z.literal("input_value"),name:z.string(),check:Ht}),Wt=z.object({type:z.string(),message0:z.string(),args0:z.array(Ue).optional(),colour:z.union([z.number(),z.string()]),tooltip:z.string(),helpUrl:z.string(),maxInstances:z.number().optional()}),He=Wt.extend({nextStatement:z.literal(null).optional(),previousStatement:z.literal(null).optional(),js:z.string()}),We=Wt.extend({output:Ht,js:z.tuple([z.string(),z.string().startsWith("ORDER_")])}),Gt=z.union([He,We]),qe=reactExports.lazy(()=>__vitePreload(()=>import("./code-highlight-4YYAT6IQ-CDyL9MXa.js"),__vite__mapDeps([0,1,2])));function V(a){return c.createElement(reactExports.Suspense,{fallback:c.createElement(Xe,{...a})},c.createElement(qe,{...a}))}function Xe({inline:a,code:o,noLineNumbers:y}){return a?c.createElement("code",null,o):c.createElement("pre",null,c.createElement("code",null,o.split(`
`).map((b,T)=>c.createElement("span",{key:T},c.createElement("span",{className:D$1("mr-6 inline-block w-7 select-none text-right",y&&"hidden")},T+1),c.createElement("span",null,b)))))}var Qt={kind:"categoryToolbox",contents:[{kind:"category",name:"Variabili",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"Matematica",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"math_arithmetic",fields:{OP:"ADD"}},{kind:"block",type:"math_on_list",extraState:'<mutation op="SUM"></mutation>',fields:{OP:"SUM"}},{kind:"block",type:"math_modulo"},{kind:"block",type:"math_number_property",extraState:'<mutation divisor_input="false"></mutation>',fields:{PROPERTY:"EVEN"}}]},{kind:"category",name:"Logica",categorystyle:"logic_category",contents:[{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"controls_if"},{kind:"block",type:"controls_if",extraState:{hasElse:"true"}}]},{kind:"category",name:"Cicli",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{block:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for",fields:{VAR:"i"},inputs:{FROM:{block:{type:"math_number",fields:{NUM:1}}},TO:{block:{type:"math_number",fields:{NUM:10}}},BY:{block:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"controls_forEach"}]},{kind:"category",name:"Liste",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_repeat",inputs:{NUM:{block:{type:"math_number",fields:{NUM:5}}}}},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_isEmpty"},{kind:"block",type:"lists_getIndex",fields:{MODE:"GET",WHERE:"FROM_START"}},{kind:"block",type:"lists_setIndex",fields:{MODE:"SET",WHERE:"FROM_START"}}]}]},qt={blocks:{languageVersion:0,blocks:[{type:"start",id:"y=zq)Uya2A/{vyOtN[i6",x:30,y:30}]},variables:[]},oo=1e3,A=class extends eo{constructor(a,o){super(a,(y,b)=>{y.setProperty(b,"highlightBlock",y.createNativeFunction(T=>{this.highlightedBlock=T,this.stepFinished=!0})),y.setProperty(b,"exit",y.createNativeFunction((T,O)=>{this.running=!1,this.correct=T,this.msg=O})),y.setProperty(b,"hiddenState",y.nativeToPseudo(o)),y.setProperty(b,"loopTrap",oo)}),this.stepFinished=!1,this.highlightedBlock="",this.running=!0,this.correct=!1,this.step=()=>{if(!this.running)return!1;do{this.stepFinished=!1;try{this.running=super.step()&&this.running}catch{this.running=!1}}while(this.running&&!this.stepFinished);return this.running}}};function tt(a,o){let[y,b]=reactExports.useState(),[T,O]=reactExports.useState({highlightedBlock:"",running:!0,correct:!1,msg:"",globalScope:{}}),M=reactExports.useCallback(()=>{let B=new A(a,o);b(B),O({highlightedBlock:(B==null?void 0:B.highlightedBlock)??"",running:(B==null?void 0:B.running)??!1,correct:(B==null?void 0:B.correct)??!1,msg:(B==null?void 0:B.msg)??"",globalScope:(B==null?void 0:B.pseudoToNative(B.globalScope.object))??{}})},[a,o]);return reactExports.useEffect(()=>{M()},[M,a,o]),{step:()=>{y==null||y.step(),O({highlightedBlock:(y==null?void 0:y.highlightedBlock)??"",running:(y==null?void 0:y.running)??!1,correct:(y==null?void 0:y.correct)??!1,msg:(y==null?void 0:y.msg)??"",globalScope:(y==null?void 0:y.pseudoToNative(y.globalScope.object))??{}})},reset:M,...T}}function et(a,o){return reactExports.useEffect(()=>{return window.addEventListener("message",y),()=>window.removeEventListener("message",y);function y(b){b.source===a&&o(b.data)}},[a,o]),reactExports.useCallback(y=>a==null?void 0:a.postMessage(y,"*"),[a])}function nt({toolbox:a,initialBlocks:o,testcases:y,debug:b,customBlocks:T,Visualizer:O}){var Rt;let{student:M,setStudent:B}=v(),{registerProblem:G}=F(),{id:d,points:s}=E();reactExports.useEffect(()=>{for(let pe=0;pe<y.length;pe++)G(`${d}.${pe+1}`,{type:"text",pointsCorrect:s[0],pointsBlank:s[1],pointsWrong:s[2],solution:""})},[G,d,y,s]);let i=((Rt=M.extraData)==null?void 0:Rt[`blockly-${d}`])??o??qt,g=async pe=>{await B({...M,extraData:{...M.extraData,[`blockly-${d}`]:pe}})},[R,S]=reactExports.useState(null),[w,_]=reactExports.useState(!1),[C,H]=reactExports.useState(!0),[Z,ee]=reactExports.useState(!1),[Q,re]=reactExports.useState({}),[ae,ne]=reactExports.useState(""),[ye,Ce]=reactExports.useState(0),[_e,ze]=reactExports.useState(()=>range(y.length).map(pe=>({correct:!1,index:pe}))),{step:Oe,reset:ue,running:Re,highlightedBlock:se,globalScope:Ke,correct:Fe,msg:Ze}=tt(ae,y[ye]),gt=reactExports.useMemo(()=>Object.fromEntries(Object.entries(Q).map(([pe,Ie])=>[Ie,Ke[pe]])),[Q,Ke]),Me=reactExports.useMemo(()=>mt(Gt.array(),T,{prefix:"Invalid custom block definition"}),[T]),je=et(R==null?void 0:R.contentWindow,pe=>{switch(pe.cmd){case"init":{je({cmd:"init",toolbox:a??Qt,initialBlocks:i,debug:b,customBlocks:Me});break}case"ready":{_(!0);break}case"blocks":{g(pe.blocks),b!=null&&b.logBlocks&&console.info(JSON.stringify(pe.blocks,void 0,2));break}case"code":{ne(pe.code),ee(!1),H(!0),b!=null&&b.logJs&&console.info(pe.code);break}case"variables":{re(pe.variablesMapping),b!=null&&b.logVariables&&console.info(pe.variablesMapping);break}}});reactExports.useEffect(()=>{je({cmd:"highlight",highlightedBlock:se})},[je,se]),reactExports.useEffect(()=>{Re||ee(!1)},[Re]);let[Ge,pt]=reactExports.useState(3);reactExports.useEffect(()=>{let pe=[5e3,2e3,1e3,500,200,100,10];if(Z){let Ie=setInterval(Oe,pe[Ge]);return()=>clearInterval(Ie)}},[Oe,Ge,Z]);let ot=async()=>{let pe=await Promise.all(y.map(async(Be,Ee)=>{let de=new A(ae,Be);for(let be=0;de.running;be++)de.step(),be%64===0&&await new Promise(ve=>setTimeout(ve,5));return{...de,index:Ee}}));ze(pe),H(!1);let Ie={...M.answers};for(let Be=0;Be<y.length;Be++)Ie[`${d}.${Be+1}`]=pe[Be].correct?"":"";await B({...M,answers:Ie})},[bt,ht]=reactExports.useState(!1);return reactExports.useEffect(()=>ht(!1),[Ze]),c.createElement("div",{className:D$1("not-prose relative inset-y-0 left-1/2 w-screen -translate-x-1/2 p-4 pt-8","flex flex-col-reverse items-start justify-between gap-6 overflow-x-hidden *:mx-3 lg:flex-row lg:gap-0")},c.createElement("div",{className:"flex h-full max-h-[min(720px,90vh)] basis-[min(auto,50%)] flex-col gap-6 self-stretch overflow-x-hidden"},c.createElement("div",{className:"join join-horizontal"},_e.map(({index:pe,correct:Ie,msg:Be})=>c.createElement("button",{key:pe,onClick:()=>{Ce(pe),ee(!1)},className:D$1("btn join-item z-10 rounded-lg",!C&&"tooltip",pe===ye&&"btn-info"),"data-tip":Be},c.createElement("div",{className:"flex items-center gap-3"},c.createElement("p",null,"Livello ",pe+1),C?c.createElement(HelpCircle,{size:32}):Ie?c.createElement(CheckCircle2,{size:32,className:"fill-success stroke-success-content"}):c.createElement(XCircle,{size:32,className:"fill-error stroke-error-content"}))))),c.createElement("div",{className:"relative flex flex-col overflow-hidden shadow-xl"},c.createElement("div",{className:"overflow-auto rounded-xl border-2 border-[#c6c6c6] bg-white"},O&&c.createElement(O,{variables:{blocklyVariables:gt,hiddenState:Ke==null?void 0:Ke.hiddenState,msg:Ze}}),Ze&&!bt&&c.createElement("div",{className:"absolute inset-x-0 bottom-0 z-50 p-4"},c.createElement("div",{role:"alert",className:D$1("alert",Fe?"alert-success":"alert-error")},Fe?c.createElement(CheckCircle,null):c.createElement(XCircle,null),c.createElement("span",null,Ze),c.createElement("button",{onClick:()=>ht(!0),"aria-label":"Nascondi messaggio"},c.createElement(MessageSquareOff,null))))))),c.createElement("div",{className:"flex min-h-[min(720px,90vh)] flex-[1_0_50%] flex-col-reverse gap-6 self-stretch lg:flex-col"},c.createElement("div",{className:"flex gap-6"},c.createElement("div",{className:"join join-horizontal"},c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui/pausa"},c.createElement("button",{className:"btn btn-info rounded-[inherit]",disabled:!Re||C,onClick:()=>ee(!Z),"aria-label":"Esugui un blocco"},Z?c.createElement(Pause,{className:"size-6"}):c.createElement(Play,{className:"size-6"}))),c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui un blocco"},c.createElement("button",{className:"btn btn-info rounded-[inherit]",disabled:!Re||C,onClick:Oe,"aria-label":"Esugui un blocco"},c.createElement(SkipForward,{className:"size-6"}))),c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui da capo"},c.createElement("button",{className:"btn btn-info rounded-[inherit]","aria-label":"Esegui da capo",disabled:C,onClick:()=>{ue(),ee(!1)}},c.createElement(RotateCcw,{className:"size-6"})))),c.createElement("div",{className:"tooltip","data-tip":"Correggi la soluzione"},c.createElement("button",{className:"btn btn-success","aria-label":"Correggi la soluzione",disabled:!C||!w,onClick:ot},c.createElement(Send,{className:"size-6"}))),c.createElement("div",null,c.createElement("input",{className:"range",type:"range",min:"0",max:"6",value:Ge,onChange:pe=>pt(+pe.target.value)}),c.createElement("div",{className:"flex w-full justify-between px-2 text-xs"},c.createElement("span",null,"Lento"),c.createElement("span",null,"Veloce"))),!1),c.createElement(yo,{ref:S,ready:w})))}var yo=reactExports.forwardRef(function({ready:a},o){return c.createElement("div",{className:"relative flex grow flex-col overflow-hidden rounded-xl border-2 border-[#c6c6c6]"},c.createElement("iframe",{ref:o,src:new URL("iframe-DI1hHhpN.html",import.meta.url).href,className:"grow",title:"Area di lavoro di Blockly"}),!a&&c.createElement("div",{className:"absolute inset-0 z-50 bg-white text-slate-700"},c.createElement(Tt,null)))});function rt({src:a,alt:o,title:y}){return c.createElement("img",{className:"max-h-[90vh] min-w-0 p-4 first:rounded-l-xl last:rounded-r-xl dark:bg-white print:m-0 print:max-h-[60vh] print:max-w-full",src:a.src,width:a.width,height:a.height,alt:o,title:y,style:{maxWidth:`min(100%, calc(90vh * ${a.width} / ${a.height}))`}})}function st({display:a,children:o}){let y=reactExports.useRef(null);return reactExports.useEffect(()=>{y.current&&katex.render(o,y.current,{displayMode:a})},[y,o,a]),c.createElement("span",{ref:y})}function Kt({children:a}){return a}var U={Answer:$t,AnswerGroup:Lt,Blockly:nt,Code:V,Contest:_t,Explanation:Ut,Image:rt,MathExpr:reactExports.memo(st),OpenAnswer:Ft,Problem:Vt,Section:Kt,SubProblem:Dt};function it({children:a}){return c.createElement(MDXProvider,{components:U},c.createElement("div",{className:D$1("prose prose-lg mx-auto my-5 px-4 print:prose-sm screen:pb-10 lg:max-w-4xl print:max-w-full print:text-xs","prose-table:text-center print:prose-headings:mt-2 print:prose-hr:my-4","prose-headings:break-after-avoid prose-p:break-inside-avoid prose-ul:break-before-avoid prose-ul:break-inside-avoid")},a))}function te({children:a}){var i,g;let o=reactExports.useRef(null),{contest:y,student:b,reset:T,participation:O,terminated:M,logout:B}=v(),G=(i=b.personalInformation)==null?void 0:i.name,d=(g=b.personalInformation)==null?void 0:g.surname,s=Math.round(sumBy(Object.values(b.answers??{}),R=>+!!R)/y.problemIds.length*100);return reactExports.useEffect(()=>{},[]),c.createElement("div",{className:"h-dvh screen:overflow-y-scroll"},c.createElement("div",{className:"navbar sticky top-0 z-20 h-16 justify-between bg-base-300/85 px-3 text-base-content backdrop-blur print:hidden"},c.createElement("div",{className:"dropdown max-w-full flex-none"},c.createElement("div",{tabIndex:0,role:"button",className:"btn btn-ghost no-animation w-full flex-nowrap"},c.createElement(User,{className:"flex-none"}),c.createElement("div",{className:"truncate uppercase"},G," ",d)),B&&c.createElement("ul",{className:"menu dropdown-content menu-sm z-30 mt-3 w-52 rounded-box bg-base-300 p-2 text-base-content shadow-lg"},c.createElement("li",null,c.createElement("button",{onClick:B},"Cambia utente")))),c.createElement("div",{className:"h-full gap-3"},c.createElement(L,{className:"hidden min-w-[5rem] sm:block",percentage:s},s,"%"),c.createElement("div",{className:"flex-none px-3"},M||!O.startingTime||!y.duration?c.createElement("span",{className:"font-mono"},"00:00"):c.createElement(Vt$1,{startTime:O.startingTime,duration:y.duration})),c.createElement("div",{className:"h-full flex-none py-0.5"},M&&T?c.createElement("button",{className:"btn btn-warning btn-sm h-full",onClick:T},"Ricomincia"):c.createElement("button",{className:"btn btn-success btn-sm h-full",disabled:M||!O.startingTime,onClick:()=>{var R;return(R=o.current)==null?void 0:R.showModal()}},"Termina")))),c.createElement(jo,{ref:o}),c.createElement(ErrorBoundary,{FallbackComponent:Zt},c.createElement(it,null,c.createElement("h1",{className:"text-pretty"},y.name),a)))}var jo=reactExports.forwardRef(function(a,o){let{submit:y}=v();return c.createElement(jt,{ref:o,title:"Confermi di voler terminare?"},c.createElement("p",null,"Confermando non potrai pi modificare le tue risposte."),c.createElement("div",{className:"mt-3 flex flex-row justify-center gap-5"},c.createElement("button",{className:"btn btn-info"},"Annulla"),c.createElement("button",{className:"btn btn-error",onClick:()=>y()},"Conferma")))}),at=reactExports.createContext({});at.displayName="StudentContext";function I({children:a,...o}){return c.createElement(at.Provider,{value:{...o}},c.createElement(te,null,a))}function v(){return reactExports.useContext(at)}function Ho({contestName:a,duration:o,questionCount:y,children:b}){let[T,O]=oe("submit",!1),[M,B]=oe("student",{id:"",personalInformation:{name:"Utente",surname:"anonimo"},answers:{},variant:"0"}),G=reactExports.useMemo(()=>M.startedAt&&addMinutes(M.startedAt,o),[M.startedAt,o]),d=Ot(G),s={id:"",name:a,problemIds:range(y??0).map(R=>R.toString()),duration:o,personalInformation:[],hasVariants:!0,hasOnline:!0,hasPdf:!0,allowRestart:!0,statementVersion:1},i={id:"",schoolId:"",contestId:"",name:"",teacher:"",startingTime:M.startedAt,finalized:!1},g=reactExports.useCallback(()=>{O(!1),B(R=>({...R,answers:{},startedAt:void 0}))},[B,O]);return c.createElement(I,{contest:s,participation:i,student:M,setStudent:async R=>B(R),submit:()=>O(!0),reset:g,terminated:d||T},b)}function oe(a,o,y){let b=`${window.location.pathname}#${a}`,T=localStorage.getItem(b),[O,M]=reactExports.useState(T?(y??JSON.parse)(T):o),B=reactExports.useCallback(G=>{M(d=>{let s=isFunction$1(G)?G(d):G;return s===void 0?localStorage.removeItem(b):localStorage.setItem(b,JSON.stringify(s)),s})},[b]);return[O,B]}const OlinfoAuth=({children:a,...o})=>jsxRuntimeExports.jsx(Ho,{...o,children:jsxRuntimeExports.jsx(OlinfoWrapper,{children:a})});function OlinfoWrapper({children:a}){const{student:o,setStudent:y}=v(),[b,T]=reactExports.useState();return reactExports.useEffect(()=>{getUser().then(T).catch(O=>console.log(`Error: failed to get user: ${O.message}`))},[]),reactExports.useEffect(()=>{const O=o.personalInformation;b&&(b.name!==O.name||b.surname!==O.surname)&&y({...o,personalInformation:{...O,...b}})},[o,b]),a}async function getUser(){const o=cookie.parse(window.document.cookie).training_token;if(!o)throw new Error("Not logged in");const b=jwtDecode(o).username,O=await(await fetch("https://training.olinfo.it/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get",username:b})})).json();return{name:O.first_name,surname:O.last_name}}export{D$1 as D,OlinfoAuth as O,range as r,useMDXComponents as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/code-highlight-4YYAT6IQ-CDyL9MXa.js","assets/react-dom-DWilhIVE.js","assets/commonjs-helper-3Jsk8tIi.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=olinfo-auth-D_cE6lXy.js.map
