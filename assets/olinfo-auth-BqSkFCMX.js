/*! For licenses information, see LICENSES.txt */
var Dn=Object.defineProperty;var Mn=(a,o,E)=>o in a?Dn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:E}):a[o]=E;var Pr=(a,o,E)=>(Mn(a,typeof o!="symbol"?o+"":o,E),E);import{i as isSymbol,b as baseGetTag,r as root,a as isObjectLike,f as freeGlobal,c as isArray,t as toString,S as Symbol$1,j as jsxRuntimeExports}from"./toString-BpEX5tmT.js";import{r as reactExports,a as c}from"./react-dom-DWilhIVE.js";import{_ as __vitePreload}from"./preload-helper-B_KhYgH7.js";import{g as getDefaultExportFromCjs,c as commonjsGlobal}from"./commonjs-helper-3Jsk8tIi.js";import{Z as ZodError,z as z$1}from"./zod-CXY4Xi5W.js";import{k as katex}from"./katex-DTctDNEF.js";var reWhitespace=/\s/;function trimmedEndIndex(a){for(var o=a.length;o--&&reWhitespace.test(a.charAt(o)););return o}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject(a){var o=typeof a;return a!=null&&(o=="object"||o=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject(a)){var o=typeof a.valueOf=="function"?a.valueOf():a;a=isObject(o)?o+"":o}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var E=reIsBinary.test(a);return E||reIsOctal.test(a)?freeParseInt(a.slice(2),E?2:8):reIsBadHex.test(a)?NAN:+a}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(a){if(!a)return a===0?a:0;if(a=toNumber(a),a===INFINITY$1||a===-INFINITY$1){var o=a<0?-1:1;return o*MAX_INTEGER}return a===a?a:0}function identity(a){return a}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(a){if(!isObject(a))return!1;var o=baseGetTag(a);return o==funcTag$1||o==genTag||o==asyncTag||o==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(a){if(a!=null){try{return funcToString$1.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject(a)||isMasked(a))return!1;var o=isFunction$1(a)?reIsNative:reIsHostCtor;return o.test(toSource(a))}function getValue(a,o){return a==null?void 0:a[o]}function getNative(a,o){var E=getValue(a,o);return baseIsNative(E)?E:void 0}var WeakMap$1=getNative(root,"WeakMap");function apply(a,o,E){switch(E.length){case 0:return a.call(o);case 1:return a.call(o,E[0]);case 2:return a.call(o,E[0],E[1]);case 3:return a.call(o,E[0],E[1],E[2])}return a.apply(o,E)}function noop$1(){}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var o=0,E=0;return function(){var g=nativeNow(),S=HOT_SPAN-(g-E);if(E=g,S>0){if(++o>=HOT_COUNT)return arguments[0]}else o=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),baseSetToString=defineProperty?function(a,o){return defineProperty(a,"toString",{configurable:!0,enumerable:!1,value:constant(o),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(a,o){var E=typeof a;return o=o??MAX_SAFE_INTEGER$1,!!o&&(E=="number"||E!="symbol"&&reIsUint.test(a))&&a>-1&&a%1==0&&a<o}function eq(a,o){return a===o||a!==a&&o!==o}var nativeMax$1=Math.max;function overRest(a,o,E){return o=nativeMax$1(o===void 0?a.length-1:o,0),function(){for(var g=arguments,S=-1,w=nativeMax$1(g.length-o,0),I=Array(w);++S<w;)I[S]=g[o+S];S=-1;for(var F=Array(o+1);++S<o;)F[S]=g[S];return F[o]=E(I),apply(a,this,F)}}function baseRest(a,o){return setToString(overRest(a,o,identity),a+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isArrayLike(a){return a!=null&&isLength(a.length)&&!isFunction$1(a)}function isIterateeCall(a,o,E){if(!isObject(E))return!1;var g=typeof o;return(g=="number"?isArrayLike(E)&&isIndex(o,E.length):g=="string"&&o in E)?eq(E[o],a):!1}var objectProto$8=Object.prototype;function isPrototype(a){var o=a&&a.constructor,E=typeof o=="function"&&o.prototype||objectProto$8;return a===E}function baseTimes(a,o){for(var E=-1,g=Array(a);++E<a;)g[E]=o(E);return g}var argsTag$2="[object Arguments]";function baseIsArguments(a){return isObjectLike(a)&&baseGetTag(a)==argsTag$2}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike(a)&&hasOwnProperty$6.call(a,"callee")&&!propertyIsEnumerable$1.call(a,"callee")};function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(a){return isObjectLike(a)&&isLength(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(o){return a(o)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var a=freeModule&&freeModule.require&&freeModule.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function arrayLikeKeys(a,o){var E=isArray(a),g=!E&&isArguments(a),S=!E&&!g&&isBuffer(a),w=!E&&!g&&!S&&isTypedArray(a),I=E||g||S||w,F=I?baseTimes(a.length,String):[],j=F.length;for(var d in a)(o||hasOwnProperty$5.call(a,d))&&!(I&&(d=="length"||S&&(d=="offset"||d=="parent")||w&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||isIndex(d,j)))&&F.push(d);return F}function overArg(a,o){return function(E){return a(o(E))}}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeys(a){if(!isPrototype(a))return nativeKeys(a);var o=[];for(var E in Object(a))hasOwnProperty$4.call(a,E)&&E!="constructor"&&o.push(E);return o}function keys(a){return isArrayLike(a)?arrayLikeKeys(a):baseKeys(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,o){if(isArray(a))return!1;var E=typeof a;return E=="number"||E=="symbol"||E=="boolean"||a==null||isSymbol(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||o!=null&&a in Object(o)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(a){var o=this.has(a)&&delete this.__data__[a];return this.size-=o?1:0,o}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(a){var o=this.__data__;if(nativeCreate){var E=o[a];return E===HASH_UNDEFINED$2?void 0:E}return hasOwnProperty$3.call(o,a)?o[a]:void 0}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas(a){var o=this.__data__;return nativeCreate?o[a]!==void 0:hasOwnProperty$2.call(o,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,o){var E=this.__data__;return this.size+=this.has(a)?0:1,E[a]=nativeCreate&&o===void 0?HASH_UNDEFINED$1:o,this}function Hash$1(a){var o=-1,E=a==null?0:a.length;for(this.clear();++o<E;){var g=a[o];this.set(g[0],g[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,o){for(var E=a.length;E--;)if(eq(a[E][0],o))return E;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(a){var o=this.__data__,E=assocIndexOf(o,a);if(E<0)return!1;var g=o.length-1;return E==g?o.pop():splice.call(o,E,1),--this.size,!0}function listCacheGet(a){var o=this.__data__,E=assocIndexOf(o,a);return E<0?void 0:o[E][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,o){var E=this.__data__,g=assocIndexOf(E,a);return g<0?(++this.size,E.push([a,o])):E[g][1]=o,this}function ListCache(a){var o=-1,E=a==null?0:a.length;for(this.clear();++o<E;){var g=a[o];this.set(g[0],g[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash$1,map:new(Map$1||ListCache),string:new Hash$1}}function isKeyable(a){var o=typeof a;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?a!=="__proto__":a===null}function getMapData(a,o){var E=a.__data__;return isKeyable(o)?E[typeof o=="string"?"string":"hash"]:E.map}function mapCacheDelete(a){var o=getMapData(this,a).delete(a);return this.size-=o?1:0,o}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,o){var E=getMapData(this,a),g=E.size;return E.set(a,o),this.size+=E.size==g?0:1,this}function MapCache(a){var o=-1,E=a==null?0:a.length;for(this.clear();++o<E;){var g=a[o];this.set(g[0],g[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(a,o){if(typeof a!="function"||o!=null&&typeof o!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var E=function(){var g=arguments,S=o?o.apply(this,g):g[0],w=E.cache;if(w.has(S))return w.get(S);var I=a.apply(this,g);return E.cache=w.set(S,I)||w,I};return E.cache=new(memoize.Cache||MapCache),E}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var o=memoize(a,function(g){return E.size===MAX_MEMOIZE_SIZE&&E.clear(),g}),E=o.cache;return o}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(a){var o=[];return a.charCodeAt(0)===46&&o.push(""),a.replace(rePropName,function(E,g,S,w){o.push(S?w.replace(reEscapeChar,"$1"):g||E)}),o});function castPath(a,o){return isArray(a)?a:isKey(a,o)?[a]:stringToPath(toString(a))}var INFINITY=1/0;function toKey(a){if(typeof a=="string"||isSymbol(a))return a;var o=a+"";return o=="0"&&1/a==-INFINITY?"-0":o}function baseGet(a,o){o=castPath(o,a);for(var E=0,g=o.length;a!=null&&E<g;)a=a[toKey(o[E++])];return E&&E==g?a:void 0}function get(a,o,E){var g=a==null?void 0:baseGet(a,o);return g===void 0?E:g}function arrayPush(a,o){for(var E=-1,g=o.length,S=a.length;++E<g;)a[S+E]=o[E];return a}function baseClamp(a,o,E){return a===a&&(E!==void 0&&(a=a<=E?a:E),o!==void 0&&(a=a>=o?a:o)),a}function clamp(a,o,E){return E===void 0&&(E=o,o=void 0),E!==void 0&&(E=toNumber(E),E=E===E?E:0),o!==void 0&&(o=toNumber(o),o=o===o?o:0),baseClamp(toNumber(a),o,E)}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var o=this.__data__,E=o.delete(a);return this.size=o.size,E}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,o){var E=this.__data__;if(E instanceof ListCache){var g=E.__data__;if(!Map$1||g.length<LARGE_ARRAY_SIZE-1)return g.push([a,o]),this.size=++E.size,this;E=this.__data__=new MapCache(g)}return E.set(a,o),this.size=E.size,this}function Stack(a){var o=this.__data__=new ListCache(a);this.size=o.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(a,o){for(var E=-1,g=a==null?0:a.length,S=0,w=[];++E<g;){var I=a[E];o(I,E,a)&&(w[S++]=I)}return w}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols(a),function(o){return propertyIsEnumerable.call(a,o)}))}:stubArray;const getSymbols$1=getSymbols;function baseGetAllKeys(a,o,E){var g=o(a);return isArray(a)?g:arrayPush(g,E(a))}function getAllKeys(a){return baseGetAllKeys(a,keys,getSymbols$1)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$1||Map$1&&getTag(new Map$1)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag)&&(getTag=function(a){var o=baseGetTag(a),E=o==objectTag$1?a.constructor:void 0,g=E?toSource(E):"";if(g)switch(g){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return o});const getTag$1=getTag;var Uint8Array$1=root.Uint8Array;const Uint8Array$2=Uint8Array$1;var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var o=-1,E=a==null?0:a.length;for(this.__data__=new MapCache;++o<E;)this.add(a[o])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(a,o){for(var E=-1,g=a==null?0:a.length;++E<g;)if(o(a[E],E,a))return!0;return!1}function cacheHas(a,o){return a.has(o)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,o,E,g,S,w){var I=E&COMPARE_PARTIAL_FLAG$5,F=a.length,j=o.length;if(F!=j&&!(I&&j>F))return!1;var d=w.get(a),s=w.get(o);if(d&&s)return d==o&&s==a;var i=-1,y=!0,_=E&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(w.set(a,o),w.set(o,a);++i<F;){var R=a[i],T=o[i];if(g)var b=I?g(T,R,i,o,a,w):g(R,T,i,a,o,w);if(b!==void 0){if(b)continue;y=!1;break}if(_){if(!arraySome(o,function(C,G){if(!cacheHas(_,G)&&(R===C||S(R,C,E,g,w)))return _.push(G)})){y=!1;break}}else if(!(R===T||S(R,T,E,g,w))){y=!1;break}}return w.delete(a),w.delete(o),y}function mapToArray(a){var o=-1,E=Array(a.size);return a.forEach(function(g,S){E[++o]=[S,g]}),E}function setToArray(a){var o=-1,E=Array(a.size);return a.forEach(function(g){E[++o]=g}),E}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,o,E,g,S,w,I){switch(E){case dataViewTag:if(a.byteLength!=o.byteLength||a.byteOffset!=o.byteOffset)return!1;a=a.buffer,o=o.buffer;case arrayBufferTag:return!(a.byteLength!=o.byteLength||!w(new Uint8Array$2(a),new Uint8Array$2(o)));case boolTag:case dateTag:case numberTag:return eq(+a,+o);case errorTag:return a.name==o.name&&a.message==o.message;case regexpTag:case stringTag:return a==o+"";case mapTag:var F=mapToArray;case setTag:var j=g&COMPARE_PARTIAL_FLAG$4;if(F||(F=setToArray),a.size!=o.size&&!j)return!1;var d=I.get(a);if(d)return d==o;g|=COMPARE_UNORDERED_FLAG$2,I.set(a,o);var s=equalArrays(F(a),F(o),g,S,w,I);return I.delete(a),s;case symbolTag:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(o)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(a,o,E,g,S,w){var I=E&COMPARE_PARTIAL_FLAG$3,F=getAllKeys(a),j=F.length,d=getAllKeys(o),s=d.length;if(j!=s&&!I)return!1;for(var i=j;i--;){var y=F[i];if(!(I?y in o:hasOwnProperty$1.call(o,y)))return!1}var _=w.get(a),R=w.get(o);if(_&&R)return _==o&&R==a;var T=!0;w.set(a,o),w.set(o,a);for(var b=I;++i<j;){y=F[i];var C=a[y],G=o[y];if(g)var X=I?g(G,C,y,o,a,w):g(C,G,y,a,o,w);if(!(X===void 0?C===G||S(C,G,E,g,w):X)){T=!1;break}b||(b=y=="constructor")}if(T&&!b){var Q=a.constructor,K=o.constructor;Q!=K&&"constructor"in a&&"constructor"in o&&!(typeof Q=="function"&&Q instanceof Q&&typeof K=="function"&&K instanceof K)&&(T=!1)}return w.delete(a),w.delete(o),T}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(a,o,E,g,S,w){var I=isArray(a),F=isArray(o),j=I?arrayTag:getTag$1(a),d=F?arrayTag:getTag$1(o);j=j==argsTag?objectTag:j,d=d==argsTag?objectTag:d;var s=j==objectTag,i=d==objectTag,y=j==d;if(y&&isBuffer(a)){if(!isBuffer(o))return!1;I=!0,s=!1}if(y&&!s)return w||(w=new Stack),I||isTypedArray(a)?equalArrays(a,o,E,g,S,w):equalByTag(a,o,j,E,g,S,w);if(!(E&COMPARE_PARTIAL_FLAG$2)){var _=s&&hasOwnProperty.call(a,"__wrapped__"),R=i&&hasOwnProperty.call(o,"__wrapped__");if(_||R){var T=_?a.value():a,b=R?o.value():o;return w||(w=new Stack),S(T,b,E,g,w)}}return y?(w||(w=new Stack),equalObjects(a,o,E,g,S,w)):!1}function baseIsEqual(a,o,E,g,S){return a===o?!0:a==null||o==null||!isObjectLike(a)&&!isObjectLike(o)?a!==a&&o!==o:baseIsEqualDeep(a,o,E,g,baseIsEqual,S)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,o,E,g){var S=E.length,w=S,I=!g;if(a==null)return!w;for(a=Object(a);S--;){var F=E[S];if(I&&F[2]?F[1]!==a[F[0]]:!(F[0]in a))return!1}for(;++S<w;){F=E[S];var j=F[0],d=a[j],s=F[1];if(I&&F[2]){if(d===void 0&&!(j in a))return!1}else{var i=new Stack;if(g)var y=g(d,s,j,a,o,i);if(!(y===void 0?baseIsEqual(s,d,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,g,i):y))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject(a)}function getMatchData(a){for(var o=keys(a),E=o.length;E--;){var g=o[E],S=a[g];o[E]=[g,S,isStrictComparable(S)]}return o}function matchesStrictComparable(a,o){return function(E){return E==null?!1:E[a]===o&&(o!==void 0||a in Object(E))}}function baseMatches(a){var o=getMatchData(a);return o.length==1&&o[0][2]?matchesStrictComparable(o[0][0],o[0][1]):function(E){return E===a||baseIsMatch(E,a,o)}}function baseHasIn(a,o){return a!=null&&o in Object(a)}function hasPath(a,o,E){o=castPath(o,a);for(var g=-1,S=o.length,w=!1;++g<S;){var I=toKey(o[g]);if(!(w=a!=null&&E(a,I)))break;a=a[I]}return w||++g!=S?w:(S=a==null?0:a.length,!!S&&isLength(S)&&isIndex(I,S)&&(isArray(a)||isArguments(a)))}function hasIn(a,o){return a!=null&&hasPath(a,o,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,o){return isKey(a)&&isStrictComparable(o)?matchesStrictComparable(toKey(a),o):function(E){var g=get(E,a);return g===void 0&&g===o?hasIn(E,a):baseIsEqual(o,g,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(o){return o==null?void 0:o[a]}}function basePropertyDeep(a){return function(o){return baseGet(o,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity:typeof a=="object"?isArray(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}var FUNC_ERROR_TEXT="Expected a function";function baseDelay(a,o,E){if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){a.apply(void 0,E)},o)}var defer=baseRest(function(a,o){return baseDelay(a,1,o)});function baseSum(a,o){for(var E,g=-1,S=a.length;++g<S;){var w=o(a[g]);w!==void 0&&(E=E===void 0?w:E+w)}return E}var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(a,o,E,g){for(var S=-1,w=nativeMax(nativeCeil((o-a)/(E||1)),0),I=Array(w);w--;)I[g?w:++S]=a,a+=E;return I}function createRange(a){return function(o,E,g){return g&&typeof g!="number"&&isIterateeCall(o,E,g)&&(E=g=void 0),o=toFinite(o),E===void 0?(E=o,o=0):E=toFinite(E),g=g===void 0?o<E?1:-1:toFinite(g),baseRange(o,E,g,a)}}var range=createRange();function sumBy(a,o){return a&&a.length?baseSum(a,baseIteratee(o)):0}var cookie={};cookie.parse=parse;cookie.serialize=serialize$1;var __toString=Object.prototype.toString,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse(a,o){if(typeof a!="string")throw new TypeError("argument str must be a string");for(var E={},g=o||{},S=g.decode||decode,w=0;w<a.length;){var I=a.indexOf("=",w);if(I===-1)break;var F=a.indexOf(";",w);if(F===-1)F=a.length;else if(F<I){w=a.lastIndexOf(";",I-1)+1;continue}var j=a.slice(w,I).trim();if(E[j]===void 0){var d=a.slice(I+1,F).trim();d.charCodeAt(0)===34&&(d=d.slice(1,-1)),E[j]=tryDecode(d,S)}w=F+1}return E}function serialize$1(a,o,E){var g=E||{},S=g.encode||encode;if(typeof S!="function")throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(a))throw new TypeError("argument name is invalid");var w=S(o);if(w&&!fieldContentRegExp.test(w))throw new TypeError("argument val is invalid");var I=a+"="+w;if(g.maxAge!=null){var F=g.maxAge-0;if(isNaN(F)||!isFinite(F))throw new TypeError("option maxAge is invalid");I+="; Max-Age="+Math.floor(F)}if(g.domain){if(!fieldContentRegExp.test(g.domain))throw new TypeError("option domain is invalid");I+="; Domain="+g.domain}if(g.path){if(!fieldContentRegExp.test(g.path))throw new TypeError("option path is invalid");I+="; Path="+g.path}if(g.expires){var j=g.expires;if(!isDate(j)||isNaN(j.valueOf()))throw new TypeError("option expires is invalid");I+="; Expires="+j.toUTCString()}if(g.httpOnly&&(I+="; HttpOnly"),g.secure&&(I+="; Secure"),g.partitioned&&(I+="; Partitioned"),g.priority){var d=typeof g.priority=="string"?g.priority.toLowerCase():g.priority;switch(d){case"low":I+="; Priority=Low";break;case"medium":I+="; Priority=Medium";break;case"high":I+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(g.sameSite){var s=typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite;switch(s){case!0:I+="; SameSite=Strict";break;case"lax":I+="; SameSite=Lax";break;case"strict":I+="; SameSite=Strict";break;case"none":I+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return I}function decode(a){return a.indexOf("%")!==-1?decodeURIComponent(a):a}function encode(a){return encodeURIComponent(a)}function isDate(a){return __toString.call(a)==="[object Date]"||a instanceof Date}function tryDecode(a,o){try{return o(a)}catch{return a}}class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";function b64DecodeUnicode(a){return decodeURIComponent(atob(a).replace(/(.)/g,(o,E)=>{let g=E.charCodeAt(0).toString(16).toUpperCase();return g.length<2&&(g="0"+g),"%"+g}))}function base64UrlDecode(a){let o=a.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(o)}catch{return atob(o)}}function jwtDecode(a,o){if(typeof a!="string")throw new InvalidTokenError("Invalid token specified: must be a string");o||(o={});const E=o.header===!0?0:1,g=a.split(".")[E];if(typeof g!="string")throw new InvalidTokenError(`Invalid token specified: missing part #${E+1}`);let S;try{S=base64UrlDecode(g)}catch(w){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${E+1} (${w.message})`)}try{return JSON.parse(S)}catch(w){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${E+1} (${w.message})`)}}var classnames={exports:{}};(function(a){(function(){var o={}.hasOwnProperty;function E(){for(var w="",I=0;I<arguments.length;I++){var F=arguments[I];F&&(w=S(w,g(F)))}return w}function g(w){if(typeof w=="string"||typeof w=="number")return w;if(typeof w!="object")return"";if(Array.isArray(w))return E.apply(null,w);if(w.toString!==Object.prototype.toString&&!w.toString.toString().includes("[native code]"))return w.toString();var I="";for(var F in w)o.call(w,F)&&w[F]&&(I=S(I,F));return I}function S(w,I){return I?w?w+" "+I:w+I:w}a.exports?(E.default=E,a.exports=E):window.classNames=E})()})(classnames);var classnamesExports=classnames.exports;const D$1=getDefaultExportFromCjs(classnamesExports);function toDate(a){const o=Object.prototype.toString.call(a);return a instanceof Date||typeof a=="object"&&o==="[object Date]"?new a.constructor(+a):typeof a=="number"||o==="[object Number]"||typeof a=="string"||o==="[object String]"?new Date(a):new Date(NaN)}function constructFrom(a,o){return a instanceof Date?new a.constructor(o):new Date(o)}function addMilliseconds(a,o){const E=+toDate(a);return constructFrom(a,E+o)}const millisecondsInMinute=6e4;function addMinutes(a,o){return addMilliseconds(a,o*millisecondsInMinute)}function getRoundingMethod(a){return o=>{const g=(a?Math[a]:Math.trunc)(o);return g===0?0:g}}function differenceInMilliseconds(a,o){return+toDate(a)-+toDate(o)}function differenceInSeconds(a,o,E){const g=differenceInMilliseconds(a,o)/1e3;return getRoundingMethod(E==null?void 0:E.roundingMethod)(g)}var shim={exports:{}},useSyncExternalStoreShim_production_min={};var e=reactExports;function h(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var k=typeof Object.is=="function"?Object.is:h,l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function q(a,o){var E=o(),g=l({inst:{value:E,getSnapshot:o}}),S=g[0].inst,w=g[1];return n(function(){S.value=E,S.getSnapshot=o,r(S)&&w({inst:S})},[a,E,o]),m(function(){return r(S)&&w({inst:S}),a(function(){r(S)&&w({inst:S})})},[a]),p(E),E}function r(a){var o=a.getSnapshot;a=a.value;try{var E=o();return!k(a,E)}catch{return!0}}function t(a,o){return o()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t:q;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;const noop=()=>{},UNDEFINED=noop(),OBJECT=Object,isUndefined=a=>a===UNDEFINED,isFunction=a=>typeof a=="function",mergeObjects=(a,o)=>({...a,...o}),isPromiseLike=a=>isFunction(a.then),table=new WeakMap;let counter=0;const stableHash=a=>{const o=typeof a,E=a&&a.constructor,g=E==Date;let S,w;if(OBJECT(a)===a&&!g&&E!=RegExp){if(S=table.get(a),S)return S;if(S=++counter+"~",table.set(a,S),E==Array){for(S="@",w=0;w<a.length;w++)S+=stableHash(a[w])+",";table.set(a,S)}if(E==OBJECT){S="#";const I=OBJECT.keys(a).sort();for(;!isUndefined(w=I.pop());)isUndefined(a[w])||(S+=w+":"+stableHash(a[w])+",");table.set(a,S)}}else S=g?a.toJSON():o=="symbol"?a.toString():o=="string"?JSON.stringify(a):""+a;return S},SWRGlobalState=new WeakMap,EMPTY_CACHE={},INITIAL_CACHE={},STR_UNDEFINED="undefined",isWindowDefined=typeof window!=STR_UNDEFINED,isDocumentDefined=typeof document!=STR_UNDEFINED,hasRequestAnimationFrame=()=>isWindowDefined&&typeof window.requestAnimationFrame!=STR_UNDEFINED,createCacheHelper=(a,o)=>{const E=SWRGlobalState.get(a);return[()=>!isUndefined(o)&&a.get(o)||EMPTY_CACHE,g=>{if(!isUndefined(o)){const S=a.get(o);o in INITIAL_CACHE||(INITIAL_CACHE[o]=S),E[5](o,mergeObjects(S,g),S||EMPTY_CACHE)}},E[6],()=>!isUndefined(o)&&o in INITIAL_CACHE?INITIAL_CACHE[o]:!isUndefined(o)&&a.get(o)||EMPTY_CACHE]};let online=!0;const isOnline=()=>online,[onWindowEvent,offWindowEvent]=isWindowDefined&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[noop,noop],isVisible=()=>{const a=isDocumentDefined&&document.visibilityState;return isUndefined(a)||a!=="hidden"},initFocus=a=>(isDocumentDefined&&document.addEventListener("visibilitychange",a),onWindowEvent("focus",a),()=>{isDocumentDefined&&document.removeEventListener("visibilitychange",a),offWindowEvent("focus",a)}),initReconnect=a=>{const o=()=>{online=!0,a()},E=()=>{online=!1};return onWindowEvent("online",o),onWindowEvent("offline",E),()=>{offWindowEvent("online",o),offWindowEvent("offline",E)}},preset={isOnline,isVisible},defaultConfigOptions={initFocus,initReconnect},IS_REACT_LEGACY=!c.useId,IS_SERVER=!isWindowDefined||"Deno"in window,rAF=a=>hasRequestAnimationFrame()?window.requestAnimationFrame(a):setTimeout(a,1),useIsomorphicLayoutEffect=IS_SERVER?reactExports.useEffect:reactExports.useLayoutEffect,navigatorConnection=typeof navigator<"u"&&navigator.connection,slowConnection=!IS_SERVER&&navigatorConnection&&(["slow-2g","2g"].includes(navigatorConnection.effectiveType)||navigatorConnection.saveData),serialize=a=>{if(isFunction(a))try{a=a()}catch{a=""}const o=a;return a=typeof a=="string"?a:(Array.isArray(a)?a.length:a)?stableHash(a):"",[a,o]};let __timestamp=0;const getTimestamp=()=>++__timestamp,FOCUS_EVENT=0,RECONNECT_EVENT=1,MUTATE_EVENT=2,ERROR_REVALIDATE_EVENT=3;var events={__proto__:null,ERROR_REVALIDATE_EVENT,FOCUS_EVENT,MUTATE_EVENT,RECONNECT_EVENT};async function internalMutate(...a){const[o,E,g,S]=a,w=mergeObjects({populateCache:!0,throwOnError:!0},typeof S=="boolean"?{revalidate:S}:S||{});let I=w.populateCache;const F=w.rollbackOnError;let j=w.optimisticData;const d=w.revalidate!==!1,s=_=>typeof F=="function"?F(_):F!==!1,i=w.throwOnError;if(isFunction(E)){const _=E,R=[],T=o.keys();for(const b of T)!/^\$(inf|sub)\$/.test(b)&&_(o.get(b)._k)&&R.push(b);return Promise.all(R.map(y))}return y(E);async function y(_){const[R]=serialize(_);if(!R)return;const[T,b]=createCacheHelper(o,R),[C,G,X,Q]=SWRGlobalState.get(o),K=()=>{const pe=C[R];return d&&(delete X[R],delete Q[R],pe&&pe[0])?pe[0](MUTATE_EVENT).then(()=>T().data):T().data};if(a.length<3)return K();let oe=g,ce;const ue=getTimestamp();G[R]=[ue,0];const be=!isUndefined(j),Ae=T(),Oe=Ae.data,et=Ae._c,De=isUndefined(et)?Oe:et;if(be&&(j=isFunction(j)?j(De,Oe):j,b({data:j,_c:De})),isFunction(oe))try{oe=oe(De)}catch(pe){ce=pe}if(oe&&isPromiseLike(oe))if(oe=await oe.catch(pe=>{ce=pe}),ue!==G[R][0]){if(ce)throw ce;return oe}else ce&&be&&s(ce)&&(I=!0,b({data:De,_c:UNDEFINED}));if(I&&!ce)if(isFunction(I)){const pe=I(oe,De);b({data:pe,error:UNDEFINED,_c:UNDEFINED})}else b({data:oe,error:UNDEFINED,_c:UNDEFINED});if(G[R][1]=getTimestamp(),Promise.resolve(K()).then(()=>{b({_c:UNDEFINED})}),ce){if(i)throw ce;return}return oe}}const revalidateAllKeys=(a,o)=>{for(const E in a)a[E][0]&&a[E][0](o)},initCache=(a,o)=>{if(!SWRGlobalState.has(a)){const E=mergeObjects(defaultConfigOptions,o),g={},S=internalMutate.bind(UNDEFINED,a);let w=noop;const I={},F=(s,i)=>{const y=I[s]||[];return I[s]=y,y.push(i),()=>y.splice(y.indexOf(i),1)},j=(s,i,y)=>{a.set(s,i);const _=I[s];if(_)for(const R of _)R(i,y)},d=()=>{if(!SWRGlobalState.has(a)&&(SWRGlobalState.set(a,[g,{},{},{},S,j,F]),!IS_SERVER)){const s=E.initFocus(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,g,FOCUS_EVENT))),i=E.initReconnect(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,g,RECONNECT_EVENT)));w=()=>{s&&s(),i&&i(),SWRGlobalState.delete(a)}}};return d(),[a,S,d,w]}return[a,SWRGlobalState.get(a)[4]]},onErrorRetry=(a,o,E,g,S)=>{const w=E.errorRetryCount,I=S.retryCount,F=~~((Math.random()+.5)*(1<<(I<8?I:8)))*E.errorRetryInterval;!isUndefined(w)&&I>w||setTimeout(g,F,S)},compare=(a,o)=>stableHash(a)==stableHash(o),[cache,mutate]=initCache(new Map),defaultConfig=mergeObjects({onLoadingSlow:noop,onSuccess:noop,onError:noop,onErrorRetry,onDiscarded:noop,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:slowConnection?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:slowConnection?5e3:3e3,compare,isPaused:()=>!1,cache,mutate,fallback:{}},preset),mergeConfigs=(a,o)=>{const E=mergeObjects(a,o);if(o){const{use:g,fallback:S}=a,{use:w,fallback:I}=o;g&&w&&(E.use=g.concat(w)),S&&I&&(E.fallback=mergeObjects(S,I))}return E},SWRConfigContext=reactExports.createContext({}),INFINITE_PREFIX="$inf$",enableDevtools=isWindowDefined&&window.__SWR_DEVTOOLS_USE__,use$1=enableDevtools?window.__SWR_DEVTOOLS_USE__:[],setupDevTools=()=>{enableDevtools&&(window.__SWR_DEVTOOLS_REACT__=c)},normalize=a=>isFunction(a[1])?[a[0],a[1],a[2]||{}]:[a[0],null,(a[1]===null?a[2]:a[1])||{}],useSWRConfig=()=>mergeObjects(defaultConfig,reactExports.useContext(SWRConfigContext)),middleware=a=>(o,E,g)=>a(o,E&&((...w)=>{const[I]=serialize(o),[,,,F]=SWRGlobalState.get(cache);if(I.startsWith(INFINITE_PREFIX))return E(...w);const j=F[I];return isUndefined(j)?E(...w):(delete F[I],j)}),g),BUILT_IN_MIDDLEWARE=use$1.concat(middleware),withArgs=a=>function(...E){const g=useSWRConfig(),[S,w,I]=normalize(E),F=mergeConfigs(g,I);let j=a;const{use:d}=F,s=(d||[]).concat(BUILT_IN_MIDDLEWARE);for(let i=s.length;i--;)j=s[i](j);return j(S,w||F.fetcher||null,F)},subscribeCallback=(a,o,E)=>{const g=o[a]||(o[a]=[]);return g.push(E),()=>{const S=g.indexOf(E);S>=0&&(g[S]=g[g.length-1],g.pop())}},withMiddleware=(a,o)=>(...E)=>{const[g,S,w]=normalize(E),I=(w.use||[]).concat(o);return a(g,S,{...w,use:I})};setupDevTools();const use=c.use||(a=>{if(a.status==="pending")throw a;if(a.status==="fulfilled")return a.value;throw a.status==="rejected"?a.reason:(a.status="pending",a.then(o=>{a.status="fulfilled",a.value=o},o=>{a.status="rejected",a.reason=o}),a)}),WITH_DEDUPE={dedupe:!0},useSWRHandler=(a,o,E)=>{const{cache:g,compare:S,suspense:w,fallbackData:I,revalidateOnMount:F,revalidateIfStale:j,refreshInterval:d,refreshWhenHidden:s,refreshWhenOffline:i,keepPreviousData:y}=E,[_,R,T,b]=SWRGlobalState.get(g),[C,G]=serialize(a),X=reactExports.useRef(!1),Q=reactExports.useRef(!1),K=reactExports.useRef(C),oe=reactExports.useRef(o),ce=reactExports.useRef(E),ue=()=>ce.current,be=()=>ue().isVisible()&&ue().isOnline(),[Ae,Oe,et,De]=createCacheHelper(g,C),pe=reactExports.useRef({}).current,Me=isUndefined(I)?E.fallback[C]:I,le=(me,ye)=>{for(const Ne in pe){const _e=Ne;if(_e==="data"){if(!S(me[_e],ye[_e])&&(!isUndefined(me[_e])||!S(lt,ye[_e])))return!1}else if(ye[_e]!==me[_e])return!1}return!0},xt=reactExports.useMemo(()=>{const me=!C||!o?!1:isUndefined(F)?ue().isPaused()||w?!1:isUndefined(j)?!0:j:F,ye=Pe=>{const ot=mergeObjects(Pe);return delete ot._k,me?{isValidating:!0,isLoading:!0,...ot}:ot},Ne=Ae(),_e=De(),Be=ye(Ne),pt=Ne===_e?Be:ye(_e);let xe=Be;return[()=>{const Pe=ye(Ae());return le(Pe,xe)?(xe.data=Pe.data,xe.isLoading=Pe.isLoading,xe.isValidating=Pe.isValidating,xe.error=Pe.error,xe):(xe=Pe,Pe)},()=>pt]},[g,C]),$e=shimExports.useSyncExternalStore(reactExports.useCallback(me=>et(C,(ye,Ne)=>{le(Ne,ye)||me()}),[g,C]),xt[0],xt[1]),Rt=!X.current,Et=_[C]&&_[C].length>0,qe=$e.data,st=isUndefined(qe)?Me:qe,ut=$e.error,vt=reactExports.useRef(st),lt=y?isUndefined(qe)?vt.current:qe:st,Ct=Et&&!isUndefined(ut)?!1:Rt&&!isUndefined(F)?F:ue().isPaused()?!1:w?isUndefined(st)?!1:j:isUndefined(st)||j,At=!!(C&&o&&Rt&&Ct),Mt=isUndefined($e.isValidating)?At:$e.isValidating,Pt=isUndefined($e.isLoading)?At:$e.isLoading,ft=reactExports.useCallback(async me=>{const ye=oe.current;if(!C||!ye||Q.current||ue().isPaused())return!1;let Ne,_e,Be=!0;const pt=me||{},xe=!T[C]||!pt.dedupe,Pe=()=>IS_REACT_LEGACY?!Q.current&&C===K.current&&X.current:C===K.current,ot={isValidating:!1,isLoading:!1},Yt=()=>{Oe(ot)},Xt=()=>{const Ke=T[C];Ke&&Ke[1]===_e&&delete T[C]},Jt={isValidating:!0};isUndefined(Ae().data)&&(Jt.isLoading=!0);try{if(xe&&(Oe(Jt),E.loadingTimeout&&isUndefined(Ae().data)&&setTimeout(()=>{Be&&Pe()&&ue().onLoadingSlow(C,E)},E.loadingTimeout),T[C]=[ye(G),getTimestamp()]),[Ne,_e]=T[C],Ne=await Ne,xe&&setTimeout(Xt,E.dedupingInterval),!T[C]||T[C][1]!==_e)return xe&&Pe()&&ue().onDiscarded(C),!1;ot.error=UNDEFINED;const Ke=R[C];if(!isUndefined(Ke)&&(_e<=Ke[0]||_e<=Ke[1]||Ke[1]===0))return Yt(),xe&&Pe()&&ue().onDiscarded(C),!1;const ct=Ae().data;ot.data=S(ct,Ne)?ct:Ne,xe&&Pe()&&ue().onSuccess(Ne,C,E)}catch(Ke){Xt();const ct=ue(),{shouldRetryOnError:Lt}=ct;ct.isPaused()||(ot.error=Ke,xe&&Pe()&&(ct.onError(Ke,C,ct),(Lt===!0||isFunction(Lt)&&Lt(Ke))&&be()&&ct.onErrorRetry(Ke,C,ct,$t=>{const Kt=_[C];Kt&&Kt[0]&&Kt[0](events.ERROR_REVALIDATE_EVENT,$t)},{retryCount:(pt.retryCount||0)+1,dedupe:!0})))}return Be=!1,Yt(),!0},[C,g]),Ee=reactExports.useCallback((...me)=>internalMutate(g,K.current,...me),[]);if(useIsomorphicLayoutEffect(()=>{oe.current=o,ce.current=E,isUndefined(qe)||(vt.current=qe)}),useIsomorphicLayoutEffect(()=>{if(!C)return;const me=ft.bind(UNDEFINED,WITH_DEDUPE);let ye=0;const _e=subscribeCallback(C,_,(Be,pt={})=>{if(Be==events.FOCUS_EVENT){const xe=Date.now();ue().revalidateOnFocus&&xe>ye&&be()&&(ye=xe+ue().focusThrottleInterval,me())}else if(Be==events.RECONNECT_EVENT)ue().revalidateOnReconnect&&be()&&me();else{if(Be==events.MUTATE_EVENT)return ft();if(Be==events.ERROR_REVALIDATE_EVENT)return ft(pt)}});return Q.current=!1,K.current=C,X.current=!0,Oe({_k:G}),Ct&&(isUndefined(st)||IS_SERVER?me():rAF(me)),()=>{Q.current=!0,_e()}},[C]),useIsomorphicLayoutEffect(()=>{let me;function ye(){const _e=isFunction(d)?d(Ae().data):d;_e&&me!==-1&&(me=setTimeout(Ne,_e))}function Ne(){!Ae().error&&(s||ue().isVisible())&&(i||ue().isOnline())?ft(WITH_DEDUPE).then(ye):ye()}return ye(),()=>{me&&(clearTimeout(me),me=-1)}},[d,s,i,C]),reactExports.useDebugValue(lt),w&&isUndefined(st)&&C){if(!IS_REACT_LEGACY&&IS_SERVER)throw new Error("Fallback data is required when using suspense in SSR.");oe.current=o,ce.current=E,Q.current=!1;const me=b[C];if(!isUndefined(me)){const ye=Ee(me);use(ye)}if(isUndefined(ut)){const ye=ft(WITH_DEDUPE);isUndefined(lt)||(ye.status="fulfilled",ye.value=!0),use(ye)}else throw ut}return{mutate:Ee,get data(){return pe.data=!0,lt},get error(){return pe.error=!0,ut},get isValidating(){return pe.isValidating=!0,Mt},get isLoading(){return pe.isLoading=!0,Pt}}},useSWR=withArgs(useSWRHandler),immutable=a=>(o,E,g)=>(g.revalidateOnFocus=!1,g.revalidateIfStale=!1,g.revalidateOnReconnect=!1,a(o,E,g)),useSWRImmutable=withMiddleware(useSWR,immutable);var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const toKebabCase=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(a,o)=>{const E=reactExports.forwardRef(({color:g="currentColor",size:S=24,strokeWidth:w=2,absoluteStrokeWidth:I,className:F="",children:j,...d},s)=>reactExports.createElement("svg",{ref:s,...defaultAttributes,width:S,height:S,stroke:g,strokeWidth:I?Number(w)*24/Number(S):w,className:["lucide",`lucide-${toKebabCase(a)}`,F].join(" "),...d},[...o.map(([i,y])=>reactExports.createElement(i,y)),...Array.isArray(j)?j:[j]]));return E.displayName=`${a}`,E};const AlertTriangle=createLucideIcon("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const CheckCircle2=createLucideIcon("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const HelpCircle=createLucideIcon("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const MessageSquareOff=createLucideIcon("MessageSquareOff",[["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M3.6 3.6c-.4.3-.6.8-.6 1.4v16l4-4h10",key:"pwpm4a"}]]);const Pause=createLucideIcon("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const RotateCw=createLucideIcon("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);const Send=createLucideIcon("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const SkipForward=createLucideIcon("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const XCircle=createLucideIcon("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function isBytes$1(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}function bytes(a,...o){if(!isBytes$1(a))throw new Error("Expected Uint8Array");if(o.length>0&&!o.includes(a.length))throw new Error(`Expected Uint8Array of length ${o}, not of length=${a.length}`)}function exists(a,o=!0){if(a.destroyed)throw new Error("Hash instance has been destroyed");if(o&&a.finished)throw new Error("Hash#digest() has already been called")}function output(a,o){bytes(a);const E=o.outputLen;if(a.length<E)throw new Error(`digestInto() expects output buffer of length at least ${E}`)}function isBytes(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}const createView=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),rotr=(a,o)=>a<<32-o|a>>>o,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes(a){if(typeof a!="string")throw new Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function toBytes(a){if(typeof a=="string"&&(a=utf8ToBytes(a)),!isBytes(a))throw new Error(`expected Uint8Array, got ${typeof a}`);return a}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(a){const o=g=>a().update(toBytes(g)).digest(),E=a();return o.outputLen=E.outputLen,o.blockLen=E.blockLen,o.create=()=>a(),o}function setBigUint64(a,o,E,g){if(typeof a.setBigUint64=="function")return a.setBigUint64(o,E,g);const S=BigInt(32),w=BigInt(4294967295),I=Number(E>>S&w),F=Number(E&w),j=g?4:0,d=g?0:4;a.setUint32(o+j,I,g),a.setUint32(o+d,F,g)}class SHA2 extends Hash{constructor(o,E,g,S){super(),this.blockLen=o,this.outputLen=E,this.padOffset=g,this.isLE=S,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(o),this.view=createView(this.buffer)}update(o){exists(this);const{view:E,buffer:g,blockLen:S}=this;o=toBytes(o);const w=o.length;for(let I=0;I<w;){const F=Math.min(S-this.pos,w-I);if(F===S){const j=createView(o);for(;S<=w-I;I+=S)this.process(j,I);continue}g.set(o.subarray(I,I+F),this.pos),this.pos+=F,I+=F,this.pos===S&&(this.process(E,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){exists(this),output(o,this),this.finished=!0;const{buffer:E,view:g,blockLen:S,isLE:w}=this;let{pos:I}=this;E[I++]=128,this.buffer.subarray(I).fill(0),this.padOffset>S-I&&(this.process(g,0),I=0);for(let i=I;i<S;i++)E[i]=0;setBigUint64(g,S-8,BigInt(this.length*8),w),this.process(g,0);const F=createView(o),j=this.outputLen;if(j%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=j/4,s=this.get();if(d>s.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<d;i++)F.setUint32(4*i,s[i],w)}digest(){const{buffer:o,outputLen:E}=this;this.digestInto(o);const g=o.slice(0,E);return this.destroy(),g}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:E,buffer:g,length:S,finished:w,destroyed:I,pos:F}=this;return o.length=S,o.pos=F,o.finished=w,o.destroyed=I,S%E&&o.buffer.set(g),o}}const Chi=(a,o,E)=>a&o^~a&E,Maj=(a,o,E)=>a&o^a&E^o&E,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:o,B:E,C:g,D:S,E:w,F:I,G:F,H:j}=this;return[o,E,g,S,w,I,F,j]}set(o,E,g,S,w,I,F,j){this.A=o|0,this.B=E|0,this.C=g|0,this.D=S|0,this.E=w|0,this.F=I|0,this.G=F|0,this.H=j|0}process(o,E){for(let i=0;i<16;i++,E+=4)SHA256_W[i]=o.getUint32(E,!1);for(let i=16;i<64;i++){const y=SHA256_W[i-15],_=SHA256_W[i-2],R=rotr(y,7)^rotr(y,18)^y>>>3,T=rotr(_,17)^rotr(_,19)^_>>>10;SHA256_W[i]=T+SHA256_W[i-7]+R+SHA256_W[i-16]|0}let{A:g,B:S,C:w,D:I,E:F,F:j,G:d,H:s}=this;for(let i=0;i<64;i++){const y=rotr(F,6)^rotr(F,11)^rotr(F,25),_=s+y+Chi(F,j,d)+SHA256_K[i]+SHA256_W[i]|0,T=(rotr(g,2)^rotr(g,13)^rotr(g,22))+Maj(g,S,w)|0;s=d,d=j,j=F,F=I+_|0,I=w,w=S,S=g,g=_+T|0}g=g+this.A|0,S=S+this.B|0,w=w+this.C|0,I=I+this.D|0,F=F+this.E|0,j=j+this.F|0,d=d+this.G|0,s=s+this.H|0,this.set(g,S,w,I,F,j,d,s)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256=wrapConstructor(()=>new SHA256);class ValidationError extends Error{constructor(E,g){super(E,g);Pr(this,"name");Pr(this,"details");this.name="ZodValidationError",this.details=getIssuesFromErrorOptions(g)}toString(){return this.message}}function getIssuesFromErrorOptions(a){if(a){const o=a.cause;if(o instanceof ZodError)return o.issues}return[]}const ISSUE_SEPARATOR="; ",MAX_ISSUES_IN_MESSAGE=99,PREFIX="Validation error",PREFIX_SEPARATOR=": ",UNION_SEPARATOR=", or ";function prefixMessage(a,o,E){return o!==null?a.length>0?[o,a].join(E):o:a.length>0?a:PREFIX}const identifierRegex=/[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*/u;function joinPath(a){return a.length===1?a[0].toString():a.reduce((o,E)=>{if(typeof E=="number")return o+"["+E.toString()+"]";if(E.includes('"'))return o+'["'+escapeQuotes(E)+'"]';if(!identifierRegex.test(E))return o+'["'+E+'"]';const g=o.length===0?"":".";return o+g+E},"")}function escapeQuotes(a){return a.replace(/"/g,'\\"')}function isNonEmptyArray(a){return a.length!==0}function getMessageFromZodIssue(a){const{issue:o,issueSeparator:E,unionSeparator:g,includePath:S}=a;if(o.code==="invalid_union")return o.unionErrors.reduce((w,I)=>{const F=I.issues.map(j=>getMessageFromZodIssue({issue:j,issueSeparator:E,unionSeparator:g,includePath:S})).join(E);return w.includes(F)||w.push(F),w},[]).join(g);if(S&&isNonEmptyArray(o.path)){if(o.path.length===1){const w=o.path[0];if(typeof w=="number")return`${o.message} at index ${w}`}return`${o.message} at "${joinPath(o.path)}"`}return o.message}function fromZodError(a,o={}){const{maxIssuesInMessage:E=MAX_ISSUES_IN_MESSAGE,issueSeparator:g=ISSUE_SEPARATOR,unionSeparator:S=UNION_SEPARATOR,prefixSeparator:w=PREFIX_SEPARATOR,prefix:I=PREFIX,includePath:F=!0}=o,j=a.errors,d=j.length===0?a.message:j.slice(0,E).map(i=>getMessageFromZodIssue({issue:i,issueSeparator:g,unionSeparator:S,includePath:F})).join(g),s=prefixMessage(d,I,w);return new ValidationError(s,{cause:a})}var define_import_meta_env_default={QUIZMS_MODE:"training",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};reactExports.createContext({});function L({percentage:a,className:o,children:E}){let g=a===void 0?void 0:Math.round(a);return g!==void 0&&(g=Number.isNaN(g)?void 0:clamp(g,0,100)),c.createElement("div",{className:D$1("relative p-2 pt-0 text-center",o)},c.createElement("div",{className:"relative z-10"},E),c.createElement("progress",{className:"progress progress-info absolute inset-x-0",value:g,max:"100"}))}function Tt$1(){return c.createElement("div",{className:"not-prose flex h-full items-center justify-center"},c.createElement(L,null,c.createElement("p",{className:"pb-1"},"Caricamento in corso...")))}var jt=reactExports.forwardRef(function({title:a,className:o,children:E},g){return c.createElement("dialog",{ref:g,className:"modal"},c.createElement("form",{method:"dialog",className:D$1("modal-box",o)},c.createElement("button",{className:"btn btn-circle btn-ghost btn-sm absolute right-2 top-2","aria-label":"Chiudi"},""),c.createElement("h3",{className:"mb-3 mt-0 text-lg font-bold"},a),E),c.createElement("form",{method:"dialog",className:"modal-backdrop"},c.createElement("button",null,"Chiudi")))});function D(){let{data:a}=useSWRImmutable("time-server",J,{suspense:!0});return()=>addMilliseconds(new Date,a)}async function J(){if(!define_import_meta_env_default.QUIZMS_TIME_SERVER)return 0;try{let a=await fetch(define_import_meta_env_default.QUIZMS_TIME_SERVER);if(!a.ok)return 0;let o=Date.now(),E=await a.text(),g=Number(E);return Number.isNaN(g)?0:g-o}catch{return 0}}function Ot(a){let o=D(),E=reactExports.useCallback(()=>!!a&&o()>=a,[a,o]),[g,S]=reactExports.useState(E),w=reactExports.useCallback(()=>!g&&E()&&S(!0),[g,E]);return reactExports.useEffect(()=>{if(!a){S(!1);return}let I=differenceInMilliseconds(a,o());if(I<0)return;let F=setTimeout(w,I+5);return()=>clearTimeout(F)},[a,w,o]),reactExports.useEffect(()=>(window.addEventListener("visibilitychange",w),()=>window.removeEventListener("visibilitychange",w)),[w]),g}function Vt(a){let o=D(),[E,g]=reactExports.useState(o()),S=a.endTime??addMinutes(a.startTime,a.duration);if(reactExports.useEffect(()=>{if(!S)return;let j=setInterval(()=>{let d=o();g(d),d>=S&&clearInterval(j)},100);return()=>clearInterval(j)},[S,o]),!S)return c.createElement("span",{className:"font-mono"},"--:--");let w=Math.max(differenceInSeconds(S,E),0);a.duration&&(w=Math.min(w,a.duration*60));let I=Math.floor(w/60),F=w%60;return c.createElement("span",{className:"countdown font-mono"},c.createElement("span",{style:{"--value":I}}),":",c.createElement("span",{style:{"--value":F}}))}function Zt({error:a,resetErrorBoundary:o}){return reactExports.useEffect(()=>{},[o]),c.createElement("div",{className:"flex size-full flex-col items-center justify-center"},c.createElement("p",{className:"mx-8 break-words text-center text-error"},"Errore: ",a.message),o&&c.createElement("div",{className:"mt-5 flex flex-row justify-center"},c.createElement("button",{className:"btn btn-error",onClick:o},c.createElement(RotateCw,null),"Ricarica")))}var N=z$1.object({name:z$1.string(),label:z$1.string(),size:z$1.enum(["xs","sm","md","lg","xl"]).optional(),pinned:z$1.boolean().optional()}),rt=N.extend({type:z$1.literal("text")}),it=N.extend({type:z$1.literal("number"),min:z$1.number().optional(),max:z$1.number().optional()}),at=N.extend({type:z$1.literal("date"),min:z$1.date(),max:z$1.date()});z$1.object({id:z$1.string(),name:z$1.string(),problemIds:z$1.coerce.string().array(),contestWindowStart:z$1.date().optional(),contestWindowEnd:z$1.date().optional(),duration:z$1.coerce.number().positive().optional(),statementVersion:z$1.number(),personalInformation:z$1.array(z$1.discriminatedUnion("type",[rt,it,at])),hasVariants:z$1.boolean(),hasOnline:z$1.boolean(),hasPdf:z$1.boolean(),allowRestart:z$1.boolean(),instructions:z$1.string().optional()});z$1.object({uid:z$1.string(),personalInformation:z$1.record(z$1.union([z$1.string(),z$1.number(),z$1.date()]).optional()),participationId:z$1.string(),contestId:z$1.string(),token:z$1.string(),startedAt:z$1.date(),variant:z$1.string(),disabled:z$1.boolean(),answers:z$1.record(z$1.string().optional()),extraData:z$1.record(z$1.any()).optional(),createdAt:z$1.date(),updatedAt:z$1.date()}).partial().extend({id:z$1.string()});z$1.object({id:z$1.string(),studentId:z$1.string()});z$1.object({id:z$1.string(),studentId:z$1.string(),participationId:z$1.string()});z$1.object({id:z$1.string(),studentId:z$1.string(),token:z$1.string(),name:z$1.string(),surname:z$1.string()});z$1.object({id:z$1.string(),contestId:z$1.string(),schema:z$1.record(z$1.object({type:z$1.enum(["text","number"]),options:z$1.string().array().nonempty().optional(),blankOption:z$1.string().optional(),pointsCorrect:z$1.number().optional(),pointsBlank:z$1.number().optional(),pointsWrong:z$1.number().optional(),solution:z$1.string().optional(),originalId:z$1.coerce.string().optional()}))});z$1.object({id:z$1.string(),variant:z$1.string()});function Se(a,o){var w,I;let E=a.answers,g=(w=o[a.variant])==null?void 0:w.schema;if(!g||!E)return;let S=0;for(let F in g){let j=g[F],d=(I=E[F])==null?void 0:I.trim(),s=dt(j,d);if(s===void 0)return;S+=s}return S}function dt(a,o){if(!(a.pointsCorrect===void 0||a.pointsBlank===void 0||a.pointsWrong===void 0||a.solution===void 0))return o===void 0||o===""||o===a.blankOption?a.pointsBlank:o.toUpperCase()===a.solution.toUpperCase()?a.pointsCorrect:a.pointsWrong}z$1.object({id:z$1.string(),schoolId:z$1.string(),contestId:z$1.string(),name:z$1.string(),teacher:z$1.string(),token:z$1.string().optional(),startingTime:z$1.date().optional(),finalized:z$1.boolean().default(!1),pdfVariants:z$1.array(z$1.coerce.string()).optional()});z$1.object({id:z$1.string(),participationId:z$1.string(),contestId:z$1.string(),startingTime:z$1.date()});z$1.object({id:z$1.string(),uid:z$1.string(),answers:z$1.record(z$1.string().optional()),submittedAt:z$1.date().optional()});function mt(a,o,E){let g=a.safeParse(o);if(!g.success)throw fromZodError(g.error,E);return g.data}var XoroShiro128Plus=function(){function a(o,E,g,S){this.s01=o,this.s00=E,this.s11=g,this.s10=S}return a.prototype.clone=function(){return new a(this.s01,this.s00,this.s11,this.s10)},a.prototype.next=function(){var o=new a(this.s01,this.s00,this.s11,this.s10),E=o.unsafeNext();return[E,o]},a.prototype.unsafeNext=function(){var o=this.s00+this.s10|0,E=this.s10^this.s00,g=this.s11^this.s01,S=this.s00,w=this.s01;return this.s00=S<<24^w>>>8^E^E<<16,this.s01=w<<24^S>>>8^g^(g<<16|E>>>16),this.s10=g<<5^E>>>27,this.s11=E<<5^g>>>27,o},a.prototype.jump=function(){var o=new a(this.s01,this.s00,this.s11,this.s10);return o.unsafeJump(),o},a.prototype.unsafeJump=function(){for(var o=0,E=0,g=0,S=0,w=[3639956645,3750757012,1261568508,386426335],I=0;I!==4;++I)for(var F=1;F;F<<=1)w[I]&F&&(o^=this.s01,E^=this.s00,g^=this.s11,S^=this.s10),this.unsafeNext();this.s01=o,this.s00=E,this.s11=g,this.s10=S},a}(),xoroshiro128plus=function(a){return new XoroShiro128Plus(-1,~a,a|0,0)};function fromNumberToArrayInt64(a,o){if(o<0){var E=-o;a.sign=-1,a.data[0]=~~(E/4294967296),a.data[1]=E>>>0}else a.sign=1,a.data[0]=~~(o/4294967296),a.data[1]=o>>>0;return a}function substractArrayInt64(a,o,E){var g=o.data[1],S=o.data[0],w=o.sign,I=E.data[1],F=E.data[0],j=E.sign;if(a.sign=1,w===1&&j===-1){var d=g+I,s=S+F+(d>4294967295?1:0);return a.data[0]=s>>>0,a.data[1]=d>>>0,a}var i=g,y=S,_=I,R=F;w===-1&&(i=I,y=F,_=g,R=S);var T=0,b=i-_;return b<0&&(T=1,b=b>>>0),a.data[0]=y-R-T,a.data[1]=b,a}function unsafeUniformIntDistributionInternal(a,o){for(var E=a>2?~~(4294967296/a)*a:4294967296,g=o.unsafeNext()+2147483648;g>=E;)g=o.unsafeNext()+2147483648;return g%a}function unsafeUniformArrayIntDistributionInternal(a,o,E){for(var g=o.length;;){for(var S=0;S!==g;++S){var w=S===0?o[0]+1:4294967296,I=unsafeUniformIntDistributionInternal(w,E);a[S]=I}for(var S=0;S!==g;++S){var F=a[S],j=o[S];if(F<j)return a;if(F>j)break}}}var safeNumberMaxSafeInteger=Number.MAX_SAFE_INTEGER,sharedA={sign:1,data:[0,0]},sharedB={sign:1,data:[0,0]},sharedC={sign:1,data:[0,0]},sharedData=[0,0];function uniformLargeIntInternal(a,o,E,g){var S=E<=safeNumberMaxSafeInteger?fromNumberToArrayInt64(sharedC,E):substractArrayInt64(sharedC,fromNumberToArrayInt64(sharedA,o),fromNumberToArrayInt64(sharedB,a));return S.data[1]===4294967295?(S.data[0]+=1,S.data[1]=0):S.data[1]+=1,unsafeUniformArrayIntDistributionInternal(sharedData,S.data,g),sharedData[0]*4294967296+sharedData[1]+a}function unsafeUniformIntDistribution(a,o,E){var g=o-a;if(g<=4294967295){var S=unsafeUniformIntDistributionInternal(g+1,E);return S+a}return uniformLargeIntInternal(a,o,g,E)}const ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(o){super(o),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(o){return{didCatch:!0,error:o}}resetErrorBoundary(){const{error:o}=this.state;if(o!==null){for(var E,g,S=arguments.length,w=new Array(S),I=0;I<S;I++)w[I]=arguments[I];(E=(g=this.props).onReset)===null||E===void 0||E.call(g,{args:w,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(o,E){var g,S;(g=(S=this.props).onError)===null||g===void 0||g.call(S,o,E)}componentDidUpdate(o,E){const{didCatch:g}=this.state,{resetKeys:S}=this.props;if(g&&E.error!==null&&hasArrayChanged(o.resetKeys,S)){var w,I;(w=(I=this.props).onReset)===null||w===void 0||w.call(I,{next:S,prev:o.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:o,fallbackRender:E,FallbackComponent:g,fallback:S}=this.props,{didCatch:w,error:I}=this.state;let F=o;if(w){const j={error:I,resetErrorBoundary:this.resetErrorBoundary};if(typeof E=="function")F=E(j);else if(g)F=reactExports.createElement(g,j);else if(S===null||reactExports.isValidElement(S))F=S;else throw I}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:w,error:I,resetErrorBoundary:this.resetErrorBoundary}},F)}}function hasArrayChanged(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return a.length!==o.length||a.some((E,g)=>!Object.is(E,o[g]))}var x=class{constructor(a){this.randInt=(o,E)=>unsafeUniformIntDistribution(o,E,this.rng),this.choice=o=>o[this.randInt(0,o.length-1)],this.sample=(o,E)=>{let g=o.slice(0,E);for(let S=E;S<o.length;S++){let w=this.randInt(0,S);w<E&&(g[w]=o[S])}return g},this.shuffle=o=>{for(let E=o.length-1;E>0;E--){let g=this.randInt(0,E);[o[E],o[g]]=[o[g],o[E]]}},this.rng=xoroshiro128plus(A$1(a))}};function A$1(a){let o=sha256(a),E=new DataView(o.buffer,o.byteOffset,o.byteLength);return Number(E.getBigUint64(0,!0)&BigInt(Number.MAX_SAFE_INTEGER))}function V$1(){return crypto.randomUUID()}var f=reactExports.createContext({});f.displayName="TeacherContext";const emptyComponents={},MDXContext=c.createContext(emptyComponents);function useMDXComponents(a){const o=c.useContext(MDXContext);return c.useMemo(function(){return typeof a=="function"?a(o):{...o,...a}},[o,a])}function MDXProvider(a){let o;return a.disableParentContext?o=typeof a.components=="function"?a.components(emptyComponents):a.components||emptyComponents:o=useMDXComponents(a.components),c.createElement(MDXContext.Provider,{value:o},a.children)}var FileSaver_min={exports:{}};(function(a,o){(function(E,g){g()})(commonjsGlobal,function(){function E(d,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function g(d,s,i){var y=new XMLHttpRequest;y.open("GET",d),y.responseType="blob",y.onload=function(){j(y.response,s,i)},y.onerror=function(){console.error("could not download file")},y.send()}function S(d){var s=new XMLHttpRequest;s.open("HEAD",d,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function w(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(s)}}var I=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,F=I.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),j=I.saveAs||(typeof window!="object"||window!==I?function(){}:"download"in HTMLAnchorElement.prototype&&!F?function(d,s,i){var y=I.URL||I.webkitURL,_=document.createElement("a");s=s||d.name||"download",_.download=s,_.rel="noopener",typeof d=="string"?(_.href=d,_.origin===location.origin?w(_):S(_.href)?g(d,s,i):w(_,_.target="_blank")):(_.href=y.createObjectURL(d),setTimeout(function(){y.revokeObjectURL(_.href)},4e4),setTimeout(function(){w(_)},0))}:"msSaveOrOpenBlob"in navigator?function(d,s,i){if(s=s||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(E(d,i),s);else if(S(d))g(d,s,i);else{var y=document.createElement("a");y.href=d,y.target="_blank",setTimeout(function(){w(y)})}}:function(d,s,i,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof d=="string")return g(d,s,i);var _=d.type==="application/octet-stream",R=/constructor/i.test(I.HTMLElement)||I.safari,T=/CriOS\/[\d]+/.test(navigator.userAgent);if((T||_&&R||F)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var X=b.result;X=T?X:X.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=X:location=X,y=null},b.readAsDataURL(d)}else{var C=I.URL||I.webkitURL,G=C.createObjectURL(d);y?y.location=G:location.href=G,y=null,setTimeout(function(){C.revokeObjectURL(G)},4e4)}});I.saveAs=j.saveAs=j,a.exports=j})})(FileSaver_min);var jsInterpreter={exports:{}},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(a,o){if(a.indexOf)return a.indexOf(o);for(var E=0;E<a.length;E++)if(a[E]===o)return E;return-1},Object_keys=function(a){if(Object.keys)return Object.keys(a);var o=[];for(var E in a)o.push(E);return o},forEach=function(a,o){if(a.forEach)return a.forEach(o);for(var E=0;E<a.length;E++)o(a[E],E,a)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(a,o,E){Object.defineProperty(a,o,{writable:!0,enumerable:!1,configurable:!0,value:E})}}catch{return function(o,E,g){o[E]=g}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(o){if(!(this instanceof Script))return new Script(o);this.code=o};Script.prototype.runInContext=function(a){if(!(a instanceof Context))throw new TypeError("needs a 'context' argument.");var o=document.createElement("iframe");o.style||(o.style={}),o.style.display="none",document.body.appendChild(o);var E=o.contentWindow,g=E.eval,S=E.execScript;!g&&S&&(S.call(E,"null"),g=E.eval),forEach(Object_keys(a),function(F){E[F]=a[F]}),forEach(globals,function(F){a[F]&&(E[F]=a[F])});var w=Object_keys(E),I=g.call(E,this.code);return forEach(Object_keys(E),function(F){(F in a||indexOf(w,F)===-1)&&(a[F]=E[F])}),forEach(globals,function(F){F in a||defineProp(a,F,E[F])}),document.body.removeChild(o),I},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(a){var o=Script.createContext(a),E=this.runInContext(o);return a&&forEach(Object_keys(o),function(g){a[g]=o[g]}),E},forEach(Object_keys(Script.prototype),function(a){exports[a]=Script[a]=function(o){var E=Script(o);return E[a].apply(E,[].slice.call(arguments,1))}}),exports.isContext=function(a){return a instanceof Context},exports.createScript=function(a){return exports.Script(a)},exports.createContext=Script.createContext=function(a){var o=new Context;return typeof a=="object"&&forEach(Object_keys(a),function(E){o[E]=a[E]}),o}}(vmBrowserify)),vmBrowserify}(function(a,o){(function(g,S){a.exports=S()})(commonjsGlobal,()=>(()=>{var E={"./original-repo/interpreter.js":function(I,F,j){var d=function(s,i){typeof s=="string"&&(s=this.parse_(s,"code"));var y=s.constructor;this.newNode=function(){return new y({options:{}})};var _=this.newNode();for(var R in s)_[R]=R==="body"?s[R].slice():s[R];this.ast=_,this.tasks=[],this.initFunc_=i,this.paused_=!1,this.polyfills_=[],this.functionCounter_=0,this.stepFunctions_=Object.create(null);var T=/^step([A-Z]\w*)$/,b;for(var C in this)typeof this[C]=="function"&&(b=C.match(T))&&(this.stepFunctions_[b[1]]=this[C].bind(this));this.globalScope=this.createScope(this.ast,null),this.globalObject=this.globalScope.object,this.ast=this.parse_(this.polyfills_.join(`
`),"polyfills"),this.polyfills_=void 0,d.stripLocations_(this.ast,void 0,void 0);var G=new d.State(this.ast,this.globalScope);G.done=!1,this.stateStack=[G],this.run(),this.value=void 0,this.ast=_,G=new d.State(this.ast,this.globalScope),G.done=!1,this.stateStack.length=0,this.stateStack[0]=G};d.Completion={NORMAL:0,BREAK:1,CONTINUE:2,RETURN:3,THROW:4},d.Status={DONE:0,STEP:1,TASK:2,ASYNC:3},d.PARSE_OPTIONS={locations:!0,ecmaVersion:5},d.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},d.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},d.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!1,enumerable:!1,writable:!1},d.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0},d.STEP_ERROR={STEP_ERROR:!0},d.SCOPE_REFERENCE={SCOPE_REFERENCE:!0},d.VALUE_IN_DESCRIPTOR={VALUE_IN_DESCRIPTOR:!0},d.REGEXP_TIMEOUT={REGEXP_TIMEOUT:!0},d.toStringCycles_=[],d.vm=null,d.currentInterpreter_=null,d.nativeGlobal=typeof globalThis>"u"?this:globalThis,d.WORKER_CODE=["onmessage = function(e) {","var result;","var data = e.data;","switch (data[0]) {","case 'split':","result = data[1].split(data[2], data[3]);","break;","case 'match':","result = data[1].match(data[2]);","break;","case 'search':","result = data[1].search(data[2]);","break;","case 'replace':","result = data[1].replace(data[2], data[3]);","break;","case 'exec':","var regexp = data[1];","regexp.lastIndex = data[2];","result = [regexp.exec(data[3]), data[1].lastIndex];","break;","default:","throw Error('Unknown RegExp operation: ' + data[0]);","}","postMessage(result);","close();","};"],d.legalArrayLength=function(s){var i=s>>>0;return i===Number(s)?i:NaN},d.legalArrayIndex=function(s){var i=s>>>0;return String(i)===String(s)&&i!==4294967295?i:NaN},d.stripLocations_=function(s,i,y){i?s.start=i:delete s.start,y?s.end=y:delete s.end;for(var _ in s)if(_!=="loc"&&s.hasOwnProperty(_)){var R=s[_];R&&typeof R=="object"&&d.stripLocations_(R,i,y)}},d.prototype.REGEXP_MODE=2,d.prototype.REGEXP_THREAD_TIMEOUT=1e3,d.prototype.POLYFILL_TIMEOUT=1e3,d.prototype.getterStep_=!1,d.prototype.setterStep_=!1,d.prototype.appendCodeNumber_=0,d.prototype.taskCodeNumber_=0,d.prototype.parse_=function(s,i){var y={};for(var _ in d.PARSE_OPTIONS)y[_]=d.PARSE_OPTIONS[_];return y.sourceFile=i,d.nativeGlobal.acorn.parse(s,y)},d.prototype.appendCode=function(s){var i=this.stateStack[0];if(!i||i.node.type!=="Program")throw Error("Expecting original AST to start with a Program node");if(typeof s=="string"&&(s=this.parse_(s,"appendCode"+this.appendCodeNumber_++)),!s||s.type!=="Program")throw Error("Expecting new AST to start with a Program node");this.populateScope_(s,i.scope),Array.prototype.push.apply(i.node.body,s.body),i.node.body.variableCache_=null,i.done=!1},d.prototype.step=function(){var s=this.stateStack,i;do{var y=s[s.length-1];if(this.paused_)return!0;if(!y||y.node.type==="Program"&&y.done){if(!this.tasks.length)return!1;if(y=this.nextTask_(),!y)return!0}var _=y.node,R=d.currentInterpreter_;d.currentInterpreter_=this;try{var T=this.stepFunctions_[_.type](s,y,_)}catch(b){if(b!==d.STEP_ERROR)throw this.value!==b&&(this.value=void 0),b}finally{d.currentInterpreter_=R}if(T&&s.push(T),this.getterStep_)throw this.value=void 0,Error("Getter not supported in this context");if(this.setterStep_)throw this.value=void 0,Error("Setter not supported in this context");!i&&!_.end&&(i=Date.now()+this.POLYFILL_TIMEOUT)}while(!_.end&&i>Date.now());return!0},d.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},d.prototype.getStatus=function(){if(this.paused_)return d.Status.ASYNC;var s=this.stateStack,i=s[s.length-1];if(i&&(i.node.type!=="Program"||!i.done))return d.Status.STEP;var y=this.tasks[0];return y?y.time>Date.now()?d.Status.TASK:d.Status.STEP:d.Status.DONE},d.prototype.initGlobal=function(s){this.setProperty(s,"NaN",NaN,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"Infinity",1/0,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"undefined",void 0,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"window",s,d.READONLY_DESCRIPTOR),this.setProperty(s,"this",s,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"self",s),this.OBJECT_PROTO=new d.Object(null),this.FUNCTION_PROTO=new d.Object(this.OBJECT_PROTO),this.initFunction(s),this.initObject(s),s.proto=this.OBJECT_PROTO,this.setProperty(s,"constructor",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR),this.initArray(s),this.initString(s),this.initBoolean(s),this.initNumber(s),this.initDate(s),this.initRegExp(s),this.initError(s),this.initMath(s),this.initJSON(s);var i=this,y,_=this.createNativeFunction(function(b){throw EvalError("Can't happen")},!1);_.eval=!0,this.setProperty(s,"eval",_,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"parseInt",this.createNativeFunction(parseInt,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"parseFloat",this.createNativeFunction(parseFloat,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"isNaN",this.createNativeFunction(isNaN,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"isFinite",this.createNativeFunction(isFinite,!1),d.NONENUMERABLE_DESCRIPTOR);for(var R=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],T=0;T<R.length;T++)y=function(b){return function(C){try{return b(C)}catch(G){i.throwException(i.URI_ERROR,G.message)}}}(R[T][0]),this.setProperty(s,R[T][1],this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR);y=function(C){return i.createTask_(!1,arguments)},this.setProperty(s,"setTimeout",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(C){return i.createTask_(!0,arguments)},this.setProperty(s,"setInterval",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(C){i.deleteTask_(C)},this.setProperty(s,"clearTimeout",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(C){i.deleteTask_(C)},this.setProperty(s,"clearInterval",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),this.OBJECT=this.OBJECT,this.OBJECT_PROTO=this.OBJECT_PROTO,this.FUNCTION=this.FUNCTION,this.FUNCTION_PROTO=this.FUNCTION_PROTO,this.ARRAY=this.ARRAY,this.ARRAY_PROTO=this.ARRAY_PROTO,this.REGEXP=this.REGEXP,this.REGEXP_PROTO=this.REGEXP_PROTO,this.DATE=this.DATE,this.DATE_PROTO=this.DATE_PROTO,this.initFunc_&&this.initFunc_(this,s)},d.prototype.functionCodeNumber_=0,d.prototype.initFunction=function(s){var i=this,y,_=/^[A-Za-z_$][\w$]*$/;y=function(T){if(arguments.length)var b=String(arguments[arguments.length-1]);else var b="";var C=Array.prototype.slice.call(arguments,0,-1).join(",").trim();if(C){for(var G=C.split(/\s*,\s*/),X=0;X<G.length;X++){var Q=G[X];_.test(Q)||i.throwException(i.SYNTAX_ERROR,"Invalid function argument: "+Q)}C=G.join(", ")}try{var K=i.parse_("(function("+C+") {"+b+"})","function"+i.functionCodeNumber_++)}catch(ce){i.throwException(i.SYNTAX_ERROR,"Invalid code: "+ce.message)}K.body.length!==1&&i.throwException(i.SYNTAX_ERROR,"Invalid code in function body");var oe=K.body[0].expression;return i.createFunction(oe,i.globalScope,"anonymous")},this.FUNCTION=this.createNativeFunction(y,!0),this.setProperty(s,"Function",this.FUNCTION,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,d.NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.nativeFunc=function(){},this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++,this.FUNCTION_PROTO.illegalConstructor=!0,this.setProperty(this.FUNCTION_PROTO,"length",0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.class="Function",y=function(T,b){var C=i.stateStack[i.stateStack.length-1];C.func_=this,C.funcThis_=T,C.arguments_=[],b!=null&&(b instanceof d.Object?C.arguments_=i.arrayPseudoToNative(b):i.throwException(i.TYPE_ERROR,"CreateListFromArrayLike called on non-object")),C.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",y),y=function(T){var b=i.stateStack[i.stateStack.length-1];b.func_=this,b.funcThis_=T,b.arguments_=[];for(var C=1;C<arguments.length;C++)b.arguments_.push(arguments[C]);b.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",y),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',","{configurable: true, writable: true, value:","function bind(oThis) {","if (typeof this !== 'function') {","throw TypeError('What is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),y=function(){return String(this)},this.setNativeFunctionPrototype(this.FUNCTION,"toString",y),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(){return this.valueOf()},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",y),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initObject=function(s){var i=this,y;y=function(T){if(T==null)return i.calledWithNew()?this:i.createObjectProto(i.OBJECT_PROTO);if(!(T instanceof d.Object)){var b=i.createObjectProto(i.getPrototype(T));return b.data=T,b}return T},this.OBJECT=this.createNativeFunction(y,!0),this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"Object",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR);var _=function(R){R==null&&i.throwException(i.TYPE_ERROR,"Cannot convert '"+R+"' to object")};y=function(T){_(T);var b=T instanceof d.Object?T.properties:T;return i.arrayNativeToPseudo(Object.getOwnPropertyNames(b))},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(T){return _(T),T instanceof d.Object&&(T=T.properties),i.arrayNativeToPseudo(Object.keys(T))},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(T){return T===null?i.createObjectProto(null):(T instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object prototype may only be an Object or null, not "+T),i.createObjectProto(T))},this.setProperty(this.OBJECT,"create",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var create_ = Object.create;","Object.create = function create(proto, props) {","var obj = create_(proto);","props && Object.defineProperties(obj, props);","return obj;","};","})();",""),y=function(T,b,C){return b=String(b),T instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object.defineProperty called on non-object: "+T),C instanceof d.Object||i.throwException(i.TYPE_ERROR,"Property description must be an object"),T.preventExtensions&&!(b in T.properties)&&i.throwException(i.TYPE_ERROR,"Can't define property '"+b+"', object is not extensible"),i.setProperty(T,b,d.VALUE_IN_DESCRIPTOR,C.properties),T},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var defineProperty_ = Object.defineProperty;","Object.defineProperty = function defineProperty(obj, prop, d1) {","var d2 = {};","if ('configurable' in d1) d2.configurable = d1.configurable;","if ('enumerable' in d1) d2.enumerable = d1.enumerable;","if ('writable' in d1) d2.writable = d1.writable;","if ('value' in d1) d2.value = d1.value;","if ('get' in d1) d2.get = d1.get;","if ('set' in d1) d2.set = d1.set;","return defineProperty_(obj, prop, d2);","};","})();","Object.defineProperty(Object, 'defineProperties',","{configurable: true, writable: true, value:","function defineProperties(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),y=function(T,b){if(T instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object: "+T),b=String(b),b in T.properties){var C=Object.getOwnPropertyDescriptor(T.properties,b),G=T.getter[b],X=T.setter[b],Q=i.createObjectProto(i.OBJECT_PROTO);return G||X?(i.setProperty(Q,"get",G),i.setProperty(Q,"set",X)):(i.setProperty(Q,"value",C.value),i.setProperty(Q,"writable",C.writable)),i.setProperty(Q,"configurable",C.configurable),i.setProperty(Q,"enumerable",C.enumerable),Q}},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(T){return _(T),i.getPrototype(T)},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(T){return!!T&&!T.preventExtensions},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(T){return T instanceof d.Object&&(T.preventExtensions=!0),T},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),this.setNativeFunctionPrototype(this.OBJECT,"toString",d.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",d.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"valueOf",d.Object.prototype.valueOf),y=function(T){return _(this),this instanceof d.Object?String(T)in this.properties:this.hasOwnProperty(T)},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",y),y=function(T){return _(this),this instanceof d.Object?Object.prototype.propertyIsEnumerable.call(this.properties,T):this.propertyIsEnumerable(T)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",y),y=function(T){for(;;){if(T=i.getPrototype(T),!T)return!1;if(T===this)return!0}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",y)},d.prototype.initArray=function(s){var i=this,y;y=function(R){if(i.calledWithNew())var T=this;else var T=i.createArray();var b=arguments[0];if(arguments.length===1&&typeof b=="number")isNaN(d.legalArrayLength(b))&&i.throwException(i.RANGE_ERROR,"Invalid array length: "+b),T.properties.length=b;else{for(var C=0;C<arguments.length;C++)T.properties[C]=arguments[C];T.properties.length=C}return T},this.ARRAY=this.createNativeFunction(y,!0),this.ARRAY_PROTO=this.ARRAY.properties.prototype,this.setProperty(s,"Array",this.ARRAY,d.NONENUMERABLE_DESCRIPTOR),y=function(R){return R&&R.class==="Array"},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ARRAY_PROTO,"length",0,{configurable:!1,enumerable:!1,writable:!0}),this.ARRAY_PROTO.class="Array",this.polyfills_.push("(function() {","function createArrayMethod_(f) {","Object.defineProperty(Array.prototype, f.name,","{configurable: true, writable: true, value: f});","}","createArrayMethod_(","function pop() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","len--;","var x = o[len];","delete o[len];","o.length = len;","return x;","}",");","createArrayMethod_(","function push(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","for (var i = 0; i < arguments.length; i++) {","o[len] = arguments[i];","len++;","}","o.length = len;","return len;","}",");","createArrayMethod_(","function shift() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","var value = o[0];","for (var i = 0; i < len - 1; i++) {","if ((i + 1) in o) {","o[i] = o[i + 1];","} else {","delete o[i];","}","}","delete o[i];","o.length = len - 1;","return value;","}",");","createArrayMethod_(","function unshift(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","len = 0;","}","for (var i = len - 1; i >= 0; i--) {","if (i in o) {","o[i + arguments.length] = o[i];","} else {","delete o[i + arguments.length];","}","}","for (var i = 0; i < arguments.length; i++) {","o[i] = arguments[i];","}","return (o.length = len + arguments.length);","}",");","createArrayMethod_(","function reverse() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 2) {","return o;","}","for (var i = 0; i < len / 2 - 0.5; i++) {","var x = o[i];","var hasX = i in o;","if ((len - i - 1) in o) {","o[i] = o[len - i - 1];","} else {","delete o[i];","}","if (hasX) {","o[len - i - 1] = x;","} else {","delete o[len - i - 1];","}","}","return o;","}",");","createArrayMethod_(","function indexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var n = fromIndex | 0;","if (!len || n >= len) {","return -1;","}","var i = Math.max(n >= 0 ? n : len - Math.abs(n), 0);","while (i < len) {","if (i in o && o[i] === searchElement) {","return i;","}","i++;","}","return -1;","}",");","createArrayMethod_(","function lastIndexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len) {","return -1;","}","var n = len - 1;","if (arguments.length > 1) {","n = fromIndex | 0;","if (n) {","n = (n > 0 || -1) * Math.floor(Math.abs(n));","}","}","var i = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);","while (i >= 0) {","if (i in o && o[i] === searchElement) {","return i;","}","i--;","}","return -1;","}",");","createArrayMethod_(","function slice(start, end) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","start = (start >= 0) ? start : Math.max(0, len + start);","if (typeof end !== 'undefined') {","if (end !== Infinity) {","end |= 0;","}","if (end < 0) {","end = len + end;","} else {","end = Math.min(end, len);","}","} else {","end = len;","}","var size = end - start;","var cloned = new Array(size);","for (var i = 0; i < size; i++) {","if ((start + i) in o) {","cloned[i] = o[start + i];","}","}","return cloned;","}",");","createArrayMethod_(","function splice(start, deleteCount, var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","if (start < 0) {","start = Math.max(len + start, 0);","} else {","start = Math.min(start, len);","}","if (arguments.length < 1) {","deleteCount = len - start;","} else {","deleteCount |= 0;","deleteCount = Math.max(0, Math.min(deleteCount, len - start));","}","var removed = [];","for (var i = start; i < start + deleteCount; i++) {","if (i in o) {","removed.push(o[i]);","} else {","removed.length++;","}","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = start + deleteCount; i < len - deleteCount; i++) {","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = len - deleteCount; i < len; i++) {","delete o[i];","}","len -= deleteCount;","var arl = arguments.length - 2;","for (var i = len - 1; i >= start; i--) {","if (i in o) {","o[i + arl] = o[i];","} else {","delete o[i + arl];","}","}","len += arl;","for (var i = 2; i < arguments.length; i++) {","o[start + i - 2] = arguments[i];","}","o.length = len;","return removed;","}",");","createArrayMethod_(","function concat(var_args) {","if (!this) throw TypeError();","var o = Object(this);","var cloned = [];","for (var i = -1; i < arguments.length; i++) {","var value = (i === -1) ? o : arguments[i];","if (Array.isArray(value)) {","for (var j = 0, l = value.length; j < l; j++) {","if (j in value) {","cloned.push(value[j]);","} else {","cloned.length++;","}","}","} else {","cloned.push(value);","}","}","return cloned;","}",");","createArrayMethod_(","function join(opt_separator) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var sep = typeof opt_separator === 'undefined' ?","',' : ('' + opt_separator);","var str = '';","for (var i = 0; i < len; i++) {","if (i && sep) str += sep;","str += (o[i] === null || o[i] === undefined) ? '' : o[i];","}","return str;","}",");","createArrayMethod_(","function every(callbackfn, thisArg) {","if (!this || typeof callbackfn !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o && !callbackfn.call(t, o[k], k, o)) return false;","k++;","}","return true;","}",");","createArrayMethod_(","function filter(fun, var_args) {","if (this === void 0 || this === null || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o) {","var val = o[i];","if (fun.call(thisArg, val, i, o)) res.push(val);","}","}","return res;","}",");","createArrayMethod_(","function forEach(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o) callback.call(t, o[k], k, o);","k++;","}","}",");","createArrayMethod_(","function map(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","var a = new Array(len);","while (k < len) {","if (k in o) a[k] = callback.call(t, o[k], k, o);","k++;","}","return a;","}",");","createArrayMethod_(","function reduce(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = 0, value;","if (arguments.length === 2) {","value = arguments[1];","} else {","while (k < len && !(k in o)) k++;","if (k >= len) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k++];","}","for (; k < len; k++) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function reduceRight(callback /*, initialValue*/) {","if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in o)) k--;","if (k < 0) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k--];","}","for (; k >= 0; k--) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function some(fun/*, thisArg*/) {","if (!this || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o && fun.call(thisArg, o[i], i, o)) return true;","}","return false;","}",");","createArrayMethod_(","function sort(opt_comp) {","if (!this) throw TypeError();","if (typeof opt_comp !== 'function') {","opt_comp = undefined;","}","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp ? (opt_comp(this[j], this[j + 1]) > 0) :","(String(this[j]) > String(this[j + 1]))) {","var swap = this[j];","var hasSwap = j in this;","if ((j + 1) in this) {","this[j] = this[j + 1];","} else {","delete this[j];","}","if (hasSwap) {","this[j + 1] = swap;","} else {","delete this[j + 1];","}","changes++;","}","}","if (!changes) break;","}","return this;","}",");","createArrayMethod_(","function toLocaleString() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var out = [];","for (var i = 0; i < len; i++) {","out[i] = (o[i] === null || o[i] === undefined) ? '' : o[i].toLocaleString();","}","return out.join(',');","}",");","})();","")},d.prototype.initString=function(s){var i=this,y;y=function(b){return b=arguments.length?d.nativeGlobal.String(b):"",i.calledWithNew()?(this.data=b,this):b},this.STRING=this.createNativeFunction(y,!0),this.setProperty(s,"String",this.STRING,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),d.NONENUMERABLE_DESCRIPTOR);for(var _=["charAt","charCodeAt","concat","indexOf","lastIndexOf","slice","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],R=0;R<_.length;R++)this.setNativeFunctionPrototype(this.STRING,_[R],String.prototype[_[R]]);y=function(b,C,G){C=i.pseudoToNative(C),G=i.pseudoToNative(G);try{return String(this).localeCompare(b,C,G)}catch(X){i.throwException(i.ERROR,"localeCompare: "+X.message)}},this.setNativeFunctionPrototype(this.STRING,"localeCompare",y),y=function(b,C,G){var X=String(this);if(C=C?Number(C):void 0,i.isa(b,i.REGEXP)&&(b=b.data,i.maybeThrowRegExp(b,G),i.REGEXP_MODE===2)){if(d.vm){var Q={string:X,separator:b,limit:C},K="string.split(separator, limit)",ue=i.vmCall(K,Q,b,G);ue!==d.REGEXP_TIMEOUT&&G(i.arrayNativeToPseudo(ue))}else{var oe=i.createWorker(),ce=i.regExpTimeout(b,oe,G);oe.onmessage=function(be){clearTimeout(ce),G(i.arrayNativeToPseudo(be.data))},oe.postMessage(["split",X,b,C])}return}var ue=X.split(b,C);G(i.arrayNativeToPseudo(ue))},this.setAsyncFunctionPrototype(this.STRING,"split",y),y=function(b,C){var G=String(this);if(b=i.isa(b,i.REGEXP)?b.data:new RegExp(b),i.maybeThrowRegExp(b,C),i.REGEXP_MODE===2){if(d.vm){var X={string:G,regexp:b},Q="string.match(regexp)",ce=i.vmCall(Q,X,b,C);ce!==d.REGEXP_TIMEOUT&&C(ce&&i.arrayNativeToPseudo(ce))}else{var K=i.createWorker(),oe=i.regExpTimeout(b,K,C);K.onmessage=function(ue){clearTimeout(oe),C(ue.data&&i.arrayNativeToPseudo(ue.data))},K.postMessage(["match",G,b])}return}var ce=G.match(b);C(ce&&i.arrayNativeToPseudo(ce))},this.setAsyncFunctionPrototype(this.STRING,"match",y),y=function(b,C){var G=String(this);if(i.isa(b,i.REGEXP)?b=b.data:b=new RegExp(b),i.maybeThrowRegExp(b,C),i.REGEXP_MODE===2){if(d.vm){var X={string:G,regexp:b},Q="string.search(regexp)",K=i.vmCall(Q,X,b,C);K!==d.REGEXP_TIMEOUT&&C(K)}else{var oe=i.createWorker(),ce=i.regExpTimeout(b,oe,C);oe.onmessage=function(ue){clearTimeout(ce),C(ue.data)},oe.postMessage(["search",G,b])}return}C(G.search(b))},this.setAsyncFunctionPrototype(this.STRING,"search",y),y=function(b,C,G){var X=String(this);if(C=String(C),i.isa(b,i.REGEXP)&&(b=b.data,i.maybeThrowRegExp(b,G),i.REGEXP_MODE===2)){if(d.vm){var Q={string:X,substr:b,newSubstr:C},K="string.replace(substr, newSubstr)",oe=i.vmCall(K,Q,b,G);oe!==d.REGEXP_TIMEOUT&&G(oe)}else{var ce=i.createWorker(),ue=i.regExpTimeout(b,ce,G);ce.onmessage=function(be){clearTimeout(ue),G(be.data)},ce.postMessage(["replace",X,b,C])}return}G(X.replace(b,C))},this.setAsyncFunctionPrototype(this.STRING,"replace",y),this.polyfills_.push("(function() {","var replace_ = String.prototype.replace;","String.prototype.replace = function replace(substr, newSubstr) {","if (typeof newSubstr !== 'function') {","return replace_.call(this, substr, newSubstr);","}","var str = this;","if (substr instanceof RegExp) {","var subs = [];","var m = substr.exec(str);","while (m) {","m.push(m.index, str);","var inject = newSubstr.apply(null, m);","subs.push([m.index, m[0].length, inject]);","m = substr.global ? substr.exec(str) : null;","}","for (var i = subs.length - 1; i >= 0; i--) {","str = str.substring(0, subs[i][0]) + subs[i][2] + str.substring(subs[i][0] + subs[i][1]);","}","} else {","var i = str.indexOf(substr);","if (i !== -1) {","var inject = newSubstr(str.substr(i, substr.length), i, str);","str = str.substring(0, i) + inject + str.substring(i + substr.length);","}","}","return str;","};","})();","")},d.prototype.initBoolean=function(s){var i=this,y;y=function(R){return R=d.nativeGlobal.Boolean(R),i.calledWithNew()?(this.data=R,this):R},this.BOOLEAN=this.createNativeFunction(y,!0),this.setProperty(s,"Boolean",this.BOOLEAN,d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initNumber=function(s){var i=this,y;y=function(b){return b=arguments.length?d.nativeGlobal.Number(b):0,i.calledWithNew()?(this.data=b,this):b},this.NUMBER=this.createNativeFunction(y,!0),this.setProperty(s,"Number",this.NUMBER,d.NONENUMERABLE_DESCRIPTOR);for(var _=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],R=0;R<_.length;R++)this.setProperty(this.NUMBER,_[R],Number[_[R]],d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);y=function(b){try{return Number(this).toExponential(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",y),y=function(b){try{return Number(this).toFixed(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",y),y=function(b){try{return Number(this).toPrecision(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",y),y=function(b){try{return Number(this).toString(b)}catch(C){i.throwException(i.ERROR,C.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toString",y),y=function(b,C){b=b?i.pseudoToNative(b):void 0,C=C?i.pseudoToNative(C):void 0;try{return Number(this).toLocaleString(b,C)}catch(G){i.throwException(i.ERROR,"toLocaleString: "+G.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",y)},d.prototype.initDate=function(s){var i=this,y;y=function(b,C){if(!i.calledWithNew())return d.nativeGlobal.Date();var G=[null].concat(Array.from(arguments));return this.data=new(Function.prototype.bind.apply(d.nativeGlobal.Date,G)),this},this.DATE=this.createNativeFunction(y,!0),this.DATE_PROTO=this.DATE.properties.prototype,this.setProperty(s,"Date",this.DATE,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),d.NONENUMERABLE_DESCRIPTOR);for(var _=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toISOString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],R=0;R<_.length;R++)y=function(T){return function(b){var C=this.data;C instanceof Date||i.throwException(i.TYPE_ERROR,T+" not called on a Date");for(var G=[],X=0;X<arguments.length;X++)G[X]=i.pseudoToNative(arguments[X]);return C[T].apply(C,G)}}(_[R]),this.setNativeFunctionPrototype(this.DATE,_[R],y)},d.prototype.initRegExp=function(s){var i=this,y;y=function(R,T){if(i.calledWithNew())var b=this;else{if(T===void 0&&i.isa(R,i.REGEXP))return R;var b=i.createObjectProto(i.REGEXP_PROTO)}R=R===void 0?"":String(R),T=T?String(T):"",/^[gmi]*$/.test(T)||i.throwException(i.SYNTAX_ERROR,"Invalid regexp flag: "+T);try{var C=new d.nativeGlobal.RegExp(R,T)}catch(G){i.throwException(i.SYNTAX_ERROR,G.message)}return i.populateRegExp(b,C),b},this.REGEXP=this.createNativeFunction(y,!0),this.REGEXP_PROTO=this.REGEXP.properties.prototype,this.setProperty(s,"RegExp",this.REGEXP,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"global",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source","(?:)",d.READONLY_NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("Object.defineProperty(RegExp.prototype, 'test',","{configurable: true, writable: true, value:","function test(str) {","return !!this.exec(str);","}","});"),y=function(R,T){var b=this.data;if(R=String(R),b.lastIndex=Number(i.getProperty(this,"lastIndex")),i.maybeThrowRegExp(b,T),i.REGEXP_MODE===2){if(d.vm){var C={string:R,regexp:b},G="regexp.exec(string)",oe=i.vmCall(G,C,b,T);oe!==d.REGEXP_TIMEOUT&&(i.setProperty(this,"lastIndex",b.lastIndex),T(ce(oe)))}else{var X=i.createWorker(),Q=i.regExpTimeout(b,X,T),K=this;X.onmessage=function(ue){clearTimeout(Q),i.setProperty(K,"lastIndex",ue.data[1]),T(ce(ue.data[0]))},X.postMessage(["exec",b,b.lastIndex,R])}return}var oe=b.exec(R);i.setProperty(this,"lastIndex",b.lastIndex),T(ce(oe));function ce(ue){if(ue){var be=i.arrayNativeToPseudo(ue);return i.setProperty(be,"index",ue.index),i.setProperty(be,"input",ue.input),be}return null}},this.setAsyncFunctionPrototype(this.REGEXP,"exec",y)},d.prototype.initError=function(s){var i=this;this.ERROR=this.createNativeFunction(function(R){if(i.calledWithNew())var T=this;else var T=i.createObject(i.ERROR);return i.populateError(T,R),T},!0),this.setProperty(s,"Error",this.ERROR,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"message","",d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name","Error",d.NONENUMERABLE_DESCRIPTOR);var y=function(_){var R=i.createNativeFunction(function(T){if(i.calledWithNew())var b=this;else var b=i.createObject(R);return i.populateError(b,T),b},!0);return i.setProperty(R,"prototype",i.createObject(i.ERROR),d.NONENUMERABLE_DESCRIPTOR),i.setProperty(R.properties.prototype,"name",_,d.NONENUMERABLE_DESCRIPTOR),i.setProperty(s,_,R,d.NONENUMERABLE_DESCRIPTOR),R};this.EVAL_ERROR=y("EvalError"),this.RANGE_ERROR=y("RangeError"),this.REFERENCE_ERROR=y("ReferenceError"),this.SYNTAX_ERROR=y("SyntaxError"),this.TYPE_ERROR=y("TypeError"),this.URI_ERROR=y("URIError")},d.prototype.initMath=function(s){var i=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(s,"Math",i,d.NONENUMERABLE_DESCRIPTOR);for(var y=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],_=0;_<y.length;_++)this.setProperty(i,y[_],Math[y[_]],d.READONLY_NONENUMERABLE_DESCRIPTOR);for(var R=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"],_=0;_<R.length;_++)this.setProperty(i,R[_],this.createNativeFunction(Math[R[_]],!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initJSON=function(s){var i,y=this,_=y.createObjectProto(this.OBJECT_PROTO);this.setProperty(s,"JSON",_,d.NONENUMERABLE_DESCRIPTOR),i=function(T){try{var b=JSON.parse(String(T))}catch(C){y.throwException(y.SYNTAX_ERROR,C.message)}return y.nativeToPseudo(b)},this.setProperty(_,"parse",this.createNativeFunction(i,!1)),i=function(T,b,C){b&&b.class==="Function"?y.throwException(y.TYPE_ERROR,"Function replacer on JSON.stringify not supported"):b&&b.class==="Array"?(b=y.arrayPseudoToNative(b),b=b.filter(function(Q){return typeof Q=="string"||typeof Q=="number"})):b=null,typeof C!="string"&&typeof C!="number"&&(C=void 0);var G=y.pseudoToNative(T);try{var X=JSON.stringify(G,b,C)}catch(Q){y.throwException(y.TYPE_ERROR,Q.message)}return X},this.setProperty(_,"stringify",this.createNativeFunction(i,!1))},d.prototype.isa=function(s,i){if(s==null||!i)return!1;var y=i.properties.prototype;if(s===y)return!0;for(s=this.getPrototype(s);s;){if(s===y)return!0;s=s.proto}return!1},d.prototype.populateRegExp=function(s,i){s.data=new RegExp(i.source,i.flags),this.setProperty(s,"lastIndex",i.lastIndex,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"source",i.source,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"global",i.global,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"ignoreCase",i.ignoreCase,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"multiline",i.multiline,d.READONLY_NONENUMERABLE_DESCRIPTOR)},d.prototype.populateError=function(s,i){i&&this.setProperty(s,"message",String(i),d.NONENUMERABLE_DESCRIPTOR);for(var y=[],_=this.stateStack.length-1;_>=0;_--){var R=this.stateStack[_],T=R.node;if(T.type==="CallExpression"){var b=R.func_;b&&y.length&&(y[y.length-1].datumName=this.getProperty(b,"name"))}T.loc&&(!y.length||T.type==="CallExpression")&&y.push({datumLoc:T.loc})}for(var C=String(this.getProperty(s,"name")),G=String(this.getProperty(s,"message")),X=C+": "+G+`
`,_=0;_<y.length;_++){var Q=y[_].datumLoc,K=y[_].datumName,oe=Q.source+":"+Q.start.line+":"+Q.start.column;K?X+="  at "+K+" ("+oe+`)
`:X+="  at "+oe+`
`}this.setProperty(s,"stack",X.trim(),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.createWorker=function(){var s=this.createWorker.blob_;return s||(s=new Blob([d.WORKER_CODE.join(`
`)],{type:"application/javascript"}),this.createWorker.blob_=s),new Worker(URL.createObjectURL(s))},d.prototype.vmCall=function(s,i,y,_){var R={timeout:this.REGEXP_THREAD_TIMEOUT};try{return d.vm.runInNewContext(s,i,R)}catch{_(null),this.throwException(this.ERROR,"RegExp Timeout: "+y)}return d.REGEXP_TIMEOUT},d.prototype.maybeThrowRegExp=function(s,i){var y;if(this.REGEXP_MODE===0)y=!1;else if(this.REGEXP_MODE===1)y=!0;else if(d.vm)y=!0;else if(typeof Worker=="function"&&typeof URL=="function")y=!0;else{try{d.vm=j("vm")}catch{}y=!!d.vm}y||(i(null),this.throwException(this.ERROR,"Regular expressions not supported: "+s))},d.prototype.regExpTimeout=function(s,i,y){var _=this;return setTimeout(function(){i.terminate(),y(null);try{_.throwException(_.ERROR,"RegExp Timeout: "+s)}catch{}},this.REGEXP_THREAD_TIMEOUT)},d.prototype.createObject=function(s){return this.createObjectProto(s&&s.properties.prototype)},d.prototype.createObjectProto=function(s){if(typeof s!="object")throw Error("Non object prototype");var i=new d.Object(s);return this.isa(i,this.ERROR)&&(i.class="Error"),i},d.prototype.createArray=function(){var s=this.createObjectProto(this.ARRAY_PROTO);return this.setProperty(s,"length",0,{configurable:!1,enumerable:!1,writable:!0}),s.class="Array",s},d.prototype.createFunctionBase_=function(s,i){var y=this.createObjectProto(this.FUNCTION_PROTO);if(i){var _=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(y,"prototype",_,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(_,"constructor",y,d.NONENUMERABLE_DESCRIPTOR)}else y.illegalConstructor=!0;return this.setProperty(y,"length",s,d.READONLY_NONENUMERABLE_DESCRIPTOR),y.class="Function",y},d.prototype.createFunction=function(s,i,y){var _=this.createFunctionBase_(s.params.length,!0);_.parentScope=i,_.node=s;var R=s.id?String(s.id.name):y||"";return this.setProperty(_,"name",R,d.READONLY_NONENUMERABLE_DESCRIPTOR),_},d.prototype.createNativeFunction=function(s,i){var y=this.createFunctionBase_(s.length,i);return y.nativeFunc=s,s.id=this.functionCounter_++,this.setProperty(y,"name",s.name,d.READONLY_NONENUMERABLE_DESCRIPTOR),y},d.prototype.createAsyncFunction=function(s){var i=this.createFunctionBase_(s.length,!0);return i.asyncFunc=s,s.id=this.functionCounter_++,this.setProperty(i,"name",s.name,d.READONLY_NONENUMERABLE_DESCRIPTOR),i},d.prototype.nativeToPseudo=function(s){if(s instanceof d.Object)throw Error("Object is already pseudo");if(s==null||s===!0||s===!1||typeof s=="string"||typeof s=="number")return s;if(s instanceof RegExp){var i=this.createObjectProto(this.REGEXP_PROTO);return this.populateRegExp(i,s),i}if(s instanceof Date){var y=this.createObjectProto(this.DATE_PROTO);return y.data=new Date(s.valueOf()),y}if(typeof s=="function"){var _=this,R=function(){var Q=Array.prototype.slice.call(arguments).map(function(oe){return _.pseudoToNative(oe)}),K=s.apply(_,Q);return _.nativeToPseudo(K)},T=Object.getOwnPropertyDescriptor(s,"prototype");return this.createNativeFunction(R,!!T)}if(Array.isArray(s)){for(var b=this.createArray(),C=0;C<s.length;C++)C in s&&this.setProperty(b,C,this.nativeToPseudo(s[C]));return b}var G=this.createObjectProto(this.OBJECT_PROTO);for(var X in s)this.setProperty(G,X,this.nativeToPseudo(s[X]));return G},d.prototype.pseudoToNative=function(s,i){if(typeof s!="object"&&typeof s!="function"||s===null)return s;if(!(s instanceof d.Object))throw Error("Object is not pseudo");if(this.isa(s,this.REGEXP)){var y=new RegExp(s.data.source,s.data.flags);return y.lastIndex=s.data.lastIndex,y}if(this.isa(s,this.DATE))return new Date(s.data.valueOf());var _=i||{pseudo:[],native:[]},R=_.pseudo.indexOf(s);if(R!==-1)return _.native[R];_.pseudo.push(s);var T;if(this.isa(s,this.ARRAY)){T=[],_.native.push(T);for(var b=this.getProperty(s,"length"),C=0;C<b;C++)this.hasProperty(s,C)&&(T[C]=this.pseudoToNative(this.getProperty(s,C),_))}else{T={},_.native.push(T);var G;for(var X in s.properties)G=this.pseudoToNative(s.properties[X],_),Object.defineProperty(T,X,{value:G,writable:!0,enumerable:!0,configurable:!0})}return _.pseudo.pop(),_.native.pop(),T},d.prototype.arrayNativeToPseudo=function(s){for(var i=this.createArray(),y=Object.getOwnPropertyNames(s),_=0;_<y.length;_++)this.setProperty(i,y[_],s[y[_]]);return i},d.prototype.arrayPseudoToNative=function(s){var i=[];for(var y in s.properties)i[y]=this.getProperty(s,y);return i.length=d.legalArrayLength(this.getProperty(s,"length"))||0,i},d.prototype.getPrototype=function(s){switch(typeof s){case"number":return this.NUMBER.properties.prototype;case"boolean":return this.BOOLEAN.properties.prototype;case"string":return this.STRING.properties.prototype}return s?s.proto:null},d.prototype.getProperty=function(s,i){if(this.getterStep_)throw Error("Getter not supported in that context");if(i=String(i),s==null&&this.throwException(this.TYPE_ERROR,"Cannot read property '"+i+"' of "+s),typeof s=="object"&&!(s instanceof d.Object))throw TypeError("Expecting native value or pseudo object");if(i==="length"){if(this.isa(s,this.STRING))return String(s).length}else if(i.charCodeAt(0)<64&&this.isa(s,this.STRING)){var y=d.legalArrayIndex(i);if(!isNaN(y)&&y<String(s).length)return String(s)[y]}do if(s.properties&&i in s.properties){var _=s.getter[i];return _?(this.getterStep_=!0,_):s.properties[i]}while(s=this.getPrototype(s))},d.prototype.hasProperty=function(s,i){if(!(s instanceof d.Object))throw TypeError("Primitive data type has no properties");if(i=String(i),i==="length"&&this.isa(s,this.STRING))return!0;if(this.isa(s,this.STRING)){var y=d.legalArrayIndex(i);if(!isNaN(y)&&y<String(s).length)return!0}do if(s.properties&&i in s.properties)return!0;while(s=this.getPrototype(s));return!1},d.prototype.setProperty=function(s,i,y,_){if(this.setterStep_)throw Error("Setter not supported in that context");if(i=String(i),s==null&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+i+"' of "+s),typeof s=="object"&&!(s instanceof d.Object))throw TypeError("Expecting native value or pseudo object");_&&("get"in _||"set"in _)&&("value"in _||"writable"in _)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var R=!this.stateStack||this.getScope().strict;if(!(s instanceof d.Object)){R&&this.throwException(this.TYPE_ERROR,"Can't create property '"+i+"' on '"+s+"'");return}if(this.isa(s,this.STRING)){var T=d.legalArrayIndex(i);if(i==="length"||!isNaN(T)&&T<String(s).length){R&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+i+"' of String '"+s.data+"'");return}}if(s.class==="Array"){var b=s.properties.length,C;if(i==="length"){if(_){if(!("value"in _))return;y=_.value}if(y=d.legalArrayLength(y),isNaN(y)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),y<b)for(C in s.properties)C=d.legalArrayIndex(C),!isNaN(C)&&y<=C&&delete s.properties[C]}else isNaN(C=d.legalArrayIndex(i))||(s.properties.length=Math.max(b,C+1))}if(s.preventExtensions&&!(i in s.properties)){R&&this.throwException(this.TYPE_ERROR,"Can't add property '"+i+"', object is not extensible");return}if(_){var G={};"get"in _&&_.get&&(s.getter[i]=_.get,G.get=this.setProperty.placeholderGet_),"set"in _&&_.set&&(s.setter[i]=_.set,G.set=this.setProperty.placeholderSet_),"configurable"in _&&(G.configurable=_.configurable),"enumerable"in _&&(G.enumerable=_.enumerable),"writable"in _&&(G.writable=_.writable,delete s.getter[i],delete s.setter[i]),"value"in _?(G.value=_.value,delete s.getter[i],delete s.setter[i]):y!==d.VALUE_IN_DESCRIPTOR&&(G.value=y,delete s.getter[i],delete s.setter[i]);try{Object.defineProperty(s.properties,i,G)}catch{this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+i)}"get"in _&&!_.get&&delete s.getter[i],"set"in _&&!_.set&&delete s.setter[i]}else{if(y===d.VALUE_IN_DESCRIPTOR)throw ReferenceError("Value not specified");for(var X=s;!(i in X.properties);)if(X=this.getPrototype(X),!X){X=s;break}if(X.setter&&X.setter[i])return this.setterStep_=!0,X.setter[i];if(X.getter&&X.getter[i])R&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+i+"' of object '"+s+"' which only has a getter");else try{s.properties[i]=y}catch{R&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+i+"' of object '"+s+"'")}}},d.prototype.setProperty.placeholderGet_=function(){throw Error("Placeholder getter")},d.prototype.setProperty.placeholderSet_=function(){throw Error("Placeholder setter")},d.prototype.setNativeFunctionPrototype=function(s,i,y){this.setProperty(s.properties.prototype,i,this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.setAsyncFunctionPrototype=function(s,i,y){this.setProperty(s.properties.prototype,i,this.createAsyncFunction(y),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.getScope=function(){var s=this.stateStack[this.stateStack.length-1].scope;if(!s)throw Error("No scope found");return s},d.prototype.createScope=function(s,i){var y=!1;if(i&&i.strict)y=!0;else{var _=s.body&&s.body[0];_&&_.expression&&_.expression.type==="Literal"&&_.expression.value==="use strict"&&(y=!0)}var R=this.createObjectProto(null),T=new d.Scope(i,y,R);return i||this.initGlobal(T.object),this.populateScope_(s,T),T},d.prototype.createSpecialScope=function(s,i){if(!s)throw Error("parentScope required");var y=i||this.createObjectProto(null);return new d.Scope(s,s.strict,y)},d.prototype.getValueFromScope=function(s){for(var i=this.getScope();i&&i!==this.globalScope;){if(s in i.object.properties)return i.object.properties[s];i=i.parentScope}if(i===this.globalScope&&this.hasProperty(i.object,s))return this.getProperty(i.object,s);var y=this.stateStack[this.stateStack.length-1].node;y.type==="UnaryExpression"&&y.operator==="typeof"||this.throwException(this.REFERENCE_ERROR,s+" is not defined")},d.prototype.setValueToScope=function(s,i){for(var y=this.getScope(),_=y.strict;y&&y!==this.globalScope;){if(s in y.object.properties){try{y.object.properties[s]=i}catch{_&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only variable '"+s+"'")}return}y=y.parentScope}if(y===this.globalScope&&(!_||this.hasProperty(y.object,s)))return this.setProperty(y.object,s,i);this.throwException(this.REFERENCE_ERROR,s+" is not defined")},d.prototype.populateScope_=function(s,i){var y;if(s.variableCache_)y=s.variableCache_;else{switch(y=Object.create(null),s.type){case"VariableDeclaration":for(var _=0;_<s.declarations.length;_++)y[s.declarations[_].id.name]=!0;break;case"FunctionDeclaration":y[s.id.name]=s;break;case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"Program":case"SwitchCase":case"SwitchStatement":case"TryStatement":case"WithStatement":case"WhileStatement":var R=s.constructor;for(var T in s)if(T!=="loc"){var b=s[T];if(b&&typeof b=="object"){var C;if(Array.isArray(b)){for(var _=0;_<b.length;_++)if(b[_]&&b[_].constructor===R){C=this.populateScope_(b[_],i);for(var T in C)y[T]=C[T]}}else if(b.constructor===R){C=this.populateScope_(b,i);for(var T in C)y[T]=C[T]}}}}s.variableCache_=y}for(var T in y)y[T]===!0?this.setProperty(i.object,T,void 0,d.VARIABLE_DESCRIPTOR):this.setProperty(i.object,T,this.createFunction(y[T],i),d.VARIABLE_DESCRIPTOR);return y},d.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor},d.prototype.getValue=function(s){return s[0]===d.SCOPE_REFERENCE?this.getValueFromScope(s[1]):this.getProperty(s[0],s[1])},d.prototype.setValue=function(s,i){return s[0]===d.SCOPE_REFERENCE?this.setValueToScope(s[1],i):this.setProperty(s[0],s[1],i)},d.prototype.throwException=function(s,i){if(!this.globalScope)throw i===void 0?s:i;if(i===void 0||!(s instanceof d.Object))var y=s;else{var y=this.createObject(s);this.populateError(y,i)}throw this.unwind(d.Completion.THROW,y,void 0),d.STEP_ERROR},d.prototype.unwind=function(s,i,y){if(s===d.Completion.NORMAL)throw TypeError("Should not unwind for NORMAL completions");e:for(var _=this.stateStack;_.length>0;_.pop()){var R=_[_.length-1];switch(R.node.type){case"TryStatement":R.cv={type:s,value:i,label:y};return;case"CallExpression":case"NewExpression":if(s===d.Completion.RETURN){R.value=i;return}else if(s!==d.Completion.THROW)throw Error("Unsyntactic break/continue not rejected by Acorn");break;case"Program":R.done=!0;break e}if(s===d.Completion.BREAK){if(y?R.labels&&R.labels.indexOf(y)!==-1:R.isLoop||R.isSwitch){_.pop();return}}else if(s===d.Completion.CONTINUE&&(y?R.labels&&R.labels.indexOf(y)!==-1:R.isLoop))return}var T;if(this.isa(i,this.ERROR)){var b={EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError},C=String(this.getProperty(i,"name")),G=this.getProperty(i,"message").valueOf(),X=b[C]||Error;T=X(G),T.stack=String(this.getProperty(i,"stack"))}else T=String(i);throw this.value=T,T},d.prototype.nodeSummary=function(s){switch(s.type){case"ArrayExpression":return"[...]";case"BinaryExpression":case"LogicalExpression":return this.nodeSummary(s.left)+" "+s.operator+" "+this.nodeSummary(s.right);case"CallExpression":return this.nodeSummary(s.callee)+"(...)";case"ConditionalExpression":return this.nodeSummary(s.test)+" ? "+this.nodeSummary(s.consequent)+" : "+this.nodeSummary(s.alternate);case"Identifier":return s.name;case"Literal":return s.raw;case"MemberExpression":var i=this.nodeSummary(s.object),y=this.nodeSummary(s.property);return s.computed?i+"["+y+"]":i+"."+y;case"NewExpression":return"new "+this.nodeSummary(s.callee)+"(...)";case"ObjectExpression":return"{...}";case"ThisExpression":return"this";case"UnaryExpression":return s.operator+" "+this.nodeSummary(s.argument);case"UpdateExpression":var _=this.nodeSummary(s.argument);return s.prefix?s.operator+_:_+s.operator}return"???"},d.prototype.createTask_=function(s,i){var y=this.stateStack[this.stateStack.length-1],_=Array.from(i),R=_.shift(),T=Math.max(Number(_.shift()||0),0),b=this.newNode(),C,G,X;if(R instanceof d.Object&&R.class==="Function")G=R,b.type="CallExpression",C=y.scope;else{try{X=this.parse_(String(R),"taskCode"+this.taskCodeNumber_++)}catch(ue){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+ue.message)}b.type="EvalProgram_",b.body=X.body;var Q=y.node.arguments[0],K=Q?Q.start:void 0,oe=Q?Q.end:void 0;d.stripLocations_(b,K,oe),C=this.globalScope,_.length=0}var ce=new d.Task(G,_,C,b,s?T:-1);return this.scheduleTask_(ce,T),ce.pid},d.prototype.scheduleTask_=function(s,i){s.time=Date.now()+i,this.tasks.push(s),this.tasks.sort(function(y,_){return y.time-_.time})},d.prototype.deleteTask_=function(s){for(var i=0;i<this.tasks.length;i++)if(this.tasks[i].pid==s){this.tasks.splice(i,1);break}},d.prototype.nextTask_=function(){var s=this.tasks[0];if(!s||s.time>Date.now())return null;this.tasks.shift(),s.interval>=0&&this.scheduleTask_(s,s.interval);var i=new d.State(s.node,s.scope);return s.functionRef&&(i.doneCallee_=2,i.funcThis_=this.globalObject,i.func_=s.functionRef,i.doneArgs_=!0,i.arguments_=s.argsArray),i},d.prototype.createGetter_=function(s,i){if(!this.getterStep_)throw Error("Unexpected call to createGetter");this.getterStep_=!1;var y=Array.isArray(i)?i[0]:i,_=this.newNode();_.type="CallExpression";var R=new d.State(_,this.stateStack[this.stateStack.length-1].scope);return R.doneCallee_=2,R.funcThis_=y,R.func_=s,R.doneArgs_=!0,R.arguments_=[],R},d.prototype.createSetter_=function(s,i,y){if(!this.setterStep_)throw Error("Unexpected call to createSetter");this.setterStep_=!1;var _=Array.isArray(i)?i[0]:this.globalObject,R=this.newNode();R.type="CallExpression";var T=new d.State(R,this.stateStack[this.stateStack.length-1].scope);return T.doneCallee_=2,T.funcThis_=_,T.func_=s,T.doneArgs_=!0,T.arguments_=[y],T},d.prototype.boxThis_=function(s){if(s==null)return this.globalObject;if(!(s instanceof d.Object)){var i=this.createObjectProto(this.getPrototype(s));return i.data=s,i}return s},d.prototype.getGlobalScope=function(){return this.globalScope},d.prototype.getStateStack=function(){return this.stateStack},d.prototype.setStateStack=function(s){this.stateStack=s},d.Value,d.State=function(s,i){this.node=s,this.scope=i},d.Scope=function(s,i,y){this.parentScope=s,this.strict=i,this.object=y},d.Object=function(s){this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.proto=s},d.Object.prototype.proto=null,d.Object.prototype.class="Object",d.Object.prototype.data=null,d.Object.prototype.toString=function(){if(!d.currentInterpreter_)return"[object Interpreter.Object]";if(!(this instanceof d.Object))return String(this);if(this.class==="Array"){var s=d.toStringCycles_;s.push(this);try{var i=[],y=this.properties.length,_=!1;y>1024&&(y=1e3,_=!0);for(var R=0;R<y;R++){var T=this.properties[R];i[R]=T instanceof d.Object&&s.indexOf(T)!==-1?"...":T}_&&i.push("...")}finally{s.pop()}return i.join(",")}if(this.class==="Error"){var s=d.toStringCycles_;if(s.indexOf(this)!==-1)return"[object Error]";var b,C,G=this;do if("name"in G.properties){b=G.properties.name;break}while(G=G.proto);G=this;do if("message"in G.properties){C=G.properties.message;break}while(G=G.proto);s.push(this);try{b=b&&String(b),C=C&&String(C)}finally{s.pop()}return C?b+": "+C:String(b)}return this.data!==null?String(this.data):"[object "+this.class+"]"},d.Object.prototype.valueOf=function(){return d.currentInterpreter_?this.data===void 0||this.data===null||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data:this},d.Task=function(s,i,y,_,R){this.functionRef=s,this.argsArray=i,this.scope=y,this.node=_,this.interval=R,this.pid=++d.Task.pid,this.time=0},d.Task.pid=0,d.prototype.stepArrayExpression=function(s,i,y){var _=y.elements,R=i.n_||0;for(i.array_?(this.setProperty(i.array_,R,i.value),R++):(i.array_=this.createArray(),i.array_.properties.length=_.length);R<_.length;){if(_[R])return i.n_=R,new d.State(_[R],i.scope);R++}s.pop(),s[s.length-1].value=i.array_},d.prototype.stepAssignmentExpression=function(s,i,y){if(!i.doneLeft_){i.doneLeft_=!0;var _=new d.State(y.left,i.scope);return _.components=!0,_}if(!i.doneRight_){if(i.leftReference_||(i.leftReference_=i.value),i.doneGetter_&&(i.leftValue_=i.value),!i.doneGetter_&&y.operator!=="="){var R=this.getValue(i.leftReference_);if(i.leftValue_=R,this.getterStep_){i.doneGetter_=!0;var T=R;return this.createGetter_(T,i.leftReference_)}}return i.doneRight_=!0,y.operator==="="&&y.left.type==="Identifier"&&(i.destinationName=y.left.name),new d.State(y.right,i.scope)}if(i.doneSetter_){s.pop(),s[s.length-1].value=i.setterValue_;return}var b=i.leftValue_,C=i.value;switch(y.operator){case"=":b=C;break;case"+=":b+=C;break;case"-=":b-=C;break;case"*=":b*=C;break;case"/=":b/=C;break;case"%=":b%=C;break;case"<<=":b<<=C;break;case">>=":b>>=C;break;case">>>=":b>>>=C;break;case"&=":b&=C;break;case"^=":b^=C;break;case"|=":b|=C;break;default:throw SyntaxError("Unknown assignment expression: "+y.operator)}var G=this.setValue(i.leftReference_,b);if(G)return i.doneSetter_=!0,i.setterValue_=b,this.createSetter_(G,i.leftReference_,b);s.pop(),s[s.length-1].value=b},d.prototype.stepBinaryExpression=function(s,i,y){if(!i.doneLeft_)return i.doneLeft_=!0,new d.State(y.left,i.scope);if(!i.doneRight_)return i.doneRight_=!0,i.leftValue_=i.value,new d.State(y.right,i.scope);s.pop();var _=i.leftValue_,R=i.value,T;switch(y.operator){case"==":T=_==R;break;case"!=":T=_!=R;break;case"===":T=_===R;break;case"!==":T=_!==R;break;case">":T=_>R;break;case">=":T=_>=R;break;case"<":T=_<R;break;case"<=":T=_<=R;break;case"+":T=_+R;break;case"-":T=_-R;break;case"*":T=_*R;break;case"/":T=_/R;break;case"%":T=_%R;break;case"&":T=_&R;break;case"|":T=_|R;break;case"^":T=_^R;break;case"<<":T=_<<R;break;case">>":T=_>>R;break;case">>>":T=_>>>R;break;case"in":R instanceof d.Object||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+R+"'"),T=this.hasProperty(R,_);break;case"instanceof":this.isa(R,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"'instanceof' expects an object, not '"+R+"'"),T=_ instanceof d.Object?this.isa(_,R):!1;break;default:throw SyntaxError("Unknown binary operator: "+y.operator)}s[s.length-1].value=T},d.prototype.stepBlockStatement=function(s,i,y){var _=i.n_||0,R=y.body[_];if(R)return i.n_=_+1,new d.State(R,i.scope);s.pop()},d.prototype.stepBreakStatement=function(s,i,y){var _=y.label&&y.label.name;this.unwind(d.Completion.BREAK,void 0,_)},d.prototype.evalCodeNumber_=0,d.prototype.stepCallExpression=function(s,i,y){if(!i.doneCallee_){i.doneCallee_=1;var _=new d.State(y.callee,i.scope);return _.components=!0,_}if(i.doneCallee_===1){i.doneCallee_=2;var R=i.value;if(Array.isArray(R)){if(i.func_=this.getValue(R),R[0]===d.SCOPE_REFERENCE?i.directEval_=R[1]==="eval":i.funcThis_=R[0],R=i.func_,this.getterStep_)return i.doneCallee_=1,this.createGetter_(R,i.value)}else i.func_=R;i.arguments_=[],i.n_=0}var R=i.func_;if(!i.doneArgs_){if(i.n_!==0&&i.arguments_.push(i.value),y.arguments[i.n_])return new d.State(y.arguments[i.n_++],i.scope);if(y.type==="NewExpression"){if((!(R instanceof d.Object)||R.illegalConstructor)&&this.throwException(this.TYPE_ERROR,this.nodeSummary(y.callee)+" is not a constructor"),R===this.ARRAY)i.funcThis_=this.createArray();else{var T=R.properties.prototype;(typeof T!="object"||T===null)&&(T=this.OBJECT_PROTO),i.funcThis_=this.createObjectProto(T)}i.isConstructor=!0}i.doneArgs_=!0}if(i.doneExec_)s.pop(),i.isConstructor&&typeof i.value!="object"?s[s.length-1].value=i.funcThis_:s[s.length-1].value=i.value;else{i.doneExec_=!0,R instanceof d.Object||this.throwException(this.TYPE_ERROR,this.nodeSummary(y.callee)+" is not a function");var b=R.node;if(b){for(var C=this.createScope(b.body,R.parentScope),G=this.createArray(),X=0;X<i.arguments_.length;X++)this.setProperty(G,X,i.arguments_[X]);this.setProperty(C.object,"arguments",G);for(var X=0;X<b.params.length;X++){var Q=b.params[X].name,K=i.arguments_.length>X?i.arguments_[X]:void 0;this.setProperty(C.object,Q,K)}return C.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),this.setProperty(C.object,"this",i.funcThis_,d.READONLY_DESCRIPTOR),i.value=void 0,new d.State(b.body,C)}else if(R.eval){var oe=i.arguments_[0];if(typeof oe!="string")i.value=oe;else{try{var ce=this.parse_(String(oe),"eval"+this.evalCodeNumber_++)}catch(pe){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+pe.message)}var ue=this.newNode();ue.type="EvalProgram_",ue.body=ce.body,d.stripLocations_(ue,y.start,y.end);var C=i.directEval_?i.scope:this.globalScope;return C.strict?C=this.createScope(ce,C):this.populateScope_(ce,C),this.value=void 0,new d.State(ue,C)}}else if(R.nativeFunc)i.scope.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),i.value=R.nativeFunc.apply(i.funcThis_,i.arguments_);else if(R.asyncFunc){var be=this,Ae=function(De){i.value=De,be.paused_=!1},Oe=R.asyncFunc.length-1,et=i.arguments_.concat(new Array(Oe)).slice(0,Oe);et.push(Ae),this.paused_=!0,i.scope.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),R.asyncFunc.apply(i.funcThis_,et);return}else this.throwException(this.TYPE_ERROR,this.nodeSummary(y.callee)+" is not callable")}},d.prototype.stepConditionalExpression=function(s,i,y){var _=i.mode_||0;if(_===0)return i.mode_=1,new d.State(y.test,i.scope);if(_===1){i.mode_=2;var R=!!i.value;if(R&&y.consequent)return new d.State(y.consequent,i.scope);if(!R&&y.alternate)return new d.State(y.alternate,i.scope);this.value=void 0}s.pop(),y.type==="ConditionalExpression"&&(s[s.length-1].value=i.value)},d.prototype.stepContinueStatement=function(s,i,y){var _=y.label&&y.label.name;this.unwind(d.Completion.CONTINUE,void 0,_)},d.prototype.stepDebuggerStatement=function(s,i,y){s.pop()},d.prototype.stepDoWhileStatement=function(s,i,y){if(y.type==="DoWhileStatement"&&i.test_===void 0&&(i.value=!0,i.test_=!0),!i.test_)return i.test_=!0,new d.State(y.test,i.scope);if(!i.value)s.pop();else if(y.body)return i.test_=!1,i.isLoop=!0,new d.State(y.body,i.scope)},d.prototype.stepEmptyStatement=function(s,i,y){s.pop()},d.prototype.stepEvalProgram_=function(s,i,y){var _=i.n_||0,R=y.body[_];if(R)return i.n_=_+1,new d.State(R,i.scope);s.pop(),s[s.length-1].value=this.value},d.prototype.stepExpressionStatement=function(s,i,y){if(!i.done_)return this.value=void 0,i.done_=!0,new d.State(y.expression,i.scope);s.pop(),this.value=i.value},d.prototype.stepForInStatement=function(s,i,y){if(!i.doneInit_&&(i.doneInit_=!0,y.left.declarations&&y.left.declarations[0].init))return i.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer"),new d.State(y.left,i.scope);if(!i.doneObject_)return i.doneObject_=!0,i.variable_||(i.variable_=i.value),new d.State(y.right,i.scope);if(i.isLoop||(i.isLoop=!0,i.object_=i.value,i.visited_=Object.create(null)),i.name_===void 0)e:for(;;){if(i.object_ instanceof d.Object)for(i.props_||(i.props_=Object.getOwnPropertyNames(i.object_.properties));;){var _=i.props_.shift();if(_===void 0)break;if(Object.prototype.hasOwnProperty.call(i.object_.properties,_)&&!i.visited_[_]&&(i.visited_[_]=!0,!!Object.prototype.propertyIsEnumerable.call(i.object_.properties,_))){i.name_=_;break e}}else if(i.object_!==null&&i.object_!==void 0)for(i.props_||(i.props_=Object.getOwnPropertyNames(i.object_));;){var _=i.props_.shift();if(_===void 0)break;if(i.visited_[_]=!0,!!Object.prototype.propertyIsEnumerable.call(i.object_,_)){i.name_=_;break e}}if(i.object_=this.getPrototype(i.object_),i.props_=null,i.object_===null){s.pop();return}}if(!i.doneVariable_){i.doneVariable_=!0;var R=y.left;if(R.type==="VariableDeclaration")i.variable_=[d.SCOPE_REFERENCE,R.declarations[0].id.name];else{i.variable_=null;var T=new d.State(R,i.scope);return T.components=!0,T}}if(i.variable_||(i.variable_=i.value),!i.doneSetter_){i.doneSetter_=!0;var b=i.name_,C=this.setValue(i.variable_,b);if(C)return this.createSetter_(C,i.variable_,b)}if(i.name_=void 0,i.doneVariable_=!1,i.doneSetter_=!1,y.body)return new d.State(y.body,i.scope)},d.prototype.stepForStatement=function(s,i,y){switch(i.mode_){default:if(i.mode_=1,y.init)return new d.State(y.init,i.scope);break;case 1:if(i.mode_=2,y.test)return new d.State(y.test,i.scope);break;case 2:if(i.mode_=3,y.test&&!i.value)s.pop();else return i.isLoop=!0,new d.State(y.body,i.scope);break;case 3:if(i.mode_=1,y.update)return new d.State(y.update,i.scope);break}},d.prototype.stepFunctionDeclaration=function(s,i,y){s.pop()},d.prototype.stepFunctionExpression=function(s,i,y){s.pop(),i=s[s.length-1];var _=i.scope;y.id&&(_=this.createSpecialScope(_)),i.value=this.createFunction(y,_,i.destinationName),y.id&&this.setProperty(_.object,y.id.name,i.value,d.READONLY_DESCRIPTOR)},d.prototype.stepIdentifier=function(s,i,y){if(s.pop(),i.components){s[s.length-1].value=[d.SCOPE_REFERENCE,y.name];return}var _=this.getValueFromScope(y.name);if(this.getterStep_){var R=_;return this.createGetter_(R,this.globalObject)}s[s.length-1].value=_},d.prototype.stepIfStatement=d.prototype.stepConditionalExpression,d.prototype.stepLabeledStatement=function(s,i,y){s.pop();var _=i.labels||[];_.push(y.label.name);var R=new d.State(y.body,i.scope);return R.labels=_,R},d.prototype.stepLiteral=function(s,i,y){s.pop();var _=y.value;if(_ instanceof RegExp){var R=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(R,_),_=R}s[s.length-1].value=_},d.prototype.stepLogicalExpression=function(s,i,y){if(y.operator!=="&&"&&y.operator!=="||")throw SyntaxError("Unknown logical operator: "+y.operator);if(!i.doneLeft_)return i.doneLeft_=!0,new d.State(y.left,i.scope);if(i.doneRight_)s.pop(),s[s.length-1].value=i.value;else if(y.operator==="&&"&&!i.value||y.operator==="||"&&i.value)s.pop(),s[s.length-1].value=i.value;else return i.doneRight_=!0,new d.State(y.right,i.scope)},d.prototype.stepMemberExpression=function(s,i,y){if(!i.doneObject_)return i.doneObject_=!0,new d.State(y.object,i.scope);var _;if(!y.computed)i.object_=i.value,_=y.property.name;else if(i.doneProperty_)_=i.value;else return i.object_=i.value,i.doneProperty_=!0,new d.State(y.property,i.scope);if(s.pop(),i.components)s[s.length-1].value=[i.object_,_];else{var R=this.getProperty(i.object_,_);if(this.getterStep_){var T=R;return this.createGetter_(T,i.object_)}s[s.length-1].value=R}},d.prototype.stepNewExpression=d.prototype.stepCallExpression,d.prototype.stepObjectExpression=function(s,i,y){var _=i.n_||0,R=y.properties[_];if(!i.object_)i.object_=this.createObjectProto(this.OBJECT_PROTO),i.properties_=Object.create(null);else{var T=i.destinationName;i.properties_[T]||(i.properties_[T]={}),i.properties_[T][R.kind]=i.value,i.n_=++_,R=y.properties[_]}if(R){var b=R.key;if(b.type==="Identifier")var T=b.name;else if(b.type==="Literal")var T=b.value;else throw SyntaxError("Unknown object structure: "+b.type);return i.destinationName=T,new d.State(R.value,i.scope)}for(var b in i.properties_){var C=i.properties_[b];if("get"in C||"set"in C){var G={configurable:!0,enumerable:!0,get:C.get,set:C.set};this.setProperty(i.object_,b,d.VALUE_IN_DESCRIPTOR,G)}else this.setProperty(i.object_,b,C.init)}s.pop(),s[s.length-1].value=i.object_},d.prototype.stepProgram=function(s,i,y){var _=y.body.shift();if(_)return i.done=!1,new d.State(_,i.scope);i.done=!0},d.prototype.stepReturnStatement=function(s,i,y){if(y.argument&&!i.done_)return i.done_=!0,new d.State(y.argument,i.scope);this.unwind(d.Completion.RETURN,i.value,void 0)},d.prototype.stepSequenceExpression=function(s,i,y){var _=i.n_||0,R=y.expressions[_];if(R)return i.n_=_+1,new d.State(R,i.scope);s.pop(),s[s.length-1].value=i.value},d.prototype.stepSwitchStatement=function(s,i,y){if(!i.test_)return i.test_=1,new d.State(y.discriminant,i.scope);for(i.test_===1&&(i.test_=2,i.switchValue_=i.value,i.defaultCase_=-1);;){var _=i.index_||0,R=y.cases[_];if(!i.matched_&&R&&!R.test){i.defaultCase_=_,i.index_=_+1;continue}if(!R&&!i.matched_&&i.defaultCase_!==-1){i.matched_=!0,i.index_=i.defaultCase_;continue}if(R){if(!i.matched_&&!i.tested_&&R.test)return i.tested_=!0,new d.State(R.test,i.scope);if(i.matched_||i.value===i.switchValue_){i.matched_=!0;var T=i.n_||0;if(R.consequent[T])return i.isSwitch=!0,i.n_=T+1,new d.State(R.consequent[T],i.scope)}i.tested_=!1,i.n_=0,i.index_=_+1}else{s.pop();return}}},d.prototype.stepThisExpression=function(s,i,y){s.pop(),s[s.length-1].value=this.getValueFromScope("this")},d.prototype.stepThrowStatement=function(s,i,y){if(i.done_)this.throwException(i.value);else return i.done_=!0,new d.State(y.argument,i.scope)},d.prototype.stepTryStatement=function(s,i,y){if(!i.doneBlock_)return i.doneBlock_=!0,new d.State(y.block,i.scope);if(i.cv&&i.cv.type===d.Completion.THROW&&!i.doneHandler_&&y.handler){i.doneHandler_=!0;var _=this.createSpecialScope(i.scope);return this.setProperty(_.object,y.handler.param.name,i.cv.value),i.cv=void 0,new d.State(y.handler.body,_)}if(!i.doneFinalizer_&&y.finalizer)return i.doneFinalizer_=!0,new d.State(y.finalizer,i.scope);s.pop(),i.cv&&this.unwind(i.cv.type,i.cv.value,i.cv.label)},d.prototype.stepUnaryExpression=function(s,i,y){if(!i.done_){i.done_=!0;var _=new d.State(y.argument,i.scope);return _.components=y.operator==="delete",_}s.pop();var R=i.value;switch(y.operator){case"-":R=-R;break;case"+":R=+R;break;case"!":R=!R;break;case"~":R=~R;break;case"delete":var T=!0;if(Array.isArray(R)){var b=R[0];b===d.SCOPE_REFERENCE&&(b=i.scope);var C=String(R[1]);try{delete b.properties[C]}catch{i.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+C+"' of '"+b+"'"):T=!1}}R=T;break;case"typeof":R=R&&R.class==="Function"?"function":typeof R;break;case"void":R=void 0;break;default:throw SyntaxError("Unknown unary operator: "+y.operator)}s[s.length-1].value=R},d.prototype.stepUpdateExpression=function(s,i,y){if(!i.doneLeft_){i.doneLeft_=!0;var _=new d.State(y.argument,i.scope);return _.components=!0,_}if(i.leftSide_||(i.leftSide_=i.value),i.doneGetter_&&(i.leftValue_=i.value),!i.doneGetter_){var T=this.getValue(i.leftSide_);if(i.leftValue_=T,this.getterStep_){i.doneGetter_=!0;var R=T;return this.createGetter_(R,i.leftSide_)}}if(i.doneSetter_){s.pop(),s[s.length-1].value=i.setterValue_;return}var T=Number(i.leftValue_),b;if(y.operator==="++")b=T+1;else if(y.operator==="--")b=T-1;else throw SyntaxError("Unknown update expression: "+y.operator);var C=y.prefix?b:T,G=this.setValue(i.leftSide_,b);if(G)return i.doneSetter_=!0,i.setterValue_=C,this.createSetter_(G,i.leftSide_,b);s.pop(),s[s.length-1].value=C},d.prototype.stepVariableDeclaration=function(s,i,y){var _=y.declarations,R=i.n_||0,T=_[R];for(i.init_&&T&&(this.setValueToScope(T.id.name,i.value),i.init_=!1,T=_[++R]);T;){if(T.init)return i.n_=R,i.init_=!0,i.destinationName=T.id.name,new d.State(T.init,i.scope);T=_[++R]}s.pop()},d.prototype.stepWithStatement=function(s,i,y){if(!i.doneObject_)return i.doneObject_=!0,new d.State(y.object,i.scope);s.pop();var _=this.createSpecialScope(i.scope,i.value);return new d.State(y.body,_)},d.prototype.stepWhileStatement=d.prototype.stepDoWhileStatement,d.nativeGlobal.Interpreter=d,d.prototype.step=d.prototype.step,d.prototype.run=d.prototype.run,d.prototype.appendCode=d.prototype.appendCode,d.prototype.createObject=d.prototype.createObject,d.prototype.createObjectProto=d.prototype.createObjectProto,d.prototype.createAsyncFunction=d.prototype.createAsyncFunction,d.prototype.createNativeFunction=d.prototype.createNativeFunction,d.prototype.getProperty=d.prototype.getProperty,d.prototype.setProperty=d.prototype.setProperty,d.prototype.getStatus=d.prototype.getStatus,d.prototype.nativeToPseudo=d.prototype.nativeToPseudo,d.prototype.pseudoToNative=d.prototype.pseudoToNative,d.prototype.getGlobalScope=d.prototype.getGlobalScope,d.prototype.getStateStack=d.prototype.getStateStack,d.prototype.setStateStack=d.prototype.setStateStack,d.VALUE_IN_DESCRIPTOR=d.VALUE_IN_DESCRIPTOR,d.Status=d.Status,I.exports={Interpreter:d}},"./original-repo/acorn.js":function(I,F){(function(j,d){return d(F)})(this,function(j){j.version="0.5.0";var d,s="",i,y;j.parse=function(P,$){return s=String(P),i=s.length,R($),dn(),Nn(d.program)};var _={strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function R(P){d=P||{};for(var $ in _)Object.prototype.hasOwnProperty.call(d,$)||(d[$]=_[$]);y=d.sourceFile}var T=function(P,$){for(var H=1,W=0;;){fr.lastIndex=W;var he=fr.exec(P);if(he&&he.index<$)++H,W=he.index+he[0].length;else break}return{line:H,column:$-W}},b=0,C=0,G=0,X,Q,K,oe,ce,ue,be,Ae=0,Oe=0,et,De,pe,Me;function le(P,$){var H=T(s,P);$+=" ("+H.line+":"+H.column+")";var W=new SyntaxError($);throw W.pos=P,W.loc=H,W.raisedAt=b,W}var xt=[],$e={type:"num"},Rt={type:"regexp"},Et={type:"string"},qe={type:"name"},st={type:"eof"},ut={keyword:"break"},vt={keyword:"case",beforeExpr:!0},lt={keyword:"catch"},Ct={keyword:"continue"},At={keyword:"debugger"},Mt={keyword:"default"},Pt={keyword:"do",isLoop:!0},ft={keyword:"else",beforeExpr:!0},Ee={keyword:"finally"},me={keyword:"for",isLoop:!0},ye={keyword:"function"},Ne={keyword:"if"},_e={keyword:"return",beforeExpr:!0},Be={keyword:"switch"},pt={keyword:"throw",beforeExpr:!0},xe={keyword:"try"},Pe={keyword:"var"},ot={keyword:"while",isLoop:!0},Yt={keyword:"with"},Xt={keyword:"new",beforeExpr:!0},Jt={keyword:"this"},Ke={keyword:"null",atomValue:null},ct={keyword:"true",atomValue:!0},Lt={keyword:"false",atomValue:!1},$t={keyword:"in",binop:7,beforeExpr:!0},Kt={break:ut,case:vt,catch:lt,continue:Ct,debugger:At,default:Mt,do:Pt,else:ft,finally:Ee,for:me,function:ye,if:Ne,return:_e,switch:Be,throw:pt,try:xe,var:Pe,while:ot,with:Yt,null:Ke,true:ct,false:Lt,new:Xt,in:$t,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Jt,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},vr={type:"[",beforeExpr:!0},mr={type:"]"},er={type:"{",beforeExpr:!0},Bt={type:"}"},gt={type:"(",beforeExpr:!0},yt={type:")"},St={type:",",beforeExpr:!0},bt={type:";",beforeExpr:!0},tr={type:":",beforeExpr:!0},Ir={type:"."},kr={type:"?",beforeExpr:!0},Dr={binop:10,beforeExpr:!0},Mr={isAssign:!0,beforeExpr:!0},It={isAssign:!0,beforeExpr:!0},Zr={postfix:!0,prefix:!0,isUpdate:!0},Ur={prefix:!0,beforeExpr:!0},Lr={binop:1,beforeExpr:!0},$r={binop:2,beforeExpr:!0},Qr={binop:3,beforeExpr:!0},en={binop:4,beforeExpr:!0},tn={binop:5,beforeExpr:!0},rn={binop:6,beforeExpr:!0},nn={binop:7,beforeExpr:!0},an={binop:8,beforeExpr:!0},on={binop:9,prefix:!0,beforeExpr:!0},sn={binop:10,beforeExpr:!0};function ur(P){for(var $=P.split(" "),H=Object.create(null),W=0;W<$.length;W++)H[$[W]]=!0;return function(he){return H[he]||!1}}var un=ur("class enum extends super const export import"),Fr=ur("implements interface let package private protected public static yield"),cr=ur("eval arguments"),cn=ur("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),ln=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,jr="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",fn="------------------------------------------------------------------------------------------------------------------------------------------",Br=new RegExp("["+jr+"]"),pn=new RegExp("["+jr+fn+"]"),lr=/[\n\r\u2028\u2029]/,fr=/\r\n|[\n\r\u2028\u2029]/g,pr=function(P){return P<65?P===36:P<91?!0:P<97?P===95:P<123?!0:P>=170&&Br.test(String.fromCharCode(P))},zr=function(P){return P<48?P===36:P<58?!0:P<65?!1:P<91?!0:P<97?P===95:P<123?!0:P>=170&&pn.test(String.fromCharCode(P))};function kt(){this.line=ue,this.column=b-be}function dn(){ue=1,b=be=0,ce=!0,rr()}function Ie(P,$){G=b,d.locations&&(Q=new kt),K=P,rr(),oe=$,ce=P.beforeExpr}function hn(){var P=d.onComment&&d.locations&&new kt,$=b,H=s.indexOf("*/",b+=2);if(H===-1&&le(b-2,"Unterminated comment"),b=H+2,d.locations){fr.lastIndex=$;for(var W;(W=fr.exec(s))&&W.index<b;)++ue,be=W.index+W[0].length}d.onComment&&d.onComment(!0,s.slice($+2,H),$,b,P,d.locations&&new kt)}function gr(){for(var P=b,$=d.onComment&&d.locations&&new kt,H=s.charCodeAt(b+=2);b<i&&H!==10&&H!==13&&H!==8232&&H!==8233;)++b,H=s.charCodeAt(b);d.onComment&&d.onComment(!1,s.slice(P+2,b),P,b,$,d.locations&&new kt)}function rr(){for(;b<i;){var P=s.charCodeAt(b);if(P===32)++b;else if(P===13){++b;var $=s.charCodeAt(b);$===10&&++b,d.locations&&(++ue,be=b)}else if(P===10||P===8232||P===8233)++b,d.locations&&(++ue,be=b);else if(P>8&&P<14)++b;else if(P===47){var $=s.charCodeAt(b+1);if($===42)hn();else if($===47)gr();else break}else if(P===160)++b;else if(P>=5760&&ln.test(String.fromCharCode(P)))++b;else break}}function En(){var P=s.charCodeAt(b+1);P>=48&&P<=57?Gr(!0):(++b,Ie(Ir))}function yn(){var P=s.charCodeAt(b+1);ce?(++b,Vr()):P===61?ke(It,2):ke(Dr,1)}function vn(){var P=s.charCodeAt(b+1);P===61?ke(It,2):ke(sn,1)}function mn(P){var $=s.charCodeAt(b+1);$===P?ke(P===124?Lr:$r,2):$===61?ke(It,2):ke(P===124?Qr:tn,1)}function gn(){var P=s.charCodeAt(b+1);P===61?ke(It,2):ke(en,1)}function bn(P){var $=s.charCodeAt(b+1);if($===P){if($===45&&s.charCodeAt(b+2)===62&&lr.test(s.slice(Oe,b))){b+=3,gr(),rr(),zt();return}ke(Zr,2)}else $===61?ke(It,2):ke(on,1)}function _n(P){var $=s.charCodeAt(b+1),H=1;if($===P){H=P===62&&s.charCodeAt(b+2)===62?3:2,s.charCodeAt(b+H)===61?ke(It,H+1):ke(an,H);return}if($===33&&P===60&&s.charCodeAt(b+2)===45&&s.charCodeAt(b+3)===45){b+=4,gr(),rr(),zt();return}$===61&&(H=s.charCodeAt(b+2)===61?3:2),ke(nn,H)}function Rn(P){var $=s.charCodeAt(b+1);$===61?ke(rn,s.charCodeAt(b+2)===61?3:2):ke(P===61?Mr:Ur,1)}function Sn(P){switch(P){case 46:return En();case 40:return++b,Ie(gt);case 41:return++b,Ie(yt);case 59:return++b,Ie(bt);case 44:return++b,Ie(St);case 91:return++b,Ie(vr);case 93:return++b,Ie(mr);case 123:return++b,Ie(er);case 125:return++b,Ie(Bt);case 58:return++b,Ie(tr);case 63:return++b,Ie(kr);case 48:var $=s.charCodeAt(b+1);if($===120||$===88)return Tn();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Gr(!1);case 34:case 39:return wn(P);case 47:return yn();case 37:case 42:return vn();case 124:case 38:return mn(P);case 94:return gn();case 43:case 45:return bn(P);case 60:case 62:return _n(P);case 61:case 33:return Rn(P);case 126:return ke(Ur,1)}return!1}function zt(P){if(P?b=C+1:C=b,d.locations&&(X=new kt),P)return Vr();if(b>=i)return Ie(st);var $=s.charCodeAt(b);if(pr($)||$===92)return Wr();var H=Sn($);if(H===!1){var W=String.fromCharCode($);if(W==="\\"||Br.test(W))return Wr();le(b,"Unexpected character '"+W+"'")}}function ke(P,$){var H=s.slice(b,b+$);b+=$,Ie(P,H)}function Vr(){for(var P,$,H=b;;){b>=i&&le(H,"Unterminated regexp");var W=s.charAt(b);if(lr.test(W)&&le(H,"Unterminated regexp"),P)P=!1;else{if(W==="[")$=!0;else if(W==="]"&&$)$=!1;else if(W==="/"&&!$)break;P=W==="\\"}++b}var he=s.slice(H,b);++b;var fe=Hr();fe&&!/^[gmi]*$/.test(fe)&&le(H,"Invalid regexp flag");try{var ve=new RegExp(he,fe)}catch(Te){throw Te instanceof SyntaxError&&le(H,Te.message),Te}Ie(Rt,ve)}function nr(P,$){for(var H=b,W=0,he=$===void 0?1/0:$,fe=0;fe<he;++fe){var ve=s.charCodeAt(b),Te;if(ve>=97?Te=ve-97+10:ve>=65?Te=ve-65+10:ve>=48&&ve<=57?Te=ve-48:Te=1/0,Te>=P)break;++b,W=W*P+Te}return b===H||$!==void 0&&b-H!==$?null:W}function Tn(){b+=2;var P=nr(16);P===null&&le(C+2,"Expected hexadecimal number"),pr(s.charCodeAt(b))&&le(b,"Identifier directly after number"),Ie($e,P)}function Gr(P){var $=b,H=!1,W=s.charCodeAt(b)===48;!P&&nr(10)===null&&le($,"Invalid number"),s.charCodeAt(b)===46&&(++b,nr(10),H=!0);var he=s.charCodeAt(b);(he===69||he===101)&&(he=s.charCodeAt(++b),(he===43||he===45)&&++b,nr(10)===null&&le($,"Invalid number"),H=!0),pr(s.charCodeAt(b))&&le(b,"Identifier directly after number");var fe=s.slice($,b),ve;H?ve=parseFloat(fe):!W||fe.length===1?ve=parseInt(fe,10):/[89]/.test(fe)||Me?le($,"Invalid number"):ve=parseInt(fe,8),Ie($e,ve)}function wn(P){b++;for(var $="";;){b>=i&&le(C,"Unterminated string constant");var H=s.charCodeAt(b);if(H===P){++b,Ie(Et,$);return}if(H===92){H=s.charCodeAt(++b);var W=/^[0-7]+/.exec(s.slice(b,b+3));for(W&&(W=W[0]);W&&parseInt(W,8)>255;)W=W.slice(0,-1);if(W==="0"&&(W=null),++b,W)Me&&le(b-2,"Octal literal in strict mode"),$+=String.fromCharCode(parseInt(W,8)),b+=W.length-1;else switch(H){case 110:$+=`
`;break;case 114:$+="\r";break;case 120:$+=String.fromCharCode(dr(2));break;case 117:$+=String.fromCharCode(dr(4));break;case 85:$+=String.fromCharCode(dr(8));break;case 116:$+="	";break;case 98:$+="\b";break;case 118:$+="\v";break;case 102:$+="\f";break;case 48:$+="\0";break;case 13:s.charCodeAt(b)===10&&++b;case 10:d.locations&&(be=b,++ue);break;default:$+=String.fromCharCode(H);break}}else(H===13||H===10||H===8232||H===8233)&&le(C,"Unterminated string constant"),$+=String.fromCharCode(H),++b}}function dr(P){var $=nr(16,P);return $===null&&le(C,"Bad character escape sequence"),$}var Gt;function Hr(){Gt=!1;for(var P,$=!0,H=b;;){var W=s.charCodeAt(b);if(zr(W))Gt&&(P+=s.charAt(b)),++b;else if(W===92){Gt||(P=s.slice(H,b)),Gt=!0,s.charCodeAt(++b)!==117&&le(b,"Expecting Unicode escape sequence \\uXXXX"),++b;var he=dr(4),fe=String.fromCharCode(he);fe||le(b-1,"Invalid Unicode escape"),($?pr(he):zr(he))||le(b-4,"Invalid Unicode escape"),P+=fe}else break;$=!1}return Gt?P:s.slice(H,b)}function Wr(){var P=Hr(),$=qe;!Gt&&cn(P)&&($=Kt[P]),Ie($,P)}function ge(){Ae=C,Oe=G,et=Q,zt()}function br(P){if(Me=P,b=C,d.locations)for(;b<be;)be=s.lastIndexOf(`
`,be-2)+1,--ue;rr(),zt()}function Yr(){this.type=null,this.start=C,this.end=null}function Xr(){this.start=X,this.end=null,y&&(this.source=y)}function Ve(){var P=new Yr;return d.locations&&(P.loc=new Xr),d.directSourceFile&&(P.sourceFile=d.directSourceFile),d.ranges&&(P.range=[C,0]),P}function wt(P){var $=new Yr;return $.start=P.start,d.locations&&($.loc=new Xr,$.loc.start=P.loc.start),d.ranges&&($.range=[P.range[0],0]),$}function de(P,$){return P.type=$,P.end=Oe,d.locations&&(P.loc.end=et),d.ranges&&(P.range[1]=Oe),P}function _r(P){return P.type==="ExpressionStatement"&&P.expression.type==="Literal"&&P.expression.value==="use strict"}function we(P){return K===P?(ge(),!0):!1}function hr(){return!d.strictSemicolons&&(K===st||K===Bt||lr.test(s.slice(Oe,C)))}function Dt(){!we(bt)&&!hr()&&_t()}function Ce(P){K===P?ge():_t()}function _t(){le(C,"Unexpected token")}function Er(P){P.type!=="Identifier"&&P.type!=="MemberExpression"&&le(P.start,"Assigning to rvalue"),Me&&P.type==="Identifier"&&cr(P.name)&&le(P.start,"Assigning to "+P.name+" in strict mode")}function Nn(P){Ae=Oe=b,d.locations&&(et=new kt),De=Me=!1,pe=[],zt();var $=P||Ve(),H=!0;for(P||($.body=[]);K!==st;){var W=ht();$.body.push(W),H&&_r(W)&&br(!0),H=!1}return de($,"Program")}var Rr={kind:"loop"},On={kind:"switch"};function ht(){(K===Dr||K===It&&oe==="/=")&&zt(!0);var P=K,$=Ve();switch(P){case ut:case Ct:ge();var H=P===ut;we(bt)||hr()?$.label=null:K!==qe?_t():($.label=Nt(),Dt());for(var W=0;W<pe.length;++W){var he=pe[W];if(($.label===null||he.name===$.label.name)&&(he.kind!==null&&(H||he.kind==="loop")||$.label&&H))break}return W===pe.length&&le($.start,"Unsyntactic "+P.keyword),de($,H?"BreakStatement":"ContinueStatement");case At:return ge(),Dt(),de($,"DebuggerStatement");case Pt:return ge(),pe.push(Rr),$.body=ht(),pe.pop(),Ce(ot),$.test=ar(),Dt(),de($,"DoWhileStatement");case me:if(ge(),pe.push(Rr),Ce(gt),K===bt)return Sr($,null);if(K===Pe){var fe=Ve();return ge(),qr(fe,!0),de(fe,"VariableDeclaration"),fe.declarations.length===1&&we($t)?Jr($,fe):Sr($,fe)}var fe=Ye(!1,!0);return we($t)?(Er(fe),Jr($,fe)):Sr($,fe);case ye:return ge(),xr($,!0);case Ne:return ge(),$.test=ar(),$.consequent=ht(),$.alternate=we(ft)?ht():null,de($,"IfStatement");case _e:return!De&&!d.allowReturnOutsideFunction&&le(C,"'return' outside of function"),ge(),we(bt)||hr()?$.argument=null:($.argument=Ye(),Dt()),de($,"ReturnStatement");case Be:ge(),$.discriminant=ar(),$.cases=[],Ce(er),pe.push(On);for(var ve,Te;K!==Bt;)if(K===vt||K===Mt){var sr=K===vt;ve&&de(ve,"SwitchCase"),$.cases.push(ve=Ve()),ve.consequent=[],ge(),sr?ve.test=Ye():(Te&&le(Ae,"Multiple default clauses"),Te=!0,ve.test=null),Ce(tr)}else ve||_t(),ve.consequent.push(ht());return ve&&de(ve,"SwitchCase"),ge(),pe.pop(),de($,"SwitchStatement");case pt:return ge(),lr.test(s.slice(Oe,C))&&le(Oe,"Illegal newline after throw"),$.argument=Ye(),Dt(),de($,"ThrowStatement");case xe:if(ge(),$.block=ir(),$.handler=null,K===lt){var Wt=Ve();ge(),Ce(gt),Wt.param=Nt(),Me&&cr(Wt.param.name)&&le(Wt.param.start,"Binding "+Wt.param.name+" in strict mode"),Ce(yt),Wt.body=ir(),$.handler=de(Wt,"CatchClause")}return $.finalizer=we(Ee)?ir():null,!$.handler&&!$.finalizer&&le($.start,"Missing catch or finally clause"),de($,"TryStatement");case Pe:return ge(),qr($),Dt(),de($,"VariableDeclaration");case ot:return ge(),$.test=ar(),pe.push(Rr),$.body=ht(),pe.pop(),de($,"WhileStatement");case Yt:return Me&&le(C,"'with' in strict mode"),ge(),$.object=ar(),$.body=ht(),de($,"WithStatement");case er:return ir();case bt:return ge(),de($,"EmptyStatement");default:var Ar=oe,yr=Ye();if(P===qe&&yr.type==="Identifier"&&we(tr)){for(var W=0;W<pe.length;++W)pe[W].name===Ar&&le(yr.start,"Label '"+Ar+"' is already declared");var kn=K.isLoop?"loop":K===Be?"switch":null;return pe.push({name:Ar,kind:kn}),$.body=ht(),pe.pop(),$.label=yr,de($,"LabeledStatement")}else return $.expression=yr,Dt(),de($,"ExpressionStatement")}}function ar(){Ce(gt);var P=Ye();return Ce(yt),P}function ir(P){var $=Ve(),H=!0,W=!1,he;for($.body=[],Ce(er);!we(Bt);){var fe=ht();$.body.push(fe),H&&P&&_r(fe)&&(he=W,br(W=!0)),H=!1}return W&&!he&&br(!1),de($,"BlockStatement")}function Sr(P,$){return P.init=$,Ce(bt),P.test=K===bt?null:Ye(),Ce(bt),P.update=K===yt?null:Ye(),Ce(yt),P.body=ht(),pe.pop(),de(P,"ForStatement")}function Jr(P,$){return P.left=$,P.right=Ye(),Ce(yt),P.body=ht(),pe.pop(),de(P,"ForInStatement")}function qr(P,$){for(P.declarations=[],P.kind="var";;){var H=Ve();if(H.id=Nt(),Me&&cr(H.id.name)&&le(H.id.start,"Binding "+H.id.name+" in strict mode"),H.init=we(Mr)?Ye(!0,$):null,P.declarations.push(de(H,"VariableDeclarator")),!we(St))break}}function Ye(P,$){var H=Tr($);if(!P&&K===St){var W=wt(H);for(W.expressions=[H];we(St);)W.expressions.push(Tr($));return de(W,"SequenceExpression")}return H}function Tr(P){var $=xn(P);if(K.isAssign){var H=wt($);return H.operator=oe,H.left=$,ge(),H.right=Tr(P),Er($),de(H,"AssignmentExpression")}return $}function xn(P){var $=Cn(P);if(we(kr)){var H=wt($);return H.test=$,H.consequent=Ye(!0),Ce(tr),H.alternate=Ye(!0,P),de(H,"ConditionalExpression")}return $}function Cn(P){return wr(Nr(),-1,P)}function wr(P,$,H){var W=K.binop;if(W!==null&&(!H||K!==$t)&&W>$){var he=wt(P);he.left=P,he.operator=oe;var fe=K;ge(),he.right=wr(Nr(),W,H);var ve=de(he,fe===Lr||fe===$r?"LogicalExpression":"BinaryExpression");return wr(ve,$,H)}return P}function Nr(){if(K.prefix){var P=Ve(),$=K.isUpdate;return P.operator=oe,P.prefix=!0,ce=!0,ge(),P.argument=Nr(),$?Er(P.argument):Me&&P.operator==="delete"&&P.argument.type==="Identifier"&&le(P.start,"Deleting local variable in strict mode"),de(P,$?"UpdateExpression":"UnaryExpression")}for(var H=An();K.postfix&&!hr();){var P=wt(H);P.operator=oe,P.prefix=!1,P.argument=H,Er(H),ge(),H=de(P,"UpdateExpression")}return H}function An(){return or(Or())}function or(P,$){var H;return we(Ir)?(H=wt(P),H.object=P,H.property=Nt(!0),H.computed=!1,or(de(H,"MemberExpression"),$)):we(vr)?(H=wt(P),H.object=P,H.property=Ye(),H.computed=!0,Ce(mr),or(de(H,"MemberExpression"),$)):!$&&we(gt)?(H=wt(P),H.callee=P,H.arguments=Cr(yt,!1),or(de(H,"CallExpression"),$)):P}function Or(){var P;switch(K){case Jt:return P=Ve(),ge(),de(P,"ThisExpression");case qe:return Nt();case $e:case Et:case Rt:return P=Ve(),P.value=oe,P.raw=s.slice(C,G),ge(),de(P,"Literal");case Ke:case ct:case Lt:return P=Ve(),P.value=K.atomValue,P.raw=K.keyword,ge(),de(P,"Literal");case gt:var $=X,H=C;ge();var W=Ye();return W.start=H,W.end=G,d.locations&&(W.loc.start=$,W.loc.end=Q),d.ranges&&(W.range=[H,G]),Ce(yt),W;case vr:return P=Ve(),ge(),P.elements=Cr(mr,!0,!0),de(P,"ArrayExpression");case er:return In();case ye:return P=Ve(),ge(),xr(P,!1);case Xt:return Pn()}_t()}function Pn(){var P=Ve();return ge(),P.callee=or(Or(),!0),P.arguments=we(gt)?Cr(yt,!1):xt,de(P,"NewExpression")}function In(){var P=Ve(),$=!0,H=!1;for(P.properties=[],ge();!we(Bt);){if($)$=!1;else if(Ce(St),d.allowTrailingCommas&&we(Bt))break;var W={key:Kr()},he=!1,fe;if(we(tr)?(W.value=Ye(!0),fe=W.kind="init"):W.key.type==="Identifier"&&(W.key.name==="get"||W.key.name==="set")?(he=H=!0,fe=W.kind=W.key.name,W.key=Kr(),K!==gt&&_t(),W.value=xr(Ve(),!1)):_t(),W.key.type==="Identifier"&&(Me||H))for(var ve=0;ve<P.properties.length;++ve){var Te=P.properties[ve];if(Te.key.name===W.key.name){var sr=fe===Te.kind||he&&Te.kind==="init"||fe==="init"&&(Te.kind==="get"||Te.kind==="set");sr&&!Me&&fe==="init"&&Te.kind==="init"&&(sr=!1),sr&&le(W.key.start,"Redefinition of property")}}P.properties.push(W)}return de(P,"ObjectExpression")}function Kr(){return K===$e||K===Et?Or():Nt(!0)}function xr(P,$){K===qe?P.id=Nt():$?_t():P.id=null,P.params=[];var H=!0;for(Ce(gt);!we(yt);)H?H=!1:Ce(St),P.params.push(Nt());var W=De,he=pe;if(De=!0,pe=[],P.body=ir(!0),De=W,pe=he,Me||P.body.body.length&&_r(P.body.body[0]))for(var fe=P.id?-1:0;fe<P.params.length;++fe){var ve=fe<0?P.id:P.params[fe];if((Fr(ve.name)||cr(ve.name))&&le(ve.start,"Defining '"+ve.name+"' in strict mode"),fe>=0)for(var Te=0;Te<fe;++Te)ve.name===P.params[Te].name&&le(ve.start,"Argument name clash in strict mode")}return de(P,$?"FunctionDeclaration":"FunctionExpression")}function Cr(P,$,H){for(var W=[],he=!0;!we(P);){if(he)he=!1;else if(Ce(St),$&&d.allowTrailingCommas&&we(P))break;W.push(H&&K===St?null:Ye(!0))}return W}function Nt(P){var $=Ve();return P&&d.forbidReserved==="everywhere"&&(P=!1),K===qe?(!P&&(d.forbidReserved&&un(oe)||Me&&Fr(oe))&&s.slice(C,G).indexOf("\\")===-1&&le(C,"The keyword '"+oe+"' is reserved"),$.name=oe):P&&K.keyword?$.name=K.keyword:_t(),ce=!1,ge(),de($,"Identifier")}})},vm:I=>{I.exports=requireVmBrowserify()}},g={};function S(I){var F=g[I];if(F!==void 0)return F.exports;var j=g[I]={exports:{}};return E[I].call(j.exports,j,j.exports,S),j.exports}S.d=(I,F)=>{for(var j in F)S.o(F,j)&&!S.o(I,j)&&Object.defineProperty(I,j,{enumerable:!0,get:F[j]})},S.o=(I,F)=>Object.prototype.hasOwnProperty.call(I,F),S.r=I=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(I,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(I,"__esModule",{value:!0})};var w={};return(()=>{S.r(w),S.d(w,{default:()=>j});const I=S("./original-repo/acorn.js");globalThis.acorn=I;const{Interpreter:F}=S("./original-repo/interpreter.js"),j=F})(),w=w.default,w})())})(jsInterpreter);var jsInterpreterExports=jsInterpreter.exports;const eo=getDefaultExportFromCjs(jsInterpreterExports);var Z=reactExports.createContext({registerProblem:noop$1});Z.displayName="ContestContext";function je({children:a}){let{student:o,setStudent:E,terminated:g}=v(),[S,w]=reactExports.useState({}),I=reactExports.useCallback((s,i)=>{w(y=>({...y,[s]:i}))},[]),[F,j]=reactExports.useState(!1),d=reactExports.useRef(null);return reactExports.useEffect(()=>{var s;g!==F&&(j(g),F||((s=d.current)==null||s.showModal()))},[g,F]),o.startedAt?c.createElement(Z.Provider,{value:{registerProblem:I}},c.createElement("div",{className:"break-before-page"},c.createElement("main",{className:"gap-x-10 [column-rule:solid_1px_var(--tw-prose-hr)] print:columns-2"},a)),c.createElement(Tt,{ref:d,schema:S})):c.createElement("div",{className:"flex h-[50vh] justify-center"},c.createElement("div",{className:"flex flex-col justify-center"},c.createElement("button",{className:"btn btn-success btn-lg",onClick:()=>{E({...o,startedAt:new Date,variant:V$1()})}},"Inizia")))}var Tt=reactExports.forwardRef(function({schema:a},o){let{student:E}=v(),g=Object.keys(a);g.sort((I,F)=>I.localeCompare(F,void 0,{numeric:!0}));let S=reactExports.useMemo(()=>{let I={id:E.variant,contestId:E.contestId,schema:a};return Se(E,{[I.id]:I})},[a,E]),w=sumBy(Object.values(a),"pointsCorrect");return c.createElement(jt,{ref:o,title:"Prova terminata"},c.createElement("p",null,"La prova  terminata."),S!==void 0&&c.createElement(c.Fragment,null,c.createElement("p",null,"Hai ottenuto un punteggio di ",c.createElement("b",null,S)," su ",c.createElement("b",null,w),"."),c.createElement("div",{className:"w-full"},c.createElement("table",{className:"table-fixed prose-td:truncate"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{scope:"col"},"Domanda"),c.createElement("th",{scope:"col"},"Risposta"),c.createElement("th",{scope:"col"},"Soluzione"),c.createElement("th",{scope:"col"},"Punteggio"))),c.createElement("tbody",null,g.map(I=>{var d,s;let F=(s=(d=E.answers)==null?void 0:d[I])==null?void 0:s.trim(),j=a[I];return c.createElement("tr",{key:I},c.createElement("td",null,I),c.createElement("td",null,F??"-"),c.createElement("td",null,j.solution),c.createElement("td",null,dt(j,F)))}))))))});function O(){return reactExports.useContext(Z)}var V=reactExports.createContext({id:void 0,points:[0,0,0]});V.displayName="ProblemContext";function ze({id:a,points:o,statement:E}){let{student:g}=v(),[S,w]=reactExports.useState(1),[I,F]=reactExports.useState(()=>g.variant?A$1(`r#problem#${g.variant}#${a}`):0),j=reactExports.useCallback(()=>I,[I]),d=reactExports.useCallback(i=>{i&&i!==S&&defer(()=>w(i))},[S]),s=reactExports.useMemo(()=>reactExports.memo(E),[E]);return c.createElement(V.Provider,{value:{id:a,points:o}},c.createElement("div",{className:"relative"},!1,c.createElement(s,{variant:j,setVariantCount:d})),c.createElement("hr",{className:"last:hidden"}))}function Le({subId:a,children:o}){let{id:E,points:g}=reactExports.useContext(V),S=a?`${E}.${a}`:`${E}`;return c.createElement(V.Provider,{value:{id:S,points:g}},c.createElement("div",{className:"break-inside-avoid"},c.createElement("h3",null,"Domanda ",S),o))}function A(){return reactExports.useContext(V)}var Y=reactExports.createContext({id:""});Y.displayName="AnswerContext";function Fe({children:a}){let{student:o}=v(),{id:E}=A(),g=reactExports.useMemo(()=>{let S=reactExports.Children.toArray(a);return o.variant&&new x(`r#answers#${o.variant}#${E}`).shuffle(S),S},[o.variant,E,a]);return c.createElement("form",{className:D$1("answer-group my-5 flex-wrap rounded-xl bg-base-200 p-3","prose-p:my-1 print:flex print:border print:border-[var(--tw-prose-hr)] print:p-1")},g.map((S,w)=>c.createElement(Y.Provider,{key:w,value:{id:String.fromCodePoint(65+w)}},S)))}function Ue({correct:a,children:o}){var y;let{id:E}=reactExports.useContext(Y),{registerProblem:g}=O(),{id:S,points:w}=A(),{student:I,setStudent:F,terminated:j}=v(),d=(y=I.answers)==null?void 0:y[S],s=async _=>{await F({...I,answers:{...I.answers,[S]:_}})},i=reactExports.useId();return reactExports.useEffect(()=>{a&&g(`${S}`,{type:"text",pointsCorrect:w[0],pointsBlank:w[1],pointsWrong:w[2],solution:E})},[g,E,S,a,w]),c.createElement("div",{className:D$1("answer relative my-1 flex rounded-lg pl-2 pr-1 hover:bg-base-300 print:mr-4",j&&{"border-2 border-success":a===!0,"border-2 border-error":d===E&&a===!1})},c.createElement("input",{id:i,checked:d===E,className:D$1("radio radio-sm my-auto mr-4 bg-base-100 [print-color-adjust:exact] disabled:opacity-90 print:mr-2",j&&d===E&&{"radio-success":a===!0,"radio-error":a===!1}),onChange:_=>s(_.target.checked?E:void 0),type:"radio",disabled:j}),c.createElement("div",{className:"my-auto w-6 screen:hidden"},E,")"),c.createElement("label",{htmlFor:i,className:"grow"},o),c.createElement("div",{className:"absolute right-0 top-0 mr-1 flex h-full justify-center print:hidden"},c.createElement("button",{className:D$1("btn btn-square btn-ghost btn-sm my-auto",(d!==E||j)&&"hidden"),type:"button",onClick:()=>s(void 0)},c.createElement(Trash2,{size:20}))))}function He({correct:a,type:o}){var s;let{registerProblem:E}=O(),{id:g,points:S}=A(),{student:w,setStudent:I,terminated:F}=v(),j=(s=w.answers)==null?void 0:s[g],d=async i=>{await I({...w,answers:{...w.answers,[g]:i}})};return reactExports.useEffect(()=>{E(`${g}`,{type:"text",pointsCorrect:S[0],pointsBlank:S[1],pointsWrong:S[2],solution:a})},[E,g,a,S]),c.createElement("div",{className:"px-2"},c.createElement("input",{className:D$1("input input-bordered w-72 max-w-full border-2 print:placeholder:text-transparent",F&&a!==void 0&&{"disabled:input-success":a===j,"disabled:input-error":a!==j}),onChange:i=>d(i.target.value||void 0),onWheel:i=>i.currentTarget.blur(),placeholder:"Inserisci la risposta",type:o,value:j??"",disabled:F,"aria-label":"Risposta"}))}function We({children:a}){let{terminated:o}=v();if(o)return c.createElement("div",{className:"my-5 rounded-xl bg-base-200 print:hidden"},c.createElement("div",{className:"collapse"},c.createElement("input",{type:"checkbox"}),c.createElement("div",{className:"collapse-title text-xl font-medium"},"Mostra soluzione"),c.createElement("div",{className:"collapse-content"},a)))}var Ge=z$1.enum(["Number","String","Array","Boolean"]),Ft=z$1.object({type:z$1.literal("input_value"),name:z$1.string(),check:Ge}),Je=z$1.object({type:z$1.string(),message0:z$1.string(),args0:z$1.array(Ft).optional(),colour:z$1.union([z$1.number(),z$1.string()]),tooltip:z$1.string(),helpUrl:z$1.string(),maxInstances:z$1.number().optional()}),Ut=Je.extend({nextStatement:z$1.literal(null).optional(),previousStatement:z$1.literal(null).optional(),js:z$1.string()}),Ht=Je.extend({output:Ge,js:z$1.tuple([z$1.string(),z$1.string().startsWith("ORDER_")])}),Qe=z$1.union([Ut,Ht]),Qt=reactExports.lazy(()=>__vitePreload(()=>import("./code-highlight-4YYAT6IQ-xEvrnk72.js"),__vite__mapDeps([0,1,2])));function z(a){return c.createElement(reactExports.Suspense,{fallback:c.createElement(qt,{...a})},c.createElement(Qt,{...a}))}function qt({inline:a,code:o,noLineNumbers:E}){return a?c.createElement("code",null,o):c.createElement("pre",null,c.createElement("code",null,o.split(`
`).map((g,S)=>c.createElement("span",{key:S},c.createElement("span",{className:D$1("mr-6 inline-block w-7 select-none text-right",E&&"hidden")},S+1),c.createElement("span",null,g)))))}var Xe={kind:"categoryToolbox",contents:[{kind:"category",name:"Variabili",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"Matematica",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"math_arithmetic",fields:{OP:"ADD"}},{kind:"block",type:"math_number_property",fields:{PROPERTY:"EVEN"}},{kind:"block",type:"math_on_list",fields:{OP:"SUM"}}]},{kind:"category",name:"Logica",categorystyle:"logic_category",contents:[{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"controls_if"},{kind:"block",type:"controls_if",extraState:{hasElse:"true"}}]},{kind:"category",name:"Cicli",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{block:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for",fields:{VAR:"i"},inputs:{FROM:{block:{type:"math_number",fields:{NUM:1}}},TO:{block:{type:"math_number",fields:{NUM:10}}},BY:{block:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"controls_forEach"}]},{kind:"category",name:"Liste",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_repeat",inputs:{NUM:{block:{type:"math_number",fields:{NUM:5}}}}},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_getIndex",fields:{MODE:"GET",WHERE:"FROM_START"}},{kind:"block",type:"lists_setIndex",fields:{MODE:"SET",WHERE:"FROM_START"}}]}]},Ze={blocks:{languageVersion:0,blocks:[{type:"start",id:"y=zq)Uya2A/{vyOtN[i6",x:30,y:30}]},variables:[]},to=1e3,B=class extends eo{constructor(a,o){super(a,(E,g)=>{E.setProperty(g,"highlightBlock",E.createNativeFunction(S=>{this.highlightedBlock=S,this.stepFinished=!0})),E.setProperty(g,"exit",E.createNativeFunction((S,w)=>{this.running=!1,this.correct=S,this.msg=w})),E.setProperty(g,"hiddenState",E.nativeToPseudo(o)),E.setProperty(g,"loopTrap",to)}),this.stepFinished=!1,this.highlightedBlock="",this.running=!0,this.correct=!1,this.step=()=>{if(!this.running)return!1;do{this.stepFinished=!1;try{this.running=super.step()&&this.running}catch{this.running=!1}}while(this.running&&!this.stepFinished);return this.running}}};function ee(a,o){let[E,g]=reactExports.useState(),[S,w]=reactExports.useState({highlightedBlock:"",running:!0,correct:!1,msg:"",globalScope:{}}),I=reactExports.useCallback(()=>{let F=new B(a,o);g(F),w({highlightedBlock:(F==null?void 0:F.highlightedBlock)??"",running:(F==null?void 0:F.running)??!1,correct:(F==null?void 0:F.correct)??!1,msg:(F==null?void 0:F.msg)??"",globalScope:(F==null?void 0:F.pseudoToNative(F.globalScope.object))??{}})},[a,o]);return reactExports.useEffect(()=>{I()},[I,a,o]),{step:()=>{E==null||E.step(),w({highlightedBlock:(E==null?void 0:E.highlightedBlock)??"",running:(E==null?void 0:E.running)??!1,correct:(E==null?void 0:E.correct)??!1,msg:(E==null?void 0:E.msg)??"",globalScope:(E==null?void 0:E.pseudoToNative(E.globalScope.object))??{}})},reset:I,...S}}function te(a,o){return reactExports.useEffect(()=>{return window.addEventListener("message",E),()=>window.removeEventListener("message",E);function E(g){g.source===a&&o(g.data)}},[a,o]),reactExports.useCallback(E=>a==null?void 0:a.postMessage(E,"*"),[a])}function ne({toolbox:a,initialBlocks:o,testcases:E,debug:g,customBlocks:S,Visualizer:w}){var ft;let{student:I,setStudent:F,terminated:j}=v(),{registerProblem:d}=O(),{id:s,points:i}=A();reactExports.useEffect(()=>{for(let Ee=0;Ee<E.length;Ee++)d(`${s}.${Ee+1}`,{type:"text",pointsCorrect:i[0],pointsBlank:i[1],pointsWrong:i[2],solution:""})},[d,s,E,i]);let y=((ft=I.extraData)==null?void 0:ft[`blockly-${s}`])??o??Ze,_=async Ee=>{await F({...I,extraData:{...I.extraData,[`blockly-${s}`]:Ee}})},[R,T]=reactExports.useState(null),[b,C]=reactExports.useState(!1),[G,X]=reactExports.useState(!0),[Q,K]=reactExports.useState(!1),[oe,ce]=reactExports.useState({}),[ue,be]=reactExports.useState(""),[Ae,Oe]=reactExports.useState(0),[et,De]=reactExports.useState(()=>range(E.length).map(Ee=>({correct:!1,index:Ee}))),{step:pe,reset:Me,running:le,highlightedBlock:xt,globalScope:$e,correct:Rt,msg:Et}=ee(ue,E[Ae]),qe=reactExports.useMemo(()=>Object.fromEntries(Object.entries(oe).map(([Ee,me])=>[me,$e[Ee]])),[oe,$e]),st=reactExports.useMemo(()=>mt(Qe.array(),S,{prefix:"Invalid custom block definition"}),[S]),ut=te(R==null?void 0:R.contentWindow,Ee=>{switch(Ee.cmd){case"init":{ut({cmd:"init",toolbox:a??Xe,initialBlocks:y,debug:g,customBlocks:st,readonly:j});break}case"ready":{C(!0);break}case"blocks":{_(Ee.blocks),g!=null&&g.logBlocks&&console.info(JSON.stringify(Ee.blocks,void 0,2));break}case"code":{be(Ee.code),K(!1),X(!0),g!=null&&g.logJs&&console.info(Ee.code);break}case"variables":{ce(Ee.variablesMapping),g!=null&&g.logVariables&&console.info(Ee.variablesMapping);break}}});reactExports.useEffect(()=>{ut({cmd:"highlight",highlightedBlock:xt})},[ut,xt]),reactExports.useEffect(()=>{le||K(!1)},[le]);let vt=reactExports.useRef(j);reactExports.useEffect(()=>{var Ee;vt.current!==j&&(vt.current=j,C(!1),(Ee=R==null?void 0:R.contentWindow)==null||Ee.location.reload())},[j,R==null?void 0:R.contentWindow]);let[lt,Ct]=reactExports.useState(3);reactExports.useEffect(()=>{let Ee=[5e3,2e3,1e3,500,200,100,10];if(Q){let me=setInterval(pe,Ee[lt]);return()=>clearInterval(me)}},[pe,lt,Q]);let At=async()=>{let Ee=await Promise.all(E.map(async(ye,Ne)=>{let _e=new B(ue,ye);for(let Be=0;_e.running;Be++)_e.step(),Be%64===0&&await new Promise(pt=>setTimeout(pt,5));return{..._e,index:Ne}}));De(Ee),X(!1);let me={...I.answers};for(let ye=0;ye<E.length;ye++)me[`${s}.${ye+1}`]=Ee[ye].correct?"":"";await F({...I,answers:me})},[Mt,Pt]=reactExports.useState(!1);return reactExports.useEffect(()=>Pt(!1),[Et]),c.createElement("div",{className:D$1("not-prose relative inset-y-0 left-1/2 w-screen -translate-x-1/2 p-4 pt-8","flex flex-col-reverse items-start justify-between gap-6 overflow-x-hidden *:mx-3 lg:flex-row lg:gap-0")},c.createElement("div",{className:"flex h-full max-h-[min(720px,90vh)] basis-[min(auto,50%)] flex-col gap-6 self-stretch overflow-x-hidden"},c.createElement("div",{className:"join join-horizontal"},et.map(({index:Ee,correct:me,msg:ye})=>c.createElement("button",{key:Ee,onClick:()=>{Oe(Ee),K(!1)},className:D$1("btn join-item z-10 rounded-lg",!G&&"tooltip",Ee===Ae&&"btn-info"),"data-tip":ye},c.createElement("div",{className:"flex items-center gap-3"},c.createElement("p",null,"Livello ",Ee+1),G?c.createElement(HelpCircle,{size:32}):me?c.createElement(CheckCircle2,{size:32,className:"fill-success stroke-success-content"}):c.createElement(XCircle,{size:32,className:"fill-error stroke-error-content"}))))),c.createElement("div",{className:"relative flex flex-col overflow-hidden shadow-xl"},c.createElement("div",{className:"overflow-auto rounded-xl border-2 border-[#c6c6c6] bg-white"},w&&c.createElement(w,{variables:{blocklyVariables:qe,hiddenState:$e==null?void 0:$e.hiddenState,msg:Et}}),Et&&!Mt&&c.createElement("div",{className:"absolute inset-x-0 bottom-0 z-50 p-4"},c.createElement("div",{role:"alert",className:D$1("alert",Rt?"alert-success":"alert-error")},Rt?c.createElement(CheckCircle,null):c.createElement(AlertTriangle,null),c.createElement("span",null,Et),c.createElement("button",{onClick:()=>Pt(!0),"aria-label":"Nascondi messaggio"},c.createElement(MessageSquareOff,null))))))),c.createElement("div",{className:"flex min-h-[min(720px,90vh)] flex-[1_0_50%] flex-col-reverse gap-6 self-stretch lg:flex-col"},c.createElement("div",{className:"flex gap-6"},c.createElement("div",{className:"join join-horizontal"},c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui/pausa"},c.createElement("button",{className:"btn btn-info rounded-[inherit]",disabled:!le||G,onClick:()=>K(!Q),"aria-label":"Esugui un blocco"},Q?c.createElement(Pause,{className:"size-6"}):c.createElement(Play,{className:"size-6"}))),c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui un blocco"},c.createElement("button",{className:"btn btn-info rounded-[inherit]",disabled:!le||G,onClick:pe,"aria-label":"Esugui un blocco"},c.createElement(SkipForward,{className:"size-6"}))),c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui da capo"},c.createElement("button",{className:"btn btn-info rounded-[inherit]","aria-label":"Esegui da capo",disabled:G,onClick:()=>{Me(),K(!1)}},c.createElement(RotateCcw,{className:"size-6"})))),c.createElement("div",{className:"tooltip","data-tip":"Correggi la soluzione"},c.createElement("button",{className:"btn btn-success","aria-label":"Correggi la soluzione",disabled:!G||!b,onClick:At},c.createElement(Send,{className:"size-6"}))),c.createElement("div",null,c.createElement("input",{className:"range",type:"range",min:"0",max:"6",value:lt,onChange:Ee=>Ct(+Ee.target.value),"aria-label":"Velocit di esecuzione"}),c.createElement("div",{className:"flex w-full justify-between px-2 text-xs"},c.createElement("span",null,"Lento"),c.createElement("span",null,"Veloce"))),!1),c.createElement(ko,{ref:T,ready:b})))}var ko=reactExports.forwardRef(function({ready:a},o){return c.createElement("div",{className:"relative flex grow flex-col overflow-hidden rounded-xl border-2 border-[#c6c6c6]"},c.createElement("iframe",{ref:o,src:new URL("iframe-DAft48MT.html",import.meta.url).href,className:"grow",title:"Area di lavoro di Blockly"}),!a&&c.createElement("div",{className:"absolute inset-0 z-50 bg-white text-slate-700"},c.createElement(Tt$1,null)))});function re({src:a,alt:o,title:E}){return c.createElement("img",{className:"max-h-[90vh] min-w-0 p-4 first:rounded-l-xl last:rounded-r-xl dark:bg-white print:m-0 print:max-h-[60vh] print:max-w-full",src:a.src,width:a.width,height:a.height,alt:o,title:E,style:{maxWidth:`min(100%, calc(90vh * ${a.width} / ${a.height}))`}})}function se({display:a,children:o}){let E=reactExports.useRef(null);return reactExports.useEffect(()=>{E.current&&katex.render(o,E.current,{displayMode:a})},[E,o,a]),c.createElement("span",{ref:E})}function Re({children:a}){return a}var U={Answer:Ue,AnswerGroup:Fe,Blockly:ne,Code:z,Contest:je,Explanation:We,Image:re,MathExpr:reactExports.memo(se),OpenAnswer:He,Problem:ze,Section:Re,SubProblem:Le};function ie({children:a}){return c.createElement(MDXProvider,{components:U},c.createElement("div",{className:D$1("prose prose-lg mx-auto my-5 px-4 print:prose-sm screen:pb-10 lg:max-w-4xl print:max-w-full print:text-xs","prose-table:text-center print:prose-headings:mt-2 print:prose-hr:my-4","prose-headings:break-after-avoid prose-p:break-inside-avoid prose-ul:break-before-avoid prose-ul:break-inside-avoid")},a))}function tt({children:a}){var i,y;let o=reactExports.useRef(null),{contest:E,student:g,reset:S,participation:w,terminated:I,logout:F}=v(),j=(i=g.personalInformation)==null?void 0:i.name,d=(y=g.personalInformation)==null?void 0:y.surname,s=Math.round(sumBy(Object.values(g.answers??{}),_=>+!!_)/E.problemIds.length*100);return reactExports.useEffect(()=>{},[]),c.createElement("div",{className:"h-dvh screen:overflow-y-scroll"},c.createElement("div",{className:"navbar sticky top-0 z-20 h-16 justify-between bg-base-300/85 px-3 text-base-content backdrop-blur print:hidden"},c.createElement("div",{className:"dropdown max-w-full flex-none"},c.createElement("div",{tabIndex:0,role:"button",className:"btn btn-ghost no-animation w-full flex-nowrap"},c.createElement(User,{className:"flex-none"}),c.createElement("div",{className:"truncate uppercase"},j," ",d)),F&&c.createElement("ul",{className:"menu dropdown-content menu-sm z-30 mt-3 w-52 rounded-box bg-base-300 p-2 text-base-content shadow-lg"},c.createElement("li",null,c.createElement("button",{onClick:F},"Cambia utente")))),c.createElement("div",{className:"h-full gap-3"},c.createElement(L,{className:"hidden min-w-[5rem] sm:block",percentage:s},s,"%"),c.createElement("div",{className:"flex-none px-3"},I||!w.startingTime||!E.duration?c.createElement("span",{className:"font-mono"},"00:00"):c.createElement(Vt,{startTime:w.startingTime,duration:E.duration})),c.createElement("div",{className:"h-full flex-none py-0.5"},I&&S?c.createElement("button",{className:"btn btn-warning btn-sm h-full",onClick:S},"Ricomincia"):c.createElement("button",{className:"btn btn-success btn-sm h-full",disabled:I||!w.startingTime,onClick:()=>{var _;return(_=o.current)==null?void 0:_.showModal()}},"Termina")))),c.createElement(Vo,{ref:o}),c.createElement(ErrorBoundary,{FallbackComponent:Zt},c.createElement(ie,null,c.createElement("h1",{className:"text-pretty"},E.name),a)))}var Vo=reactExports.forwardRef(function(a,o){let{submit:E}=v();return c.createElement(jt,{ref:o,title:"Confermi di voler terminare?"},c.createElement("p",null,"Confermando non potrai pi modificare le tue risposte."),c.createElement("div",{className:"mt-3 flex flex-row justify-center gap-5"},c.createElement("button",{className:"btn btn-info"},"Annulla"),c.createElement("button",{className:"btn btn-error",onClick:()=>E()},"Conferma")))}),ae=reactExports.createContext({});ae.displayName="StudentContext";function M({children:a,...o}){return c.createElement(ae.Provider,{value:{...o}},c.createElement(tt,null,a))}function v(){return reactExports.useContext(ae)}function Go({contestName:a,duration:o,questionCount:E,children:g}){let[S,w]=nt("submit",!1),[I,F]=nt("student",{id:"",personalInformation:{name:"Utente",surname:"anonimo"},answers:{},variant:"0"}),j=reactExports.useMemo(()=>I.startedAt&&addMinutes(I.startedAt,o),[I.startedAt,o]),d=Ot(j),s={id:"",name:a,problemIds:range(E??0).map(_=>_.toString()),duration:o,personalInformation:[],hasVariants:!0,hasOnline:!0,hasPdf:!0,allowRestart:!0,statementVersion:1},i={id:"",schoolId:"",contestId:"",name:"",teacher:"",startingTime:I.startedAt,finalized:!1},y=reactExports.useCallback(()=>{w(!1),F(_=>({..._,answers:{},extraData:{},startedAt:void 0}))},[F,w]);return c.createElement(M,{contest:s,participation:i,student:I,setStudent:async _=>F(_),submit:()=>w(!0),reset:y,terminated:d||S},g)}function nt(a,o,E){let g=`${window.location.pathname}#${a}`,S=localStorage.getItem(g),[w,I]=reactExports.useState(S?(E??JSON.parse)(S):o),F=reactExports.useCallback(j=>{I(d=>{let s=isFunction$1(j)?j(d):j;return s===void 0?localStorage.removeItem(g):localStorage.setItem(g,JSON.stringify(s)),s})},[g]);return[w,F]}const OlinfoAuth=({children:a,...o})=>jsxRuntimeExports.jsx(Go,{...o,children:jsxRuntimeExports.jsx(OlinfoWrapper,{children:a})});function OlinfoWrapper({children:a}){const{student:o,setStudent:E}=v(),[g,S]=reactExports.useState();return reactExports.useEffect(()=>{getUser().then(S).catch(w=>console.log(`Error: failed to get user: ${w.message}`))},[]),reactExports.useEffect(()=>{const w=o.personalInformation;g&&(g.name!==w.name||g.surname!==w.surname)&&E({...o,personalInformation:{...w,...g}})},[o,g]),a}async function getUser(){const o=cookie.parse(window.document.cookie).training_token;if(!o)throw new Error("Not logged in");const g=jwtDecode(o).username,w=await(await fetch("https://training.olinfo.it/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get",username:g})})).json();return{name:w.first_name,surname:w.last_name}}export{D$1 as D,OlinfoAuth as O,range as r,useMDXComponents as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/code-highlight-4YYAT6IQ-xEvrnk72.js","assets/react-dom-DWilhIVE.js","assets/commonjs-helper-3Jsk8tIi.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=olinfo-auth-BqSkFCMX.js.map
