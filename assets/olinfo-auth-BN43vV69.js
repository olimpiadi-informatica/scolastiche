/*! For licenses information, see LICENSES.txt */
var Dn=Object.defineProperty;var Mn=(a,o,E)=>o in a?Dn(a,o,{enumerable:!0,configurable:!0,writable:!0,value:E}):a[o]=E;var Pr=(a,o,E)=>(Mn(a,typeof o!="symbol"?o+"":o,E),E);import{i as isSymbol,b as baseGetTag,r as root,a as isObjectLike,f as freeGlobal,c as isArray,t as toString,S as Symbol$1,j as jsxRuntimeExports}from"./toString-BpEX5tmT.js";import{r as reactExports,a as c}from"./react-dom-DWilhIVE.js";import{_ as __vitePreload}from"./preload-helper-B_KhYgH7.js";import{g as getDefaultExportFromCjs,c as commonjsGlobal}from"./commonjs-helper-3Jsk8tIi.js";import{Z as ZodError,z}from"./zod-CXY4Xi5W.js";import{k as katex}from"./katex-DTctDNEF.js";var reWhitespace=/\s/;function trimmedEndIndex(a){for(var o=a.length;o--&&reWhitespace.test(a.charAt(o)););return o}var reTrimStart=/^\s+/;function baseTrim(a){return a&&a.slice(0,trimmedEndIndex(a)+1).replace(reTrimStart,"")}function isObject(a){var o=typeof a;return a!=null&&(o=="object"||o=="function")}var NAN=NaN,reIsBadHex=/^[-+]0x[0-9a-f]+$/i,reIsBinary=/^0b[01]+$/i,reIsOctal=/^0o[0-7]+$/i,freeParseInt=parseInt;function toNumber(a){if(typeof a=="number")return a;if(isSymbol(a))return NAN;if(isObject(a)){var o=typeof a.valueOf=="function"?a.valueOf():a;a=isObject(o)?o+"":o}if(typeof a!="string")return a===0?a:+a;a=baseTrim(a);var E=reIsBinary.test(a);return E||reIsOctal.test(a)?freeParseInt(a.slice(2),E?2:8):reIsBadHex.test(a)?NAN:+a}var INFINITY$1=1/0,MAX_INTEGER=17976931348623157e292;function toFinite(a){if(!a)return a===0?a:0;if(a=toNumber(a),a===INFINITY$1||a===-INFINITY$1){var o=a<0?-1:1;return o*MAX_INTEGER}return a===a?a:0}function identity(a){return a}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$1(a){if(!isObject(a))return!1;var o=baseGetTag(a);return o==funcTag$1||o==genTag||o==asyncTag||o==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var a=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function isMasked(a){return!!maskSrcKey&&maskSrcKey in a}var funcProto$1=Function.prototype,funcToString$1=funcProto$1.toString;function toSource(a){if(a!=null){try{return funcToString$1.call(a)}catch{}try{return a+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto=Function.prototype,objectProto$9=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$7=objectProto$9.hasOwnProperty,reIsNative=RegExp("^"+funcToString.call(hasOwnProperty$7).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(a){if(!isObject(a)||isMasked(a))return!1;var o=isFunction$1(a)?reIsNative:reIsHostCtor;return o.test(toSource(a))}function getValue(a,o){return a==null?void 0:a[o]}function getNative(a,o){var E=getValue(a,o);return baseIsNative(E)?E:void 0}var WeakMap$1=getNative(root,"WeakMap");function apply(a,o,E){switch(E.length){case 0:return a.call(o);case 1:return a.call(o,E[0]);case 2:return a.call(o,E[0],E[1]);case 3:return a.call(o,E[0],E[1],E[2])}return a.apply(o,E)}function noop$1(){}var HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(a){var o=0,E=0;return function(){var g=nativeNow(),T=HOT_SPAN-(g-E);if(E=g,T>0){if(++o>=HOT_COUNT)return arguments[0]}else o=0;return a.apply(void 0,arguments)}}function constant(a){return function(){return a}}var defineProperty=function(){try{var a=getNative(Object,"defineProperty");return a({},"",{}),a}catch{}}(),baseSetToString=defineProperty?function(a,o){return defineProperty(a,"toString",{configurable:!0,enumerable:!1,value:constant(o),writable:!0})}:identity;const baseSetToString$1=baseSetToString;var setToString=shortOut(baseSetToString$1),MAX_SAFE_INTEGER$1=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(a,o){var E=typeof a;return o=o??MAX_SAFE_INTEGER$1,!!o&&(E=="number"||E!="symbol"&&reIsUint.test(a))&&a>-1&&a%1==0&&a<o}function eq(a,o){return a===o||a!==a&&o!==o}var nativeMax$1=Math.max;function overRest(a,o,E){return o=nativeMax$1(o===void 0?a.length-1:o,0),function(){for(var g=arguments,T=-1,C=nativeMax$1(g.length-o,0),j=Array(C);++T<C;)j[T]=g[o+T];T=-1;for(var B=Array(o+1);++T<o;)B[T]=g[T];return B[o]=E(j),apply(a,this,B)}}function baseRest(a,o){return setToString(overRest(a,o,identity),a+"")}var MAX_SAFE_INTEGER=9007199254740991;function isLength(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=MAX_SAFE_INTEGER}function isArrayLike(a){return a!=null&&isLength(a.length)&&!isFunction$1(a)}function isIterateeCall(a,o,E){if(!isObject(E))return!1;var g=typeof o;return(g=="number"?isArrayLike(E)&&isIndex(o,E.length):g=="string"&&o in E)?eq(E[o],a):!1}var objectProto$8=Object.prototype;function isPrototype(a){var o=a&&a.constructor,E=typeof o=="function"&&o.prototype||objectProto$8;return a===E}function baseTimes(a,o){for(var E=-1,g=Array(a);++E<a;)g[E]=o(E);return g}var argsTag$2="[object Arguments]";function baseIsArguments(a){return isObjectLike(a)&&baseGetTag(a)==argsTag$2}var objectProto$7=Object.prototype,hasOwnProperty$6=objectProto$7.hasOwnProperty,propertyIsEnumerable$1=objectProto$7.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(a){return isObjectLike(a)&&hasOwnProperty$6.call(a,"callee")&&!propertyIsEnumerable$1.call(a,"callee")};function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer?Buffer.isBuffer:void 0,isBuffer=nativeIsBuffer||stubFalse,argsTag$1="[object Arguments]",arrayTag$1="[object Array]",boolTag$1="[object Boolean]",dateTag$1="[object Date]",errorTag$1="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag$1="[object Number]",objectTag$2="[object Object]",regexpTag$1="[object RegExp]",setTag$2="[object Set]",stringTag$1="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag$1="[object ArrayBuffer]",dataViewTag$2="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag$1]=typedArrayTags[arrayTag$1]=typedArrayTags[arrayBufferTag$1]=typedArrayTags[boolTag$1]=typedArrayTags[dataViewTag$2]=typedArrayTags[dateTag$1]=typedArrayTags[errorTag$1]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag$1]=typedArrayTags[objectTag$2]=typedArrayTags[regexpTag$1]=typedArrayTags[setTag$2]=typedArrayTags[stringTag$1]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(a){return isObjectLike(a)&&isLength(a.length)&&!!typedArrayTags[baseGetTag(a)]}function baseUnary(a){return function(o){return a(o)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var a=freeModule&&freeModule.require&&freeModule.require("util").types;return a||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray,objectProto$6=Object.prototype,hasOwnProperty$5=objectProto$6.hasOwnProperty;function arrayLikeKeys(a,o){var E=isArray(a),g=!E&&isArguments(a),T=!E&&!g&&isBuffer(a),C=!E&&!g&&!T&&isTypedArray(a),j=E||g||T||C,B=j?baseTimes(a.length,String):[],G=B.length;for(var d in a)(o||hasOwnProperty$5.call(a,d))&&!(j&&(d=="length"||T&&(d=="offset"||d=="parent")||C&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||isIndex(d,G)))&&B.push(d);return B}function overArg(a,o){return function(E){return a(o(E))}}var nativeKeys=overArg(Object.keys,Object),objectProto$5=Object.prototype,hasOwnProperty$4=objectProto$5.hasOwnProperty;function baseKeys(a){if(!isPrototype(a))return nativeKeys(a);var o=[];for(var E in Object(a))hasOwnProperty$4.call(a,E)&&E!="constructor"&&o.push(E);return o}function keys(a){return isArrayLike(a)?arrayLikeKeys(a):baseKeys(a)}var reIsDeepProp=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,reIsPlainProp=/^\w*$/;function isKey(a,o){if(isArray(a))return!1;var E=typeof a;return E=="number"||E=="symbol"||E=="boolean"||a==null||isSymbol(a)?!0:reIsPlainProp.test(a)||!reIsDeepProp.test(a)||o!=null&&a in Object(o)}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(a){var o=this.has(a)&&delete this.__data__[a];return this.size-=o?1:0,o}var HASH_UNDEFINED$2="__lodash_hash_undefined__",objectProto$4=Object.prototype,hasOwnProperty$3=objectProto$4.hasOwnProperty;function hashGet(a){var o=this.__data__;if(nativeCreate){var E=o[a];return E===HASH_UNDEFINED$2?void 0:E}return hasOwnProperty$3.call(o,a)?o[a]:void 0}var objectProto$3=Object.prototype,hasOwnProperty$2=objectProto$3.hasOwnProperty;function hashHas(a){var o=this.__data__;return nativeCreate?o[a]!==void 0:hasOwnProperty$2.call(o,a)}var HASH_UNDEFINED$1="__lodash_hash_undefined__";function hashSet(a,o){var E=this.__data__;return this.size+=this.has(a)?0:1,E[a]=nativeCreate&&o===void 0?HASH_UNDEFINED$1:o,this}function Hash$1(a){var o=-1,E=a==null?0:a.length;for(this.clear();++o<E;){var g=a[o];this.set(g[0],g[1])}}Hash$1.prototype.clear=hashClear;Hash$1.prototype.delete=hashDelete;Hash$1.prototype.get=hashGet;Hash$1.prototype.has=hashHas;Hash$1.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function assocIndexOf(a,o){for(var E=a.length;E--;)if(eq(a[E][0],o))return E;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(a){var o=this.__data__,E=assocIndexOf(o,a);if(E<0)return!1;var g=o.length-1;return E==g?o.pop():splice.call(o,E,1),--this.size,!0}function listCacheGet(a){var o=this.__data__,E=assocIndexOf(o,a);return E<0?void 0:o[E][1]}function listCacheHas(a){return assocIndexOf(this.__data__,a)>-1}function listCacheSet(a,o){var E=this.__data__,g=assocIndexOf(E,a);return g<0?(++this.size,E.push([a,o])):E[g][1]=o,this}function ListCache(a){var o=-1,E=a==null?0:a.length;for(this.clear();++o<E;){var g=a[o];this.set(g[0],g[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash$1,map:new(Map$1||ListCache),string:new Hash$1}}function isKeyable(a){var o=typeof a;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?a!=="__proto__":a===null}function getMapData(a,o){var E=a.__data__;return isKeyable(o)?E[typeof o=="string"?"string":"hash"]:E.map}function mapCacheDelete(a){var o=getMapData(this,a).delete(a);return this.size-=o?1:0,o}function mapCacheGet(a){return getMapData(this,a).get(a)}function mapCacheHas(a){return getMapData(this,a).has(a)}function mapCacheSet(a,o){var E=getMapData(this,a),g=E.size;return E.set(a,o),this.size+=E.size==g?0:1,this}function MapCache(a){var o=-1,E=a==null?0:a.length;for(this.clear();++o<E;){var g=a[o];this.set(g[0],g[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT$1="Expected a function";function memoize(a,o){if(typeof a!="function"||o!=null&&typeof o!="function")throw new TypeError(FUNC_ERROR_TEXT$1);var E=function(){var g=arguments,T=o?o.apply(this,g):g[0],C=E.cache;if(C.has(T))return C.get(T);var j=a.apply(this,g);return E.cache=C.set(T,j)||C,j};return E.cache=new(memoize.Cache||MapCache),E}memoize.Cache=MapCache;var MAX_MEMOIZE_SIZE=500;function memoizeCapped(a){var o=memoize(a,function(g){return E.size===MAX_MEMOIZE_SIZE&&E.clear(),g}),E=o.cache;return o}var rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=memoizeCapped(function(a){var o=[];return a.charCodeAt(0)===46&&o.push(""),a.replace(rePropName,function(E,g,T,C){o.push(T?C.replace(reEscapeChar,"$1"):g||E)}),o});function castPath(a,o){return isArray(a)?a:isKey(a,o)?[a]:stringToPath(toString(a))}var INFINITY=1/0;function toKey(a){if(typeof a=="string"||isSymbol(a))return a;var o=a+"";return o=="0"&&1/a==-INFINITY?"-0":o}function baseGet(a,o){o=castPath(o,a);for(var E=0,g=o.length;a!=null&&E<g;)a=a[toKey(o[E++])];return E&&E==g?a:void 0}function get(a,o,E){var g=a==null?void 0:baseGet(a,o);return g===void 0?E:g}function arrayPush(a,o){for(var E=-1,g=o.length,T=a.length;++E<g;)a[T+E]=o[E];return a}function baseClamp(a,o,E){return a===a&&(E!==void 0&&(a=a<=E?a:E),o!==void 0&&(a=a>=o?a:o)),a}function clamp(a,o,E){return E===void 0&&(E=o,o=void 0),E!==void 0&&(E=toNumber(E),E=E===E?E:0),o!==void 0&&(o=toNumber(o),o=o===o?o:0),baseClamp(toNumber(a),o,E)}function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(a){var o=this.__data__,E=o.delete(a);return this.size=o.size,E}function stackGet(a){return this.__data__.get(a)}function stackHas(a){return this.__data__.has(a)}var LARGE_ARRAY_SIZE=200;function stackSet(a,o){var E=this.__data__;if(E instanceof ListCache){var g=E.__data__;if(!Map$1||g.length<LARGE_ARRAY_SIZE-1)return g.push([a,o]),this.size=++E.size,this;E=this.__data__=new MapCache(g)}return E.set(a,o),this.size=E.size,this}function Stack(a){var o=this.__data__=new ListCache(a);this.size=o.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;function arrayFilter(a,o){for(var E=-1,g=a==null?0:a.length,T=0,C=[];++E<g;){var j=a[E];o(j,E,a)&&(C[T++]=j)}return C}function stubArray(){return[]}var objectProto$2=Object.prototype,propertyIsEnumerable=objectProto$2.propertyIsEnumerable,nativeGetSymbols=Object.getOwnPropertySymbols,getSymbols=nativeGetSymbols?function(a){return a==null?[]:(a=Object(a),arrayFilter(nativeGetSymbols(a),function(o){return propertyIsEnumerable.call(a,o)}))}:stubArray;const getSymbols$1=getSymbols;function baseGetAllKeys(a,o,E){var g=o(a);return isArray(a)?g:arrayPush(g,E(a))}function getAllKeys(a){return baseGetAllKeys(a,keys,getSymbols$1)}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set=getNative(root,"Set"),mapTag$1="[object Map]",objectTag$1="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag$1="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag$1||Map$1&&getTag(new Map$1)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set&&getTag(new Set)!=setTag$1||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag)&&(getTag=function(a){var o=baseGetTag(a),E=o==objectTag$1?a.constructor:void 0,g=E?toSource(E):"";if(g)switch(g){case dataViewCtorString:return dataViewTag$1;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return o});const getTag$1=getTag;var Uint8Array$1=root.Uint8Array;const Uint8Array$2=Uint8Array$1;var HASH_UNDEFINED="__lodash_hash_undefined__";function setCacheAdd(a){return this.__data__.set(a,HASH_UNDEFINED),this}function setCacheHas(a){return this.__data__.has(a)}function SetCache(a){var o=-1,E=a==null?0:a.length;for(this.__data__=new MapCache;++o<E;)this.add(a[o])}SetCache.prototype.add=SetCache.prototype.push=setCacheAdd;SetCache.prototype.has=setCacheHas;function arraySome(a,o){for(var E=-1,g=a==null?0:a.length;++E<g;)if(o(a[E],E,a))return!0;return!1}function cacheHas(a,o){return a.has(o)}var COMPARE_PARTIAL_FLAG$5=1,COMPARE_UNORDERED_FLAG$3=2;function equalArrays(a,o,E,g,T,C){var j=E&COMPARE_PARTIAL_FLAG$5,B=a.length,G=o.length;if(B!=G&&!(j&&G>B))return!1;var d=C.get(a),s=C.get(o);if(d&&s)return d==o&&s==a;var i=-1,y=!0,R=E&COMPARE_UNORDERED_FLAG$3?new SetCache:void 0;for(C.set(a,o),C.set(o,a);++i<B;){var S=a[i],w=o[i];if(g)var b=j?g(w,S,i,o,a,C):g(S,w,i,a,o,C);if(b!==void 0){if(b)continue;y=!1;break}if(R){if(!arraySome(o,function(P,W){if(!cacheHas(R,W)&&(S===P||T(S,P,E,g,C)))return R.push(W)})){y=!1;break}}else if(!(S===w||T(S,w,E,g,C))){y=!1;break}}return C.delete(a),C.delete(o),y}function mapToArray(a){var o=-1,E=Array(a.size);return a.forEach(function(g,T){E[++o]=[T,g]}),E}function setToArray(a){var o=-1,E=Array(a.size);return a.forEach(function(g){E[++o]=g}),E}var COMPARE_PARTIAL_FLAG$4=1,COMPARE_UNORDERED_FLAG$2=2,boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",mapTag="[object Map]",numberTag="[object Number]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",symbolTag="[object Symbol]",arrayBufferTag="[object ArrayBuffer]",dataViewTag="[object DataView]",symbolProto=Symbol$1?Symbol$1.prototype:void 0,symbolValueOf=symbolProto?symbolProto.valueOf:void 0;function equalByTag(a,o,E,g,T,C,j){switch(E){case dataViewTag:if(a.byteLength!=o.byteLength||a.byteOffset!=o.byteOffset)return!1;a=a.buffer,o=o.buffer;case arrayBufferTag:return!(a.byteLength!=o.byteLength||!C(new Uint8Array$2(a),new Uint8Array$2(o)));case boolTag:case dateTag:case numberTag:return eq(+a,+o);case errorTag:return a.name==o.name&&a.message==o.message;case regexpTag:case stringTag:return a==o+"";case mapTag:var B=mapToArray;case setTag:var G=g&COMPARE_PARTIAL_FLAG$4;if(B||(B=setToArray),a.size!=o.size&&!G)return!1;var d=j.get(a);if(d)return d==o;g|=COMPARE_UNORDERED_FLAG$2,j.set(a,o);var s=equalArrays(B(a),B(o),g,T,C,j);return j.delete(a),s;case symbolTag:if(symbolValueOf)return symbolValueOf.call(a)==symbolValueOf.call(o)}return!1}var COMPARE_PARTIAL_FLAG$3=1,objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function equalObjects(a,o,E,g,T,C){var j=E&COMPARE_PARTIAL_FLAG$3,B=getAllKeys(a),G=B.length,d=getAllKeys(o),s=d.length;if(G!=s&&!j)return!1;for(var i=G;i--;){var y=B[i];if(!(j?y in o:hasOwnProperty$1.call(o,y)))return!1}var R=C.get(a),S=C.get(o);if(R&&S)return R==o&&S==a;var w=!0;C.set(a,o),C.set(o,a);for(var b=j;++i<G;){y=B[i];var P=a[y],W=o[y];if(g)var X=j?g(W,P,y,o,a,C):g(P,W,y,a,o,C);if(!(X===void 0?P===W||T(P,W,E,g,C):X)){w=!1;break}b||(b=y=="constructor")}if(w&&!b){var ee=a.constructor,Q=o.constructor;ee!=Q&&"constructor"in a&&"constructor"in o&&!(typeof ee=="function"&&ee instanceof ee&&typeof Q=="function"&&Q instanceof Q)&&(w=!1)}return C.delete(a),C.delete(o),w}var COMPARE_PARTIAL_FLAG$2=1,argsTag="[object Arguments]",arrayTag="[object Array]",objectTag="[object Object]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function baseIsEqualDeep(a,o,E,g,T,C){var j=isArray(a),B=isArray(o),G=j?arrayTag:getTag$1(a),d=B?arrayTag:getTag$1(o);G=G==argsTag?objectTag:G,d=d==argsTag?objectTag:d;var s=G==objectTag,i=d==objectTag,y=G==d;if(y&&isBuffer(a)){if(!isBuffer(o))return!1;j=!0,s=!1}if(y&&!s)return C||(C=new Stack),j||isTypedArray(a)?equalArrays(a,o,E,g,T,C):equalByTag(a,o,G,E,g,T,C);if(!(E&COMPARE_PARTIAL_FLAG$2)){var R=s&&hasOwnProperty.call(a,"__wrapped__"),S=i&&hasOwnProperty.call(o,"__wrapped__");if(R||S){var w=R?a.value():a,b=S?o.value():o;return C||(C=new Stack),T(w,b,E,g,C)}}return y?(C||(C=new Stack),equalObjects(a,o,E,g,T,C)):!1}function baseIsEqual(a,o,E,g,T){return a===o?!0:a==null||o==null||!isObjectLike(a)&&!isObjectLike(o)?a!==a&&o!==o:baseIsEqualDeep(a,o,E,g,baseIsEqual,T)}var COMPARE_PARTIAL_FLAG$1=1,COMPARE_UNORDERED_FLAG$1=2;function baseIsMatch(a,o,E,g){var T=E.length,C=T,j=!g;if(a==null)return!C;for(a=Object(a);T--;){var B=E[T];if(j&&B[2]?B[1]!==a[B[0]]:!(B[0]in a))return!1}for(;++T<C;){B=E[T];var G=B[0],d=a[G],s=B[1];if(j&&B[2]){if(d===void 0&&!(G in a))return!1}else{var i=new Stack;if(g)var y=g(d,s,G,a,o,i);if(!(y===void 0?baseIsEqual(s,d,COMPARE_PARTIAL_FLAG$1|COMPARE_UNORDERED_FLAG$1,g,i):y))return!1}}return!0}function isStrictComparable(a){return a===a&&!isObject(a)}function getMatchData(a){for(var o=keys(a),E=o.length;E--;){var g=o[E],T=a[g];o[E]=[g,T,isStrictComparable(T)]}return o}function matchesStrictComparable(a,o){return function(E){return E==null?!1:E[a]===o&&(o!==void 0||a in Object(E))}}function baseMatches(a){var o=getMatchData(a);return o.length==1&&o[0][2]?matchesStrictComparable(o[0][0],o[0][1]):function(E){return E===a||baseIsMatch(E,a,o)}}function baseHasIn(a,o){return a!=null&&o in Object(a)}function hasPath(a,o,E){o=castPath(o,a);for(var g=-1,T=o.length,C=!1;++g<T;){var j=toKey(o[g]);if(!(C=a!=null&&E(a,j)))break;a=a[j]}return C||++g!=T?C:(T=a==null?0:a.length,!!T&&isLength(T)&&isIndex(j,T)&&(isArray(a)||isArguments(a)))}function hasIn(a,o){return a!=null&&hasPath(a,o,baseHasIn)}var COMPARE_PARTIAL_FLAG=1,COMPARE_UNORDERED_FLAG=2;function baseMatchesProperty(a,o){return isKey(a)&&isStrictComparable(o)?matchesStrictComparable(toKey(a),o):function(E){var g=get(E,a);return g===void 0&&g===o?hasIn(E,a):baseIsEqual(o,g,COMPARE_PARTIAL_FLAG|COMPARE_UNORDERED_FLAG)}}function baseProperty(a){return function(o){return o==null?void 0:o[a]}}function basePropertyDeep(a){return function(o){return baseGet(o,a)}}function property(a){return isKey(a)?baseProperty(toKey(a)):basePropertyDeep(a)}function baseIteratee(a){return typeof a=="function"?a:a==null?identity:typeof a=="object"?isArray(a)?baseMatchesProperty(a[0],a[1]):baseMatches(a):property(a)}var FUNC_ERROR_TEXT="Expected a function";function baseDelay(a,o,E){if(typeof a!="function")throw new TypeError(FUNC_ERROR_TEXT);return setTimeout(function(){a.apply(void 0,E)},o)}var defer=baseRest(function(a,o){return baseDelay(a,1,o)});function baseSum(a,o){for(var E,g=-1,T=a.length;++g<T;){var C=o(a[g]);C!==void 0&&(E=E===void 0?C:E+C)}return E}var nativeCeil=Math.ceil,nativeMax=Math.max;function baseRange(a,o,E,g){for(var T=-1,C=nativeMax(nativeCeil((o-a)/(E||1)),0),j=Array(C);C--;)j[g?C:++T]=a,a+=E;return j}function createRange(a){return function(o,E,g){return g&&typeof g!="number"&&isIterateeCall(o,E,g)&&(E=g=void 0),o=toFinite(o),E===void 0?(E=o,o=0):E=toFinite(E),g=g===void 0?o<E?1:-1:toFinite(g),baseRange(o,E,g,a)}}var range=createRange();function sumBy(a,o){return a&&a.length?baseSum(a,baseIteratee(o)):0}var cookie={};cookie.parse=parse;cookie.serialize=serialize$1;var __toString=Object.prototype.toString,fieldContentRegExp=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function parse(a,o){if(typeof a!="string")throw new TypeError("argument str must be a string");for(var E={},g=o||{},T=g.decode||decode,C=0;C<a.length;){var j=a.indexOf("=",C);if(j===-1)break;var B=a.indexOf(";",C);if(B===-1)B=a.length;else if(B<j){C=a.lastIndexOf(";",j-1)+1;continue}var G=a.slice(C,j).trim();if(E[G]===void 0){var d=a.slice(j+1,B).trim();d.charCodeAt(0)===34&&(d=d.slice(1,-1)),E[G]=tryDecode(d,T)}C=B+1}return E}function serialize$1(a,o,E){var g=E||{},T=g.encode||encode;if(typeof T!="function")throw new TypeError("option encode is invalid");if(!fieldContentRegExp.test(a))throw new TypeError("argument name is invalid");var C=T(o);if(C&&!fieldContentRegExp.test(C))throw new TypeError("argument val is invalid");var j=a+"="+C;if(g.maxAge!=null){var B=g.maxAge-0;if(isNaN(B)||!isFinite(B))throw new TypeError("option maxAge is invalid");j+="; Max-Age="+Math.floor(B)}if(g.domain){if(!fieldContentRegExp.test(g.domain))throw new TypeError("option domain is invalid");j+="; Domain="+g.domain}if(g.path){if(!fieldContentRegExp.test(g.path))throw new TypeError("option path is invalid");j+="; Path="+g.path}if(g.expires){var G=g.expires;if(!isDate(G)||isNaN(G.valueOf()))throw new TypeError("option expires is invalid");j+="; Expires="+G.toUTCString()}if(g.httpOnly&&(j+="; HttpOnly"),g.secure&&(j+="; Secure"),g.partitioned&&(j+="; Partitioned"),g.priority){var d=typeof g.priority=="string"?g.priority.toLowerCase():g.priority;switch(d){case"low":j+="; Priority=Low";break;case"medium":j+="; Priority=Medium";break;case"high":j+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(g.sameSite){var s=typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite;switch(s){case!0:j+="; SameSite=Strict";break;case"lax":j+="; SameSite=Lax";break;case"strict":j+="; SameSite=Strict";break;case"none":j+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return j}function decode(a){return a.indexOf("%")!==-1?decodeURIComponent(a):a}function encode(a){return encodeURIComponent(a)}function isDate(a){return __toString.call(a)==="[object Date]"||a instanceof Date}function tryDecode(a,o){try{return o(a)}catch{return a}}class InvalidTokenError extends Error{}InvalidTokenError.prototype.name="InvalidTokenError";function b64DecodeUnicode(a){return decodeURIComponent(atob(a).replace(/(.)/g,(o,E)=>{let g=E.charCodeAt(0).toString(16).toUpperCase();return g.length<2&&(g="0"+g),"%"+g}))}function base64UrlDecode(a){let o=a.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return b64DecodeUnicode(o)}catch{return atob(o)}}function jwtDecode(a,o){if(typeof a!="string")throw new InvalidTokenError("Invalid token specified: must be a string");o||(o={});const E=o.header===!0?0:1,g=a.split(".")[E];if(typeof g!="string")throw new InvalidTokenError(`Invalid token specified: missing part #${E+1}`);let T;try{T=base64UrlDecode(g)}catch(C){throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${E+1} (${C.message})`)}try{return JSON.parse(T)}catch(C){throw new InvalidTokenError(`Invalid token specified: invalid json for part #${E+1} (${C.message})`)}}var classnames={exports:{}};(function(a){(function(){var o={}.hasOwnProperty;function E(){for(var C="",j=0;j<arguments.length;j++){var B=arguments[j];B&&(C=T(C,g(B)))}return C}function g(C){if(typeof C=="string"||typeof C=="number")return C;if(typeof C!="object")return"";if(Array.isArray(C))return E.apply(null,C);if(C.toString!==Object.prototype.toString&&!C.toString.toString().includes("[native code]"))return C.toString();var j="";for(var B in C)o.call(C,B)&&C[B]&&(j=T(j,B));return j}function T(C,j){return j?C?C+" "+j:C+j:C}a.exports?(E.default=E,a.exports=E):window.classNames=E})()})(classnames);var classnamesExports=classnames.exports;const D$2=getDefaultExportFromCjs(classnamesExports);function toDate(a){const o=Object.prototype.toString.call(a);return a instanceof Date||typeof a=="object"&&o==="[object Date]"?new a.constructor(+a):typeof a=="number"||o==="[object Number]"||typeof a=="string"||o==="[object String]"?new Date(a):new Date(NaN)}function constructFrom(a,o){return a instanceof Date?new a.constructor(o):new Date(o)}function addMilliseconds(a,o){const E=+toDate(a);return constructFrom(a,E+o)}const millisecondsInMinute=6e4;function addMinutes(a,o){return addMilliseconds(a,o*millisecondsInMinute)}function getRoundingMethod(a){return o=>{const g=(a?Math[a]:Math.trunc)(o);return g===0?0:g}}function differenceInMilliseconds(a,o){return+toDate(a)-+toDate(o)}function differenceInSeconds(a,o,E){const g=differenceInMilliseconds(a,o)/1e3;return getRoundingMethod(E==null?void 0:E.roundingMethod)(g)}var shim={exports:{}},useSyncExternalStoreShim_production_min={};var e=reactExports;function h(a,o){return a===o&&(a!==0||1/a===1/o)||a!==a&&o!==o}var k=typeof Object.is=="function"?Object.is:h,l=e.useState,m=e.useEffect,n=e.useLayoutEffect,p=e.useDebugValue;function q(a,o){var E=o(),g=l({inst:{value:E,getSnapshot:o}}),T=g[0].inst,C=g[1];return n(function(){T.value=E,T.getSnapshot=o,r(T)&&C({inst:T})},[a,E,o]),m(function(){return r(T)&&C({inst:T}),a(function(){r(T)&&C({inst:T})})},[a]),p(E),E}function r(a){var o=a.getSnapshot;a=a.value;try{var E=o();return!k(a,E)}catch{return!0}}function t(a,o){return o()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t:q;useSyncExternalStoreShim_production_min.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:u;shim.exports=useSyncExternalStoreShim_production_min;var shimExports=shim.exports;const noop=()=>{},UNDEFINED=noop(),OBJECT=Object,isUndefined=a=>a===UNDEFINED,isFunction=a=>typeof a=="function",mergeObjects=(a,o)=>({...a,...o}),isPromiseLike=a=>isFunction(a.then),table=new WeakMap;let counter=0;const stableHash=a=>{const o=typeof a,E=a&&a.constructor,g=E==Date;let T,C;if(OBJECT(a)===a&&!g&&E!=RegExp){if(T=table.get(a),T)return T;if(T=++counter+"~",table.set(a,T),E==Array){for(T="@",C=0;C<a.length;C++)T+=stableHash(a[C])+",";table.set(a,T)}if(E==OBJECT){T="#";const j=OBJECT.keys(a).sort();for(;!isUndefined(C=j.pop());)isUndefined(a[C])||(T+=C+":"+stableHash(a[C])+",");table.set(a,T)}}else T=g?a.toJSON():o=="symbol"?a.toString():o=="string"?JSON.stringify(a):""+a;return T},SWRGlobalState=new WeakMap,EMPTY_CACHE={},INITIAL_CACHE={},STR_UNDEFINED="undefined",isWindowDefined=typeof window!=STR_UNDEFINED,isDocumentDefined=typeof document!=STR_UNDEFINED,hasRequestAnimationFrame=()=>isWindowDefined&&typeof window.requestAnimationFrame!=STR_UNDEFINED,createCacheHelper=(a,o)=>{const E=SWRGlobalState.get(a);return[()=>!isUndefined(o)&&a.get(o)||EMPTY_CACHE,g=>{if(!isUndefined(o)){const T=a.get(o);o in INITIAL_CACHE||(INITIAL_CACHE[o]=T),E[5](o,mergeObjects(T,g),T||EMPTY_CACHE)}},E[6],()=>!isUndefined(o)&&o in INITIAL_CACHE?INITIAL_CACHE[o]:!isUndefined(o)&&a.get(o)||EMPTY_CACHE]};let online=!0;const isOnline=()=>online,[onWindowEvent,offWindowEvent]=isWindowDefined&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[noop,noop],isVisible=()=>{const a=isDocumentDefined&&document.visibilityState;return isUndefined(a)||a!=="hidden"},initFocus=a=>(isDocumentDefined&&document.addEventListener("visibilitychange",a),onWindowEvent("focus",a),()=>{isDocumentDefined&&document.removeEventListener("visibilitychange",a),offWindowEvent("focus",a)}),initReconnect=a=>{const o=()=>{online=!0,a()},E=()=>{online=!1};return onWindowEvent("online",o),onWindowEvent("offline",E),()=>{offWindowEvent("online",o),offWindowEvent("offline",E)}},preset={isOnline,isVisible},defaultConfigOptions={initFocus,initReconnect},IS_REACT_LEGACY=!c.useId,IS_SERVER=!isWindowDefined||"Deno"in window,rAF=a=>hasRequestAnimationFrame()?window.requestAnimationFrame(a):setTimeout(a,1),useIsomorphicLayoutEffect=IS_SERVER?reactExports.useEffect:reactExports.useLayoutEffect,navigatorConnection=typeof navigator<"u"&&navigator.connection,slowConnection=!IS_SERVER&&navigatorConnection&&(["slow-2g","2g"].includes(navigatorConnection.effectiveType)||navigatorConnection.saveData),serialize=a=>{if(isFunction(a))try{a=a()}catch{a=""}const o=a;return a=typeof a=="string"?a:(Array.isArray(a)?a.length:a)?stableHash(a):"",[a,o]};let __timestamp=0;const getTimestamp=()=>++__timestamp,FOCUS_EVENT=0,RECONNECT_EVENT=1,MUTATE_EVENT=2,ERROR_REVALIDATE_EVENT=3;var events={__proto__:null,ERROR_REVALIDATE_EVENT,FOCUS_EVENT,MUTATE_EVENT,RECONNECT_EVENT};async function internalMutate(...a){const[o,E,g,T]=a,C=mergeObjects({populateCache:!0,throwOnError:!0},typeof T=="boolean"?{revalidate:T}:T||{});let j=C.populateCache;const B=C.rollbackOnError;let G=C.optimisticData;const d=C.revalidate!==!1,s=R=>typeof B=="function"?B(R):B!==!1,i=C.throwOnError;if(isFunction(E)){const R=E,S=[],w=o.keys();for(const b of w)!/^\$(inf|sub)\$/.test(b)&&R(o.get(b)._k)&&S.push(b);return Promise.all(S.map(y))}return y(E);async function y(R){const[S]=serialize(R);if(!S)return;const[w,b]=createCacheHelper(o,S),[P,W,X,ee]=SWRGlobalState.get(o),Q=()=>{const de=P[S];return d&&(delete X[S],delete ee[S],de&&de[0])?de[0](MUTATE_EVENT).then(()=>w().data):w().data};if(a.length<3)return Q();let ne=g,ce;const ue=getTimestamp();W[S]=[ue,0];const _e=!isUndefined(G),Pe=w(),xe=Pe.data,tt=Pe._c,Me=isUndefined(tt)?xe:tt;if(_e&&(G=isFunction(G)?G(Me,xe):G,b({data:G,_c:Me})),isFunction(ne))try{ne=ne(Me)}catch(de){ce=de}if(ne&&isPromiseLike(ne))if(ne=await ne.catch(de=>{ce=de}),ue!==W[S][0]){if(ce)throw ce;return ne}else ce&&_e&&s(ce)&&(j=!0,b({data:Me,_c:UNDEFINED}));if(j&&!ce)if(isFunction(j)){const de=j(ne,Me);b({data:de,error:UNDEFINED,_c:UNDEFINED})}else b({data:ne,error:UNDEFINED,_c:UNDEFINED});if(W[S][1]=getTimestamp(),Promise.resolve(Q()).then(()=>{b({_c:UNDEFINED})}),ce){if(i)throw ce;return}return ne}}const revalidateAllKeys=(a,o)=>{for(const E in a)a[E][0]&&a[E][0](o)},initCache=(a,o)=>{if(!SWRGlobalState.has(a)){const E=mergeObjects(defaultConfigOptions,o),g={},T=internalMutate.bind(UNDEFINED,a);let C=noop;const j={},B=(s,i)=>{const y=j[s]||[];return j[s]=y,y.push(i),()=>y.splice(y.indexOf(i),1)},G=(s,i,y)=>{a.set(s,i);const R=j[s];if(R)for(const S of R)S(i,y)},d=()=>{if(!SWRGlobalState.has(a)&&(SWRGlobalState.set(a,[g,{},{},{},T,G,B]),!IS_SERVER)){const s=E.initFocus(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,g,FOCUS_EVENT))),i=E.initReconnect(setTimeout.bind(UNDEFINED,revalidateAllKeys.bind(UNDEFINED,g,RECONNECT_EVENT)));C=()=>{s&&s(),i&&i(),SWRGlobalState.delete(a)}}};return d(),[a,T,d,C]}return[a,SWRGlobalState.get(a)[4]]},onErrorRetry=(a,o,E,g,T)=>{const C=E.errorRetryCount,j=T.retryCount,B=~~((Math.random()+.5)*(1<<(j<8?j:8)))*E.errorRetryInterval;!isUndefined(C)&&j>C||setTimeout(g,B,T)},compare=(a,o)=>stableHash(a)==stableHash(o),[cache,mutate]=initCache(new Map),defaultConfig=mergeObjects({onLoadingSlow:noop,onSuccess:noop,onError:noop,onErrorRetry,onDiscarded:noop,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:slowConnection?1e4:5e3,focusThrottleInterval:5*1e3,dedupingInterval:2*1e3,loadingTimeout:slowConnection?5e3:3e3,compare,isPaused:()=>!1,cache,mutate,fallback:{}},preset),mergeConfigs=(a,o)=>{const E=mergeObjects(a,o);if(o){const{use:g,fallback:T}=a,{use:C,fallback:j}=o;g&&C&&(E.use=g.concat(C)),T&&j&&(E.fallback=mergeObjects(T,j))}return E},SWRConfigContext=reactExports.createContext({}),INFINITE_PREFIX="$inf$",enableDevtools=isWindowDefined&&window.__SWR_DEVTOOLS_USE__,use$1=enableDevtools?window.__SWR_DEVTOOLS_USE__:[],setupDevTools=()=>{enableDevtools&&(window.__SWR_DEVTOOLS_REACT__=c)},normalize=a=>isFunction(a[1])?[a[0],a[1],a[2]||{}]:[a[0],null,(a[1]===null?a[2]:a[1])||{}],useSWRConfig=()=>mergeObjects(defaultConfig,reactExports.useContext(SWRConfigContext)),middleware=a=>(o,E,g)=>a(o,E&&((...C)=>{const[j]=serialize(o),[,,,B]=SWRGlobalState.get(cache);if(j.startsWith(INFINITE_PREFIX))return E(...C);const G=B[j];return isUndefined(G)?E(...C):(delete B[j],G)}),g),BUILT_IN_MIDDLEWARE=use$1.concat(middleware),withArgs=a=>function(...E){const g=useSWRConfig(),[T,C,j]=normalize(E),B=mergeConfigs(g,j);let G=a;const{use:d}=B,s=(d||[]).concat(BUILT_IN_MIDDLEWARE);for(let i=s.length;i--;)G=s[i](G);return G(T,C||B.fetcher||null,B)},subscribeCallback=(a,o,E)=>{const g=o[a]||(o[a]=[]);return g.push(E),()=>{const T=g.indexOf(E);T>=0&&(g[T]=g[g.length-1],g.pop())}},withMiddleware=(a,o)=>(...E)=>{const[g,T,C]=normalize(E),j=(C.use||[]).concat(o);return a(g,T,{...C,use:j})};setupDevTools();const use=c.use||(a=>{if(a.status==="pending")throw a;if(a.status==="fulfilled")return a.value;throw a.status==="rejected"?a.reason:(a.status="pending",a.then(o=>{a.status="fulfilled",a.value=o},o=>{a.status="rejected",a.reason=o}),a)}),WITH_DEDUPE={dedupe:!0},useSWRHandler=(a,o,E)=>{const{cache:g,compare:T,suspense:C,fallbackData:j,revalidateOnMount:B,revalidateIfStale:G,refreshInterval:d,refreshWhenHidden:s,refreshWhenOffline:i,keepPreviousData:y}=E,[R,S,w,b]=SWRGlobalState.get(g),[P,W]=serialize(a),X=reactExports.useRef(!1),ee=reactExports.useRef(!1),Q=reactExports.useRef(P),ne=reactExports.useRef(o),ce=reactExports.useRef(E),ue=()=>ce.current,_e=()=>ue().isVisible()&&ue().isOnline(),[Pe,xe,tt,Me]=createCacheHelper(g,P),de=reactExports.useRef({}).current,Fe=isUndefined(j)?E.fallback[P]:j,fe=(me,ve)=>{for(const Ne in de){const Re=Ne;if(Re==="data"){if(!T(me[Re],ve[Re])&&(!isUndefined(me[Re])||!T(lt,ve[Re])))return!1}else if(ve[Re]!==me[Re])return!1}return!0},Ct=reactExports.useMemo(()=>{const me=!P||!o?!1:isUndefined(B)?ue().isPaused()||C?!1:isUndefined(G)?!0:G:B,ve=Ie=>{const nt=mergeObjects(Ie);return delete nt._k,me?{isValidating:!0,isLoading:!0,...nt}:nt},Ne=Pe(),Re=Me(),Be=ve(Ne),pt=Ne===Re?Be:ve(Re);let Ce=Be;return[()=>{const Ie=ve(Pe());return fe(Ie,Ce)?(Ce.data=Ie.data,Ce.isLoading=Ie.isLoading,Ce.isValidating=Ie.isValidating,Ce.error=Ie.error,Ce):(Ce=Ie,Ie)},()=>pt]},[g,P]),je=shimExports.useSyncExternalStore(reactExports.useCallback(me=>tt(P,(ve,Ne)=>{fe(Ne,ve)||me()}),[g,P]),Ct[0],Ct[1]),St=!X.current,yt=R[P]&&R[P].length>0,Xe=je.data,st=isUndefined(Xe)?Fe:Xe,ut=je.error,gt=reactExports.useRef(st),lt=y?isUndefined(Xe)?gt.current:Xe:st,At=yt&&!isUndefined(ut)?!1:St&&!isUndefined(B)?B:ue().isPaused()?!1:C?isUndefined(st)?!1:G:isUndefined(st)||G,Pt=!!(P&&o&&St&&At),Ut=isUndefined(je.isValidating)?Pt:je.isValidating,It=isUndefined(je.isLoading)?Pt:je.isLoading,ft=reactExports.useCallback(async me=>{const ve=ne.current;if(!P||!ve||ee.current||ue().isPaused())return!1;let Ne,Re,Be=!0;const pt=me||{},Ce=!w[P]||!pt.dedupe,Ie=()=>IS_REACT_LEGACY?!ee.current&&P===Q.current&&X.current:P===Q.current,nt={isValidating:!1,isLoading:!1},Jt=()=>{xe(nt)},qt=()=>{const Ke=w[P];Ke&&Ke[1]===Re&&delete w[P]},Kt={isValidating:!0};isUndefined(Pe().data)&&(Kt.isLoading=!0);try{if(Ce&&(xe(Kt),E.loadingTimeout&&isUndefined(Pe().data)&&setTimeout(()=>{Be&&Ie()&&ue().onLoadingSlow(P,E)},E.loadingTimeout),w[P]=[ve(W),getTimestamp()]),[Ne,Re]=w[P],Ne=await Ne,Ce&&setTimeout(qt,E.dedupingInterval),!w[P]||w[P][1]!==Re)return Ce&&Ie()&&ue().onDiscarded(P),!1;nt.error=UNDEFINED;const Ke=S[P];if(!isUndefined(Ke)&&(Re<=Ke[0]||Re<=Ke[1]||Ke[1]===0))return Jt(),Ce&&Ie()&&ue().onDiscarded(P),!1;const ct=Pe().data;nt.data=T(ct,Ne)?ct:Ne,Ce&&Ie()&&ue().onSuccess(Ne,P,E)}catch(Ke){qt();const ct=ue(),{shouldRetryOnError:Lt}=ct;ct.isPaused()||(nt.error=Ke,Ce&&Ie()&&(ct.onError(Ke,P,ct),(Lt===!0||isFunction(Lt)&&Lt(Ke))&&_e()&&ct.onErrorRetry(Ke,P,ct,Ft=>{const Qt=R[P];Qt&&Qt[0]&&Qt[0](events.ERROR_REVALIDATE_EVENT,Ft)},{retryCount:(pt.retryCount||0)+1,dedupe:!0})))}return Be=!1,Jt(),!0},[P,g]),ye=reactExports.useCallback((...me)=>internalMutate(g,Q.current,...me),[]);if(useIsomorphicLayoutEffect(()=>{ne.current=o,ce.current=E,isUndefined(Xe)||(gt.current=Xe)}),useIsomorphicLayoutEffect(()=>{if(!P)return;const me=ft.bind(UNDEFINED,WITH_DEDUPE);let ve=0;const Re=subscribeCallback(P,R,(Be,pt={})=>{if(Be==events.FOCUS_EVENT){const Ce=Date.now();ue().revalidateOnFocus&&Ce>ve&&_e()&&(ve=Ce+ue().focusThrottleInterval,me())}else if(Be==events.RECONNECT_EVENT)ue().revalidateOnReconnect&&_e()&&me();else{if(Be==events.MUTATE_EVENT)return ft();if(Be==events.ERROR_REVALIDATE_EVENT)return ft(pt)}});return ee.current=!1,Q.current=P,X.current=!0,xe({_k:W}),At&&(isUndefined(st)||IS_SERVER?me():rAF(me)),()=>{ee.current=!0,Re()}},[P]),useIsomorphicLayoutEffect(()=>{let me;function ve(){const Re=isFunction(d)?d(Pe().data):d;Re&&me!==-1&&(me=setTimeout(Ne,Re))}function Ne(){!Pe().error&&(s||ue().isVisible())&&(i||ue().isOnline())?ft(WITH_DEDUPE).then(ve):ve()}return ve(),()=>{me&&(clearTimeout(me),me=-1)}},[d,s,i,P]),reactExports.useDebugValue(lt),C&&isUndefined(st)&&P){if(!IS_REACT_LEGACY&&IS_SERVER)throw new Error("Fallback data is required when using suspense in SSR.");ne.current=o,ce.current=E,ee.current=!1;const me=b[P];if(!isUndefined(me)){const ve=ye(me);use(ve)}if(isUndefined(ut)){const ve=ft(WITH_DEDUPE);isUndefined(lt)||(ve.status="fulfilled",ve.value=!0),use(ve)}else throw ut}return{mutate:ye,get data(){return de.data=!0,lt},get error(){return de.error=!0,ut},get isValidating(){return de.isValidating=!0,Ut},get isLoading(){return de.isLoading=!0,It}}},useSWR=withArgs(useSWRHandler),immutable=a=>(o,E,g)=>(g.revalidateOnFocus=!1,g.revalidateIfStale=!1,g.revalidateOnReconnect=!1,a(o,E,g)),useSWRImmutable=withMiddleware(useSWR,immutable);var defaultAttributes={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const toKebabCase=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),createLucideIcon=(a,o)=>{const E=reactExports.forwardRef(({color:g="currentColor",size:T=24,strokeWidth:C=2,absoluteStrokeWidth:j,className:B="",children:G,...d},s)=>reactExports.createElement("svg",{ref:s,...defaultAttributes,width:T,height:T,stroke:g,strokeWidth:j?Number(C)*24/Number(T):C,className:["lucide",`lucide-${toKebabCase(a)}`,B].join(" "),...d},[...o.map(([i,y])=>reactExports.createElement(i,y)),...Array.isArray(G)?G:[G]]));return E.displayName=`${a}`,E};const AlertTriangle=createLucideIcon("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const CheckCircle2=createLucideIcon("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const CheckCircle=createLucideIcon("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const HelpCircle=createLucideIcon("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const MessageSquareOff=createLucideIcon("MessageSquareOff",[["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M3.6 3.6c-.4.3-.6.8-.6 1.4v16l4-4h10",key:"pwpm4a"}]]);const Pause=createLucideIcon("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]);const Play=createLucideIcon("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);const RotateCcw=createLucideIcon("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const RotateCw=createLucideIcon("RotateCw",[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]]);const Send=createLucideIcon("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);const SkipForward=createLucideIcon("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);const Trash2=createLucideIcon("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const User=createLucideIcon("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const XCircle=createLucideIcon("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function isBytes$1(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}function bytes(a,...o){if(!isBytes$1(a))throw new Error("Expected Uint8Array");if(o.length>0&&!o.includes(a.length))throw new Error(`Expected Uint8Array of length ${o}, not of length=${a.length}`)}function exists(a,o=!0){if(a.destroyed)throw new Error("Hash instance has been destroyed");if(o&&a.finished)throw new Error("Hash#digest() has already been called")}function output(a,o){bytes(a);const E=o.outputLen;if(a.length<E)throw new Error(`digestInto() expects output buffer of length at least ${E}`)}function isBytes(a){return a instanceof Uint8Array||a!=null&&typeof a=="object"&&a.constructor.name==="Uint8Array"}const createView=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),rotr=(a,o)=>a<<32-o|a>>>o,isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!isLE)throw new Error("Non little-endian hardware is not supported");function utf8ToBytes(a){if(typeof a!="string")throw new Error(`utf8ToBytes expected string, got ${typeof a}`);return new Uint8Array(new TextEncoder().encode(a))}function toBytes(a){if(typeof a=="string"&&(a=utf8ToBytes(a)),!isBytes(a))throw new Error(`expected Uint8Array, got ${typeof a}`);return a}class Hash{clone(){return this._cloneInto()}}function wrapConstructor(a){const o=g=>a().update(toBytes(g)).digest(),E=a();return o.outputLen=E.outputLen,o.blockLen=E.blockLen,o.create=()=>a(),o}function setBigUint64(a,o,E,g){if(typeof a.setBigUint64=="function")return a.setBigUint64(o,E,g);const T=BigInt(32),C=BigInt(4294967295),j=Number(E>>T&C),B=Number(E&C),G=g?4:0,d=g?0:4;a.setUint32(o+G,j,g),a.setUint32(o+d,B,g)}class SHA2 extends Hash{constructor(o,E,g,T){super(),this.blockLen=o,this.outputLen=E,this.padOffset=g,this.isLE=T,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(o),this.view=createView(this.buffer)}update(o){exists(this);const{view:E,buffer:g,blockLen:T}=this;o=toBytes(o);const C=o.length;for(let j=0;j<C;){const B=Math.min(T-this.pos,C-j);if(B===T){const G=createView(o);for(;T<=C-j;j+=T)this.process(G,j);continue}g.set(o.subarray(j,j+B),this.pos),this.pos+=B,j+=B,this.pos===T&&(this.process(E,0),this.pos=0)}return this.length+=o.length,this.roundClean(),this}digestInto(o){exists(this),output(o,this),this.finished=!0;const{buffer:E,view:g,blockLen:T,isLE:C}=this;let{pos:j}=this;E[j++]=128,this.buffer.subarray(j).fill(0),this.padOffset>T-j&&(this.process(g,0),j=0);for(let i=j;i<T;i++)E[i]=0;setBigUint64(g,T-8,BigInt(this.length*8),C),this.process(g,0);const B=createView(o),G=this.outputLen;if(G%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=G/4,s=this.get();if(d>s.length)throw new Error("_sha2: outputLen bigger than state");for(let i=0;i<d;i++)B.setUint32(4*i,s[i],C)}digest(){const{buffer:o,outputLen:E}=this;this.digestInto(o);const g=o.slice(0,E);return this.destroy(),g}_cloneInto(o){o||(o=new this.constructor),o.set(...this.get());const{blockLen:E,buffer:g,length:T,finished:C,destroyed:j,pos:B}=this;return o.length=T,o.pos=B,o.finished=C,o.destroyed=j,T%E&&o.buffer.set(g),o}}const Chi=(a,o,E)=>a&o^~a&E,Maj=(a,o,E)=>a&o^a&E^o&E,SHA256_K=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),IV=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),SHA256_W=new Uint32Array(64);class SHA256 extends SHA2{constructor(){super(64,32,8,!1),this.A=IV[0]|0,this.B=IV[1]|0,this.C=IV[2]|0,this.D=IV[3]|0,this.E=IV[4]|0,this.F=IV[5]|0,this.G=IV[6]|0,this.H=IV[7]|0}get(){const{A:o,B:E,C:g,D:T,E:C,F:j,G:B,H:G}=this;return[o,E,g,T,C,j,B,G]}set(o,E,g,T,C,j,B,G){this.A=o|0,this.B=E|0,this.C=g|0,this.D=T|0,this.E=C|0,this.F=j|0,this.G=B|0,this.H=G|0}process(o,E){for(let i=0;i<16;i++,E+=4)SHA256_W[i]=o.getUint32(E,!1);for(let i=16;i<64;i++){const y=SHA256_W[i-15],R=SHA256_W[i-2],S=rotr(y,7)^rotr(y,18)^y>>>3,w=rotr(R,17)^rotr(R,19)^R>>>10;SHA256_W[i]=w+SHA256_W[i-7]+S+SHA256_W[i-16]|0}let{A:g,B:T,C,D:j,E:B,F:G,G:d,H:s}=this;for(let i=0;i<64;i++){const y=rotr(B,6)^rotr(B,11)^rotr(B,25),R=s+y+Chi(B,G,d)+SHA256_K[i]+SHA256_W[i]|0,w=(rotr(g,2)^rotr(g,13)^rotr(g,22))+Maj(g,T,C)|0;s=d,d=G,G=B,B=j+R|0,j=C,C=T,T=g,g=R+w|0}g=g+this.A|0,T=T+this.B|0,C=C+this.C|0,j=j+this.D|0,B=B+this.E|0,G=G+this.F|0,d=d+this.G|0,s=s+this.H|0,this.set(g,T,C,j,B,G,d,s)}roundClean(){SHA256_W.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const sha256=wrapConstructor(()=>new SHA256);class ValidationError extends Error{constructor(E,g){super(E,g);Pr(this,"name");Pr(this,"details");this.name="ZodValidationError",this.details=getIssuesFromErrorOptions(g)}toString(){return this.message}}function getIssuesFromErrorOptions(a){if(a){const o=a.cause;if(o instanceof ZodError)return o.issues}return[]}const ISSUE_SEPARATOR="; ",MAX_ISSUES_IN_MESSAGE=99,PREFIX="Validation error",PREFIX_SEPARATOR=": ",UNION_SEPARATOR=", or ";function prefixMessage(a,o,E){return o!==null?a.length>0?[o,a].join(E):o:a.length>0?a:PREFIX}const identifierRegex=/[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*/u;function joinPath(a){return a.length===1?a[0].toString():a.reduce((o,E)=>{if(typeof E=="number")return o+"["+E.toString()+"]";if(E.includes('"'))return o+'["'+escapeQuotes(E)+'"]';if(!identifierRegex.test(E))return o+'["'+E+'"]';const g=o.length===0?"":".";return o+g+E},"")}function escapeQuotes(a){return a.replace(/"/g,'\\"')}function isNonEmptyArray(a){return a.length!==0}function getMessageFromZodIssue(a){const{issue:o,issueSeparator:E,unionSeparator:g,includePath:T}=a;if(o.code==="invalid_union")return o.unionErrors.reduce((C,j)=>{const B=j.issues.map(G=>getMessageFromZodIssue({issue:G,issueSeparator:E,unionSeparator:g,includePath:T})).join(E);return C.includes(B)||C.push(B),C},[]).join(g);if(T&&isNonEmptyArray(o.path)){if(o.path.length===1){const C=o.path[0];if(typeof C=="number")return`${o.message} at index ${C}`}return`${o.message} at "${joinPath(o.path)}"`}return o.message}function fromZodError(a,o={}){const{maxIssuesInMessage:E=MAX_ISSUES_IN_MESSAGE,issueSeparator:g=ISSUE_SEPARATOR,unionSeparator:T=UNION_SEPARATOR,prefixSeparator:C=PREFIX_SEPARATOR,prefix:j=PREFIX,includePath:B=!0}=o,G=a.errors,d=G.length===0?a.message:G.slice(0,E).map(i=>getMessageFromZodIssue({issue:i,issueSeparator:g,unionSeparator:T,includePath:B})).join(g),s=prefixMessage(d,j,C);return new ValidationError(s,{cause:a})}var define_import_meta_env_default={QUIZMS_MODE:"training",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};reactExports.createContext({});function L({percentage:a,className:o,children:E}){let g=a===void 0?void 0:Math.round(a);return g!==void 0&&(g=Number.isNaN(g)?void 0:clamp(g,0,100)),c.createElement("div",{className:D$2("relative p-2 pt-0 text-center",o)},c.createElement("div",{className:"relative z-10"},E),c.createElement("progress",{className:"progress progress-info absolute inset-x-0",value:g,max:"100"}))}function Tt(){return c.createElement("div",{className:"not-prose flex h-full items-center justify-center"},c.createElement(L,null,c.createElement("p",{className:"pb-1"},"Caricamento in corso...")))}var jt=reactExports.forwardRef(function({title:a,className:o,children:E},g){return c.createElement("dialog",{ref:g,className:"modal"},c.createElement("form",{method:"dialog",className:D$2("modal-box",o)},c.createElement("button",{className:"btn btn-circle btn-ghost btn-sm absolute right-2 top-2","aria-label":"Chiudi"},"✕"),c.createElement("h3",{className:"mb-3 mt-0 text-lg font-bold"},a),E),c.createElement("form",{method:"dialog",className:"modal-backdrop"},c.createElement("button",null,"Chiudi")))});function D$1(){let{data:a}=useSWRImmutable("time-server",J,{suspense:!0});return()=>addMilliseconds(new Date,a)}async function J(){if(!define_import_meta_env_default.QUIZMS_TIME_SERVER)return 0;try{let a=await fetch(define_import_meta_env_default.QUIZMS_TIME_SERVER);if(!a.ok)return 0;let o=Date.now(),E=await a.text(),g=Number(E);return Number.isNaN(g)?0:g-o}catch{return 0}}function Ot(a){let o=D$1(),E=reactExports.useCallback(()=>!!a&&o()>=a,[a,o]),[g,T]=reactExports.useState(E),C=reactExports.useCallback(()=>!g&&E()&&T(!0),[g,E]);return reactExports.useEffect(()=>{if(!a){T(!1);return}let j=differenceInMilliseconds(a,o());if(j<0)return;let B=setTimeout(C,j+5);return()=>clearTimeout(B)},[a,C,o]),reactExports.useEffect(()=>(window.addEventListener("visibilitychange",C),()=>window.removeEventListener("visibilitychange",C)),[C]),g}function Vt(a){let o=D$1(),[E,g]=reactExports.useState(o()),T=a.endTime??addMinutes(a.startTime,a.duration);if(reactExports.useEffect(()=>{if(!T)return;let G=setInterval(()=>{let d=o();g(d),d>=T&&clearInterval(G)},100);return()=>clearInterval(G)},[T,o]),!T)return c.createElement("span",{className:"font-mono"},"--:--");let C=Math.max(differenceInSeconds(T,E),0);a.duration&&(C=Math.min(C,a.duration*60));let j=Math.floor(C/60),B=C%60;return c.createElement("span",{className:"countdown font-mono"},c.createElement("span",{style:{"--value":j}}),":",c.createElement("span",{style:{"--value":B}}))}function Zt$1({error:a,resetErrorBoundary:o}){return reactExports.useEffect(()=>{},[o]),c.createElement("div",{className:"flex size-full flex-col items-center justify-center"},c.createElement("p",{className:"mx-8 break-words text-center text-error"},"Errore: ",a.message),o&&c.createElement("div",{className:"mt-5 flex flex-row justify-center"},c.createElement("button",{className:"btn btn-error",onClick:o},c.createElement(RotateCw,null),"Ricarica")))}var N=z.object({name:z.string(),label:z.string(),size:z.enum(["xs","sm","md","lg","xl"]).optional(),pinned:z.boolean().optional()}),rt$1=N.extend({type:z.literal("text")}),it=N.extend({type:z.literal("number"),min:z.number().optional(),max:z.number().optional()}),at=N.extend({type:z.literal("date"),min:z.date(),max:z.date()});z.object({id:z.string(),name:z.string(),problemIds:z.coerce.string().array(),contestWindowStart:z.date().optional(),contestWindowEnd:z.date().optional(),duration:z.coerce.number().positive().optional(),statementVersion:z.number(),personalInformation:z.array(z.discriminatedUnion("type",[rt$1,it,at])),hasVariants:z.boolean(),hasOnline:z.boolean(),hasPdf:z.boolean(),allowRestart:z.boolean(),instructions:z.string().optional()});z.object({uid:z.string(),personalInformation:z.record(z.union([z.string(),z.number(),z.date()]).optional()),participationId:z.string(),contestId:z.string(),token:z.string(),startedAt:z.date(),variant:z.string(),disabled:z.boolean(),answers:z.record(z.string().optional()),extraData:z.record(z.any()).optional(),createdAt:z.date(),updatedAt:z.date()}).partial().extend({id:z.string()});z.object({id:z.string(),studentId:z.string()});z.object({id:z.string(),studentId:z.string(),participationId:z.string()});z.object({id:z.string(),studentId:z.string(),token:z.string(),name:z.string(),surname:z.string()});z.object({id:z.string(),contestId:z.string(),schema:z.record(z.object({type:z.enum(["text","number"]),options:z.string().array().nonempty().optional(),blankOption:z.string().optional(),pointsCorrect:z.number().optional(),pointsBlank:z.number().optional(),pointsWrong:z.number().optional(),solution:z.string().optional(),originalId:z.coerce.string().optional()}))});z.object({id:z.string(),variant:z.string()});function Se(a,o){var C,j;let E=a.answers,g=(C=o[a.variant])==null?void 0:C.schema;if(!g||!E)return;let T=0;for(let B in g){let G=g[B],d=(j=E[B])==null?void 0:j.trim(),s=dt(G,d);if(s===void 0)return;T+=s}return T}function dt(a,o){if(!(a.pointsCorrect===void 0||a.pointsBlank===void 0||a.pointsWrong===void 0||a.solution===void 0))return o===void 0||o===""||o===a.blankOption?a.pointsBlank:o.toUpperCase()===a.solution.toUpperCase()?a.pointsCorrect:a.pointsWrong}z.object({id:z.string(),schoolId:z.string(),contestId:z.string(),name:z.string(),teacher:z.string(),token:z.string().optional(),startingTime:z.date().optional(),finalized:z.boolean().default(!1),pdfVariants:z.array(z.coerce.string()).optional()});z.object({id:z.string(),participationId:z.string(),contestId:z.string(),startingTime:z.date()});z.object({id:z.string(),uid:z.string(),answers:z.record(z.string().optional()),submittedAt:z.date().optional()});function mt(a,o,E){let g=a.safeParse(o);if(!g.success)throw fromZodError(g.error,E);return g.data}var XoroShiro128Plus=function(){function a(o,E,g,T){this.s01=o,this.s00=E,this.s11=g,this.s10=T}return a.prototype.clone=function(){return new a(this.s01,this.s00,this.s11,this.s10)},a.prototype.next=function(){var o=new a(this.s01,this.s00,this.s11,this.s10),E=o.unsafeNext();return[E,o]},a.prototype.unsafeNext=function(){var o=this.s00+this.s10|0,E=this.s10^this.s00,g=this.s11^this.s01,T=this.s00,C=this.s01;return this.s00=T<<24^C>>>8^E^E<<16,this.s01=C<<24^T>>>8^g^(g<<16|E>>>16),this.s10=g<<5^E>>>27,this.s11=E<<5^g>>>27,o},a.prototype.jump=function(){var o=new a(this.s01,this.s00,this.s11,this.s10);return o.unsafeJump(),o},a.prototype.unsafeJump=function(){for(var o=0,E=0,g=0,T=0,C=[3639956645,3750757012,1261568508,386426335],j=0;j!==4;++j)for(var B=1;B;B<<=1)C[j]&B&&(o^=this.s01,E^=this.s00,g^=this.s11,T^=this.s10),this.unsafeNext();this.s01=o,this.s00=E,this.s11=g,this.s10=T},a}(),xoroshiro128plus=function(a){return new XoroShiro128Plus(-1,~a,a|0,0)};function fromNumberToArrayInt64(a,o){if(o<0){var E=-o;a.sign=-1,a.data[0]=~~(E/4294967296),a.data[1]=E>>>0}else a.sign=1,a.data[0]=~~(o/4294967296),a.data[1]=o>>>0;return a}function substractArrayInt64(a,o,E){var g=o.data[1],T=o.data[0],C=o.sign,j=E.data[1],B=E.data[0],G=E.sign;if(a.sign=1,C===1&&G===-1){var d=g+j,s=T+B+(d>4294967295?1:0);return a.data[0]=s>>>0,a.data[1]=d>>>0,a}var i=g,y=T,R=j,S=B;C===-1&&(i=j,y=B,R=g,S=T);var w=0,b=i-R;return b<0&&(w=1,b=b>>>0),a.data[0]=y-S-w,a.data[1]=b,a}function unsafeUniformIntDistributionInternal(a,o){for(var E=a>2?~~(4294967296/a)*a:4294967296,g=o.unsafeNext()+2147483648;g>=E;)g=o.unsafeNext()+2147483648;return g%a}function unsafeUniformArrayIntDistributionInternal(a,o,E){for(var g=o.length;;){for(var T=0;T!==g;++T){var C=T===0?o[0]+1:4294967296,j=unsafeUniformIntDistributionInternal(C,E);a[T]=j}for(var T=0;T!==g;++T){var B=a[T],G=o[T];if(B<G)return a;if(B>G)break}}}var safeNumberMaxSafeInteger=Number.MAX_SAFE_INTEGER,sharedA={sign:1,data:[0,0]},sharedB={sign:1,data:[0,0]},sharedC={sign:1,data:[0,0]},sharedData=[0,0];function uniformLargeIntInternal(a,o,E,g){var T=E<=safeNumberMaxSafeInteger?fromNumberToArrayInt64(sharedC,E):substractArrayInt64(sharedC,fromNumberToArrayInt64(sharedA,o),fromNumberToArrayInt64(sharedB,a));return T.data[1]===4294967295?(T.data[0]+=1,T.data[1]=0):T.data[1]+=1,unsafeUniformArrayIntDistributionInternal(sharedData,T.data,g),sharedData[0]*4294967296+sharedData[1]+a}function unsafeUniformIntDistribution(a,o,E){var g=o-a;if(g<=4294967295){var T=unsafeUniformIntDistributionInternal(g+1,E);return T+a}return uniformLargeIntInternal(a,o,g,E)}const ErrorBoundaryContext=reactExports.createContext(null),initialState={didCatch:!1,error:null};class ErrorBoundary extends reactExports.Component{constructor(o){super(o),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=initialState}static getDerivedStateFromError(o){return{didCatch:!0,error:o}}resetErrorBoundary(){const{error:o}=this.state;if(o!==null){for(var E,g,T=arguments.length,C=new Array(T),j=0;j<T;j++)C[j]=arguments[j];(E=(g=this.props).onReset)===null||E===void 0||E.call(g,{args:C,reason:"imperative-api"}),this.setState(initialState)}}componentDidCatch(o,E){var g,T;(g=(T=this.props).onError)===null||g===void 0||g.call(T,o,E)}componentDidUpdate(o,E){const{didCatch:g}=this.state,{resetKeys:T}=this.props;if(g&&E.error!==null&&hasArrayChanged(o.resetKeys,T)){var C,j;(C=(j=this.props).onReset)===null||C===void 0||C.call(j,{next:T,prev:o.resetKeys,reason:"keys"}),this.setState(initialState)}}render(){const{children:o,fallbackRender:E,FallbackComponent:g,fallback:T}=this.props,{didCatch:C,error:j}=this.state;let B=o;if(C){const G={error:j,resetErrorBoundary:this.resetErrorBoundary};if(typeof E=="function")B=E(G);else if(g)B=reactExports.createElement(g,G);else if(T===null||reactExports.isValidElement(T))B=T;else throw j}return reactExports.createElement(ErrorBoundaryContext.Provider,{value:{didCatch:C,error:j,resetErrorBoundary:this.resetErrorBoundary}},B)}}function hasArrayChanged(){let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return a.length!==o.length||a.some((E,g)=>!Object.is(E,o[g]))}var x=class{constructor(a){this.randInt=(o,E)=>unsafeUniformIntDistribution(o,E,this.rng),this.choice=o=>o[this.randInt(0,o.length-1)],this.sample=(o,E)=>{let g=o.slice(0,E);for(let T=E;T<o.length;T++){let C=this.randInt(0,T);C<E&&(g[C]=o[T])}return g},this.shuffle=o=>{for(let E=o.length-1;E>0;E--){let g=this.randInt(0,E);[o[E],o[g]]=[o[g],o[E]]}},this.rng=xoroshiro128plus(A$1(a))}};function A$1(a){let o=sha256(a),E=new DataView(o.buffer,o.byteOffset,o.byteLength);return Number(E.getBigUint64(0,!0)&BigInt(Number.MAX_SAFE_INTEGER))}function V(){return crypto.randomUUID()}var f=reactExports.createContext({});f.displayName="TeacherContext";const emptyComponents={},MDXContext=c.createContext(emptyComponents);function useMDXComponents(a){const o=c.useContext(MDXContext);return c.useMemo(function(){return typeof a=="function"?a(o):{...o,...a}},[o,a])}function MDXProvider(a){let o;return a.disableParentContext?o=typeof a.components=="function"?a.components(emptyComponents):a.components||emptyComponents:o=useMDXComponents(a.components),c.createElement(MDXContext.Provider,{value:o},a.children)}var FileSaver_min={exports:{}};(function(a,o){(function(E,g){g()})(commonjsGlobal,function(){function E(d,s){return typeof s>"u"?s={autoBom:!1}:typeof s!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),s={autoBom:!s}),s.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function g(d,s,i){var y=new XMLHttpRequest;y.open("GET",d),y.responseType="blob",y.onload=function(){G(y.response,s,i)},y.onerror=function(){console.error("could not download file")},y.send()}function T(d){var s=new XMLHttpRequest;s.open("HEAD",d,!1);try{s.send()}catch{}return 200<=s.status&&299>=s.status}function C(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(s)}}var j=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,B=j.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),G=j.saveAs||(typeof window!="object"||window!==j?function(){}:"download"in HTMLAnchorElement.prototype&&!B?function(d,s,i){var y=j.URL||j.webkitURL,R=document.createElement("a");s=s||d.name||"download",R.download=s,R.rel="noopener",typeof d=="string"?(R.href=d,R.origin===location.origin?C(R):T(R.href)?g(d,s,i):C(R,R.target="_blank")):(R.href=y.createObjectURL(d),setTimeout(function(){y.revokeObjectURL(R.href)},4e4),setTimeout(function(){C(R)},0))}:"msSaveOrOpenBlob"in navigator?function(d,s,i){if(s=s||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(E(d,i),s);else if(T(d))g(d,s,i);else{var y=document.createElement("a");y.href=d,y.target="_blank",setTimeout(function(){C(y)})}}:function(d,s,i,y){if(y=y||open("","_blank"),y&&(y.document.title=y.document.body.innerText="downloading..."),typeof d=="string")return g(d,s,i);var R=d.type==="application/octet-stream",S=/constructor/i.test(j.HTMLElement)||j.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||R&&S||B)&&typeof FileReader<"u"){var b=new FileReader;b.onloadend=function(){var X=b.result;X=w?X:X.replace(/^data:[^;]*;/,"data:attachment/file;"),y?y.location.href=X:location=X,y=null},b.readAsDataURL(d)}else{var P=j.URL||j.webkitURL,W=P.createObjectURL(d);y?y.location=W:location.href=W,y=null,setTimeout(function(){P.revokeObjectURL(W)},4e4)}});j.saveAs=G.saveAs=G,a.exports=G})})(FileSaver_min);var jsInterpreter={exports:{}},vmBrowserify={},hasRequiredVmBrowserify;function requireVmBrowserify(){return hasRequiredVmBrowserify||(hasRequiredVmBrowserify=1,function(exports){var indexOf=function(a,o){if(a.indexOf)return a.indexOf(o);for(var E=0;E<a.length;E++)if(a[E]===o)return E;return-1},Object_keys=function(a){if(Object.keys)return Object.keys(a);var o=[];for(var E in a)o.push(E);return o},forEach=function(a,o){if(a.forEach)return a.forEach(o);for(var E=0;E<a.length;E++)o(a[E],E,a)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(a,o,E){Object.defineProperty(a,o,{writable:!0,enumerable:!1,configurable:!0,value:E})}}catch{return function(o,E,g){o[E]=g}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(o){if(!(this instanceof Script))return new Script(o);this.code=o};Script.prototype.runInContext=function(a){if(!(a instanceof Context))throw new TypeError("needs a 'context' argument.");var o=document.createElement("iframe");o.style||(o.style={}),o.style.display="none",document.body.appendChild(o);var E=o.contentWindow,g=E.eval,T=E.execScript;!g&&T&&(T.call(E,"null"),g=E.eval),forEach(Object_keys(a),function(B){E[B]=a[B]}),forEach(globals,function(B){a[B]&&(E[B]=a[B])});var C=Object_keys(E),j=g.call(E,this.code);return forEach(Object_keys(E),function(B){(B in a||indexOf(C,B)===-1)&&(a[B]=E[B])}),forEach(globals,function(B){B in a||defineProp(a,B,E[B])}),document.body.removeChild(o),j},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(a){var o=Script.createContext(a),E=this.runInContext(o);return a&&forEach(Object_keys(o),function(g){a[g]=o[g]}),E},forEach(Object_keys(Script.prototype),function(a){exports[a]=Script[a]=function(o){var E=Script(o);return E[a].apply(E,[].slice.call(arguments,1))}}),exports.isContext=function(a){return a instanceof Context},exports.createScript=function(a){return exports.Script(a)},exports.createContext=Script.createContext=function(a){var o=new Context;return typeof a=="object"&&forEach(Object_keys(a),function(E){o[E]=a[E]}),o}}(vmBrowserify)),vmBrowserify}(function(a,o){(function(g,T){a.exports=T()})(commonjsGlobal,()=>(()=>{var E={"./original-repo/interpreter.js":function(j,B,G){var d=function(s,i){typeof s=="string"&&(s=this.parse_(s,"code"));var y=s.constructor;this.newNode=function(){return new y({options:{}})};var R=this.newNode();for(var S in s)R[S]=S==="body"?s[S].slice():s[S];this.ast=R,this.tasks=[],this.initFunc_=i,this.paused_=!1,this.polyfills_=[],this.functionCounter_=0,this.stepFunctions_=Object.create(null);var w=/^step([A-Z]\w*)$/,b;for(var P in this)typeof this[P]=="function"&&(b=P.match(w))&&(this.stepFunctions_[b[1]]=this[P].bind(this));this.globalScope=this.createScope(this.ast,null),this.globalObject=this.globalScope.object,this.ast=this.parse_(this.polyfills_.join(`
`),"polyfills"),this.polyfills_=void 0,d.stripLocations_(this.ast,void 0,void 0);var W=new d.State(this.ast,this.globalScope);W.done=!1,this.stateStack=[W],this.run(),this.value=void 0,this.ast=R,W=new d.State(this.ast,this.globalScope),W.done=!1,this.stateStack.length=0,this.stateStack[0]=W};d.Completion={NORMAL:0,BREAK:1,CONTINUE:2,RETURN:3,THROW:4},d.Status={DONE:0,STEP:1,TASK:2,ASYNC:3},d.PARSE_OPTIONS={locations:!0,ecmaVersion:5},d.READONLY_DESCRIPTOR={configurable:!0,enumerable:!0,writable:!1},d.NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!0},d.READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!0,enumerable:!1,writable:!1},d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR={configurable:!1,enumerable:!1,writable:!1},d.VARIABLE_DESCRIPTOR={configurable:!1,enumerable:!0,writable:!0},d.STEP_ERROR={STEP_ERROR:!0},d.SCOPE_REFERENCE={SCOPE_REFERENCE:!0},d.VALUE_IN_DESCRIPTOR={VALUE_IN_DESCRIPTOR:!0},d.REGEXP_TIMEOUT={REGEXP_TIMEOUT:!0},d.toStringCycles_=[],d.vm=null,d.currentInterpreter_=null,d.nativeGlobal=typeof globalThis>"u"?this:globalThis,d.WORKER_CODE=["onmessage = function(e) {","var result;","var data = e.data;","switch (data[0]) {","case 'split':","result = data[1].split(data[2], data[3]);","break;","case 'match':","result = data[1].match(data[2]);","break;","case 'search':","result = data[1].search(data[2]);","break;","case 'replace':","result = data[1].replace(data[2], data[3]);","break;","case 'exec':","var regexp = data[1];","regexp.lastIndex = data[2];","result = [regexp.exec(data[3]), data[1].lastIndex];","break;","default:","throw Error('Unknown RegExp operation: ' + data[0]);","}","postMessage(result);","close();","};"],d.legalArrayLength=function(s){var i=s>>>0;return i===Number(s)?i:NaN},d.legalArrayIndex=function(s){var i=s>>>0;return String(i)===String(s)&&i!==4294967295?i:NaN},d.stripLocations_=function(s,i,y){i?s.start=i:delete s.start,y?s.end=y:delete s.end;for(var R in s)if(R!=="loc"&&s.hasOwnProperty(R)){var S=s[R];S&&typeof S=="object"&&d.stripLocations_(S,i,y)}},d.prototype.REGEXP_MODE=2,d.prototype.REGEXP_THREAD_TIMEOUT=1e3,d.prototype.POLYFILL_TIMEOUT=1e3,d.prototype.getterStep_=!1,d.prototype.setterStep_=!1,d.prototype.appendCodeNumber_=0,d.prototype.taskCodeNumber_=0,d.prototype.parse_=function(s,i){var y={};for(var R in d.PARSE_OPTIONS)y[R]=d.PARSE_OPTIONS[R];return y.sourceFile=i,d.nativeGlobal.acorn.parse(s,y)},d.prototype.appendCode=function(s){var i=this.stateStack[0];if(!i||i.node.type!=="Program")throw Error("Expecting original AST to start with a Program node");if(typeof s=="string"&&(s=this.parse_(s,"appendCode"+this.appendCodeNumber_++)),!s||s.type!=="Program")throw Error("Expecting new AST to start with a Program node");this.populateScope_(s,i.scope),Array.prototype.push.apply(i.node.body,s.body),i.node.body.variableCache_=null,i.done=!1},d.prototype.step=function(){var s=this.stateStack,i;do{var y=s[s.length-1];if(this.paused_)return!0;if(!y||y.node.type==="Program"&&y.done){if(!this.tasks.length)return!1;if(y=this.nextTask_(),!y)return!0}var R=y.node,S=d.currentInterpreter_;d.currentInterpreter_=this;try{var w=this.stepFunctions_[R.type](s,y,R)}catch(b){if(b!==d.STEP_ERROR)throw this.value!==b&&(this.value=void 0),b}finally{d.currentInterpreter_=S}if(w&&s.push(w),this.getterStep_)throw this.value=void 0,Error("Getter not supported in this context");if(this.setterStep_)throw this.value=void 0,Error("Setter not supported in this context");!i&&!R.end&&(i=Date.now()+this.POLYFILL_TIMEOUT)}while(!R.end&&i>Date.now());return!0},d.prototype.run=function(){for(;!this.paused_&&this.step(););return this.paused_},d.prototype.getStatus=function(){if(this.paused_)return d.Status.ASYNC;var s=this.stateStack,i=s[s.length-1];if(i&&(i.node.type!=="Program"||!i.done))return d.Status.STEP;var y=this.tasks[0];return y?y.time>Date.now()?d.Status.TASK:d.Status.STEP:d.Status.DONE},d.prototype.initGlobal=function(s){this.setProperty(s,"NaN",NaN,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"Infinity",1/0,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"undefined",void 0,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"window",s,d.READONLY_DESCRIPTOR),this.setProperty(s,"this",s,d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"self",s),this.OBJECT_PROTO=new d.Object(null),this.FUNCTION_PROTO=new d.Object(this.OBJECT_PROTO),this.initFunction(s),this.initObject(s),s.proto=this.OBJECT_PROTO,this.setProperty(s,"constructor",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR),this.initArray(s),this.initString(s),this.initBoolean(s),this.initNumber(s),this.initDate(s),this.initRegExp(s),this.initError(s),this.initMath(s),this.initJSON(s);var i=this,y,R=this.createNativeFunction(function(b){throw EvalError("Can't happen")},!1);R.eval=!0,this.setProperty(s,"eval",R,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"parseInt",this.createNativeFunction(parseInt,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"parseFloat",this.createNativeFunction(parseFloat,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"isNaN",this.createNativeFunction(isNaN,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"isFinite",this.createNativeFunction(isFinite,!1),d.NONENUMERABLE_DESCRIPTOR);for(var S=[[escape,"escape"],[unescape,"unescape"],[decodeURI,"decodeURI"],[decodeURIComponent,"decodeURIComponent"],[encodeURI,"encodeURI"],[encodeURIComponent,"encodeURIComponent"]],w=0;w<S.length;w++)y=function(b){return function(P){try{return b(P)}catch(W){i.throwException(i.URI_ERROR,W.message)}}}(S[w][0]),this.setProperty(s,S[w][1],this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR);y=function(P){return i.createTask_(!1,arguments)},this.setProperty(s,"setTimeout",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(P){return i.createTask_(!0,arguments)},this.setProperty(s,"setInterval",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(P){i.deleteTask_(P)},this.setProperty(s,"clearTimeout",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(P){i.deleteTask_(P)},this.setProperty(s,"clearInterval",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),this.OBJECT=this.OBJECT,this.OBJECT_PROTO=this.OBJECT_PROTO,this.FUNCTION=this.FUNCTION,this.FUNCTION_PROTO=this.FUNCTION_PROTO,this.ARRAY=this.ARRAY,this.ARRAY_PROTO=this.ARRAY_PROTO,this.REGEXP=this.REGEXP,this.REGEXP_PROTO=this.REGEXP_PROTO,this.DATE=this.DATE,this.DATE_PROTO=this.DATE_PROTO,this.initFunc_&&this.initFunc_(this,s)},d.prototype.functionCodeNumber_=0,d.prototype.initFunction=function(s){var i=this,y,R=/^[A-Za-z_$][\w$]*$/;y=function(w){if(arguments.length)var b=String(arguments[arguments.length-1]);else var b="";var P=Array.prototype.slice.call(arguments,0,-1).join(",").trim();if(P){for(var W=P.split(/\s*,\s*/),X=0;X<W.length;X++){var ee=W[X];R.test(ee)||i.throwException(i.SYNTAX_ERROR,"Invalid function argument: "+ee)}P=W.join(", ")}try{var Q=i.parse_("(function("+P+") {"+b+"})","function"+i.functionCodeNumber_++)}catch(ce){i.throwException(i.SYNTAX_ERROR,"Invalid code: "+ce.message)}Q.body.length!==1&&i.throwException(i.SYNTAX_ERROR,"Invalid code in function body");var ne=Q.body[0].expression;return i.createFunction(ne,i.globalScope,"anonymous")},this.FUNCTION=this.createNativeFunction(y,!0),this.setProperty(s,"Function",this.FUNCTION,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION,"prototype",this.FUNCTION_PROTO,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.FUNCTION_PROTO,"constructor",this.FUNCTION,d.NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.nativeFunc=function(){},this.FUNCTION_PROTO.nativeFunc.id=this.functionCounter_++,this.FUNCTION_PROTO.illegalConstructor=!0,this.setProperty(this.FUNCTION_PROTO,"length",0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.FUNCTION_PROTO.class="Function",y=function(w,b){var P=i.stateStack[i.stateStack.length-1];P.func_=this,P.funcThis_=w,P.arguments_=[],b!=null&&(b instanceof d.Object?P.arguments_=i.arrayPseudoToNative(b):i.throwException(i.TYPE_ERROR,"CreateListFromArrayLike called on non-object")),P.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"apply",y),y=function(w){var b=i.stateStack[i.stateStack.length-1];b.func_=this,b.funcThis_=w,b.arguments_=[];for(var P=1;P<arguments.length;P++)b.arguments_.push(arguments[P]);b.doneExec_=!1},this.setNativeFunctionPrototype(this.FUNCTION,"call",y),this.polyfills_.push("Object.defineProperty(Function.prototype, 'bind',","{configurable: true, writable: true, value:","function bind(oThis) {","if (typeof this !== 'function') {","throw TypeError('What is trying to be bound is not callable');","}","var aArgs   = Array.prototype.slice.call(arguments, 1),","fToBind = this,","fNOP    = function() {},","fBound  = function() {","return fToBind.apply(this instanceof fNOP","? this",": oThis,","aArgs.concat(Array.prototype.slice.call(arguments)));","};","if (this.prototype) {","fNOP.prototype = this.prototype;","}","fBound.prototype = new fNOP();","return fBound;","}","});",""),y=function(){return String(this)},this.setNativeFunctionPrototype(this.FUNCTION,"toString",y),this.setProperty(this.FUNCTION,"toString",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(){return this.valueOf()},this.setNativeFunctionPrototype(this.FUNCTION,"valueOf",y),this.setProperty(this.FUNCTION,"valueOf",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initObject=function(s){var i=this,y;y=function(w){if(w==null)return i.calledWithNew()?this:i.createObjectProto(i.OBJECT_PROTO);if(!(w instanceof d.Object)){var b=i.createObjectProto(i.getPrototype(w));return b.data=w,b}return w},this.OBJECT=this.createNativeFunction(y,!0),this.setProperty(this.OBJECT,"prototype",this.OBJECT_PROTO,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.OBJECT_PROTO,"constructor",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"Object",this.OBJECT,d.NONENUMERABLE_DESCRIPTOR);var R=function(S){S==null&&i.throwException(i.TYPE_ERROR,"Cannot convert '"+S+"' to object")};y=function(w){R(w);var b=w instanceof d.Object?w.properties:w;return i.arrayNativeToPseudo(Object.getOwnPropertyNames(b))},this.setProperty(this.OBJECT,"getOwnPropertyNames",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(w){return R(w),w instanceof d.Object&&(w=w.properties),i.arrayNativeToPseudo(Object.keys(w))},this.setProperty(this.OBJECT,"keys",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(w){return w===null?i.createObjectProto(null):(w instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object prototype may only be an Object or null, not "+w),i.createObjectProto(w))},this.setProperty(this.OBJECT,"create",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var create_ = Object.create;","Object.create = function create(proto, props) {","var obj = create_(proto);","props && Object.defineProperties(obj, props);","return obj;","};","})();",""),y=function(w,b,P){return b=String(b),w instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object.defineProperty called on non-object: "+w),P instanceof d.Object||i.throwException(i.TYPE_ERROR,"Property description must be an object"),w.preventExtensions&&!(b in w.properties)&&i.throwException(i.TYPE_ERROR,"Can't define property '"+b+"', object is not extensible"),i.setProperty(w,b,d.VALUE_IN_DESCRIPTOR,P.properties),w},this.setProperty(this.OBJECT,"defineProperty",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("(function() {","var defineProperty_ = Object.defineProperty;","Object.defineProperty = function defineProperty(obj, prop, d1) {","var d2 = {};","if ('configurable' in d1) d2.configurable = d1.configurable;","if ('enumerable' in d1) d2.enumerable = d1.enumerable;","if ('writable' in d1) d2.writable = d1.writable;","if ('value' in d1) d2.value = d1.value;","if ('get' in d1) d2.get = d1.get;","if ('set' in d1) d2.set = d1.set;","return defineProperty_(obj, prop, d2);","};","})();","Object.defineProperty(Object, 'defineProperties',","{configurable: true, writable: true, value:","function defineProperties(obj, props) {","var keys = Object.keys(props);","for (var i = 0; i < keys.length; i++) {","Object.defineProperty(obj, keys[i], props[keys[i]]);","}","return obj;","}","});",""),y=function(w,b){if(w instanceof d.Object||i.throwException(i.TYPE_ERROR,"Object.getOwnPropertyDescriptor called on non-object: "+w),b=String(b),b in w.properties){var P=Object.getOwnPropertyDescriptor(w.properties,b),W=w.getter[b],X=w.setter[b],ee=i.createObjectProto(i.OBJECT_PROTO);return W||X?(i.setProperty(ee,"get",W),i.setProperty(ee,"set",X)):(i.setProperty(ee,"value",P.value),i.setProperty(ee,"writable",P.writable)),i.setProperty(ee,"configurable",P.configurable),i.setProperty(ee,"enumerable",P.enumerable),ee}},this.setProperty(this.OBJECT,"getOwnPropertyDescriptor",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(w){return R(w),i.getPrototype(w)},this.setProperty(this.OBJECT,"getPrototypeOf",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(w){return!!w&&!w.preventExtensions},this.setProperty(this.OBJECT,"isExtensible",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),y=function(w){return w instanceof d.Object&&(w.preventExtensions=!0),w},this.setProperty(this.OBJECT,"preventExtensions",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),this.setNativeFunctionPrototype(this.OBJECT,"toString",d.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"toLocaleString",d.Object.prototype.toString),this.setNativeFunctionPrototype(this.OBJECT,"valueOf",d.Object.prototype.valueOf),y=function(w){return R(this),this instanceof d.Object?String(w)in this.properties:this.hasOwnProperty(w)},this.setNativeFunctionPrototype(this.OBJECT,"hasOwnProperty",y),y=function(w){return R(this),this instanceof d.Object?Object.prototype.propertyIsEnumerable.call(this.properties,w):this.propertyIsEnumerable(w)},this.setNativeFunctionPrototype(this.OBJECT,"propertyIsEnumerable",y),y=function(w){for(;;){if(w=i.getPrototype(w),!w)return!1;if(w===this)return!0}},this.setNativeFunctionPrototype(this.OBJECT,"isPrototypeOf",y)},d.prototype.initArray=function(s){var i=this,y;y=function(S){if(i.calledWithNew())var w=this;else var w=i.createArray();var b=arguments[0];if(arguments.length===1&&typeof b=="number")isNaN(d.legalArrayLength(b))&&i.throwException(i.RANGE_ERROR,"Invalid array length: "+b),w.properties.length=b;else{for(var P=0;P<arguments.length;P++)w.properties[P]=arguments[P];w.properties.length=P}return w},this.ARRAY=this.createNativeFunction(y,!0),this.ARRAY_PROTO=this.ARRAY.properties.prototype,this.setProperty(s,"Array",this.ARRAY,d.NONENUMERABLE_DESCRIPTOR),y=function(S){return S&&S.class==="Array"},this.setProperty(this.ARRAY,"isArray",this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ARRAY_PROTO,"length",0,{configurable:!1,enumerable:!1,writable:!0}),this.ARRAY_PROTO.class="Array",this.polyfills_.push("(function() {","function createArrayMethod_(f) {","Object.defineProperty(Array.prototype, f.name,","{configurable: true, writable: true, value: f});","}","createArrayMethod_(","function pop() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","len--;","var x = o[len];","delete o[len];","o.length = len;","return x;","}",");","createArrayMethod_(","function push(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","for (var i = 0; i < arguments.length; i++) {","o[len] = arguments[i];","len++;","}","o.length = len;","return len;","}",");","createArrayMethod_(","function shift() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","o.length = 0;","return undefined;","}","var value = o[0];","for (var i = 0; i < len - 1; i++) {","if ((i + 1) in o) {","o[i] = o[i + 1];","} else {","delete o[i];","}","}","delete o[i];","o.length = len - 1;","return value;","}",");","createArrayMethod_(","function unshift(var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 0) {","len = 0;","}","for (var i = len - 1; i >= 0; i--) {","if (i in o) {","o[i + arguments.length] = o[i];","} else {","delete o[i + arguments.length];","}","}","for (var i = 0; i < arguments.length; i++) {","o[i] = arguments[i];","}","return (o.length = len + arguments.length);","}",");","createArrayMethod_(","function reverse() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len || len < 2) {","return o;","}","for (var i = 0; i < len / 2 - 0.5; i++) {","var x = o[i];","var hasX = i in o;","if ((len - i - 1) in o) {","o[i] = o[len - i - 1];","} else {","delete o[i];","}","if (hasX) {","o[len - i - 1] = x;","} else {","delete o[len - i - 1];","}","}","return o;","}",");","createArrayMethod_(","function indexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var n = fromIndex | 0;","if (!len || n >= len) {","return -1;","}","var i = Math.max(n >= 0 ? n : len - Math.abs(n), 0);","while (i < len) {","if (i in o && o[i] === searchElement) {","return i;","}","i++;","}","return -1;","}",");","createArrayMethod_(","function lastIndexOf(searchElement, fromIndex) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","if (!len) {","return -1;","}","var n = len - 1;","if (arguments.length > 1) {","n = fromIndex | 0;","if (n) {","n = (n > 0 || -1) * Math.floor(Math.abs(n));","}","}","var i = n >= 0 ? Math.min(n, len - 1) : len - Math.abs(n);","while (i >= 0) {","if (i in o && o[i] === searchElement) {","return i;","}","i--;","}","return -1;","}",");","createArrayMethod_(","function slice(start, end) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","start = (start >= 0) ? start : Math.max(0, len + start);","if (typeof end !== 'undefined') {","if (end !== Infinity) {","end |= 0;","}","if (end < 0) {","end = len + end;","} else {","end = Math.min(end, len);","}","} else {","end = len;","}","var size = end - start;","var cloned = new Array(size);","for (var i = 0; i < size; i++) {","if ((start + i) in o) {","cloned[i] = o[start + i];","}","}","return cloned;","}",");","createArrayMethod_(","function splice(start, deleteCount, var_args) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","start |= 0;","if (start < 0) {","start = Math.max(len + start, 0);","} else {","start = Math.min(start, len);","}","if (arguments.length < 1) {","deleteCount = len - start;","} else {","deleteCount |= 0;","deleteCount = Math.max(0, Math.min(deleteCount, len - start));","}","var removed = [];","for (var i = start; i < start + deleteCount; i++) {","if (i in o) {","removed.push(o[i]);","} else {","removed.length++;","}","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = start + deleteCount; i < len - deleteCount; i++) {","if ((i + deleteCount) in o) {","o[i] = o[i + deleteCount];","} else {","delete o[i];","}","}","for (var i = len - deleteCount; i < len; i++) {","delete o[i];","}","len -= deleteCount;","var arl = arguments.length - 2;","for (var i = len - 1; i >= start; i--) {","if (i in o) {","o[i + arl] = o[i];","} else {","delete o[i + arl];","}","}","len += arl;","for (var i = 2; i < arguments.length; i++) {","o[start + i - 2] = arguments[i];","}","o.length = len;","return removed;","}",");","createArrayMethod_(","function concat(var_args) {","if (!this) throw TypeError();","var o = Object(this);","var cloned = [];","for (var i = -1; i < arguments.length; i++) {","var value = (i === -1) ? o : arguments[i];","if (Array.isArray(value)) {","for (var j = 0, l = value.length; j < l; j++) {","if (j in value) {","cloned.push(value[j]);","} else {","cloned.length++;","}","}","} else {","cloned.push(value);","}","}","return cloned;","}",");","createArrayMethod_(","function join(opt_separator) {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var sep = typeof opt_separator === 'undefined' ?","',' : ('' + opt_separator);","var str = '';","for (var i = 0; i < len; i++) {","if (i && sep) str += sep;","str += (o[i] === null || o[i] === undefined) ? '' : o[i];","}","return str;","}",");","createArrayMethod_(","function every(callbackfn, thisArg) {","if (!this || typeof callbackfn !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o && !callbackfn.call(t, o[k], k, o)) return false;","k++;","}","return true;","}",");","createArrayMethod_(","function filter(fun, var_args) {","if (this === void 0 || this === null || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var res = [];","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o) {","var val = o[i];","if (fun.call(thisArg, val, i, o)) res.push(val);","}","}","return res;","}",");","createArrayMethod_(","function forEach(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","while (k < len) {","if (k in o) callback.call(t, o[k], k, o);","k++;","}","}",");","createArrayMethod_(","function map(callback, thisArg) {","if (!this || typeof callback !== 'function') throw TypeError();","var t, k = 0;","var o = Object(this), len = o.length >>> 0;","if (arguments.length > 1) t = thisArg;","var a = new Array(len);","while (k < len) {","if (k in o) a[k] = callback.call(t, o[k], k, o);","k++;","}","return a;","}",");","createArrayMethod_(","function reduce(callback /*, initialValue*/) {","if (!this || typeof callback !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = 0, value;","if (arguments.length === 2) {","value = arguments[1];","} else {","while (k < len && !(k in o)) k++;","if (k >= len) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k++];","}","for (; k < len; k++) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function reduceRight(callback /*, initialValue*/) {","if (null === this || 'undefined' === typeof this || 'function' !== typeof callback) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var k = len - 1, value;","if (arguments.length >= 2) {","value = arguments[1];","} else {","while (k >= 0 && !(k in o)) k--;","if (k < 0) {","throw TypeError('Reduce of empty array with no initial value');","}","value = o[k--];","}","for (; k >= 0; k--) {","if (k in o) value = callback(value, o[k], k, o);","}","return value;","}",");","createArrayMethod_(","function some(fun/*, thisArg*/) {","if (!this || typeof fun !== 'function') throw TypeError();","var o = Object(this), len = o.length >>> 0;","var thisArg = arguments.length >= 2 ? arguments[1] : void 0;","for (var i = 0; i < len; i++) {","if (i in o && fun.call(thisArg, o[i], i, o)) return true;","}","return false;","}",");","createArrayMethod_(","function sort(opt_comp) {","if (!this) throw TypeError();","if (typeof opt_comp !== 'function') {","opt_comp = undefined;","}","for (var i = 0; i < this.length; i++) {","var changes = 0;","for (var j = 0; j < this.length - i - 1; j++) {","if (opt_comp ? (opt_comp(this[j], this[j + 1]) > 0) :","(String(this[j]) > String(this[j + 1]))) {","var swap = this[j];","var hasSwap = j in this;","if ((j + 1) in this) {","this[j] = this[j + 1];","} else {","delete this[j];","}","if (hasSwap) {","this[j + 1] = swap;","} else {","delete this[j + 1];","}","changes++;","}","}","if (!changes) break;","}","return this;","}",");","createArrayMethod_(","function toLocaleString() {","if (!this) throw TypeError();","var o = Object(this), len = o.length >>> 0;","var out = [];","for (var i = 0; i < len; i++) {","out[i] = (o[i] === null || o[i] === undefined) ? '' : o[i].toLocaleString();","}","return out.join(',');","}",");","})();","")},d.prototype.initString=function(s){var i=this,y;y=function(b){return b=arguments.length?d.nativeGlobal.String(b):"",i.calledWithNew()?(this.data=b,this):b},this.STRING=this.createNativeFunction(y,!0),this.setProperty(s,"String",this.STRING,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.STRING,"fromCharCode",this.createNativeFunction(String.fromCharCode,!1),d.NONENUMERABLE_DESCRIPTOR);for(var R=["charAt","charCodeAt","concat","indexOf","lastIndexOf","slice","substr","substring","toLocaleLowerCase","toLocaleUpperCase","toLowerCase","toUpperCase","trim"],S=0;S<R.length;S++)this.setNativeFunctionPrototype(this.STRING,R[S],String.prototype[R[S]]);y=function(b,P,W){P=i.pseudoToNative(P),W=i.pseudoToNative(W);try{return String(this).localeCompare(b,P,W)}catch(X){i.throwException(i.ERROR,"localeCompare: "+X.message)}},this.setNativeFunctionPrototype(this.STRING,"localeCompare",y),y=function(b,P,W){var X=String(this);if(P=P?Number(P):void 0,i.isa(b,i.REGEXP)&&(b=b.data,i.maybeThrowRegExp(b,W),i.REGEXP_MODE===2)){if(d.vm){var ee={string:X,separator:b,limit:P},Q="string.split(separator, limit)",ue=i.vmCall(Q,ee,b,W);ue!==d.REGEXP_TIMEOUT&&W(i.arrayNativeToPseudo(ue))}else{var ne=i.createWorker(),ce=i.regExpTimeout(b,ne,W);ne.onmessage=function(_e){clearTimeout(ce),W(i.arrayNativeToPseudo(_e.data))},ne.postMessage(["split",X,b,P])}return}var ue=X.split(b,P);W(i.arrayNativeToPseudo(ue))},this.setAsyncFunctionPrototype(this.STRING,"split",y),y=function(b,P){var W=String(this);if(b=i.isa(b,i.REGEXP)?b.data:new RegExp(b),i.maybeThrowRegExp(b,P),i.REGEXP_MODE===2){if(d.vm){var X={string:W,regexp:b},ee="string.match(regexp)",ce=i.vmCall(ee,X,b,P);ce!==d.REGEXP_TIMEOUT&&P(ce&&i.arrayNativeToPseudo(ce))}else{var Q=i.createWorker(),ne=i.regExpTimeout(b,Q,P);Q.onmessage=function(ue){clearTimeout(ne),P(ue.data&&i.arrayNativeToPseudo(ue.data))},Q.postMessage(["match",W,b])}return}var ce=W.match(b);P(ce&&i.arrayNativeToPseudo(ce))},this.setAsyncFunctionPrototype(this.STRING,"match",y),y=function(b,P){var W=String(this);if(i.isa(b,i.REGEXP)?b=b.data:b=new RegExp(b),i.maybeThrowRegExp(b,P),i.REGEXP_MODE===2){if(d.vm){var X={string:W,regexp:b},ee="string.search(regexp)",Q=i.vmCall(ee,X,b,P);Q!==d.REGEXP_TIMEOUT&&P(Q)}else{var ne=i.createWorker(),ce=i.regExpTimeout(b,ne,P);ne.onmessage=function(ue){clearTimeout(ce),P(ue.data)},ne.postMessage(["search",W,b])}return}P(W.search(b))},this.setAsyncFunctionPrototype(this.STRING,"search",y),y=function(b,P,W){var X=String(this);if(P=String(P),i.isa(b,i.REGEXP)&&(b=b.data,i.maybeThrowRegExp(b,W),i.REGEXP_MODE===2)){if(d.vm){var ee={string:X,substr:b,newSubstr:P},Q="string.replace(substr, newSubstr)",ne=i.vmCall(Q,ee,b,W);ne!==d.REGEXP_TIMEOUT&&W(ne)}else{var ce=i.createWorker(),ue=i.regExpTimeout(b,ce,W);ce.onmessage=function(_e){clearTimeout(ue),W(_e.data)},ce.postMessage(["replace",X,b,P])}return}W(X.replace(b,P))},this.setAsyncFunctionPrototype(this.STRING,"replace",y),this.polyfills_.push("(function() {","var replace_ = String.prototype.replace;","String.prototype.replace = function replace(substr, newSubstr) {","if (typeof newSubstr !== 'function') {","return replace_.call(this, substr, newSubstr);","}","var str = this;","if (substr instanceof RegExp) {","var subs = [];","var m = substr.exec(str);","while (m) {","m.push(m.index, str);","var inject = newSubstr.apply(null, m);","subs.push([m.index, m[0].length, inject]);","m = substr.global ? substr.exec(str) : null;","}","for (var i = subs.length - 1; i >= 0; i--) {","str = str.substring(0, subs[i][0]) + subs[i][2] + str.substring(subs[i][0] + subs[i][1]);","}","} else {","var i = str.indexOf(substr);","if (i !== -1) {","var inject = newSubstr(str.substr(i, substr.length), i, str);","str = str.substring(0, i) + inject + str.substring(i + substr.length);","}","}","return str;","};","})();","")},d.prototype.initBoolean=function(s){var i=this,y;y=function(S){return S=d.nativeGlobal.Boolean(S),i.calledWithNew()?(this.data=S,this):S},this.BOOLEAN=this.createNativeFunction(y,!0),this.setProperty(s,"Boolean",this.BOOLEAN,d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initNumber=function(s){var i=this,y;y=function(b){return b=arguments.length?d.nativeGlobal.Number(b):0,i.calledWithNew()?(this.data=b,this):b},this.NUMBER=this.createNativeFunction(y,!0),this.setProperty(s,"Number",this.NUMBER,d.NONENUMERABLE_DESCRIPTOR);for(var R=["MAX_VALUE","MIN_VALUE","NaN","NEGATIVE_INFINITY","POSITIVE_INFINITY"],S=0;S<R.length;S++)this.setProperty(this.NUMBER,R[S],Number[R[S]],d.NONCONFIGURABLE_READONLY_NONENUMERABLE_DESCRIPTOR);y=function(b){try{return Number(this).toExponential(b)}catch(P){i.throwException(i.ERROR,P.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toExponential",y),y=function(b){try{return Number(this).toFixed(b)}catch(P){i.throwException(i.ERROR,P.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toFixed",y),y=function(b){try{return Number(this).toPrecision(b)}catch(P){i.throwException(i.ERROR,P.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toPrecision",y),y=function(b){try{return Number(this).toString(b)}catch(P){i.throwException(i.ERROR,P.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toString",y),y=function(b,P){b=b?i.pseudoToNative(b):void 0,P=P?i.pseudoToNative(P):void 0;try{return Number(this).toLocaleString(b,P)}catch(W){i.throwException(i.ERROR,"toLocaleString: "+W.message)}},this.setNativeFunctionPrototype(this.NUMBER,"toLocaleString",y)},d.prototype.initDate=function(s){var i=this,y;y=function(b,P){if(!i.calledWithNew())return d.nativeGlobal.Date();var W=[null].concat(Array.from(arguments));return this.data=new(Function.prototype.bind.apply(d.nativeGlobal.Date,W)),this},this.DATE=this.createNativeFunction(y,!0),this.DATE_PROTO=this.DATE.properties.prototype,this.setProperty(s,"Date",this.DATE,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"now",this.createNativeFunction(Date.now,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"parse",this.createNativeFunction(Date.parse,!1),d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.DATE,"UTC",this.createNativeFunction(Date.UTC,!1),d.NONENUMERABLE_DESCRIPTOR);for(var R=["getDate","getDay","getFullYear","getHours","getMilliseconds","getMinutes","getMonth","getSeconds","getTime","getTimezoneOffset","getUTCDate","getUTCDay","getUTCFullYear","getUTCHours","getUTCMilliseconds","getUTCMinutes","getUTCMonth","getUTCSeconds","getYear","setDate","setFullYear","setHours","setMilliseconds","setMinutes","setMonth","setSeconds","setTime","setUTCDate","setUTCFullYear","setUTCHours","setUTCMilliseconds","setUTCMinutes","setUTCMonth","setUTCSeconds","setYear","toDateString","toISOString","toJSON","toGMTString","toLocaleDateString","toLocaleString","toLocaleTimeString","toTimeString","toUTCString"],S=0;S<R.length;S++)y=function(w){return function(b){var P=this.data;P instanceof Date||i.throwException(i.TYPE_ERROR,w+" not called on a Date");for(var W=[],X=0;X<arguments.length;X++)W[X]=i.pseudoToNative(arguments[X]);return P[w].apply(P,W)}}(R[S]),this.setNativeFunctionPrototype(this.DATE,R[S],y)},d.prototype.initRegExp=function(s){var i=this,y;y=function(S,w){if(i.calledWithNew())var b=this;else{if(w===void 0&&i.isa(S,i.REGEXP))return S;var b=i.createObjectProto(i.REGEXP_PROTO)}S=S===void 0?"":String(S),w=w?String(w):"",/^[gmi]*$/.test(w)||i.throwException(i.SYNTAX_ERROR,"Invalid regexp flag: "+w);try{var P=new d.nativeGlobal.RegExp(S,w)}catch(W){i.throwException(i.SYNTAX_ERROR,W.message)}return i.populateRegExp(b,P),b},this.REGEXP=this.createNativeFunction(y,!0),this.REGEXP_PROTO=this.REGEXP.properties.prototype,this.setProperty(s,"RegExp",this.REGEXP,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"global",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"ignoreCase",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"multiline",void 0,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(this.REGEXP.properties.prototype,"source","(?:)",d.READONLY_NONENUMERABLE_DESCRIPTOR),this.polyfills_.push("Object.defineProperty(RegExp.prototype, 'test',","{configurable: true, writable: true, value:","function test(str) {","return !!this.exec(str);","}","});"),y=function(S,w){var b=this.data;if(S=String(S),b.lastIndex=Number(i.getProperty(this,"lastIndex")),i.maybeThrowRegExp(b,w),i.REGEXP_MODE===2){if(d.vm){var P={string:S,regexp:b},W="regexp.exec(string)",ne=i.vmCall(W,P,b,w);ne!==d.REGEXP_TIMEOUT&&(i.setProperty(this,"lastIndex",b.lastIndex),w(ce(ne)))}else{var X=i.createWorker(),ee=i.regExpTimeout(b,X,w),Q=this;X.onmessage=function(ue){clearTimeout(ee),i.setProperty(Q,"lastIndex",ue.data[1]),w(ce(ue.data[0]))},X.postMessage(["exec",b,b.lastIndex,S])}return}var ne=b.exec(S);i.setProperty(this,"lastIndex",b.lastIndex),w(ce(ne));function ce(ue){if(ue){var _e=i.arrayNativeToPseudo(ue);return i.setProperty(_e,"index",ue.index),i.setProperty(_e,"input",ue.input),_e}return null}},this.setAsyncFunctionPrototype(this.REGEXP,"exec",y)},d.prototype.initError=function(s){var i=this;this.ERROR=this.createNativeFunction(function(S){if(i.calledWithNew())var w=this;else var w=i.createObject(i.ERROR);return i.populateError(w,S),w},!0),this.setProperty(s,"Error",this.ERROR,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"message","",d.NONENUMERABLE_DESCRIPTOR),this.setProperty(this.ERROR.properties.prototype,"name","Error",d.NONENUMERABLE_DESCRIPTOR);var y=function(R){var S=i.createNativeFunction(function(w){if(i.calledWithNew())var b=this;else var b=i.createObject(S);return i.populateError(b,w),b},!0);return i.setProperty(S,"prototype",i.createObject(i.ERROR),d.NONENUMERABLE_DESCRIPTOR),i.setProperty(S.properties.prototype,"name",R,d.NONENUMERABLE_DESCRIPTOR),i.setProperty(s,R,S,d.NONENUMERABLE_DESCRIPTOR),S};this.EVAL_ERROR=y("EvalError"),this.RANGE_ERROR=y("RangeError"),this.REFERENCE_ERROR=y("ReferenceError"),this.SYNTAX_ERROR=y("SyntaxError"),this.TYPE_ERROR=y("TypeError"),this.URI_ERROR=y("URIError")},d.prototype.initMath=function(s){var i=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(s,"Math",i,d.NONENUMERABLE_DESCRIPTOR);for(var y=["E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],R=0;R<y.length;R++)this.setProperty(i,y[R],Math[y[R]],d.READONLY_NONENUMERABLE_DESCRIPTOR);for(var S=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan"],R=0;R<S.length;R++)this.setProperty(i,S[R],this.createNativeFunction(Math[S[R]],!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.initJSON=function(s){var i,y=this,R=y.createObjectProto(this.OBJECT_PROTO);this.setProperty(s,"JSON",R,d.NONENUMERABLE_DESCRIPTOR),i=function(w){try{var b=JSON.parse(String(w))}catch(P){y.throwException(y.SYNTAX_ERROR,P.message)}return y.nativeToPseudo(b)},this.setProperty(R,"parse",this.createNativeFunction(i,!1)),i=function(w,b,P){b&&b.class==="Function"?y.throwException(y.TYPE_ERROR,"Function replacer on JSON.stringify not supported"):b&&b.class==="Array"?(b=y.arrayPseudoToNative(b),b=b.filter(function(ee){return typeof ee=="string"||typeof ee=="number"})):b=null,typeof P!="string"&&typeof P!="number"&&(P=void 0);var W=y.pseudoToNative(w);try{var X=JSON.stringify(W,b,P)}catch(ee){y.throwException(y.TYPE_ERROR,ee.message)}return X},this.setProperty(R,"stringify",this.createNativeFunction(i,!1))},d.prototype.isa=function(s,i){if(s==null||!i)return!1;var y=i.properties.prototype;if(s===y)return!0;for(s=this.getPrototype(s);s;){if(s===y)return!0;s=s.proto}return!1},d.prototype.populateRegExp=function(s,i){s.data=new RegExp(i.source,i.flags),this.setProperty(s,"lastIndex",i.lastIndex,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"source",i.source,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"global",i.global,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"ignoreCase",i.ignoreCase,d.READONLY_NONENUMERABLE_DESCRIPTOR),this.setProperty(s,"multiline",i.multiline,d.READONLY_NONENUMERABLE_DESCRIPTOR)},d.prototype.populateError=function(s,i){i&&this.setProperty(s,"message",String(i),d.NONENUMERABLE_DESCRIPTOR);for(var y=[],R=this.stateStack.length-1;R>=0;R--){var S=this.stateStack[R],w=S.node;if(w.type==="CallExpression"){var b=S.func_;b&&y.length&&(y[y.length-1].datumName=this.getProperty(b,"name"))}w.loc&&(!y.length||w.type==="CallExpression")&&y.push({datumLoc:w.loc})}for(var P=String(this.getProperty(s,"name")),W=String(this.getProperty(s,"message")),X=P+": "+W+`
`,R=0;R<y.length;R++){var ee=y[R].datumLoc,Q=y[R].datumName,ne=ee.source+":"+ee.start.line+":"+ee.start.column;Q?X+="  at "+Q+" ("+ne+`)
`:X+="  at "+ne+`
`}this.setProperty(s,"stack",X.trim(),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.createWorker=function(){var s=this.createWorker.blob_;return s||(s=new Blob([d.WORKER_CODE.join(`
`)],{type:"application/javascript"}),this.createWorker.blob_=s),new Worker(URL.createObjectURL(s))},d.prototype.vmCall=function(s,i,y,R){var S={timeout:this.REGEXP_THREAD_TIMEOUT};try{return d.vm.runInNewContext(s,i,S)}catch{R(null),this.throwException(this.ERROR,"RegExp Timeout: "+y)}return d.REGEXP_TIMEOUT},d.prototype.maybeThrowRegExp=function(s,i){var y;if(this.REGEXP_MODE===0)y=!1;else if(this.REGEXP_MODE===1)y=!0;else if(d.vm)y=!0;else if(typeof Worker=="function"&&typeof URL=="function")y=!0;else{try{d.vm=G("vm")}catch{}y=!!d.vm}y||(i(null),this.throwException(this.ERROR,"Regular expressions not supported: "+s))},d.prototype.regExpTimeout=function(s,i,y){var R=this;return setTimeout(function(){i.terminate(),y(null);try{R.throwException(R.ERROR,"RegExp Timeout: "+s)}catch{}},this.REGEXP_THREAD_TIMEOUT)},d.prototype.createObject=function(s){return this.createObjectProto(s&&s.properties.prototype)},d.prototype.createObjectProto=function(s){if(typeof s!="object")throw Error("Non object prototype");var i=new d.Object(s);return this.isa(i,this.ERROR)&&(i.class="Error"),i},d.prototype.createArray=function(){var s=this.createObjectProto(this.ARRAY_PROTO);return this.setProperty(s,"length",0,{configurable:!1,enumerable:!1,writable:!0}),s.class="Array",s},d.prototype.createFunctionBase_=function(s,i){var y=this.createObjectProto(this.FUNCTION_PROTO);if(i){var R=this.createObjectProto(this.OBJECT_PROTO);this.setProperty(y,"prototype",R,d.NONENUMERABLE_DESCRIPTOR),this.setProperty(R,"constructor",y,d.NONENUMERABLE_DESCRIPTOR)}else y.illegalConstructor=!0;return this.setProperty(y,"length",s,d.READONLY_NONENUMERABLE_DESCRIPTOR),y.class="Function",y},d.prototype.createFunction=function(s,i,y){var R=this.createFunctionBase_(s.params.length,!0);R.parentScope=i,R.node=s;var S=s.id?String(s.id.name):y||"";return this.setProperty(R,"name",S,d.READONLY_NONENUMERABLE_DESCRIPTOR),R},d.prototype.createNativeFunction=function(s,i){var y=this.createFunctionBase_(s.length,i);return y.nativeFunc=s,s.id=this.functionCounter_++,this.setProperty(y,"name",s.name,d.READONLY_NONENUMERABLE_DESCRIPTOR),y},d.prototype.createAsyncFunction=function(s){var i=this.createFunctionBase_(s.length,!0);return i.asyncFunc=s,s.id=this.functionCounter_++,this.setProperty(i,"name",s.name,d.READONLY_NONENUMERABLE_DESCRIPTOR),i},d.prototype.nativeToPseudo=function(s){if(s instanceof d.Object)throw Error("Object is already pseudo");if(s==null||s===!0||s===!1||typeof s=="string"||typeof s=="number")return s;if(s instanceof RegExp){var i=this.createObjectProto(this.REGEXP_PROTO);return this.populateRegExp(i,s),i}if(s instanceof Date){var y=this.createObjectProto(this.DATE_PROTO);return y.data=new Date(s.valueOf()),y}if(typeof s=="function"){var R=this,S=function(){var ee=Array.prototype.slice.call(arguments).map(function(ne){return R.pseudoToNative(ne)}),Q=s.apply(R,ee);return R.nativeToPseudo(Q)},w=Object.getOwnPropertyDescriptor(s,"prototype");return this.createNativeFunction(S,!!w)}if(Array.isArray(s)){for(var b=this.createArray(),P=0;P<s.length;P++)P in s&&this.setProperty(b,P,this.nativeToPseudo(s[P]));return b}var W=this.createObjectProto(this.OBJECT_PROTO);for(var X in s)this.setProperty(W,X,this.nativeToPseudo(s[X]));return W},d.prototype.pseudoToNative=function(s,i){if(typeof s!="object"&&typeof s!="function"||s===null)return s;if(!(s instanceof d.Object))throw Error("Object is not pseudo");if(this.isa(s,this.REGEXP)){var y=new RegExp(s.data.source,s.data.flags);return y.lastIndex=s.data.lastIndex,y}if(this.isa(s,this.DATE))return new Date(s.data.valueOf());var R=i||{pseudo:[],native:[]},S=R.pseudo.indexOf(s);if(S!==-1)return R.native[S];R.pseudo.push(s);var w;if(this.isa(s,this.ARRAY)){w=[],R.native.push(w);for(var b=this.getProperty(s,"length"),P=0;P<b;P++)this.hasProperty(s,P)&&(w[P]=this.pseudoToNative(this.getProperty(s,P),R))}else{w={},R.native.push(w);var W;for(var X in s.properties)W=this.pseudoToNative(s.properties[X],R),Object.defineProperty(w,X,{value:W,writable:!0,enumerable:!0,configurable:!0})}return R.pseudo.pop(),R.native.pop(),w},d.prototype.arrayNativeToPseudo=function(s){for(var i=this.createArray(),y=Object.getOwnPropertyNames(s),R=0;R<y.length;R++)this.setProperty(i,y[R],s[y[R]]);return i},d.prototype.arrayPseudoToNative=function(s){var i=[];for(var y in s.properties)i[y]=this.getProperty(s,y);return i.length=d.legalArrayLength(this.getProperty(s,"length"))||0,i},d.prototype.getPrototype=function(s){switch(typeof s){case"number":return this.NUMBER.properties.prototype;case"boolean":return this.BOOLEAN.properties.prototype;case"string":return this.STRING.properties.prototype}return s?s.proto:null},d.prototype.getProperty=function(s,i){if(this.getterStep_)throw Error("Getter not supported in that context");if(i=String(i),s==null&&this.throwException(this.TYPE_ERROR,"Cannot read property '"+i+"' of "+s),typeof s=="object"&&!(s instanceof d.Object))throw TypeError("Expecting native value or pseudo object");if(i==="length"){if(this.isa(s,this.STRING))return String(s).length}else if(i.charCodeAt(0)<64&&this.isa(s,this.STRING)){var y=d.legalArrayIndex(i);if(!isNaN(y)&&y<String(s).length)return String(s)[y]}do if(s.properties&&i in s.properties){var R=s.getter[i];return R?(this.getterStep_=!0,R):s.properties[i]}while(s=this.getPrototype(s))},d.prototype.hasProperty=function(s,i){if(!(s instanceof d.Object))throw TypeError("Primitive data type has no properties");if(i=String(i),i==="length"&&this.isa(s,this.STRING))return!0;if(this.isa(s,this.STRING)){var y=d.legalArrayIndex(i);if(!isNaN(y)&&y<String(s).length)return!0}do if(s.properties&&i in s.properties)return!0;while(s=this.getPrototype(s));return!1},d.prototype.setProperty=function(s,i,y,R){if(this.setterStep_)throw Error("Setter not supported in that context");if(i=String(i),s==null&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+i+"' of "+s),typeof s=="object"&&!(s instanceof d.Object))throw TypeError("Expecting native value or pseudo object");R&&("get"in R||"set"in R)&&("value"in R||"writable"in R)&&this.throwException(this.TYPE_ERROR,"Invalid property descriptor. Cannot both specify accessors and a value or writable attribute");var S=!this.stateStack||this.getScope().strict;if(!(s instanceof d.Object)){S&&this.throwException(this.TYPE_ERROR,"Can't create property '"+i+"' on '"+s+"'");return}if(this.isa(s,this.STRING)){var w=d.legalArrayIndex(i);if(i==="length"||!isNaN(w)&&w<String(s).length){S&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+i+"' of String '"+s.data+"'");return}}if(s.class==="Array"){var b=s.properties.length,P;if(i==="length"){if(R){if(!("value"in R))return;y=R.value}if(y=d.legalArrayLength(y),isNaN(y)&&this.throwException(this.RANGE_ERROR,"Invalid array length"),y<b)for(P in s.properties)P=d.legalArrayIndex(P),!isNaN(P)&&y<=P&&delete s.properties[P]}else isNaN(P=d.legalArrayIndex(i))||(s.properties.length=Math.max(b,P+1))}if(s.preventExtensions&&!(i in s.properties)){S&&this.throwException(this.TYPE_ERROR,"Can't add property '"+i+"', object is not extensible");return}if(R){var W={};"get"in R&&R.get&&(s.getter[i]=R.get,W.get=this.setProperty.placeholderGet_),"set"in R&&R.set&&(s.setter[i]=R.set,W.set=this.setProperty.placeholderSet_),"configurable"in R&&(W.configurable=R.configurable),"enumerable"in R&&(W.enumerable=R.enumerable),"writable"in R&&(W.writable=R.writable,delete s.getter[i],delete s.setter[i]),"value"in R?(W.value=R.value,delete s.getter[i],delete s.setter[i]):y!==d.VALUE_IN_DESCRIPTOR&&(W.value=y,delete s.getter[i],delete s.setter[i]);try{Object.defineProperty(s.properties,i,W)}catch{this.throwException(this.TYPE_ERROR,"Cannot redefine property: "+i)}"get"in R&&!R.get&&delete s.getter[i],"set"in R&&!R.set&&delete s.setter[i]}else{if(y===d.VALUE_IN_DESCRIPTOR)throw ReferenceError("Value not specified");for(var X=s;!(i in X.properties);)if(X=this.getPrototype(X),!X){X=s;break}if(X.setter&&X.setter[i])return this.setterStep_=!0,X.setter[i];if(X.getter&&X.getter[i])S&&this.throwException(this.TYPE_ERROR,"Cannot set property '"+i+"' of object '"+s+"' which only has a getter");else try{s.properties[i]=y}catch{S&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only property '"+i+"' of object '"+s+"'")}}},d.prototype.setProperty.placeholderGet_=function(){throw Error("Placeholder getter")},d.prototype.setProperty.placeholderSet_=function(){throw Error("Placeholder setter")},d.prototype.setNativeFunctionPrototype=function(s,i,y){this.setProperty(s.properties.prototype,i,this.createNativeFunction(y,!1),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.setAsyncFunctionPrototype=function(s,i,y){this.setProperty(s.properties.prototype,i,this.createAsyncFunction(y),d.NONENUMERABLE_DESCRIPTOR)},d.prototype.getScope=function(){var s=this.stateStack[this.stateStack.length-1].scope;if(!s)throw Error("No scope found");return s},d.prototype.createScope=function(s,i){var y=!1;if(i&&i.strict)y=!0;else{var R=s.body&&s.body[0];R&&R.expression&&R.expression.type==="Literal"&&R.expression.value==="use strict"&&(y=!0)}var S=this.createObjectProto(null),w=new d.Scope(i,y,S);return i||this.initGlobal(w.object),this.populateScope_(s,w),w},d.prototype.createSpecialScope=function(s,i){if(!s)throw Error("parentScope required");var y=i||this.createObjectProto(null);return new d.Scope(s,s.strict,y)},d.prototype.getValueFromScope=function(s){for(var i=this.getScope();i&&i!==this.globalScope;){if(s in i.object.properties)return i.object.properties[s];i=i.parentScope}if(i===this.globalScope&&this.hasProperty(i.object,s))return this.getProperty(i.object,s);var y=this.stateStack[this.stateStack.length-1].node;y.type==="UnaryExpression"&&y.operator==="typeof"||this.throwException(this.REFERENCE_ERROR,s+" is not defined")},d.prototype.setValueToScope=function(s,i){for(var y=this.getScope(),R=y.strict;y&&y!==this.globalScope;){if(s in y.object.properties){try{y.object.properties[s]=i}catch{R&&this.throwException(this.TYPE_ERROR,"Cannot assign to read only variable '"+s+"'")}return}y=y.parentScope}if(y===this.globalScope&&(!R||this.hasProperty(y.object,s)))return this.setProperty(y.object,s,i);this.throwException(this.REFERENCE_ERROR,s+" is not defined")},d.prototype.populateScope_=function(s,i){var y;if(s.variableCache_)y=s.variableCache_;else{switch(y=Object.create(null),s.type){case"VariableDeclaration":for(var R=0;R<s.declarations.length;R++)y[s.declarations[R].id.name]=!0;break;case"FunctionDeclaration":y[s.id.name]=s;break;case"BlockStatement":case"CatchClause":case"DoWhileStatement":case"ForInStatement":case"ForStatement":case"IfStatement":case"LabeledStatement":case"Program":case"SwitchCase":case"SwitchStatement":case"TryStatement":case"WithStatement":case"WhileStatement":var S=s.constructor;for(var w in s)if(w!=="loc"){var b=s[w];if(b&&typeof b=="object"){var P;if(Array.isArray(b)){for(var R=0;R<b.length;R++)if(b[R]&&b[R].constructor===S){P=this.populateScope_(b[R],i);for(var w in P)y[w]=P[w]}}else if(b.constructor===S){P=this.populateScope_(b,i);for(var w in P)y[w]=P[w]}}}}s.variableCache_=y}for(var w in y)y[w]===!0?this.setProperty(i.object,w,void 0,d.VARIABLE_DESCRIPTOR):this.setProperty(i.object,w,this.createFunction(y[w],i),d.VARIABLE_DESCRIPTOR);return y},d.prototype.calledWithNew=function(){return this.stateStack[this.stateStack.length-1].isConstructor},d.prototype.getValue=function(s){return s[0]===d.SCOPE_REFERENCE?this.getValueFromScope(s[1]):this.getProperty(s[0],s[1])},d.prototype.setValue=function(s,i){return s[0]===d.SCOPE_REFERENCE?this.setValueToScope(s[1],i):this.setProperty(s[0],s[1],i)},d.prototype.throwException=function(s,i){if(!this.globalScope)throw i===void 0?s:i;if(i===void 0||!(s instanceof d.Object))var y=s;else{var y=this.createObject(s);this.populateError(y,i)}throw this.unwind(d.Completion.THROW,y,void 0),d.STEP_ERROR},d.prototype.unwind=function(s,i,y){if(s===d.Completion.NORMAL)throw TypeError("Should not unwind for NORMAL completions");e:for(var R=this.stateStack;R.length>0;R.pop()){var S=R[R.length-1];switch(S.node.type){case"TryStatement":S.cv={type:s,value:i,label:y};return;case"CallExpression":case"NewExpression":if(s===d.Completion.RETURN){S.value=i;return}else if(s!==d.Completion.THROW)throw Error("Unsyntactic break/continue not rejected by Acorn");break;case"Program":S.done=!0;break e}if(s===d.Completion.BREAK){if(y?S.labels&&S.labels.indexOf(y)!==-1:S.isLoop||S.isSwitch){R.pop();return}}else if(s===d.Completion.CONTINUE&&(y?S.labels&&S.labels.indexOf(y)!==-1:S.isLoop))return}var w;if(this.isa(i,this.ERROR)){var b={EvalError,RangeError,ReferenceError,SyntaxError,TypeError,URIError},P=String(this.getProperty(i,"name")),W=this.getProperty(i,"message").valueOf(),X=b[P]||Error;w=X(W),w.stack=String(this.getProperty(i,"stack"))}else w=String(i);throw this.value=w,w},d.prototype.nodeSummary=function(s){switch(s.type){case"ArrayExpression":return"[...]";case"BinaryExpression":case"LogicalExpression":return this.nodeSummary(s.left)+" "+s.operator+" "+this.nodeSummary(s.right);case"CallExpression":return this.nodeSummary(s.callee)+"(...)";case"ConditionalExpression":return this.nodeSummary(s.test)+" ? "+this.nodeSummary(s.consequent)+" : "+this.nodeSummary(s.alternate);case"Identifier":return s.name;case"Literal":return s.raw;case"MemberExpression":var i=this.nodeSummary(s.object),y=this.nodeSummary(s.property);return s.computed?i+"["+y+"]":i+"."+y;case"NewExpression":return"new "+this.nodeSummary(s.callee)+"(...)";case"ObjectExpression":return"{...}";case"ThisExpression":return"this";case"UnaryExpression":return s.operator+" "+this.nodeSummary(s.argument);case"UpdateExpression":var R=this.nodeSummary(s.argument);return s.prefix?s.operator+R:R+s.operator}return"???"},d.prototype.createTask_=function(s,i){var y=this.stateStack[this.stateStack.length-1],R=Array.from(i),S=R.shift(),w=Math.max(Number(R.shift()||0),0),b=this.newNode(),P,W,X;if(S instanceof d.Object&&S.class==="Function")W=S,b.type="CallExpression",P=y.scope;else{try{X=this.parse_(String(S),"taskCode"+this.taskCodeNumber_++)}catch(ue){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+ue.message)}b.type="EvalProgram_",b.body=X.body;var ee=y.node.arguments[0],Q=ee?ee.start:void 0,ne=ee?ee.end:void 0;d.stripLocations_(b,Q,ne),P=this.globalScope,R.length=0}var ce=new d.Task(W,R,P,b,s?w:-1);return this.scheduleTask_(ce,w),ce.pid},d.prototype.scheduleTask_=function(s,i){s.time=Date.now()+i,this.tasks.push(s),this.tasks.sort(function(y,R){return y.time-R.time})},d.prototype.deleteTask_=function(s){for(var i=0;i<this.tasks.length;i++)if(this.tasks[i].pid==s){this.tasks.splice(i,1);break}},d.prototype.nextTask_=function(){var s=this.tasks[0];if(!s||s.time>Date.now())return null;this.tasks.shift(),s.interval>=0&&this.scheduleTask_(s,s.interval);var i=new d.State(s.node,s.scope);return s.functionRef&&(i.doneCallee_=2,i.funcThis_=this.globalObject,i.func_=s.functionRef,i.doneArgs_=!0,i.arguments_=s.argsArray),i},d.prototype.createGetter_=function(s,i){if(!this.getterStep_)throw Error("Unexpected call to createGetter");this.getterStep_=!1;var y=Array.isArray(i)?i[0]:i,R=this.newNode();R.type="CallExpression";var S=new d.State(R,this.stateStack[this.stateStack.length-1].scope);return S.doneCallee_=2,S.funcThis_=y,S.func_=s,S.doneArgs_=!0,S.arguments_=[],S},d.prototype.createSetter_=function(s,i,y){if(!this.setterStep_)throw Error("Unexpected call to createSetter");this.setterStep_=!1;var R=Array.isArray(i)?i[0]:this.globalObject,S=this.newNode();S.type="CallExpression";var w=new d.State(S,this.stateStack[this.stateStack.length-1].scope);return w.doneCallee_=2,w.funcThis_=R,w.func_=s,w.doneArgs_=!0,w.arguments_=[y],w},d.prototype.boxThis_=function(s){if(s==null)return this.globalObject;if(!(s instanceof d.Object)){var i=this.createObjectProto(this.getPrototype(s));return i.data=s,i}return s},d.prototype.getGlobalScope=function(){return this.globalScope},d.prototype.getStateStack=function(){return this.stateStack},d.prototype.setStateStack=function(s){this.stateStack=s},d.Value,d.State=function(s,i){this.node=s,this.scope=i},d.Scope=function(s,i,y){this.parentScope=s,this.strict=i,this.object=y},d.Object=function(s){this.getter=Object.create(null),this.setter=Object.create(null),this.properties=Object.create(null),this.proto=s},d.Object.prototype.proto=null,d.Object.prototype.class="Object",d.Object.prototype.data=null,d.Object.prototype.toString=function(){if(!d.currentInterpreter_)return"[object Interpreter.Object]";if(!(this instanceof d.Object))return String(this);if(this.class==="Array"){var s=d.toStringCycles_;s.push(this);try{var i=[],y=this.properties.length,R=!1;y>1024&&(y=1e3,R=!0);for(var S=0;S<y;S++){var w=this.properties[S];i[S]=w instanceof d.Object&&s.indexOf(w)!==-1?"...":w}R&&i.push("...")}finally{s.pop()}return i.join(",")}if(this.class==="Error"){var s=d.toStringCycles_;if(s.indexOf(this)!==-1)return"[object Error]";var b,P,W=this;do if("name"in W.properties){b=W.properties.name;break}while(W=W.proto);W=this;do if("message"in W.properties){P=W.properties.message;break}while(W=W.proto);s.push(this);try{b=b&&String(b),P=P&&String(P)}finally{s.pop()}return P?b+": "+P:String(b)}return this.data!==null?String(this.data):"[object "+this.class+"]"},d.Object.prototype.valueOf=function(){return d.currentInterpreter_?this.data===void 0||this.data===null||this.data instanceof RegExp?this:this.data instanceof Date?this.data.valueOf():this.data:this},d.Task=function(s,i,y,R,S){this.functionRef=s,this.argsArray=i,this.scope=y,this.node=R,this.interval=S,this.pid=++d.Task.pid,this.time=0},d.Task.pid=0,d.prototype.stepArrayExpression=function(s,i,y){var R=y.elements,S=i.n_||0;for(i.array_?(this.setProperty(i.array_,S,i.value),S++):(i.array_=this.createArray(),i.array_.properties.length=R.length);S<R.length;){if(R[S])return i.n_=S,new d.State(R[S],i.scope);S++}s.pop(),s[s.length-1].value=i.array_},d.prototype.stepAssignmentExpression=function(s,i,y){if(!i.doneLeft_){i.doneLeft_=!0;var R=new d.State(y.left,i.scope);return R.components=!0,R}if(!i.doneRight_){if(i.leftReference_||(i.leftReference_=i.value),i.doneGetter_&&(i.leftValue_=i.value),!i.doneGetter_&&y.operator!=="="){var S=this.getValue(i.leftReference_);if(i.leftValue_=S,this.getterStep_){i.doneGetter_=!0;var w=S;return this.createGetter_(w,i.leftReference_)}}return i.doneRight_=!0,y.operator==="="&&y.left.type==="Identifier"&&(i.destinationName=y.left.name),new d.State(y.right,i.scope)}if(i.doneSetter_){s.pop(),s[s.length-1].value=i.setterValue_;return}var b=i.leftValue_,P=i.value;switch(y.operator){case"=":b=P;break;case"+=":b+=P;break;case"-=":b-=P;break;case"*=":b*=P;break;case"/=":b/=P;break;case"%=":b%=P;break;case"<<=":b<<=P;break;case">>=":b>>=P;break;case">>>=":b>>>=P;break;case"&=":b&=P;break;case"^=":b^=P;break;case"|=":b|=P;break;default:throw SyntaxError("Unknown assignment expression: "+y.operator)}var W=this.setValue(i.leftReference_,b);if(W)return i.doneSetter_=!0,i.setterValue_=b,this.createSetter_(W,i.leftReference_,b);s.pop(),s[s.length-1].value=b},d.prototype.stepBinaryExpression=function(s,i,y){if(!i.doneLeft_)return i.doneLeft_=!0,new d.State(y.left,i.scope);if(!i.doneRight_)return i.doneRight_=!0,i.leftValue_=i.value,new d.State(y.right,i.scope);s.pop();var R=i.leftValue_,S=i.value,w;switch(y.operator){case"==":w=R==S;break;case"!=":w=R!=S;break;case"===":w=R===S;break;case"!==":w=R!==S;break;case">":w=R>S;break;case">=":w=R>=S;break;case"<":w=R<S;break;case"<=":w=R<=S;break;case"+":w=R+S;break;case"-":w=R-S;break;case"*":w=R*S;break;case"/":w=R/S;break;case"%":w=R%S;break;case"&":w=R&S;break;case"|":w=R|S;break;case"^":w=R^S;break;case"<<":w=R<<S;break;case">>":w=R>>S;break;case">>>":w=R>>>S;break;case"in":S instanceof d.Object||this.throwException(this.TYPE_ERROR,"'in' expects an object, not '"+S+"'"),w=this.hasProperty(S,R);break;case"instanceof":this.isa(S,this.FUNCTION)||this.throwException(this.TYPE_ERROR,"'instanceof' expects an object, not '"+S+"'"),w=R instanceof d.Object?this.isa(R,S):!1;break;default:throw SyntaxError("Unknown binary operator: "+y.operator)}s[s.length-1].value=w},d.prototype.stepBlockStatement=function(s,i,y){var R=i.n_||0,S=y.body[R];if(S)return i.n_=R+1,new d.State(S,i.scope);s.pop()},d.prototype.stepBreakStatement=function(s,i,y){var R=y.label&&y.label.name;this.unwind(d.Completion.BREAK,void 0,R)},d.prototype.evalCodeNumber_=0,d.prototype.stepCallExpression=function(s,i,y){if(!i.doneCallee_){i.doneCallee_=1;var R=new d.State(y.callee,i.scope);return R.components=!0,R}if(i.doneCallee_===1){i.doneCallee_=2;var S=i.value;if(Array.isArray(S)){if(i.func_=this.getValue(S),S[0]===d.SCOPE_REFERENCE?i.directEval_=S[1]==="eval":i.funcThis_=S[0],S=i.func_,this.getterStep_)return i.doneCallee_=1,this.createGetter_(S,i.value)}else i.func_=S;i.arguments_=[],i.n_=0}var S=i.func_;if(!i.doneArgs_){if(i.n_!==0&&i.arguments_.push(i.value),y.arguments[i.n_])return new d.State(y.arguments[i.n_++],i.scope);if(y.type==="NewExpression"){if((!(S instanceof d.Object)||S.illegalConstructor)&&this.throwException(this.TYPE_ERROR,this.nodeSummary(y.callee)+" is not a constructor"),S===this.ARRAY)i.funcThis_=this.createArray();else{var w=S.properties.prototype;(typeof w!="object"||w===null)&&(w=this.OBJECT_PROTO),i.funcThis_=this.createObjectProto(w)}i.isConstructor=!0}i.doneArgs_=!0}if(i.doneExec_)s.pop(),i.isConstructor&&typeof i.value!="object"?s[s.length-1].value=i.funcThis_:s[s.length-1].value=i.value;else{i.doneExec_=!0,S instanceof d.Object||this.throwException(this.TYPE_ERROR,this.nodeSummary(y.callee)+" is not a function");var b=S.node;if(b){for(var P=this.createScope(b.body,S.parentScope),W=this.createArray(),X=0;X<i.arguments_.length;X++)this.setProperty(W,X,i.arguments_[X]);this.setProperty(P.object,"arguments",W);for(var X=0;X<b.params.length;X++){var ee=b.params[X].name,Q=i.arguments_.length>X?i.arguments_[X]:void 0;this.setProperty(P.object,ee,Q)}return P.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),this.setProperty(P.object,"this",i.funcThis_,d.READONLY_DESCRIPTOR),i.value=void 0,new d.State(b.body,P)}else if(S.eval){var ne=i.arguments_[0];if(typeof ne!="string")i.value=ne;else{try{var ce=this.parse_(String(ne),"eval"+this.evalCodeNumber_++)}catch(de){this.throwException(this.SYNTAX_ERROR,"Invalid code: "+de.message)}var ue=this.newNode();ue.type="EvalProgram_",ue.body=ce.body,d.stripLocations_(ue,y.start,y.end);var P=i.directEval_?i.scope:this.globalScope;return P.strict?P=this.createScope(ce,P):this.populateScope_(ce,P),this.value=void 0,new d.State(ue,P)}}else if(S.nativeFunc)i.scope.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),i.value=S.nativeFunc.apply(i.funcThis_,i.arguments_);else if(S.asyncFunc){var _e=this,Pe=function(Me){i.value=Me,_e.paused_=!1},xe=S.asyncFunc.length-1,tt=i.arguments_.concat(new Array(xe)).slice(0,xe);tt.push(Pe),this.paused_=!0,i.scope.strict||(i.funcThis_=this.boxThis_(i.funcThis_)),S.asyncFunc.apply(i.funcThis_,tt);return}else this.throwException(this.TYPE_ERROR,this.nodeSummary(y.callee)+" is not callable")}},d.prototype.stepConditionalExpression=function(s,i,y){var R=i.mode_||0;if(R===0)return i.mode_=1,new d.State(y.test,i.scope);if(R===1){i.mode_=2;var S=!!i.value;if(S&&y.consequent)return new d.State(y.consequent,i.scope);if(!S&&y.alternate)return new d.State(y.alternate,i.scope);this.value=void 0}s.pop(),y.type==="ConditionalExpression"&&(s[s.length-1].value=i.value)},d.prototype.stepContinueStatement=function(s,i,y){var R=y.label&&y.label.name;this.unwind(d.Completion.CONTINUE,void 0,R)},d.prototype.stepDebuggerStatement=function(s,i,y){s.pop()},d.prototype.stepDoWhileStatement=function(s,i,y){if(y.type==="DoWhileStatement"&&i.test_===void 0&&(i.value=!0,i.test_=!0),!i.test_)return i.test_=!0,new d.State(y.test,i.scope);if(!i.value)s.pop();else if(y.body)return i.test_=!1,i.isLoop=!0,new d.State(y.body,i.scope)},d.prototype.stepEmptyStatement=function(s,i,y){s.pop()},d.prototype.stepEvalProgram_=function(s,i,y){var R=i.n_||0,S=y.body[R];if(S)return i.n_=R+1,new d.State(S,i.scope);s.pop(),s[s.length-1].value=this.value},d.prototype.stepExpressionStatement=function(s,i,y){if(!i.done_)return this.value=void 0,i.done_=!0,new d.State(y.expression,i.scope);s.pop(),this.value=i.value},d.prototype.stepForInStatement=function(s,i,y){if(!i.doneInit_&&(i.doneInit_=!0,y.left.declarations&&y.left.declarations[0].init))return i.scope.strict&&this.throwException(this.SYNTAX_ERROR,"for-in loop variable declaration may not have an initializer"),new d.State(y.left,i.scope);if(!i.doneObject_)return i.doneObject_=!0,i.variable_||(i.variable_=i.value),new d.State(y.right,i.scope);if(i.isLoop||(i.isLoop=!0,i.object_=i.value,i.visited_=Object.create(null)),i.name_===void 0)e:for(;;){if(i.object_ instanceof d.Object)for(i.props_||(i.props_=Object.getOwnPropertyNames(i.object_.properties));;){var R=i.props_.shift();if(R===void 0)break;if(Object.prototype.hasOwnProperty.call(i.object_.properties,R)&&!i.visited_[R]&&(i.visited_[R]=!0,!!Object.prototype.propertyIsEnumerable.call(i.object_.properties,R))){i.name_=R;break e}}else if(i.object_!==null&&i.object_!==void 0)for(i.props_||(i.props_=Object.getOwnPropertyNames(i.object_));;){var R=i.props_.shift();if(R===void 0)break;if(i.visited_[R]=!0,!!Object.prototype.propertyIsEnumerable.call(i.object_,R)){i.name_=R;break e}}if(i.object_=this.getPrototype(i.object_),i.props_=null,i.object_===null){s.pop();return}}if(!i.doneVariable_){i.doneVariable_=!0;var S=y.left;if(S.type==="VariableDeclaration")i.variable_=[d.SCOPE_REFERENCE,S.declarations[0].id.name];else{i.variable_=null;var w=new d.State(S,i.scope);return w.components=!0,w}}if(i.variable_||(i.variable_=i.value),!i.doneSetter_){i.doneSetter_=!0;var b=i.name_,P=this.setValue(i.variable_,b);if(P)return this.createSetter_(P,i.variable_,b)}if(i.name_=void 0,i.doneVariable_=!1,i.doneSetter_=!1,y.body)return new d.State(y.body,i.scope)},d.prototype.stepForStatement=function(s,i,y){switch(i.mode_){default:if(i.mode_=1,y.init)return new d.State(y.init,i.scope);break;case 1:if(i.mode_=2,y.test)return new d.State(y.test,i.scope);break;case 2:if(i.mode_=3,y.test&&!i.value)s.pop();else return i.isLoop=!0,new d.State(y.body,i.scope);break;case 3:if(i.mode_=1,y.update)return new d.State(y.update,i.scope);break}},d.prototype.stepFunctionDeclaration=function(s,i,y){s.pop()},d.prototype.stepFunctionExpression=function(s,i,y){s.pop(),i=s[s.length-1];var R=i.scope;y.id&&(R=this.createSpecialScope(R)),i.value=this.createFunction(y,R,i.destinationName),y.id&&this.setProperty(R.object,y.id.name,i.value,d.READONLY_DESCRIPTOR)},d.prototype.stepIdentifier=function(s,i,y){if(s.pop(),i.components){s[s.length-1].value=[d.SCOPE_REFERENCE,y.name];return}var R=this.getValueFromScope(y.name);if(this.getterStep_){var S=R;return this.createGetter_(S,this.globalObject)}s[s.length-1].value=R},d.prototype.stepIfStatement=d.prototype.stepConditionalExpression,d.prototype.stepLabeledStatement=function(s,i,y){s.pop();var R=i.labels||[];R.push(y.label.name);var S=new d.State(y.body,i.scope);return S.labels=R,S},d.prototype.stepLiteral=function(s,i,y){s.pop();var R=y.value;if(R instanceof RegExp){var S=this.createObjectProto(this.REGEXP_PROTO);this.populateRegExp(S,R),R=S}s[s.length-1].value=R},d.prototype.stepLogicalExpression=function(s,i,y){if(y.operator!=="&&"&&y.operator!=="||")throw SyntaxError("Unknown logical operator: "+y.operator);if(!i.doneLeft_)return i.doneLeft_=!0,new d.State(y.left,i.scope);if(i.doneRight_)s.pop(),s[s.length-1].value=i.value;else if(y.operator==="&&"&&!i.value||y.operator==="||"&&i.value)s.pop(),s[s.length-1].value=i.value;else return i.doneRight_=!0,new d.State(y.right,i.scope)},d.prototype.stepMemberExpression=function(s,i,y){if(!i.doneObject_)return i.doneObject_=!0,new d.State(y.object,i.scope);var R;if(!y.computed)i.object_=i.value,R=y.property.name;else if(i.doneProperty_)R=i.value;else return i.object_=i.value,i.doneProperty_=!0,new d.State(y.property,i.scope);if(s.pop(),i.components)s[s.length-1].value=[i.object_,R];else{var S=this.getProperty(i.object_,R);if(this.getterStep_){var w=S;return this.createGetter_(w,i.object_)}s[s.length-1].value=S}},d.prototype.stepNewExpression=d.prototype.stepCallExpression,d.prototype.stepObjectExpression=function(s,i,y){var R=i.n_||0,S=y.properties[R];if(!i.object_)i.object_=this.createObjectProto(this.OBJECT_PROTO),i.properties_=Object.create(null);else{var w=i.destinationName;i.properties_[w]||(i.properties_[w]={}),i.properties_[w][S.kind]=i.value,i.n_=++R,S=y.properties[R]}if(S){var b=S.key;if(b.type==="Identifier")var w=b.name;else if(b.type==="Literal")var w=b.value;else throw SyntaxError("Unknown object structure: "+b.type);return i.destinationName=w,new d.State(S.value,i.scope)}for(var b in i.properties_){var P=i.properties_[b];if("get"in P||"set"in P){var W={configurable:!0,enumerable:!0,get:P.get,set:P.set};this.setProperty(i.object_,b,d.VALUE_IN_DESCRIPTOR,W)}else this.setProperty(i.object_,b,P.init)}s.pop(),s[s.length-1].value=i.object_},d.prototype.stepProgram=function(s,i,y){var R=y.body.shift();if(R)return i.done=!1,new d.State(R,i.scope);i.done=!0},d.prototype.stepReturnStatement=function(s,i,y){if(y.argument&&!i.done_)return i.done_=!0,new d.State(y.argument,i.scope);this.unwind(d.Completion.RETURN,i.value,void 0)},d.prototype.stepSequenceExpression=function(s,i,y){var R=i.n_||0,S=y.expressions[R];if(S)return i.n_=R+1,new d.State(S,i.scope);s.pop(),s[s.length-1].value=i.value},d.prototype.stepSwitchStatement=function(s,i,y){if(!i.test_)return i.test_=1,new d.State(y.discriminant,i.scope);for(i.test_===1&&(i.test_=2,i.switchValue_=i.value,i.defaultCase_=-1);;){var R=i.index_||0,S=y.cases[R];if(!i.matched_&&S&&!S.test){i.defaultCase_=R,i.index_=R+1;continue}if(!S&&!i.matched_&&i.defaultCase_!==-1){i.matched_=!0,i.index_=i.defaultCase_;continue}if(S){if(!i.matched_&&!i.tested_&&S.test)return i.tested_=!0,new d.State(S.test,i.scope);if(i.matched_||i.value===i.switchValue_){i.matched_=!0;var w=i.n_||0;if(S.consequent[w])return i.isSwitch=!0,i.n_=w+1,new d.State(S.consequent[w],i.scope)}i.tested_=!1,i.n_=0,i.index_=R+1}else{s.pop();return}}},d.prototype.stepThisExpression=function(s,i,y){s.pop(),s[s.length-1].value=this.getValueFromScope("this")},d.prototype.stepThrowStatement=function(s,i,y){if(i.done_)this.throwException(i.value);else return i.done_=!0,new d.State(y.argument,i.scope)},d.prototype.stepTryStatement=function(s,i,y){if(!i.doneBlock_)return i.doneBlock_=!0,new d.State(y.block,i.scope);if(i.cv&&i.cv.type===d.Completion.THROW&&!i.doneHandler_&&y.handler){i.doneHandler_=!0;var R=this.createSpecialScope(i.scope);return this.setProperty(R.object,y.handler.param.name,i.cv.value),i.cv=void 0,new d.State(y.handler.body,R)}if(!i.doneFinalizer_&&y.finalizer)return i.doneFinalizer_=!0,new d.State(y.finalizer,i.scope);s.pop(),i.cv&&this.unwind(i.cv.type,i.cv.value,i.cv.label)},d.prototype.stepUnaryExpression=function(s,i,y){if(!i.done_){i.done_=!0;var R=new d.State(y.argument,i.scope);return R.components=y.operator==="delete",R}s.pop();var S=i.value;switch(y.operator){case"-":S=-S;break;case"+":S=+S;break;case"!":S=!S;break;case"~":S=~S;break;case"delete":var w=!0;if(Array.isArray(S)){var b=S[0];b===d.SCOPE_REFERENCE&&(b=i.scope);var P=String(S[1]);try{delete b.properties[P]}catch{i.scope.strict?this.throwException(this.TYPE_ERROR,"Cannot delete property '"+P+"' of '"+b+"'"):w=!1}}S=w;break;case"typeof":S=S&&S.class==="Function"?"function":typeof S;break;case"void":S=void 0;break;default:throw SyntaxError("Unknown unary operator: "+y.operator)}s[s.length-1].value=S},d.prototype.stepUpdateExpression=function(s,i,y){if(!i.doneLeft_){i.doneLeft_=!0;var R=new d.State(y.argument,i.scope);return R.components=!0,R}if(i.leftSide_||(i.leftSide_=i.value),i.doneGetter_&&(i.leftValue_=i.value),!i.doneGetter_){var w=this.getValue(i.leftSide_);if(i.leftValue_=w,this.getterStep_){i.doneGetter_=!0;var S=w;return this.createGetter_(S,i.leftSide_)}}if(i.doneSetter_){s.pop(),s[s.length-1].value=i.setterValue_;return}var w=Number(i.leftValue_),b;if(y.operator==="++")b=w+1;else if(y.operator==="--")b=w-1;else throw SyntaxError("Unknown update expression: "+y.operator);var P=y.prefix?b:w,W=this.setValue(i.leftSide_,b);if(W)return i.doneSetter_=!0,i.setterValue_=P,this.createSetter_(W,i.leftSide_,b);s.pop(),s[s.length-1].value=P},d.prototype.stepVariableDeclaration=function(s,i,y){var R=y.declarations,S=i.n_||0,w=R[S];for(i.init_&&w&&(this.setValueToScope(w.id.name,i.value),i.init_=!1,w=R[++S]);w;){if(w.init)return i.n_=S,i.init_=!0,i.destinationName=w.id.name,new d.State(w.init,i.scope);w=R[++S]}s.pop()},d.prototype.stepWithStatement=function(s,i,y){if(!i.doneObject_)return i.doneObject_=!0,new d.State(y.object,i.scope);s.pop();var R=this.createSpecialScope(i.scope,i.value);return new d.State(y.body,R)},d.prototype.stepWhileStatement=d.prototype.stepDoWhileStatement,d.nativeGlobal.Interpreter=d,d.prototype.step=d.prototype.step,d.prototype.run=d.prototype.run,d.prototype.appendCode=d.prototype.appendCode,d.prototype.createObject=d.prototype.createObject,d.prototype.createObjectProto=d.prototype.createObjectProto,d.prototype.createAsyncFunction=d.prototype.createAsyncFunction,d.prototype.createNativeFunction=d.prototype.createNativeFunction,d.prototype.getProperty=d.prototype.getProperty,d.prototype.setProperty=d.prototype.setProperty,d.prototype.getStatus=d.prototype.getStatus,d.prototype.nativeToPseudo=d.prototype.nativeToPseudo,d.prototype.pseudoToNative=d.prototype.pseudoToNative,d.prototype.getGlobalScope=d.prototype.getGlobalScope,d.prototype.getStateStack=d.prototype.getStateStack,d.prototype.setStateStack=d.prototype.setStateStack,d.VALUE_IN_DESCRIPTOR=d.VALUE_IN_DESCRIPTOR,d.Status=d.Status,j.exports={Interpreter:d}},"./original-repo/acorn.js":function(j,B){(function(G,d){return d(B)})(this,function(G){G.version="0.5.0";var d,s="",i,y;G.parse=function(M,$){return s=String(M),i=s.length,S($),dn(),On(d.program)};var R={strictSemicolons:!1,allowTrailingCommas:!0,forbidReserved:!1,allowReturnOutsideFunction:!1,locations:!1,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null};function S(M){d=M||{};for(var $ in R)Object.prototype.hasOwnProperty.call(d,$)||(d[$]=R[$]);y=d.sourceFile}var w=function(M,$){for(var H=1,Y=0;;){fr.lastIndex=Y;var Ee=fr.exec(M);if(Ee&&Ee.index<$)++H,Y=Ee.index+Ee[0].length;else break}return{line:H,column:$-Y}},b=0,P=0,W=0,X,ee,Q,ne,ce,ue,_e,Pe=0,xe=0,tt,Me,de,Fe;function fe(M,$){var H=w(s,M);$+=" ("+H.line+":"+H.column+")";var Y=new SyntaxError($);throw Y.pos=M,Y.loc=H,Y.raisedAt=b,Y}var Ct=[],je={type:"num"},St={type:"regexp"},yt={type:"string"},Xe={type:"name"},st={type:"eof"},ut={keyword:"break"},gt={keyword:"case",beforeExpr:!0},lt={keyword:"catch"},At={keyword:"continue"},Pt={keyword:"debugger"},Ut={keyword:"default"},It={keyword:"do",isLoop:!0},ft={keyword:"else",beforeExpr:!0},ye={keyword:"finally"},me={keyword:"for",isLoop:!0},ve={keyword:"function"},Ne={keyword:"if"},Re={keyword:"return",beforeExpr:!0},Be={keyword:"switch"},pt={keyword:"throw",beforeExpr:!0},Ce={keyword:"try"},Ie={keyword:"var"},nt={keyword:"while",isLoop:!0},Jt={keyword:"with"},qt={keyword:"new",beforeExpr:!0},Kt={keyword:"this"},Ke={keyword:"null",atomValue:null},ct={keyword:"true",atomValue:!0},Lt={keyword:"false",atomValue:!1},Ft={keyword:"in",binop:7,beforeExpr:!0},Qt={break:ut,case:gt,catch:lt,continue:At,debugger:Pt,default:Ut,do:It,else:ft,finally:ye,for:me,function:ve,if:Ne,return:Re,switch:Be,throw:pt,try:Ce,var:Ie,while:nt,with:Jt,null:Ke,true:ct,false:Lt,new:qt,in:Ft,instanceof:{keyword:"instanceof",binop:7,beforeExpr:!0},this:Kt,typeof:{keyword:"typeof",prefix:!0,beforeExpr:!0},void:{keyword:"void",prefix:!0,beforeExpr:!0},delete:{keyword:"delete",prefix:!0,beforeExpr:!0}},vr={type:"[",beforeExpr:!0},gr={type:"]"},er={type:"{",beforeExpr:!0},Bt={type:"}"},bt={type:"(",beforeExpr:!0},vt={type:")"},wt={type:",",beforeExpr:!0},_t={type:";",beforeExpr:!0},tr={type:":",beforeExpr:!0},Ir={type:"."},kr={type:"?",beforeExpr:!0},Dr={binop:10,beforeExpr:!0},Mr={isAssign:!0,beforeExpr:!0},kt={isAssign:!0,beforeExpr:!0},Zr={postfix:!0,prefix:!0,isUpdate:!0},Ur={prefix:!0,beforeExpr:!0},Lr={binop:1,beforeExpr:!0},Fr={binop:2,beforeExpr:!0},Qr={binop:3,beforeExpr:!0},en={binop:4,beforeExpr:!0},tn={binop:5,beforeExpr:!0},rn={binop:6,beforeExpr:!0},nn={binop:7,beforeExpr:!0},an={binop:8,beforeExpr:!0},on={binop:9,prefix:!0,beforeExpr:!0},sn={binop:10,beforeExpr:!0};function ur(M){for(var $=M.split(" "),H=Object.create(null),Y=0;Y<$.length;Y++)H[$[Y]]=!0;return function(Ee){return H[Ee]||!1}}var un=ur("class enum extends super const export import"),jr=ur("implements interface let package private protected public static yield"),cr=ur("eval arguments"),cn=ur("break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this"),ln=/[\u1680\u180e\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Br="ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԧԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠࢢ-ࢬऄ-हऽॐक़-ॡॱ-ॷॹ-ॿঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-ళవ-హఽౘౙౠౡಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൠൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏼᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛮ-ᛰᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢨᢪᢰ-ᣵᤀ-ᤜᥐ-ᥭᥰ-ᥴᦀ-ᦫᧁ-ᧇᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎⅠ-ↈⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々-〇〡-〩〱-〵〸-〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿌ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚗꚠ-ꛯꜗ-ꜟꜢ-ꞈꞋ-ꞎꞐ-ꞓꞠ-Ɦꟸ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꪀ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꯀ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ",fn="̀-ͯ҃-֑҇-ׇֽֿׁׂׅׄؐ-ؚؠ-ىٲ-ۓۧ-ۨۻ-ۼܰ-݊ࠀ-ࠔࠛ-ࠣࠥ-ࠧࠩ-࠭ࡀ-ࡗࣤ-ࣾऀ-ःऺ-़ा-ॏ॑-ॗॢ-ॣ०-९ঁ-ঃ়া-ৄেৈৗয়-ৠਁ-ਃ਼ਾ-ੂੇੈੋ-੍ੑ੦-ੱੵઁ-ઃ઼ા-ૅે-ૉો-્ૢ-ૣ૦-૯ଁ-ଃ଼ା-ୄେୈୋ-୍ୖୗୟ-ୠ୦-୯ஂா-ூெ-ைொ-்ௗ௦-௯ఁ-ఃె-ైొ-్ౕౖౢ-ౣ౦-౯ಂಃ಼ಾ-ೄೆ-ೈೊ-್ೕೖೢ-ೣ೦-೯ംഃെ-ൈൗൢ-ൣ൦-൯ංඃ්ා-ුූෘ-ෟෲෳิ-ฺเ-ๅ๐-๙ິ-ູ່-ໍ໐-໙༘༙༠-༩༹༵༷ཁ-ཇཱ-྄྆-྇ྍ-ྗྙ-ྼ࿆က-ဩ၀-၉ၧ-ၭၱ-ၴႂ-ႍႏ-ႝ፝-፟ᜎ-ᜐᜠ-ᜰᝀ-ᝐᝲᝳក-ឲ៝០-៩᠋-᠍᠐-᠙ᤠ-ᤫᤰ-᤻ᥑ-ᥭᦰ-ᧀᧈ-ᧉ᧐-᧙ᨀ-ᨕᨠ-ᩓ᩠-᩿᩼-᪉᪐-᪙ᭆ-ᭋ᭐-᭙᭫-᭳᮰-᮹᯦-᯳ᰀ-ᰢ᱀-᱉ᱛ-ᱽ᳐-᳒ᴀ-ᶾḁ-ἕ‌‍‿⁀⁔⃐-⃥⃜⃡-⃰ⶁ-ⶖⷠ-ⷿ〡-〨゙゚Ꙁ-ꙭꙴ-꙽ꚟ꛰-꛱ꟸ-ꠀ꠆ꠋꠣ-ꠧꢀ-ꢁꢴ-꣄꣐-꣙ꣳ-ꣷ꤀-꤉ꤦ-꤭ꤰ-ꥅꦀ-ꦃ꦳-꧀ꨀ-ꨧꩀ-ꩁꩌ-ꩍ꩐-꩙ꩻꫠ-ꫩꫲ-ꫳꯀ-ꯡ꯬꯭꯰-꯹ﬠ-ﬨ︀-️︠-︦︳︴﹍-﹏０-９＿",$r=new RegExp("["+Br+"]"),pn=new RegExp("["+Br+fn+"]"),lr=/[\n\r\u2028\u2029]/,fr=/\r\n|[\n\r\u2028\u2029]/g,pr=function(M){return M<65?M===36:M<91?!0:M<97?M===95:M<123?!0:M>=170&&$r.test(String.fromCharCode(M))},zr=function(M){return M<48?M===36:M<58?!0:M<65?!1:M<91?!0:M<97?M===95:M<123?!0:M>=170&&pn.test(String.fromCharCode(M))};function Dt(){this.line=ue,this.column=b-_e}function dn(){ue=1,b=_e=0,ce=!0,rr()}function ke(M,$){W=b,d.locations&&(ee=new Dt),Q=M,rr(),ne=$,ce=M.beforeExpr}function hn(){var M=d.onComment&&d.locations&&new Dt,$=b,H=s.indexOf("*/",b+=2);if(H===-1&&fe(b-2,"Unterminated comment"),b=H+2,d.locations){fr.lastIndex=$;for(var Y;(Y=fr.exec(s))&&Y.index<b;)++ue,_e=Y.index+Y[0].length}d.onComment&&d.onComment(!0,s.slice($+2,H),$,b,M,d.locations&&new Dt)}function mr(){for(var M=b,$=d.onComment&&d.locations&&new Dt,H=s.charCodeAt(b+=2);b<i&&H!==10&&H!==13&&H!==8232&&H!==8233;)++b,H=s.charCodeAt(b);d.onComment&&d.onComment(!1,s.slice(M+2,b),M,b,$,d.locations&&new Dt)}function rr(){for(;b<i;){var M=s.charCodeAt(b);if(M===32)++b;else if(M===13){++b;var $=s.charCodeAt(b);$===10&&++b,d.locations&&(++ue,_e=b)}else if(M===10||M===8232||M===8233)++b,d.locations&&(++ue,_e=b);else if(M>8&&M<14)++b;else if(M===47){var $=s.charCodeAt(b+1);if($===42)hn();else if($===47)mr();else break}else if(M===160)++b;else if(M>=5760&&ln.test(String.fromCharCode(M)))++b;else break}}function En(){var M=s.charCodeAt(b+1);M>=48&&M<=57?Vr(!0):(++b,ke(Ir))}function yn(){var M=s.charCodeAt(b+1);ce?(++b,Gr()):M===61?De(kt,2):De(Dr,1)}function vn(){var M=s.charCodeAt(b+1);M===61?De(kt,2):De(sn,1)}function gn(M){var $=s.charCodeAt(b+1);$===M?De(M===124?Lr:Fr,2):$===61?De(kt,2):De(M===124?Qr:tn,1)}function mn(){var M=s.charCodeAt(b+1);M===61?De(kt,2):De(en,1)}function bn(M){var $=s.charCodeAt(b+1);if($===M){if($===45&&s.charCodeAt(b+2)===62&&lr.test(s.slice(xe,b))){b+=3,mr(),rr(),$t();return}De(Zr,2)}else $===61?De(kt,2):De(on,1)}function _n(M){var $=s.charCodeAt(b+1),H=1;if($===M){H=M===62&&s.charCodeAt(b+2)===62?3:2,s.charCodeAt(b+H)===61?De(kt,H+1):De(an,H);return}if($===33&&M===60&&s.charCodeAt(b+2)===45&&s.charCodeAt(b+3)===45){b+=4,mr(),rr(),$t();return}$===61&&(H=s.charCodeAt(b+2)===61?3:2),De(nn,H)}function Rn(M){var $=s.charCodeAt(b+1);$===61?De(rn,s.charCodeAt(b+2)===61?3:2):De(M===61?Mr:Ur,1)}function Sn(M){switch(M){case 46:return En();case 40:return++b,ke(bt);case 41:return++b,ke(vt);case 59:return++b,ke(_t);case 44:return++b,ke(wt);case 91:return++b,ke(vr);case 93:return++b,ke(gr);case 123:return++b,ke(er);case 125:return++b,ke(Bt);case 58:return++b,ke(tr);case 63:return++b,ke(kr);case 48:var $=s.charCodeAt(b+1);if($===120||$===88)return Tn();case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Vr(!1);case 34:case 39:return wn(M);case 47:return yn();case 37:case 42:return vn();case 124:case 38:return gn(M);case 94:return mn();case 43:case 45:return bn(M);case 60:case 62:return _n(M);case 61:case 33:return Rn(M);case 126:return De(Ur,1)}return!1}function $t(M){if(M?b=P+1:P=b,d.locations&&(X=new Dt),M)return Gr();if(b>=i)return ke(st);var $=s.charCodeAt(b);if(pr($)||$===92)return Hr();var H=Sn($);if(H===!1){var Y=String.fromCharCode($);if(Y==="\\"||$r.test(Y))return Hr();fe(b,"Unexpected character '"+Y+"'")}}function De(M,$){var H=s.slice(b,b+$);b+=$,ke(M,H)}function Gr(){for(var M,$,H=b;;){b>=i&&fe(H,"Unterminated regexp");var Y=s.charAt(b);if(lr.test(Y)&&fe(H,"Unterminated regexp"),M)M=!1;else{if(Y==="[")$=!0;else if(Y==="]"&&$)$=!1;else if(Y==="/"&&!$)break;M=Y==="\\"}++b}var Ee=s.slice(H,b);++b;var pe=Wr();pe&&!/^[gmi]*$/.test(pe)&&fe(H,"Invalid regexp flag");try{var ge=new RegExp(Ee,pe)}catch(Te){throw Te instanceof SyntaxError&&fe(H,Te.message),Te}ke(St,ge)}function nr(M,$){for(var H=b,Y=0,Ee=$===void 0?1/0:$,pe=0;pe<Ee;++pe){var ge=s.charCodeAt(b),Te;if(ge>=97?Te=ge-97+10:ge>=65?Te=ge-65+10:ge>=48&&ge<=57?Te=ge-48:Te=1/0,Te>=M)break;++b,Y=Y*M+Te}return b===H||$!==void 0&&b-H!==$?null:Y}function Tn(){b+=2;var M=nr(16);M===null&&fe(P+2,"Expected hexadecimal number"),pr(s.charCodeAt(b))&&fe(b,"Identifier directly after number"),ke(je,M)}function Vr(M){var $=b,H=!1,Y=s.charCodeAt(b)===48;!M&&nr(10)===null&&fe($,"Invalid number"),s.charCodeAt(b)===46&&(++b,nr(10),H=!0);var Ee=s.charCodeAt(b);(Ee===69||Ee===101)&&(Ee=s.charCodeAt(++b),(Ee===43||Ee===45)&&++b,nr(10)===null&&fe($,"Invalid number"),H=!0),pr(s.charCodeAt(b))&&fe(b,"Identifier directly after number");var pe=s.slice($,b),ge;H?ge=parseFloat(pe):!Y||pe.length===1?ge=parseInt(pe,10):/[89]/.test(pe)||Fe?fe($,"Invalid number"):ge=parseInt(pe,8),ke(je,ge)}function wn(M){b++;for(var $="";;){b>=i&&fe(P,"Unterminated string constant");var H=s.charCodeAt(b);if(H===M){++b,ke(yt,$);return}if(H===92){H=s.charCodeAt(++b);var Y=/^[0-7]+/.exec(s.slice(b,b+3));for(Y&&(Y=Y[0]);Y&&parseInt(Y,8)>255;)Y=Y.slice(0,-1);if(Y==="0"&&(Y=null),++b,Y)Fe&&fe(b-2,"Octal literal in strict mode"),$+=String.fromCharCode(parseInt(Y,8)),b+=Y.length-1;else switch(H){case 110:$+=`
`;break;case 114:$+="\r";break;case 120:$+=String.fromCharCode(dr(2));break;case 117:$+=String.fromCharCode(dr(4));break;case 85:$+=String.fromCharCode(dr(8));break;case 116:$+="	";break;case 98:$+="\b";break;case 118:$+="\v";break;case 102:$+="\f";break;case 48:$+="\0";break;case 13:s.charCodeAt(b)===10&&++b;case 10:d.locations&&(_e=b,++ue);break;default:$+=String.fromCharCode(H);break}}else(H===13||H===10||H===8232||H===8233)&&fe(P,"Unterminated string constant"),$+=String.fromCharCode(H),++b}}function dr(M){var $=nr(16,M);return $===null&&fe(P,"Bad character escape sequence"),$}var zt;function Wr(){zt=!1;for(var M,$=!0,H=b;;){var Y=s.charCodeAt(b);if(zr(Y))zt&&(M+=s.charAt(b)),++b;else if(Y===92){zt||(M=s.slice(H,b)),zt=!0,s.charCodeAt(++b)!==117&&fe(b,"Expecting Unicode escape sequence \\uXXXX"),++b;var Ee=dr(4),pe=String.fromCharCode(Ee);pe||fe(b-1,"Invalid Unicode escape"),($?pr(Ee):zr(Ee))||fe(b-4,"Invalid Unicode escape"),M+=pe}else break;$=!1}return zt?M:s.slice(H,b)}function Hr(){var M=Wr(),$=Xe;!zt&&cn(M)&&($=Qt[M]),ke($,M)}function be(){Pe=P,xe=W,tt=ee,$t()}function br(M){if(Fe=M,b=P,d.locations)for(;b<_e;)_e=s.lastIndexOf(`
`,_e-2)+1,--ue;rr(),$t()}function Yr(){this.type=null,this.start=P,this.end=null}function Xr(){this.start=X,this.end=null,y&&(this.source=y)}function ze(){var M=new Yr;return d.locations&&(M.loc=new Xr),d.directSourceFile&&(M.sourceFile=d.directSourceFile),d.ranges&&(M.range=[P,0]),M}function Nt(M){var $=new Yr;return $.start=M.start,d.locations&&($.loc=new Xr,$.loc.start=M.loc.start),d.ranges&&($.range=[M.range[0],0]),$}function he(M,$){return M.type=$,M.end=xe,d.locations&&(M.loc.end=tt),d.ranges&&(M.range[1]=xe),M}function _r(M){return M.type==="ExpressionStatement"&&M.expression.type==="Literal"&&M.expression.value==="use strict"}function we(M){return Q===M?(be(),!0):!1}function hr(){return!d.strictSemicolons&&(Q===st||Q===Bt||lr.test(s.slice(xe,P)))}function Mt(){!we(_t)&&!hr()&&Rt()}function Ae(M){Q===M?be():Rt()}function Rt(){fe(P,"Unexpected token")}function Er(M){M.type!=="Identifier"&&M.type!=="MemberExpression"&&fe(M.start,"Assigning to rvalue"),Fe&&M.type==="Identifier"&&cr(M.name)&&fe(M.start,"Assigning to "+M.name+" in strict mode")}function On(M){Pe=xe=b,d.locations&&(tt=new Dt),Me=Fe=!1,de=[],$t();var $=M||ze(),H=!0;for(M||($.body=[]);Q!==st;){var Y=ht();$.body.push(Y),H&&_r(Y)&&br(!0),H=!1}return he($,"Program")}var Rr={kind:"loop"},Nn={kind:"switch"};function ht(){(Q===Dr||Q===kt&&ne==="/=")&&$t(!0);var M=Q,$=ze();switch(M){case ut:case At:be();var H=M===ut;we(_t)||hr()?$.label=null:Q!==Xe?Rt():($.label=xt(),Mt());for(var Y=0;Y<de.length;++Y){var Ee=de[Y];if(($.label===null||Ee.name===$.label.name)&&(Ee.kind!==null&&(H||Ee.kind==="loop")||$.label&&H))break}return Y===de.length&&fe($.start,"Unsyntactic "+M.keyword),he($,H?"BreakStatement":"ContinueStatement");case Pt:return be(),Mt(),he($,"DebuggerStatement");case It:return be(),de.push(Rr),$.body=ht(),de.pop(),Ae(nt),$.test=ar(),Mt(),he($,"DoWhileStatement");case me:if(be(),de.push(Rr),Ae(bt),Q===_t)return Sr($,null);if(Q===Ie){var pe=ze();return be(),qr(pe,!0),he(pe,"VariableDeclaration"),pe.declarations.length===1&&we(Ft)?Jr($,pe):Sr($,pe)}var pe=Ve(!1,!0);return we(Ft)?(Er(pe),Jr($,pe)):Sr($,pe);case ve:return be(),xr($,!0);case Ne:return be(),$.test=ar(),$.consequent=ht(),$.alternate=we(ft)?ht():null,he($,"IfStatement");case Re:return!Me&&!d.allowReturnOutsideFunction&&fe(P,"'return' outside of function"),be(),we(_t)||hr()?$.argument=null:($.argument=Ve(),Mt()),he($,"ReturnStatement");case Be:be(),$.discriminant=ar(),$.cases=[],Ae(er),de.push(Nn);for(var ge,Te;Q!==Bt;)if(Q===gt||Q===Ut){var sr=Q===gt;ge&&he(ge,"SwitchCase"),$.cases.push(ge=ze()),ge.consequent=[],be(),sr?ge.test=Ve():(Te&&fe(Pe,"Multiple default clauses"),Te=!0,ge.test=null),Ae(tr)}else ge||Rt(),ge.consequent.push(ht());return ge&&he(ge,"SwitchCase"),be(),de.pop(),he($,"SwitchStatement");case pt:return be(),lr.test(s.slice(xe,P))&&fe(xe,"Illegal newline after throw"),$.argument=Ve(),Mt(),he($,"ThrowStatement");case Ce:if(be(),$.block=ir(),$.handler=null,Q===lt){var Yt=ze();be(),Ae(bt),Yt.param=xt(),Fe&&cr(Yt.param.name)&&fe(Yt.param.start,"Binding "+Yt.param.name+" in strict mode"),Ae(vt),Yt.body=ir(),$.handler=he(Yt,"CatchClause")}return $.finalizer=we(ye)?ir():null,!$.handler&&!$.finalizer&&fe($.start,"Missing catch or finally clause"),he($,"TryStatement");case Ie:return be(),qr($),Mt(),he($,"VariableDeclaration");case nt:return be(),$.test=ar(),de.push(Rr),$.body=ht(),de.pop(),he($,"WhileStatement");case Jt:return Fe&&fe(P,"'with' in strict mode"),be(),$.object=ar(),$.body=ht(),he($,"WithStatement");case er:return ir();case _t:return be(),he($,"EmptyStatement");default:var Ar=ne,yr=Ve();if(M===Xe&&yr.type==="Identifier"&&we(tr)){for(var Y=0;Y<de.length;++Y)de[Y].name===Ar&&fe(yr.start,"Label '"+Ar+"' is already declared");var kn=Q.isLoop?"loop":Q===Be?"switch":null;return de.push({name:Ar,kind:kn}),$.body=ht(),de.pop(),$.label=yr,he($,"LabeledStatement")}else return $.expression=yr,Mt(),he($,"ExpressionStatement")}}function ar(){Ae(bt);var M=Ve();return Ae(vt),M}function ir(M){var $=ze(),H=!0,Y=!1,Ee;for($.body=[],Ae(er);!we(Bt);){var pe=ht();$.body.push(pe),H&&M&&_r(pe)&&(Ee=Y,br(Y=!0)),H=!1}return Y&&!Ee&&br(!1),he($,"BlockStatement")}function Sr(M,$){return M.init=$,Ae(_t),M.test=Q===_t?null:Ve(),Ae(_t),M.update=Q===vt?null:Ve(),Ae(vt),M.body=ht(),de.pop(),he(M,"ForStatement")}function Jr(M,$){return M.left=$,M.right=Ve(),Ae(vt),M.body=ht(),de.pop(),he(M,"ForInStatement")}function qr(M,$){for(M.declarations=[],M.kind="var";;){var H=ze();if(H.id=xt(),Fe&&cr(H.id.name)&&fe(H.id.start,"Binding "+H.id.name+" in strict mode"),H.init=we(Mr)?Ve(!0,$):null,M.declarations.push(he(H,"VariableDeclarator")),!we(wt))break}}function Ve(M,$){var H=Tr($);if(!M&&Q===wt){var Y=Nt(H);for(Y.expressions=[H];we(wt);)Y.expressions.push(Tr($));return he(Y,"SequenceExpression")}return H}function Tr(M){var $=xn(M);if(Q.isAssign){var H=Nt($);return H.operator=ne,H.left=$,be(),H.right=Tr(M),Er($),he(H,"AssignmentExpression")}return $}function xn(M){var $=Cn(M);if(we(kr)){var H=Nt($);return H.test=$,H.consequent=Ve(!0),Ae(tr),H.alternate=Ve(!0,M),he(H,"ConditionalExpression")}return $}function Cn(M){return wr(Or(),-1,M)}function wr(M,$,H){var Y=Q.binop;if(Y!==null&&(!H||Q!==Ft)&&Y>$){var Ee=Nt(M);Ee.left=M,Ee.operator=ne;var pe=Q;be(),Ee.right=wr(Or(),Y,H);var ge=he(Ee,pe===Lr||pe===Fr?"LogicalExpression":"BinaryExpression");return wr(ge,$,H)}return M}function Or(){if(Q.prefix){var M=ze(),$=Q.isUpdate;return M.operator=ne,M.prefix=!0,ce=!0,be(),M.argument=Or(),$?Er(M.argument):Fe&&M.operator==="delete"&&M.argument.type==="Identifier"&&fe(M.start,"Deleting local variable in strict mode"),he(M,$?"UpdateExpression":"UnaryExpression")}for(var H=An();Q.postfix&&!hr();){var M=Nt(H);M.operator=ne,M.prefix=!1,M.argument=H,Er(H),be(),H=he(M,"UpdateExpression")}return H}function An(){return or(Nr())}function or(M,$){var H;return we(Ir)?(H=Nt(M),H.object=M,H.property=xt(!0),H.computed=!1,or(he(H,"MemberExpression"),$)):we(vr)?(H=Nt(M),H.object=M,H.property=Ve(),H.computed=!0,Ae(gr),or(he(H,"MemberExpression"),$)):!$&&we(bt)?(H=Nt(M),H.callee=M,H.arguments=Cr(vt,!1),or(he(H,"CallExpression"),$)):M}function Nr(){var M;switch(Q){case Kt:return M=ze(),be(),he(M,"ThisExpression");case Xe:return xt();case je:case yt:case St:return M=ze(),M.value=ne,M.raw=s.slice(P,W),be(),he(M,"Literal");case Ke:case ct:case Lt:return M=ze(),M.value=Q.atomValue,M.raw=Q.keyword,be(),he(M,"Literal");case bt:var $=X,H=P;be();var Y=Ve();return Y.start=H,Y.end=W,d.locations&&(Y.loc.start=$,Y.loc.end=ee),d.ranges&&(Y.range=[H,W]),Ae(vt),Y;case vr:return M=ze(),be(),M.elements=Cr(gr,!0,!0),he(M,"ArrayExpression");case er:return In();case ve:return M=ze(),be(),xr(M,!1);case qt:return Pn()}Rt()}function Pn(){var M=ze();return be(),M.callee=or(Nr(),!0),M.arguments=we(bt)?Cr(vt,!1):Ct,he(M,"NewExpression")}function In(){var M=ze(),$=!0,H=!1;for(M.properties=[],be();!we(Bt);){if($)$=!1;else if(Ae(wt),d.allowTrailingCommas&&we(Bt))break;var Y={key:Kr()},Ee=!1,pe;if(we(tr)?(Y.value=Ve(!0),pe=Y.kind="init"):Y.key.type==="Identifier"&&(Y.key.name==="get"||Y.key.name==="set")?(Ee=H=!0,pe=Y.kind=Y.key.name,Y.key=Kr(),Q!==bt&&Rt(),Y.value=xr(ze(),!1)):Rt(),Y.key.type==="Identifier"&&(Fe||H))for(var ge=0;ge<M.properties.length;++ge){var Te=M.properties[ge];if(Te.key.name===Y.key.name){var sr=pe===Te.kind||Ee&&Te.kind==="init"||pe==="init"&&(Te.kind==="get"||Te.kind==="set");sr&&!Fe&&pe==="init"&&Te.kind==="init"&&(sr=!1),sr&&fe(Y.key.start,"Redefinition of property")}}M.properties.push(Y)}return he(M,"ObjectExpression")}function Kr(){return Q===je||Q===yt?Nr():xt(!0)}function xr(M,$){Q===Xe?M.id=xt():$?Rt():M.id=null,M.params=[];var H=!0;for(Ae(bt);!we(vt);)H?H=!1:Ae(wt),M.params.push(xt());var Y=Me,Ee=de;if(Me=!0,de=[],M.body=ir(!0),Me=Y,de=Ee,Fe||M.body.body.length&&_r(M.body.body[0]))for(var pe=M.id?-1:0;pe<M.params.length;++pe){var ge=pe<0?M.id:M.params[pe];if((jr(ge.name)||cr(ge.name))&&fe(ge.start,"Defining '"+ge.name+"' in strict mode"),pe>=0)for(var Te=0;Te<pe;++Te)ge.name===M.params[Te].name&&fe(ge.start,"Argument name clash in strict mode")}return he(M,$?"FunctionDeclaration":"FunctionExpression")}function Cr(M,$,H){for(var Y=[],Ee=!0;!we(M);){if(Ee)Ee=!1;else if(Ae(wt),$&&d.allowTrailingCommas&&we(M))break;Y.push(H&&Q===wt?null:Ve(!0))}return Y}function xt(M){var $=ze();return M&&d.forbidReserved==="everywhere"&&(M=!1),Q===Xe?(!M&&(d.forbidReserved&&un(ne)||Fe&&jr(ne))&&s.slice(P,W).indexOf("\\")===-1&&fe(P,"The keyword '"+ne+"' is reserved"),$.name=ne):M&&Q.keyword?$.name=Q.keyword:Rt(),ce=!1,be(),he($,"Identifier")}})},vm:j=>{j.exports=requireVmBrowserify()}},g={};function T(j){var B=g[j];if(B!==void 0)return B.exports;var G=g[j]={exports:{}};return E[j].call(G.exports,G,G.exports,T),G.exports}T.d=(j,B)=>{for(var G in B)T.o(B,G)&&!T.o(j,G)&&Object.defineProperty(j,G,{enumerable:!0,get:B[G]})},T.o=(j,B)=>Object.prototype.hasOwnProperty.call(j,B),T.r=j=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(j,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(j,"__esModule",{value:!0})};var C={};return(()=>{T.r(C),T.d(C,{default:()=>G});const j=T("./original-repo/acorn.js");globalThis.acorn=j;const{Interpreter:B}=T("./original-repo/interpreter.js"),G=B})(),C=C.default,C})())})(jsInterpreter);var jsInterpreterExports=jsInterpreter.exports;const oo=getDefaultExportFromCjs(jsInterpreterExports);var Z=reactExports.createContext({registerProblem:noop$1});Z.displayName="ContestContext";function Oe({children:a}){let{student:o,setStudent:E,terminated:g}=v(),[T,C]=reactExports.useState({}),j=reactExports.useCallback((s,i)=>{C(y=>({...y,[s]:i}))},[]),[B,G]=reactExports.useState(!1),d=reactExports.useRef(null);return reactExports.useEffect(()=>{var s;g!==B&&(G(g),B||((s=d.current)==null||s.showModal()))},[g,B]),o.startedAt?c.createElement(Z.Provider,{value:{registerProblem:j}},c.createElement("div",{className:"break-before-page"},c.createElement("main",{className:"gap-x-10 [column-rule:solid_1px_var(--tw-prose-hr)] print:columns-2"},a)),c.createElement(Et,{ref:d,schema:T})):c.createElement("div",{className:"flex h-[50vh] justify-center"},c.createElement("div",{className:"flex flex-col justify-center"},c.createElement("button",{className:"btn btn-success btn-lg",onClick:()=>{E({...o,startedAt:new Date,variant:V()})}},"Inizia")))}var Et=reactExports.forwardRef(function({schema:a},o){let{student:E}=v(),g=Object.keys(a);g.sort((j,B)=>j.localeCompare(B,void 0,{numeric:!0}));let T=reactExports.useMemo(()=>{let j={id:E.variant,contestId:E.contestId,schema:a};return Se(E,{[j.id]:j})},[a,E]),C=sumBy(Object.values(a),"pointsCorrect");return c.createElement(jt,{ref:o,title:"Prova terminata"},c.createElement("p",null,"La prova è terminata."),T!==void 0&&c.createElement(c.Fragment,null,c.createElement("p",null,"Hai ottenuto un punteggio di ",c.createElement("b",null,T)," su ",c.createElement("b",null,C),"."),c.createElement("div",{className:"w-full"},c.createElement("table",{className:"table-fixed prose-td:truncate"},c.createElement("thead",null,c.createElement("tr",null,c.createElement("th",{scope:"col"},"Domanda"),c.createElement("th",{scope:"col"},"Risposta"),c.createElement("th",{scope:"col"},"Soluzione"),c.createElement("th",{scope:"col"},"Punteggio"))),c.createElement("tbody",null,g.map(j=>{var d,s;let B=(s=(d=E.answers)==null?void 0:d[j])==null?void 0:s.trim(),G=a[j];return c.createElement("tr",{key:j},c.createElement("td",null,j),c.createElement("td",null,B??"-"),c.createElement("td",null,G.solution),c.createElement("td",null,dt(G,B)))}))))))});function F(){return reactExports.useContext(Z)}var O=reactExports.createContext({id:void 0,points:[0,0,0],setCorrect:noop$1});O.displayName="ProblemContext";function Le({id:a,points:o,statement:E}){let{student:g}=v(),[T,C]=reactExports.useState(1),[j,B]=reactExports.useState(()=>g.variant?A$1(`r#problem#${g.variant}#${a}`):0),G=reactExports.useCallback(()=>j,[j]),d=reactExports.useCallback(i=>{i&&i!==T&&defer(()=>C(i))},[T]),s=reactExports.useMemo(()=>reactExports.memo(E),[E]);return c.createElement(O.Provider,{value:{id:a,points:o,setCorrect:noop$1}},c.createElement("div",{className:"relative"},!1,c.createElement(s,{variant:G,setVariantCount:d})),c.createElement("hr",{className:"last:hidden"}))}function $e({subId:a,children:o}){let{id:E,points:g}=reactExports.useContext(O),T=a?`${E}.${a}`:`${E}`,{registerProblem:C}=F(),[j,B]=reactExports.useState();return reactExports.useEffect(()=>{C(T,{type:"text",pointsCorrect:g[0],pointsBlank:g[1],pointsWrong:g[2],solution:j})},[C,T,j,g]),c.createElement(O.Provider,{value:{id:T,points:g,setCorrect:B}},c.createElement("div",{className:"break-inside-avoid"},c.createElement("h3",null,"Domanda ",T),o))}function A(){return reactExports.useContext(O)}var K=reactExports.createContext({id:""});K.displayName="AnswerContext";function Ue({children:a}){let{student:o}=v(),{id:E}=A(),g=reactExports.useMemo(()=>{let T=reactExports.Children.toArray(a);return o.variant&&new x(`r#answers#${o.variant}#${E}`).shuffle(T),T},[o.variant,E,a]);return c.createElement("form",{className:D$2("answer-group my-5 flex-wrap rounded-xl bg-base-200 p-3","prose-p:my-1 print:flex print:border print:border-[var(--tw-prose-hr)] print:p-1")},g.map((T,C)=>c.createElement(K.Provider,{key:C,value:{id:String.fromCodePoint(65+C)}},T)))}function He({correct:a,children:o}){var i;let{id:E}=reactExports.useContext(K),{id:g,setCorrect:T}=A(),{student:C,setStudent:j,terminated:B}=v(),G=(i=C.answers)==null?void 0:i[g],d=async y=>{await j({...C,answers:{...C.answers,[g]:y}})},s=reactExports.useId();return reactExports.useEffect(()=>{a===!0&&T(E)},[a,T,E]),c.createElement("div",{className:D$2("answer relative my-1 flex rounded-lg pl-2 pr-1 hover:bg-base-300 print:mr-4",B&&{"border-2 border-success":a===!0,"border-2 border-error":G===E&&a===!1})},c.createElement("input",{id:s,checked:G===E,className:D$2("radio radio-sm my-auto mr-4 bg-base-100 [print-color-adjust:exact] disabled:opacity-90 print:mr-2",B&&G===E&&{"radio-success":a===!0,"radio-error":a===!1}),onChange:y=>d(y.target.checked?E:void 0),type:"radio",disabled:B}),c.createElement("div",{className:"my-auto w-6 screen:hidden"},E,")"),c.createElement("label",{htmlFor:s,className:"grow"},o),c.createElement("div",{className:"absolute right-0 top-0 mr-1 flex h-full justify-center print:hidden"},c.createElement("button",{className:D$2("btn btn-square btn-ghost btn-sm my-auto",(G!==E||B)&&"hidden"),type:"button",onClick:()=>d(void 0)},c.createElement(Trash2,{size:20}))))}function We({correct:a,type:o}){var d;let{id:E,setCorrect:g}=A(),{student:T,setStudent:C,terminated:j}=v(),B=(d=T.answers)==null?void 0:d[E],G=async s=>{await C({...T,answers:{...T.answers,[E]:s}})};return reactExports.useEffect(()=>{a!==void 0&&g(a)},[a,g]),c.createElement("div",{className:"px-2"},c.createElement("input",{className:D$2("input input-bordered w-72 max-w-full border-2 print:placeholder:text-transparent",j&&a!==void 0&&{"disabled:input-success":a===B,"disabled:input-error":a!==B}),onChange:s=>G(s.target.value||void 0),onWheel:s=>s.currentTarget.blur(),placeholder:"Inserisci la risposta",type:o,value:B??"",disabled:j,"aria-label":"Risposta"}))}function Ge({children:a}){let{terminated:o}=v();if(o)return c.createElement("div",{className:"my-5 rounded-xl bg-base-200 print:hidden"},c.createElement("div",{className:"collapse"},c.createElement("input",{type:"checkbox"}),c.createElement("div",{className:"collapse-title text-xl font-medium"},"Mostra soluzione"),c.createElement("div",{className:"collapse-content"},a)))}var Je=z.enum(["Number","String","Array","Boolean"]),Ht=z.object({type:z.literal("input_value"),name:z.string(),check:Je}),Qe=z.object({type:z.string(),message0:z.string(),args0:z.array(Ht).optional(),colour:z.union([z.number(),z.string()]),tooltip:z.string(),helpUrl:z.string(),maxInstances:z.number().optional()}),Wt=Qe.extend({nextStatement:z.literal(null).optional(),previousStatement:z.literal(null).optional(),js:z.string()}),Gt=Qe.extend({output:Je,js:z.tuple([z.string(),z.string().startsWith("ORDER_")])}),qe=z.union([Wt,Gt]),Xt=reactExports.lazy(()=>__vitePreload(()=>import("./code-highlight-4YYAT6IQ-DAFz8F3y.js"),__vite__mapDeps([0,1,2])));function D(a){return c.createElement(reactExports.Suspense,{fallback:c.createElement(Zt,{...a})},c.createElement(Xt,{...a}))}function Zt({inline:a,code:o,noLineNumbers:E}){return a?c.createElement("code",null,o):c.createElement("pre",null,c.createElement("code",null,o.split(`
`).map((g,T)=>c.createElement("span",{key:T},c.createElement("span",{className:D$2("mr-6 inline-block w-7 select-none text-right",E&&"hidden")},T+1),c.createElement("span",null,g)))))}var Ze={kind:"categoryToolbox",contents:[{kind:"category",name:"Variabili",categorystyle:"variable_category",custom:"VARIABLE"},{kind:"category",name:"Matematica",categorystyle:"math_category",contents:[{kind:"block",type:"math_number",fields:{NUM:123}},{kind:"block",type:"math_arithmetic",fields:{OP:"ADD"}},{kind:"block",type:"math_on_list",extraState:'<mutation op="SUM"></mutation>',fields:{OP:"SUM"}},{kind:"block",type:"math_modulo"},{kind:"block",type:"math_number_property",extraState:'<mutation divisor_input="false"></mutation>',fields:{PROPERTY:"EVEN"}}]},{kind:"category",name:"Logica",categorystyle:"logic_category",contents:[{kind:"block",type:"logic_compare"},{kind:"block",type:"logic_operation"},{kind:"block",type:"logic_negate"},{kind:"block",type:"logic_boolean"},{kind:"block",type:"controls_if"},{kind:"block",type:"controls_if",extraState:{hasElse:"true"}}]},{kind:"category",name:"Cicli",categorystyle:"loop_category",contents:[{kind:"block",type:"controls_repeat_ext",inputs:{TIMES:{block:{type:"math_number",fields:{NUM:10}}}}},{kind:"block",type:"controls_whileUntil"},{kind:"block",type:"controls_for",fields:{VAR:"i"},inputs:{FROM:{block:{type:"math_number",fields:{NUM:1}}},TO:{block:{type:"math_number",fields:{NUM:10}}},BY:{block:{type:"math_number",fields:{NUM:1}}}}},{kind:"block",type:"controls_forEach"}]},{kind:"category",name:"Liste",categorystyle:"list_category",contents:[{kind:"block",type:"lists_create_empty"},{kind:"block",type:"lists_repeat",inputs:{NUM:{block:{type:"math_number",fields:{NUM:5}}}}},{kind:"block",type:"lists_length"},{kind:"block",type:"lists_isEmpty"},{kind:"block",type:"lists_getIndex",fields:{MODE:"GET",WHERE:"FROM_START"}},{kind:"block",type:"lists_setIndex",fields:{MODE:"SET",WHERE:"FROM_START"}}]}]},Ye={blocks:{languageVersion:0,blocks:[{type:"start",id:"y=zq)Uya2A/{vyOtN[i6",x:30,y:30}]},variables:[]},no=1e3,_=class extends oo{constructor(a,o){super(a,(E,g)=>{E.setProperty(g,"highlightBlock",E.createNativeFunction(T=>{this.highlightedBlock=T,this.stepFinished=!0})),E.setProperty(g,"exit",E.createNativeFunction((T,C)=>{this.running=!1,this.correct=T,this.msg=C})),E.setProperty(g,"hiddenState",E.nativeToPseudo(o)),E.setProperty(g,"loopTrap",no)}),this.stepFinished=!1,this.highlightedBlock="",this.running=!0,this.correct=!1,this.step=()=>{if(!this.running)return!1;do{this.stepFinished=!1;try{this.running=super.step()&&this.running}catch{this.running=!1}}while(this.running&&!this.stepFinished);return this.running}}};function te(a,o){let[E,g]=reactExports.useState(),[T,C]=reactExports.useState({highlightedBlock:"",running:!0,correct:!1,msg:"",globalScope:{}}),j=reactExports.useCallback(()=>{let B=new _(a,o);g(B),C({highlightedBlock:(B==null?void 0:B.highlightedBlock)??"",running:(B==null?void 0:B.running)??!1,correct:(B==null?void 0:B.correct)??!1,msg:(B==null?void 0:B.msg)??"",globalScope:(B==null?void 0:B.pseudoToNative(B.globalScope.object))??{}})},[a,o]);return reactExports.useEffect(()=>{j()},[j,a,o]),{step:()=>{E==null||E.step(),C({highlightedBlock:(E==null?void 0:E.highlightedBlock)??"",running:(E==null?void 0:E.running)??!1,correct:(E==null?void 0:E.correct)??!1,msg:(E==null?void 0:E.msg)??"",globalScope:(E==null?void 0:E.pseudoToNative(E.globalScope.object))??{}})},reset:j,...T}}function oe(a,o){return reactExports.useEffect(()=>{return window.addEventListener("message",E),()=>window.removeEventListener("message",E);function E(g){g.source===a&&o(g.data)}},[a,o]),reactExports.useCallback(E=>a==null?void 0:a.postMessage(E,"*"),[a])}function re({toolbox:a,initialBlocks:o,testcases:E,debug:g,customBlocks:T,Visualizer:C}){var ft;let{student:j,setStudent:B,terminated:G}=v(),{registerProblem:d}=F(),{id:s,points:i}=A();reactExports.useEffect(()=>{for(let ye=0;ye<E.length;ye++)d(`${s}.${ye+1}`,{type:"text",pointsCorrect:i[0],pointsBlank:i[1],pointsWrong:i[2],solution:"✅"})},[d,s,E,i]);let y=((ft=j.extraData)==null?void 0:ft[`blockly-${s}`])??o??Ye,R=async ye=>{await B({...j,extraData:{...j.extraData,[`blockly-${s}`]:ye}})},[S,w]=reactExports.useState(null),[b,P]=reactExports.useState(!1),[W,X]=reactExports.useState(!0),[ee,Q]=reactExports.useState(!1),[ne,ce]=reactExports.useState({}),[ue,_e]=reactExports.useState(""),[Pe,xe]=reactExports.useState(0),[tt,Me]=reactExports.useState(()=>range(E.length).map(ye=>({correct:!1,index:ye}))),{step:de,reset:Fe,running:fe,highlightedBlock:Ct,globalScope:je,correct:St,msg:yt}=te(ue,E[Pe]),Xe=reactExports.useMemo(()=>Object.fromEntries(Object.entries(ne).map(([ye,me])=>[me,je[ye]])),[ne,je]),st=reactExports.useMemo(()=>mt(qe.array(),T,{prefix:"Invalid custom block definition"}),[T]),ut=oe(S==null?void 0:S.contentWindow,ye=>{switch(ye.cmd){case"init":{ut({cmd:"init",toolbox:a??Ze,initialBlocks:y,debug:g,customBlocks:st,readonly:G});break}case"ready":{P(!0);break}case"blocks":{R(ye.blocks),g!=null&&g.logBlocks&&console.info(JSON.stringify(ye.blocks,void 0,2));break}case"code":{_e(ye.code),Q(!1),X(!0),g!=null&&g.logJs&&console.info(ye.code);break}case"variables":{ce(ye.variablesMapping),g!=null&&g.logVariables&&console.info(ye.variablesMapping);break}}});reactExports.useEffect(()=>{ut({cmd:"highlight",highlightedBlock:Ct})},[ut,Ct]),reactExports.useEffect(()=>{fe||Q(!1)},[fe]);let gt=reactExports.useRef(G);reactExports.useEffect(()=>{var ye;gt.current!==G&&(gt.current=G,P(!1),(ye=S==null?void 0:S.contentWindow)==null||ye.location.reload())},[G,S==null?void 0:S.contentWindow]);let[lt,At]=reactExports.useState(3);reactExports.useEffect(()=>{let ye=[5e3,2e3,1e3,500,200,100,10];if(ee){let me=setInterval(de,ye[lt]);return()=>clearInterval(me)}},[de,lt,ee]);let Pt=async()=>{let ye=await Promise.all(E.map(async(ve,Ne)=>{let Re=new _(ue,ve);for(let Be=0;Re.running;Be++)Re.step(),Be%64===0&&await new Promise(pt=>setTimeout(pt,5));return{...Re,index:Ne}}));Me(ye),X(!1);let me={...j.answers};for(let ve=0;ve<E.length;ve++)me[`${s}.${ve+1}`]=ye[ve].correct?"✅":"❌";await B({...j,answers:me})},[Ut,It]=reactExports.useState(!1);return reactExports.useEffect(()=>It(!1),[yt]),c.createElement("div",{className:D$2("not-prose relative inset-y-0 left-1/2 w-screen -translate-x-1/2 p-4 pt-8","flex flex-col-reverse items-start justify-between gap-6 overflow-x-hidden *:mx-3 lg:flex-row lg:gap-0")},c.createElement("div",{className:"flex h-full max-h-[min(720px,90vh)] basis-[min(auto,50%)] flex-col gap-6 self-stretch overflow-x-hidden"},c.createElement("div",{className:"join join-horizontal"},tt.map(({index:ye,correct:me,msg:ve})=>c.createElement("button",{key:ye,onClick:()=>{xe(ye),Q(!1)},className:D$2("btn join-item z-10 rounded-lg",!W&&"tooltip",ye===Pe&&"btn-info"),"data-tip":ve},c.createElement("div",{className:"flex items-center gap-3"},c.createElement("p",null,"Livello ",ye+1),W?c.createElement(HelpCircle,{size:32}):me?c.createElement(CheckCircle2,{size:32,className:"fill-success stroke-success-content"}):c.createElement(XCircle,{size:32,className:"fill-error stroke-error-content"}))))),c.createElement("div",{className:"relative flex flex-col overflow-hidden shadow-xl"},c.createElement("div",{className:"overflow-auto rounded-xl border-2 border-[#c6c6c6] bg-white"},C&&c.createElement(C,{variables:{blocklyVariables:Xe,hiddenState:je==null?void 0:je.hiddenState,msg:yt}}),yt&&!Ut&&c.createElement("div",{className:"absolute inset-x-0 bottom-0 z-50 p-4"},c.createElement("div",{role:"alert",className:D$2("alert",St?"alert-success":"alert-error")},St?c.createElement(CheckCircle,null):c.createElement(AlertTriangle,null),c.createElement("span",null,yt),c.createElement("button",{onClick:()=>It(!0),"aria-label":"Nascondi messaggio"},c.createElement(MessageSquareOff,null))))))),c.createElement("div",{className:"flex min-h-[min(720px,90vh)] flex-[1_0_50%] flex-col-reverse gap-6 self-stretch lg:flex-col"},c.createElement("div",{className:"flex gap-6"},c.createElement("div",{className:"join join-horizontal"},c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui/pausa"},c.createElement("button",{className:"btn btn-info rounded-[inherit]",disabled:!fe||W,onClick:()=>Q(!ee),"aria-label":"Esugui un blocco"},ee?c.createElement(Pause,{className:"size-6"}):c.createElement(Play,{className:"size-6"}))),c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui un blocco"},c.createElement("button",{className:"btn btn-info rounded-[inherit]",disabled:!fe||W,onClick:de,"aria-label":"Esugui un blocco"},c.createElement(SkipForward,{className:"size-6"}))),c.createElement("div",{className:"join-item tooltip","data-tip":"Esegui da capo"},c.createElement("button",{className:"btn btn-info rounded-[inherit]","aria-label":"Esegui da capo",disabled:W,onClick:()=>{Fe(),Q(!1)}},c.createElement(RotateCcw,{className:"size-6"})))),c.createElement("div",{className:"tooltip","data-tip":"Correggi la soluzione"},c.createElement("button",{className:"btn btn-success","aria-label":"Correggi la soluzione",disabled:!W||!b,onClick:Pt},c.createElement(Send,{className:"size-6"}))),c.createElement("div",null,c.createElement("input",{className:"range",type:"range",min:"0",max:"6",value:lt,onChange:ye=>At(+ye.target.value),"aria-label":"Velocità di esecuzione"}),c.createElement("div",{className:"flex w-full justify-between px-2 text-xs"},c.createElement("span",null,"Lento"),c.createElement("span",null,"Veloce"))),!1),c.createElement(So,{ref:w,ready:b})))}var So=reactExports.forwardRef(function({ready:a},o){return c.createElement("div",{className:"relative flex grow flex-col overflow-hidden rounded-xl border-2 border-[#c6c6c6]"},c.createElement("iframe",{ref:o,src:new URL("iframe-CLrgeZ7J.html",import.meta.url).href,className:"grow",title:"Area di lavoro di Blockly"}),!a&&c.createElement("div",{className:"absolute inset-0 z-50 bg-white text-slate-700"},c.createElement(Tt,null)))});function se({src:a,alt:o,title:E}){return c.createElement("img",{className:"max-h-[90vh] min-w-0 p-4 first:rounded-l-xl last:rounded-r-xl dark:bg-white print:m-0 print:max-h-[60vh] print:max-w-full",src:a.src,width:a.width,height:a.height,alt:o,title:E,style:{maxWidth:`min(100%, calc(90vh * ${a.width} / ${a.height}))`}})}function ie({display:a,children:o}){let E=reactExports.useRef(null);return reactExports.useEffect(()=>{E.current&&katex.render(o,E.current,{displayMode:a})},[E,o,a]),c.createElement("span",{ref:E})}function et({children:a}){return a}var U={Answer:He,AnswerGroup:Ue,Blockly:re,Code:D,Contest:Oe,Explanation:Ge,Image:se,MathExpr:reactExports.memo(ie),OpenAnswer:We,Problem:Le,Section:et,SubProblem:$e};function ae({children:a}){return c.createElement(MDXProvider,{components:U},c.createElement("div",{className:D$2("prose prose-lg mx-auto my-5 px-4 print:prose-sm screen:pb-10 lg:max-w-4xl print:max-w-full print:text-xs","prose-table:text-center print:prose-headings:mt-2 print:prose-hr:my-4","prose-headings:break-after-avoid prose-p:break-inside-avoid prose-ul:break-before-avoid prose-ul:break-inside-avoid")},a))}function ot({children:a}){var i,y;let o=reactExports.useRef(null),{contest:E,student:g,reset:T,participation:C,terminated:j,logout:B}=v(),G=(i=g.personalInformation)==null?void 0:i.name,d=(y=g.personalInformation)==null?void 0:y.surname,s=Math.round(sumBy(Object.values(g.answers??{}),R=>+!!R)/E.problemIds.length*100);return reactExports.useEffect(()=>{},[]),c.createElement("div",{className:"h-dvh screen:overflow-y-scroll"},c.createElement("div",{className:"navbar sticky top-0 z-20 h-16 justify-between bg-base-300/85 px-3 text-base-content backdrop-blur print:hidden"},c.createElement("div",{className:"dropdown max-w-full flex-none"},c.createElement("div",{tabIndex:0,role:"button",className:"btn btn-ghost no-animation w-full flex-nowrap"},c.createElement(User,{className:"flex-none"}),c.createElement("div",{className:"truncate uppercase"},G," ",d)),B&&c.createElement("ul",{className:"menu dropdown-content menu-sm z-30 mt-3 w-52 rounded-box bg-base-300 p-2 text-base-content shadow-lg"},c.createElement("li",null,c.createElement("button",{onClick:B},"Cambia utente")))),c.createElement("div",{className:"h-full gap-3"},c.createElement(L,{className:"hidden min-w-[5rem] sm:block",percentage:s},s,"%"),c.createElement("div",{className:"flex-none px-3"},j||!C.startingTime||!E.duration?c.createElement("span",{className:"font-mono"},"00:00"):c.createElement(Vt,{startTime:C.startingTime,duration:E.duration})),c.createElement("div",{className:"h-full flex-none py-0.5"},j&&T?c.createElement("button",{className:"btn btn-warning btn-sm h-full",onClick:T},"Ricomincia"):c.createElement("button",{className:"btn btn-success btn-sm h-full",disabled:j||!C.startingTime,onClick:()=>{var R;return(R=o.current)==null?void 0:R.showModal()}},"Termina")))),c.createElement(zo,{ref:o}),c.createElement(ErrorBoundary,{FallbackComponent:Zt$1},c.createElement(ae,null,c.createElement("h1",{className:"text-pretty"},E.name),a)))}var zo=reactExports.forwardRef(function(a,o){let{submit:E}=v();return c.createElement(jt,{ref:o,title:"Confermi di voler terminare?"},c.createElement("p",null,"Confermando non potrai più modificare le tue risposte."),c.createElement("div",{className:"mt-3 flex flex-row justify-center gap-5"},c.createElement("button",{className:"btn btn-info"},"Annulla"),c.createElement("button",{className:"btn btn-error",onClick:()=>E()},"Conferma")))}),le=reactExports.createContext({});le.displayName="StudentContext";function I({children:a,...o}){return c.createElement(le.Provider,{value:{...o}},c.createElement(ot,null,a))}function v(){return reactExports.useContext(le)}function Qo({contestName:a,duration:o,questionCount:E,children:g}){let[T,C]=rt("submit",!1),[j,B]=rt("student",{id:"",personalInformation:{name:"Utente",surname:"anonimo"},answers:{},variant:"0"}),G=reactExports.useMemo(()=>j.startedAt&&addMinutes(j.startedAt,o),[j.startedAt,o]),d=Ot(G),s={id:"",name:a,problemIds:range(E??0).map(R=>R.toString()),duration:o,personalInformation:[],hasVariants:!0,hasOnline:!0,hasPdf:!0,allowRestart:!0,statementVersion:1},i={id:"",schoolId:"",contestId:"",name:"",teacher:"",startingTime:j.startedAt,finalized:!1},y=reactExports.useCallback(()=>{C(!1),B(R=>({...R,answers:{},extraData:{},startedAt:void 0}))},[B,C]);return c.createElement(I,{contest:s,participation:i,student:j,setStudent:async R=>B(R),submit:()=>C(!0),reset:y,terminated:d||T},g)}function rt(a,o,E){let g=`${window.location.pathname}#${a}`,T=localStorage.getItem(g),[C,j]=reactExports.useState(T?(E??JSON.parse)(T):o),B=reactExports.useCallback(G=>{j(d=>{let s=isFunction$1(G)?G(d):G;return s===void 0?localStorage.removeItem(g):localStorage.setItem(g,JSON.stringify(s)),s})},[g]);return[C,B]}const OlinfoAuth=({children:a,...o})=>jsxRuntimeExports.jsx(Qo,{...o,children:jsxRuntimeExports.jsx(OlinfoWrapper,{children:a})});function OlinfoWrapper({children:a}){const{student:o,setStudent:E}=v(),[g,T]=reactExports.useState();return reactExports.useEffect(()=>{getUser().then(T).catch(C=>console.log(`Error: failed to get user: ${C.message}`))},[]),reactExports.useEffect(()=>{const C=o.personalInformation;g&&(g.name!==C.name||g.surname!==C.surname)&&E({...o,personalInformation:{...C,...g}})},[o,g]),a}async function getUser(){const o=cookie.parse(window.document.cookie).training_token;if(!o)throw new Error("Not logged in");const g=jwtDecode(o).username,C=await(await fetch("https://training.olinfo.it/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:"get",username:g})})).json();return{name:C.first_name,surname:C.last_name}}export{D$2 as D,OlinfoAuth as O,range as r,useMDXComponents as u};
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/code-highlight-4YYAT6IQ-DAFz8F3y.js","assets/react-dom-DWilhIVE.js","assets/commonjs-helper-3Jsk8tIi.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
//# sourceMappingURL=olinfo-auth-BN43vV69.js.map
