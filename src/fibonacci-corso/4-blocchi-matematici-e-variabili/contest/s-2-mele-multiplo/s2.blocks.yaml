- type: start
  message0: inizia qui
  nextStatement: null
  colour: 20
  tooltip: L'esecuzione inizia da qui
  helpUrl: ""
  maxInstances: 1
  js: ""

- type: N
  message0: N
  output: Number
  colour: 20
  tooltip: numero di alberi di mele
  helpUrl: ""
  js: state.N

- type: mele prossimo albero
  message0: mele prossimo albero
  output: Number
  colour: 20
  tooltip: numero di mele nell'albero di fronte a Tip-Tap
  helpUrl: ""
  js: |
    state.pos == state.N ? exit(false, "non ci sono alberi di fronte a Tip-Tap") : state.M[state.pos]

- type: passa albero successivo
  message0: passa all'albero successivo
  previousStatement: null
  nextStatement: null
  colour: 20
  tooltip: avanza all'albero successivo
  helpUrl: ""
  js: |
    if (state.pos == state.N) exit(false, "sei già alla fine degli alberi");
    state.pos += 1;

- type: C
  message0: C
  output: Number
  colour: 20
  tooltip: numero massimo di mele che può contenere il cestino
  helpUrl: ""
  js: state.C

- type: raccogli mele
  message0: raccogli %1 mele
  args0:
    - type: input_value
      check: Integer
      min: "0"
  previousStatement: null
  nextStatement: null
  colour: 20
  tooltip: raccogli alcune mele dagli alberi, mettendole nel cestino
  helpUrl: ""
  js: |
    if (state.res == 0 && state.pos > 0) {
      state.pos = 0;
      pause();
    }
    var acc = 0;
    for (var i = 0; i <= state.pos; i++) acc += state.M[i];
    for (var i = 0; i < %1; i++) {
      if (state.res == state.tot) exit(false, "non ci sono così tante mele sugli alberi!");
      state.res += 1;
      if (state.res > state.C) exit(false, "hai raccolto troppe mele e sfondato il cestino!");
      pause();
      if (state.res === acc) {
        state.pos += 1;
        acc += state.M[state.pos];
        pause();
      }
    }

- type: termina
  message0: termina
  previousStatement: null
  colour: 20
  tooltip: riporta il cestino a casa
  helpUrl: ""
  js: |
    if (state.res < state.sol) exit(false, "potevi raccogliere più mele!");
    exit(true, "hai raccolto più mele possibile, complimenti!");
